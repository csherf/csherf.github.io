"use strict";(self.webpackChunkcsherf_website=self.webpackChunkcsherf_website||[]).push([[179],{2011:(ft,Te,L)=>{L.d(Te,{Dh:()=>pe,GT:()=>ie,cc:()=>Se,hO:()=>Ge,on:()=>z,pX:()=>ne,xv:()=>fe});var _=L(4650),ee=L(127),O=L(5813);ft=L.hmd(ft);const ae=["ngOnDestroy"],ne=(Me,Ae,Be,De={})=>new Proxy(Me,{get:(be,Pe)=>Be.runOutsideAngular(()=>{var $e;if(Me[Pe])return!(null===($e=De?.spy)||void 0===$e)&&$e.get&&De.spy.get(Pe,Me[Pe]),Me[Pe];if(ae.indexOf(Pe)>-1)return()=>{};const Fe=Ae.toPromise().then(H=>{const we=H&&H[Pe];return"function"==typeof we?we.bind(H):we&&we.then?we.then(He=>Be.run(()=>He)):Be.run(()=>we)});return new Proxy(()=>{},{get:(H,we)=>Fe[we],apply:(H,we,He)=>Fe.then(Qe=>{var ht;const Xe=Qe&&Qe(...He);return!(null===(ht=De?.spy)||void 0===ht)&&ht.apply&&De.spy.apply(Pe,He,Xe),Xe})})})}),ie=(Me,Ae)=>{Ae.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(De=>{Object.defineProperty(Me.prototype,De,Object.getOwnPropertyDescriptor(Be.prototype||Be,De))})})};class me{constructor(Ae){return Ae}}const pe=new _.OlP("angularfire2.app.options"),fe=new _.OlP("angularfire2.app.name");function z(Me,Ae,Be){const be="object"==typeof Be&&Be||{};be.name=be.name||"string"==typeof Be&&Be||"[DEFAULT]";const $e=ee.Z.apps.filter(Fe=>Fe&&Fe.name===be.name)[0]||Ae.runOutsideAngular(()=>ee.Z.initializeApp(Me,be));try{JSON.stringify(Me)!==JSON.stringify($e.options)&&G("error",`${$e.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me($e)}const G=(Me,...Ae)=>{(0,_.X6Q)()&&typeof console<"u"&&console[Me](...Ae)},Q={provide:me,useFactory:z,deps:[pe,_.R0b,[new _.FiY,fe]]};let Ge=(()=>{class Me{constructor(Be){ee.Z.registerVersion("angularfire",O.q4.full,"core"),ee.Z.registerVersion("angularfire",O.q4.full,"app-compat"),ee.Z.registerVersion("angular",_.q4F.full,Be.toString())}static initializeApp(Be,De){return{ngModule:Me,providers:[{provide:pe,useValue:Be},{provide:fe,useValue:De}]}}}return Me.\u0275fac=function(Be){return new(Be||Me)(_.LFG(_.Lbi))},Me.\u0275mod=_.oAB({type:Me}),Me.\u0275inj=_.cJS({providers:[Q]}),Me})();function Se(Me,Ae,Be,De,be){const[,Pe,$e]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===Me)||[];if(Pe)return function We(Me,Ae){try{return Me.toString()===Ae.toString()}catch{return Me===Ae}}(be,$e)||(_e("error",`${Ae} was already initialized on the ${Be} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:be,was:$e})),Pe;{const Fe=De();return globalThis.\u0275AngularfireInstanceCache.push([Me,Fe,be]),Fe}}const rt=!!ft.hot,_e=(Me,...Ae)=>{(0,_.X6Q)()&&typeof console<"u"&&console[Me](...Ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ft,Te,L)=>{L.d(Te,{q4:()=>Uu,iC:()=>Ns,fc:()=>vt,HU:()=>ia,vb:()=>za,JM:()=>Pr});var _=L(4650),ee=L(5867),O=L(5861),ae=L(9681),ne=L(2090),ie=L(4859),me=L(1877),pe=L(8766);const fe="@firebase/installations",z="0.5.12",G=1e4,Q=`w:${z}`,Ge="FIS_v2",Se="https://firebaseinstallations.googleapis.com/v1",We=36e5,Ae=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Be(D){return D instanceof ne.ZR&&D.code.includes("request-failed")}function De({projectId:D}){return`${Se}/projects/${D}/installations`}function be(D){return{token:D.token,requestStatus:2,expiresIn:Qe(D.expiresIn),creationTime:Date.now()}}function Pe(D,T){return $e.apply(this,arguments)}function $e(){return($e=(0,O.Z)(function*(D,T){const U=(yield T.json()).error;return Ae.create("request-failed",{requestName:D,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Fe({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function we(D){return He.apply(this,arguments)}function He(){return(He=(0,O.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function Qe(D){return Number(D.replace("s","000"))}function mn(){return(mn=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:x}){const U=De(D),X=Fe(D),se=T.getImmediate({optional:!0});if(se){const bt=yield se.getHeartbeatsHeader();bt&&X.append("x-firebase-client",bt)}const Ye={method:"POST",headers:X,body:JSON.stringify({fid:x,authVersion:Ge,appId:D.appId,sdkVersion:Q})},qe=yield we(()=>fetch(U,Ye));if(qe.ok){const bt=yield qe.json();return{fid:bt.fid||x,registrationStatus:2,refreshToken:bt.refreshToken,authToken:be(bt.authToken)}}throw yield Pe("Create Installation",qe)})).apply(this,arguments)}function Xn(D){return new Promise(T=>{setTimeout(T,D)})}const pi=/^[cdef][\w-]{21}$/,re="";function de(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function le(D){return function jn(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return pi.test(x)?x:re}catch{return re}}function te(D){return`${D.appName}!${D.appId}`}const je=new Map;function Ue(D,T){const x=te(D);Ut(x,T),function wt(D,T){const x=function Qt(){return!Vt&&"BroadcastChannel"in self&&(Vt=new BroadcastChannel("[Firebase] FID Change"),Vt.onmessage=D=>{Ut(D.data.key,D.data.fid)}),Vt}();x&&x.postMessage({key:D,fid:T}),function qt(){0===je.size&&Vt&&(Vt.close(),Vt=null)}()}(x,T)}function Ut(D,T){const x=je.get(D);if(x)for(const U of x)U(T)}let Vt=null;const qn="firebase-installations-database",Jn=1,wn="firebase-installations-store";let xn=null;function Gr(){return xn||(xn=(0,pe.X3)(qn,Jn,{upgrade:(D,T)=>{0===T&&D.createObjectStore(wn)}})),xn}function En(D,T){return pt.apply(this,arguments)}function pt(){return(pt=(0,O.Z)(function*(D,T){const x=te(D),X=(yield Gr()).transaction(wn,"readwrite"),se=X.objectStore(wn),Re=yield se.get(x);return yield se.put(T,x),yield X.done,(!Re||Re.fid!==T.fid)&&Ue(D,T.fid),T})).apply(this,arguments)}function gi(D){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,O.Z)(function*(D){const T=te(D),U=(yield Gr()).transaction(wn,"readwrite");yield U.objectStore(wn).delete(T),yield U.done})).apply(this,arguments)}function bn(D,T){return gr.apply(this,arguments)}function gr(){return(gr=(0,O.Z)(function*(D,T){const x=te(D),X=(yield Gr()).transaction(wn,"readwrite"),se=X.objectStore(wn),Re=yield se.get(x),Ye=T(Re);return void 0===Ye?yield se.delete(x):yield se.put(Ye,x),yield X.done,Ye&&(!Re||Re.fid!==Ye.fid)&&Ue(D,Ye.fid),Ye})).apply(this,arguments)}function ri(D){return cn.apply(this,arguments)}function cn(){return cn=(0,O.Z)(function*(D){let T;const x=yield bn(D.appConfig,U=>{const X=function dn(D){return or(D||{fid:de(),registrationStatus:0})}(U),se=function yt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ae.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function It(D,T){return mi.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Ln(D)}:{installationEntry:T}}(D,X);return T=se.registrationPromise,se.installationEntry});return x.fid===re?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}}),cn.apply(this,arguments)}function mi(){return mi=(0,O.Z)(function*(D,T){try{const x=yield function Xe(D,T){return mn.apply(this,arguments)}(D,T);return En(D.appConfig,x)}catch(x){throw Be(x)&&409===x.customData.serverCode?yield gi(D.appConfig):yield En(D.appConfig,{fid:T.fid,registrationStatus:0}),x}}),mi.apply(this,arguments)}function Ln(D){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,O.Z)(function*(D){let T=yield Qi(D.appConfig);for(;1===T.registrationStatus;)yield Xn(100),T=yield Qi(D.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:U}=yield ri(D);return U||x}return T})).apply(this,arguments)}function Qi(D){return bn(D,T=>{if(!T)throw Ae.create("installation-not-found");return or(T)})}function or(D){return function Po(D){return 1===D.registrationStatus&&D.registrationTime+G<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function zr(){return(zr=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:T},x){const U=function Gt(D,{fid:T}){return`${De(D)}/${T}/authTokens:generate`}(D,x),X=function H(D,{refreshToken:T}){const x=Fe(D);return x.append("Authorization",function ht(D){return`${Ge} ${D}`}(T)),x}(D,x),se=T.getImmediate({optional:!0});if(se){const bt=yield se.getHeartbeatsHeader();bt&&X.append("x-firebase-client",bt)}const Ye={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:Q,appId:D.appId}})},qe=yield we(()=>fetch(U,Ye));if(qe.ok)return be(yield qe.json());throw yield Pe("Generate Auth Token",qe)})).apply(this,arguments)}function Y(D){return $.apply(this,arguments)}function $(){return $=(0,O.Z)(function*(D,T=!1){let x;const U=yield bn(D.appConfig,se=>{if(!gt(se))throw Ae.create("not-registered");const Re=se.authToken;if(!T&&function hn(D){return 2===D.requestStatus&&!function nn(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+We}(D)}(Re))return se;if(1===Re.requestStatus)return x=function j(D,T){return W.apply(this,arguments)}(D,T),se;{if(!navigator.onLine)throw Ae.create("app-offline");const Ye=function fn(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}(se);return x=function xe(D,T){return ze.apply(this,arguments)}(D,Ye),Ye}});return x?yield x:U.authToken}),$.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(D,T){let x=yield q(D.appConfig);for(;1===x.authToken.requestStatus;)yield Xn(100),x=yield q(D.appConfig);const U=x.authToken;return 0===U.requestStatus?Y(D,T):U})).apply(this,arguments)}function q(D){return bn(D,T=>{if(!gt(T))throw Ae.create("not-registered");return function At(D){return 1===D.requestStatus&&D.requestTime+G<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function ze(){return ze=(0,O.Z)(function*(D,T){try{const x=yield function tn(D,T){return zr.apply(this,arguments)}(D,T),U=Object.assign(Object.assign({},T),{authToken:x});return yield En(D.appConfig,U),x}catch(x){if(!Be(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield En(D.appConfig,U)}else yield gi(D.appConfig);throw x}}),ze.apply(this,arguments)}function gt(D){return void 0!==D&&2===D.registrationStatus}function er(){return(er=(0,O.Z)(function*(D){const T=D,{installationEntry:x,registrationPromise:U}=yield ri(T);return U?U.catch(console.error):Y(T).catch(console.error),x.fid})).apply(this,arguments)}function Ds(){return Ds=(0,O.Z)(function*(D,T=!1){const x=D;return yield function du(D){return Fi.apply(this,arguments)}(x),(yield Y(x,T)).token}),Ds.apply(this,arguments)}function Fi(){return(Fi=(0,O.Z)(function*(D){const{registrationPromise:T}=yield ri(D);T&&(yield T)})).apply(this,arguments)}function Oo(D){return Ae.create("missing-app-config-values",{valueName:D})}const dd="installations",Pn=D=>{const T=D.getProvider("app").getImmediate(),x=function Cc(D){if(!D||!D.options)throw Oo("App Configuration");if(!D.name)throw Oo("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!D.options[x])throw Oo(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Dc=D=>{const T=D.getProvider("app").getImmediate(),x=(0,ae._getProvider)(T,dd).getImmediate();return{getId:()=>function Fn(D){return er.apply(this,arguments)}(x),getToken:X=>function zt(D){return Ds.apply(this,arguments)}(x,X)}};(function en(){(0,ae._registerComponent)(new ie.wA(dd,Pn,"PUBLIC")),(0,ae._registerComponent)(new ie.wA("installations-internal",Dc,"PRIVATE"))})(),(0,ae.registerVersion)(fe,z),(0,ae.registerVersion)(fe,z,"esm2017");const $n="@firebase/remote-config",_r=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xs{constructor(T,x,U,X){this.client=T,this.storage=x,this.storageCache=U,this.logger=X}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-x,X=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${X}.`),X}fetch(T){var x=this;return(0,O.Z)(function*(){const[U,X]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(X&&x.isCachedDataFresh(T.cacheMaxAgeMillis,U))return X;T.eTag=X&&X.eTag;const se=yield x.client.fetch(T),Re=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&Re.push(x.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(Re),se})()}}function vi(D=navigator){return D.languages&&D.languages[0]||D.language}class Ss{constructor(T,x,U,X,se,Re){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=U,this.projectId=X,this.apiKey=se,this.appId=Re}fetch(T){var x=this;return(0,O.Z)(function*(){var U,X,se;const[Re,Ye]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},st={sdk_version:x.sdkVersion,app_instance_id:Re,app_instance_id_token:Ye,app_id:x.appId,language_code:vi()},ue={method:"POST",headers:Tt,body:JSON.stringify(st)},on=fetch(bt,ue),k=new Promise((Os,oa)=>{T.signal.addEventListener(()=>{const ju=new Error("The operation was aborted.");ju.name="AbortError",oa(ju)})});let Er;try{yield Promise.race([on,k]),Er=yield on}catch(Os){let oa="fetch-client-network";throw"AbortError"===(null===(U=Os)||void 0===U?void 0:U.name)&&(oa="fetch-timeout"),_r.create(oa,{originalErrorMessage:null===(X=Os)||void 0===X?void 0:X.message})}let ks=Er.status;const kd=Er.headers.get("ETag")||void 0;let sa,Di;if(200===Er.status){let Os;try{Os=yield Er.json()}catch(oa){throw _r.create("fetch-client-parse",{originalErrorMessage:null===(se=oa)||void 0===se?void 0:se.message})}sa=Os.entries,Di=Os.state}if("INSTANCE_STATE_UNSPECIFIED"===Di?ks=500:"NO_CHANGE"===Di?ks=304:("NO_TEMPLATE"===Di||"EMPTY_CONFIG"===Di)&&(sa={}),304!==ks&&200!==ks)throw _r.create("fetch-status",{httpStatus:ks});return{status:ks,eTag:kd,config:sa}})()}}class Vi{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,O.Z)(function*(){const U=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:U}){var X=this;return(0,O.Z)(function*(){yield function es(D,T){return new Promise((x,U)=>{const X=Math.max(T-Date.now(),0),se=setTimeout(x,X);D.addEventListener(()=>{clearTimeout(se),U(_r.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const se=yield X.client.fetch(T);return yield X.storage.deleteThrottleMetadata(),se}catch(se){if(!function ln(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(se))throw se;const Re={throttleEndTimeMillis:Date.now()+(0,ne.$s)(U),backoffCount:U+1};return yield X.storage.setThrottleMetadata(Re),X.attemptFetch(T,Re)}})()}}class Bo{constructor(T,x,U,X,se){this.app=T,this._client=x,this._storageCache=U,this._storage=X,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Js(D,T){var x;const U=D.target.error||void 0;return _r.create(T,{originalErrorMessage:U&&(null===(x=U)||void 0===x?void 0:x.message)})}const Rr="app_namespace_store";class wi{constructor(T,x,U,X=function Wr(){return new Promise((D,T)=>{var x;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=X=>{T(Js(X,"storage-open"))},U.onsuccess=X=>{D(X.target.result)},U.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Rr,{keyPath:"compositeKey"})}}catch(U){T(_r.create("storage-open",{originalErrorMessage:null===(x=U)||void 0===x?void 0:x.message}))}})}()){this.appId=T,this.appName=x,this.namespace=U,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,O.Z)(function*(){const U=yield x.openDbPromise;return new Promise((X,se)=>{var Re;const qe=U.transaction([Rr],"readonly").objectStore(Rr),bt=x.createCompositeKey(T);try{const Tt=qe.get(bt);Tt.onerror=st=>{se(Js(st,"storage-get"))},Tt.onsuccess=st=>{const ue=st.target.result;X(ue?ue.value:void 0)}}catch(Tt){se(_r.create("storage-get",{originalErrorMessage:null===(Re=Tt)||void 0===Re?void 0:Re.message}))}})})()}set(T,x){var U=this;return(0,O.Z)(function*(){const X=yield U.openDbPromise;return new Promise((se,Re)=>{var Ye;const bt=X.transaction([Rr],"readwrite").objectStore(Rr),Tt=U.createCompositeKey(T);try{const st=bt.put({compositeKey:Tt,value:x});st.onerror=ue=>{Re(Js(ue,"storage-set"))},st.onsuccess=()=>{se()}}catch(st){Re(_r.create("storage-set",{originalErrorMessage:null===(Ye=st)||void 0===Ye?void 0:Ye.message}))}})})()}delete(T){var x=this;return(0,O.Z)(function*(){const U=yield x.openDbPromise;return new Promise((X,se)=>{var Re;const qe=U.transaction([Rr],"readwrite").objectStore(Rr),bt=x.createCompositeKey(T);try{const Tt=qe.delete(bt);Tt.onerror=st=>{se(Js(st,"storage-delete"))},Tt.onsuccess=()=>{X()}}catch(Tt){se(_r.create("storage-delete",{originalErrorMessage:null===(Re=Tt)||void 0===Re?void 0:Re.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Ea{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const x=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),X=T.storage.getActiveConfig(),se=yield x;se&&(T.lastFetchStatus=se);const Re=yield U;Re&&(T.lastSuccessfulFetchTimestampMillis=Re);const Ye=yield X;Ye&&(T.activeConfig=Ye)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Ia(){return nf.apply(this,arguments)}function nf(){return(nf=(0,O.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function Ei(){(0,ae._registerComponent)(new ie.wA("remote-config",function D(T,{instanceIdentifier:x}){const U=T.getProvider("app").getImmediate(),X=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw _r.create("registration-window");if(!(0,ne.hl)())throw _r.create("indexed-db-unavailable");const{projectId:se,apiKey:Re,appId:Ye}=U.options;if(!se)throw _r.create("registration-project-id");if(!Re)throw _r.create("registration-api-key");if(!Ye)throw _r.create("registration-app-id");const qe=new wi(Ye,U.name,x=x||"firebase"),bt=new Ea(qe),Tt=new me.Yd($n);Tt.logLevel=me.in.ERROR;const st=new Ss(X,ae.SDK_VERSION,x,se,Re,Ye),ue=new Vi(st,qe),on=new Xs(ue,qe,bt,Tt),k=new Bo(U,on,bt,qe,Tt);return function Cn(D){const T=(0,ne.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(k),k},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)($n,"0.3.11"),(0,ae.registerVersion)($n,"0.3.11","esm2017")}();const Rc="/firebase-messaging-sw.js",ts="/firebase-cloud-messaging-push-scope",jo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ba="https://fcmregistrations.googleapis.com/v1",xc="google.c.a.c_id",rf="google.c.a.c_l",sf="google.c.a.ts",Ng="google.c.a.e";var eo=(()=>{return(D=eo||(eo={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",eo;var D})();function Bi(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kg(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(x),X=new Uint8Array(U.length);for(let se=0;se<U.length;++se)X[se]=U.charCodeAt(se);return X}const Mc="fcm_token_details_db",Pc=5,xr="fcm_token_object_Store";function gd(){return gd=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(Mc))return null;let T=null;return(yield(0,pe.X3)(Mc,Pc,{upgrade:(U=(0,O.Z)(function*(X,se,Re,Ye){var qe;if(se<2||!X.objectStoreNames.contains(xr))return;const bt=Ye.objectStore(xr),Tt=yield bt.index("fcmSenderId").get(D);if(yield bt.clear(),Tt)if(2===se){const st=Tt;if(!st.auth||!st.p256dh||!st.endpoint)return;T={token:st.fcmToken,createTime:null!==(qe=st.createTime)&&void 0!==qe?qe:Date.now(),subscriptionOptions:{auth:st.auth,p256dh:st.p256dh,endpoint:st.endpoint,swScope:st.swScope,vapidKey:"string"==typeof st.vapidKey?st.vapidKey:Bi(st.vapidKey)}}}else if(3===se){const st=Tt;T={token:st.fcmToken,createTime:st.createTime,subscriptionOptions:{auth:Bi(st.auth),p256dh:Bi(st.p256dh),endpoint:st.endpoint,swScope:st.swScope,vapidKey:Bi(st.vapidKey)}}}else if(4===se){const st=Tt;T={token:st.fcmToken,createTime:st.createTime,subscriptionOptions:{auth:Bi(st.auth),p256dh:Bi(st.p256dh),endpoint:st.endpoint,swScope:st.swScope,vapidKey:Bi(st.vapidKey)}}}}),function(se,Re,Ye,qe){return U.apply(this,arguments)})})).close(),yield(0,pe.Lj)(Mc),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),function af(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var U}),gd.apply(this,arguments)}const hu="firebase-messaging-database",to=1,no="firebase-messaging-store";let fu=null;function Ho(){return fu||(fu=(0,pe.X3)(hu,to,{upgrade:(D,T)=>{0===T&&D.createObjectStore(no)}})),fu}function pu(D){return Go.apply(this,arguments)}function Go(){return Go=(0,O.Z)(function*(D){const T=Wo(D),U=yield(yield Ho()).transaction(no).objectStore(no).get(T);if(U)return U;{const X=yield function Nc(D){return gd.apply(this,arguments)}(D.appConfig.senderId);if(X)return yield ro(D,X),X}}),Go.apply(this,arguments)}function ro(D,T){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,O.Z)(function*(D,T){const x=Wo(D),X=(yield Ho()).transaction(no,"readwrite");return yield X.objectStore(no).put(T,x),yield X.done,T})).apply(this,arguments)}function zo(){return(zo=(0,O.Z)(function*(D){const T=Wo(D),U=(yield Ho()).transaction(no,"readwrite");yield U.objectStore(no).delete(T),yield U.done})).apply(this,arguments)}function Wo({appConfig:D}){return D.appId}const Nn=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function gu(D,T){return Un.apply(this,arguments)}function Un(){return(Un=(0,O.Z)(function*(D,T){var x;const U=yield so(D),X=Da(T),se={method:"POST",headers:U,body:JSON.stringify(X)};let Re;try{Re=yield(yield fetch(Ko(D.appConfig),se)).json()}catch(Ye){throw Nn.create("token-subscribe-failed",{errorInfo:null===(x=Ye)||void 0===x?void 0:x.toString()})}if(Re.error)throw Nn.create("token-subscribe-failed",{errorInfo:Re.error.message});if(!Re.token)throw Nn.create("token-subscribe-no-token");return Re.token})).apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(D,T){var x;const U=yield so(D),X=Da(T.subscriptionOptions),se={method:"PATCH",headers:U,body:JSON.stringify(X)};let Re;try{Re=yield(yield fetch(`${Ko(D.appConfig)}/${T.token}`,se)).json()}catch(Ye){throw Nn.create("token-update-failed",{errorInfo:null===(x=Ye)||void 0===x?void 0:x.toString()})}if(Re.error)throw Nn.create("token-update-failed",{errorInfo:Re.error.message});if(!Re.token)throw Nn.create("token-update-no-token");return Re.token})).apply(this,arguments)}function Gn(D,T){return kc.apply(this,arguments)}function kc(){return(kc=(0,O.Z)(function*(D,T){var x;const X={method:"DELETE",headers:yield so(D)};try{const Re=yield(yield fetch(`${Ko(D.appConfig)}/${T}`,X)).json();if(Re.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:Re.error.message})}catch(se){throw Nn.create("token-unsubscribe-failed",{errorInfo:null===(x=se)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Ko({projectId:D}){return`${ba}/projects/${D}/registrations`}function so(D){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,O.Z)(function*({appConfig:D,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Da({p256dh:D,auth:T,endpoint:x,vapidKey:U}){const X={web:{endpoint:x,auth:T,p256dh:D}};return U!==jo&&(X.web.applicationPubKey=U),X}const Zo=6048e5;function ns(){return ns=(0,O.Z)(function*(D){const T=yield function Oc(D,T){return Lc.apply(this,arguments)}(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Bi(T.getKey("auth")),p256dh:Bi(T.getKey("p256dh"))},U=yield pu(D.firebaseDependencies);if(U){if(function vu(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}(U.subscriptionOptions,x))return Date.now()>=U.createTime+Zo?function St(D,T){return _u.apply(this,arguments)}(D,{token:U.token,createTime:Date.now(),subscriptionOptions:x}):U.token;try{yield Gn(D.firebaseDependencies,U.token)}catch(X){console.warn(X)}return _d(D.firebaseDependencies,x)}return _d(D.firebaseDependencies,x)}),ns.apply(this,arguments)}function Sa(){return Sa=(0,O.Z)(function*(D){const T=yield pu(D.firebaseDependencies);T&&(yield Gn(D.firebaseDependencies,T.token),yield function md(D){return zo.apply(this,arguments)}(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),Sa.apply(this,arguments)}function _u(){return _u=(0,O.Z)(function*(D,T){try{const x=yield function qo(D,T){return io.apply(this,arguments)}(D.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield ro(D.firebaseDependencies,U),x}catch(x){throw yield function Ta(D){return Sa.apply(this,arguments)}(D),x}}),_u.apply(this,arguments)}function _d(D,T){return yu.apply(this,arguments)}function yu(){return(yu=(0,O.Z)(function*(D,T){const U={token:yield gu(D,T),createTime:Date.now(),subscriptionOptions:T};return yield ro(D,U),U.token})).apply(this,arguments)}function Lc(){return(Lc=(0,O.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kg(T)})})).apply(this,arguments)}function uf(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Fc(D,T){if(!T.notification)return;D.notification={};const x=T.notification.title;x&&(D.notification.title=x);const U=T.notification.body;U&&(D.notification.body=U);const X=T.notification.image;X&&(D.notification.image=X)}(T,D),function ye(D,T){T.data&&(D.data=T.data)}(T,D),function Zt(D,T){var x,U,X,se,Re;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Ye=null!==(X=null===(U=T.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==X?X:null===(se=T.notification)||void 0===se?void 0:se.click_action;Ye&&(D.fcmOptions.link=Ye);const qe=null===(Re=T.fcmOptions)||void 0===Re?void 0:Re.analytics_label;qe&&(D.fcmOptions.analyticsLabel=qe)}(T,D),T}function cf(D,T){const x=[];for(let U=0;U<D.length;U++)x.push(D.charAt(U)),U<T.length&&x.push(T.charAt(U));return x.join("")}function Aa(D){return Nn.create("missing-app-config-values",{valueName:D})}cf("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),cf("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wu{constructor(T,x,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function ur(D){if(!D||!D.options)throw Aa("App Configuration Object");if(!D.name)throw Aa("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const U of T)if(!x[U])throw Aa(U);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:X,installations:x,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Zr(D){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,O.Z)(function*(D){var T;try{D.swRegistration=yield navigator.serviceWorker.register(Rc,{scope:ts}),D.swRegistration.update().catch(()=>{})}catch(x){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=x)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function vd(){return(vd=(0,O.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield Zr(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function bu(){return(bu=(0,O.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=jo)})).apply(this,arguments)}function Yr(){return Yr=(0,O.Z)(function*(D,T){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield function Uc(D,T){return bu.apply(this,arguments)}(D,T?.vapidKey),yield function Iu(D,T){return vd.apply(this,arguments)}(D,T?.serviceWorkerRegistration),function mu(D){return ns.apply(this,arguments)}(D)}),Yr.apply(this,arguments)}function oo(){return(oo=(0,O.Z)(function*(D,T,x){const U=function ji(D){switch(D){case eo.NOTIFICATION_CLICKED:return"notification_open";case eo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:x[xc],message_name:x[rf],message_time:x[sf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ra(){return Ra=(0,O.Z)(function*(D,T){const x=T.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===eo.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(uf(x)):D.onMessageHandler.next(uf(x)));const U=x.data;(function yd(D){return"object"==typeof D&&!!D&&xc in D})(U)&&"1"===U[Ng]&&(yield function As(D,T,x){return oo.apply(this,arguments)}(D,x.messageType,U))}),Ra.apply(this,arguments)}const Ed="@firebase/messaging",Bc=D=>{const T=new wu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function wd(D,T){return Ra.apply(this,arguments)}(T,x)),T},rs=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:U=>function Zn(D,T){return Yr.apply(this,arguments)}(T,U)}};function jc(){return bd.apply(this,arguments)}function bd(){return(bd=(0,O.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Id(){(0,ae._registerComponent)(new ie.wA("messaging",Bc,"PUBLIC")),(0,ae._registerComponent)(new ie.wA("messaging-internal",rs,"PRIVATE")),(0,ae.registerVersion)(Ed,"0.9.16"),(0,ae.registerVersion)(Ed,"0.9.16","esm2017")}();const Dd="analytics",Mr="firebase_id",Yo="origin",yn=6e4,Qo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$c="https://www.googletagmanager.com/gtag/js",cr=new me.Yd("@firebase/analytics");function hf(D){return Promise.all(D.map(T=>T.catch(x=>x)))}function ao(){return(ao=(0,O.Z)(function*(D,T,x,U,X,se){const Re=U[X];try{if(Re)yield T[Re];else{const qe=(yield hf(x)).find(bt=>bt.measurementId===X);qe&&(yield T[qe.appId])}}catch(Ye){cr.error(Ye)}D("config",X,se)})).apply(this,arguments)}function Rs(){return(Rs=(0,O.Z)(function*(D,T,x,U,X){try{let se=[];if(X&&X.send_to){let Re=X.send_to;Array.isArray(Re)||(Re=[Re]);const Ye=yield hf(x);for(const qe of Re){const bt=Ye.find(st=>st.measurementId===qe),Tt=bt&&T[bt.appId];if(!Tt){se=[];break}se.push(Tt)}}0===se.length&&(se=Object.values(T)),yield Promise.all(se),D("event",U,X||{})}catch(se){cr.error(se)}})).apply(this,arguments)}const oi=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Du=30,Sd=new class uo{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function ff(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Na(){return(Na=(0,O.Z)(function*(D){var T;const{appId:x,apiKey:U}=D,X={method:"GET",headers:ff(U)},se=Qo.replace("{app-id}",x),Re=yield fetch(se,X);if(200!==Re.status&&304!==Re.status){let Ye="";try{const qe=yield Re.json();null!==(T=qe.error)&&void 0!==T&&T.message&&(Ye=qe.error.message)}catch{}throw oi.create("config-fetch-failed",{httpStatus:Re.status,responseMessage:Ye})}return Re.json()})).apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(D,T=Sd,x){const{appId:U,apiKey:X,measurementId:se}=D.options;if(!U)throw oi.create("no-app-id");if(!X){if(se)return{measurementId:se,appId:U};throw oi.create("no-api-key")}const Re=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Oa;return setTimeout((0,O.Z)(function*(){Ye.abort()}),void 0!==x?x:yn),is({appId:U,apiKey:X,measurementId:se},Re,Ye,T)})).apply(this,arguments)}function is(D,T,x){return ss.apply(this,arguments)}function ss(){return ss=(0,O.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:x},U,X=Sd){var se,Re;const{appId:Ye,measurementId:qe}=D;try{yield function Jo(D,T){return new Promise((x,U)=>{const X=Math.max(T-Date.now(),0),se=setTimeout(x,X);D.addEventListener(()=>{clearTimeout(se),U(oi.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(U,T)}catch(bt){if(qe)return cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${null===(se=bt)||void 0===se?void 0:se.message}]`),{appId:Ye,measurementId:qe};throw bt}try{const bt=yield function co(D){return Na.apply(this,arguments)}(D);return X.deleteThrottleMetadata(Ye),bt}catch(bt){const Tt=bt;if(!function Gc(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Tt)){if(X.deleteThrottleMetadata(Ye),qe)return cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${Tt?.message}]`),{appId:Ye,measurementId:qe};throw bt}const st=503===Number(null===(Re=Tt?.customData)||void 0===Re?void 0:Re.httpStatus)?(0,ne.$s)(x,X.intervalMillis,Du):(0,ne.$s)(x,X.intervalMillis),ue={throttleEndTimeMillis:Date.now()+st,backoffCount:x+1};return X.setThrottleMetadata(Ye,ue),cr.debug(`Calling attemptFetch again in ${st} millis`),is(D,ue,U,X)}}),ss.apply(this,arguments)}class Oa{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Tu,Ps;function Ms(){return(Ms=(0,O.Z)(function*(D,T,x,U,X){if(X&&X.global)D("event",x,U);else{const se=yield T;D("event",x,Object.assign(Object.assign({},U),{send_to:se}))}})).apply(this,arguments)}function zc(){return(zc=(0,O.Z)(function*(){var D;if(!(0,ne.hl)())return cr.warn(oi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(T){return cr.warn(oi.create("indexeddb-unavailable",{errorInfo:null===(D=T)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function ja(){return ja=(0,O.Z)(function*(D,T,x,U,X,se,Re){var Ye;const qe=function Dn(D){return ka.apply(this,arguments)}(D);qe.then(on=>{x[on.measurementId]=on.appId,D.options.measurementId&&on.measurementId!==D.options.measurementId&&cr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${on.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(on=>cr.error(on)),T.push(qe);const bt=function Ba(){return zc.apply(this,arguments)}().then(on=>{if(on)return U.getId()}),[Tt,st]=yield Promise.all([qe,bt]);(function Xo(){const D=window.document.getElementsByTagName("script");for(const T of Object.values(D))if(T.src&&T.src.includes($c))return T;return null})()||function Lg(D,T){const x=document.createElement("script");x.src=`${$c}?l=${D}&id=${T}`,x.async=!0,document.head.appendChild(x)}(se,Tt.measurementId),Ps&&(X("consent","default",Ps),function Va(D){Ps=D}(void 0)),X("js",new Date);const ue=null!==(Ye=Re?.config)&&void 0!==Ye?Ye:{};return ue[Yo]="firebase",ue.update=!0,null!=st&&(ue[Mr]=st),X("config",Tt.measurementId,ue),Tu&&(X("set",Tu),function Ru(D){Tu=D}(void 0)),Tt.measurementId}),ja.apply(this,arguments)}class Ad{constructor(T){this.app=T}_delete(){return delete $i[this.app.options.appId],Promise.resolve()}}let $i={},xu=[];const ho={};let Mu,os,Hi="dataLayer",Rd="gtag",Ii=!1;function Pu(D,T,x){!function xd(){const D=[];if((0,ne.ru)()&&D.push("This is a browser extension environment."),(0,ne.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((U,X)=>`(${X+1}) ${U}`).join(" "),x=oi.create("invalid-analytics-context",{errorInfo:T});cr.warn(x.message)}}();const U=D.options.appId;if(!U)throw oi.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw oi.create("no-api-key");cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$i[U])throw oi.create("already-exists",{id:U});if(!Ii){!function Fg(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(Hi);const{wrappedGtag:se,gtagCore:Re}=function Pa(D,T,x,U,X){let se=function(...Re){window[U].push(arguments)};return window[X]&&"function"==typeof window[X]&&(se=window[X]),window[X]=function Ma(D,T,x,U){function se(){return se=(0,O.Z)(function*(Re,Ye,qe){try{"event"===Re?yield function Hc(D,T,x,U,X){return Rs.apply(this,arguments)}(D,T,x,Ye,qe):"config"===Re?yield function xa(D,T,x,U,X,se){return ao.apply(this,arguments)}(D,T,x,U,Ye,qe):"consent"===Re?D("consent","update",qe):D("set",Ye)}catch(bt){cr.error(bt)}}),se.apply(this,arguments)}return function X(Re,Ye,qe){return se.apply(this,arguments)}}(se,D,T,x),{gtagCore:se,wrappedGtag:window[X]}}($i,xu,ho,Hi,Rd);os=se,Mu=Re,Ii=!0}return $i[U]=function lo(D,T,x,U,X,se,Re){return ja.apply(this,arguments)}(D,xu,ho,T,Mu,Hi,x),new Ad(D)}function Nu(){return as.apply(this,arguments)}function as(){return(as=(0,O.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const Kt="@firebase/analytics";!function Vg(){(0,ae._registerComponent)(new ie.wA(Dd,(T,{options:x})=>Pu(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ae._registerComponent)(new ie.wA("analytics-internal",function D(T){try{const x=T.getProvider(Dd).getImmediate();return{logEvent:(U,X,se)=>function gf(D,T,x,U){D=(0,ne.m9)(D),function Su(D,T,x,U,X){return Ms.apply(this,arguments)}(os,$i[D.app.options.appId],T,x,U).catch(X=>cr.error(X))}(x,U,X,se)}}catch(x){throw oi.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ae.registerVersion)(Kt,"0.8.0"),(0,ae.registerVersion)(Kt,"0.8.0","esm2017")}();var Ou=L(4408),_f=L(7565);const yf=new class Nd extends _f.v{}(class mf extends Ou.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,x,U):(T.flush(this),0)}});var vf=L(4986),Zc=L(8505),pn=L(5363),Fu=L(9468);const Uu=new _.GfV("7.6.1"),Yc="__angularfire_symbol__analyticsIsSupportedValue",Qr="__angularfire_symbol__analyticsIsSupported",Gi="__angularfire_symbol__remoteConfigIsSupportedValue",Vu="__angularfire_symbol__remoteConfigIsSupported",Ga="__angularfire_symbol__messagingIsSupportedValue",ra="__angularfire_symbol__messagingIsSupported";function Pr(D,T,x){if(T){if(1===T.length)return T[0];const se=T.filter(Re=>Re.app===x);if(1===se.length)return se[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Qr]||(globalThis[Qr]=Nu().then(D=>globalThis[Yc]=D).catch(()=>globalThis[Yc]=!1)),globalThis[ra]||(globalThis[ra]=jc().then(D=>globalThis[Ga]=D).catch(()=>globalThis[Ga]=!1)),globalThis[Vu]||(globalThis[Vu]=Ia().then(D=>globalThis[Gi]=D).catch(()=>globalThis[Gi]=!1));const za=(D,T)=>{const x=T?[T]:(0,ee.C6)(),U=[];return x.forEach(X=>{X.container.getProvider(D).instances.forEach(Re=>{U.includes(Re)||U.push(Re)})}),U};function rn(){}class fo{constructor(T,x=yf){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,U){const X=this.zone;return this.delegate.schedule(function(Re){X.runGuarded(()=>{T.apply(this,[Re])})},x,U)}}class bi{constructor(T){this.zone=T,this.task=null}call(T,x){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rn,{},rn,rn)),x.pipe((0,Zc.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ia=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new fo(Zone.current)),this.insideAngular=x.run(()=>new fo(Zone.current,vf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(_.LFG(_.R0b))},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ht(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function vt(D){return D.pipe((0,pn.Q)(Ht().outsideAngular))}function Ns(D){return Ht(),function Tn(D){return function(x){return(x=x.lift(new bi(D.ngZone))).pipe((0,Fu.R)(D.outsideAngular),(0,pn.Q)(D.insideAngular))}}(Ht())(D)}},2090:(ft,Te,L)=>{L.d(Te,{$s:()=>Po,BH:()=>Ge,DV:()=>Ze,Dv:()=>bn,G6:()=>Fe,GJ:()=>Ue,L:()=>pe,LL:()=>mn,Mn:()=>Pe,Pz:()=>re,Sg:()=>Se,UG:()=>_e,UI:()=>wt,US:()=>ie,Wj:()=>cn,Yr:()=>$e,ZB:()=>G,ZR:()=>Xe,b$:()=>Be,cI:()=>pi,d:()=>De,dS:()=>yt,eu:()=>we,g5:()=>O,gK:()=>gr,gQ:()=>xn,h$:()=>me,hl:()=>H,hu:()=>ee,jU:()=>Me,lb:()=>dn,m9:()=>Gt,ne:()=>Gr,p$:()=>z,pd:()=>wn,r3:()=>_t,ru:()=>Ae,tV:()=>fe,uI:()=>rt,ug:()=>It,vZ:()=>Vt,w1:()=>be,w9:()=>je,xO:()=>qn,xb:()=>Ut,z$:()=>We,zI:()=>He,zd:()=>Jn});const _={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ee=function(Y,$){if(!Y)throw O($)},O=function(Y){return new Error("Firebase Database ("+_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Y)},ae=function(Y){const $=[];let j=0;for(let W=0;W<Y.length;W++){let q=Y.charCodeAt(W);q<128?$[j++]=q:q<2048?($[j++]=q>>6|192,$[j++]=63&q|128):55296==(64512&q)&&W+1<Y.length&&56320==(64512&Y.charCodeAt(W+1))?(q=65536+((1023&q)<<10)+(1023&Y.charCodeAt(++W)),$[j++]=q>>18|240,$[j++]=q>>12&63|128,$[j++]=q>>6&63|128,$[j++]=63&q|128):($[j++]=q>>12|224,$[j++]=q>>6&63|128,$[j++]=63&q|128)}return $},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,$){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,W=[];for(let q=0;q<Y.length;q+=3){const xe=Y[q],ze=q+1<Y.length,gt=ze?Y[q+1]:0,hn=q+2<Y.length,nn=hn?Y[q+2]:0;let Fn=(15&gt)<<2|nn>>6,er=63&nn;hn||(er=64,ze||(Fn=64)),W.push(j[xe>>2],j[(3&xe)<<4|gt>>4],j[Fn],j[er])}return W.join("")},encodeString(Y,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(Y):this.encodeByteArray(ae(Y),$)},decodeString(Y,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(Y):function(Y){const $=[];let j=0,W=0;for(;j<Y.length;){const q=Y[j++];if(q<128)$[W++]=String.fromCharCode(q);else if(q>191&&q<224){const xe=Y[j++];$[W++]=String.fromCharCode((31&q)<<6|63&xe)}else if(q>239&&q<365){const hn=((7&q)<<18|(63&Y[j++])<<12|(63&Y[j++])<<6|63&Y[j++])-65536;$[W++]=String.fromCharCode(55296+(hn>>10)),$[W++]=String.fromCharCode(56320+(1023&hn))}else{const xe=Y[j++],ze=Y[j++];$[W++]=String.fromCharCode((15&q)<<12|(63&xe)<<6|63&ze)}}return $.join("")}(this.decodeStringToByteArray(Y,$))},decodeStringToByteArray(Y,$){this.init_();const j=$?this.charToByteMapWebSafe_:this.charToByteMap_,W=[];for(let q=0;q<Y.length;){const xe=j[Y.charAt(q++)],gt=q<Y.length?j[Y.charAt(q)]:0;++q;const nn=q<Y.length?j[Y.charAt(q)]:64;++q;const At=q<Y.length?j[Y.charAt(q)]:64;if(++q,null==xe||null==gt||null==nn||null==At)throw Error();W.push(xe<<2|gt>>4),64!==nn&&(W.push(gt<<4&240|nn>>2),64!==At&&W.push(nn<<6&192|At))}return W},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},me=function(Y){const $=ae(Y);return ie.encodeByteArray($,!0)},pe=function(Y){return me(Y).replace(/\./g,"")},fe=function(Y){try{return ie.decodeString(Y,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function z(Y){return G(void 0,Y)}function G(Y,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return $}for(const j in $)!$.hasOwnProperty(j)||!Q(j)||(Y[j]=G(Y[j],$[j]));return Y}function Q(Y){return"__proto__"!==Y}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,j)=>{this.resolve=$,this.reject=j})}wrapCallback($){return(j,W)=>{j?this.reject(j):this.resolve(W),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(j):$(j,W))}}}function Se(Y,$){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const W=$||"demo-project",q=Y.iat||0,xe=Y.sub||Y.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ze=Object.assign({iss:`https://securetoken.google.com/${W}`,aud:W,iat:q,exp:q+3600,auth_time:q,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(ze)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Me(){return"object"==typeof self&&self.self===self}function Ae(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function Be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){return We().indexOf("Electron/")>=0}function be(){const Y=We();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function Pe(){return We().indexOf("MSAppHost/")>=0}function $e(){return!0===_.NODE_CLIENT||!0===_.NODE_ADMIN}function Fe(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H(){return"object"==typeof indexedDB}function we(){return new Promise((Y,$)=>{try{let j=!0;const W="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(W);q.onsuccess=()=>{q.result.close(),j||self.indexedDB.deleteDatabase(W),Y(!0)},q.onupgradeneeded=()=>{j=!1},q.onerror=()=>{var xe;$((null===(xe=q.error)||void 0===xe?void 0:xe.message)||"")}}catch(j){$(j)}})}function He(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Xe extends Error{constructor($,j,W){super(j),this.code=$,this.customData=W,this.name="FirebaseError",Object.setPrototypeOf(this,Xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mn.prototype.create)}}class mn{constructor($,j,W){this.service=$,this.serviceName=j,this.errors=W}create($,...j){const W=j[0]||{},q=`${this.service}/${$}`,xe=this.errors[$],ze=xe?function Xn(Y,$){return Y.replace(jn,(j,W)=>{const q=$[W];return null!=q?String(q):`<${W}?>`})}(xe,W):"Error";return new Xe(q,`${this.serviceName}: ${ze} (${q}).`,W)}}const jn=/\{\$([^}]+)}/g;function pi(Y){return JSON.parse(Y)}function re(Y){return JSON.stringify(Y)}const de=function(Y){let $={},j={},W={},q="";try{const xe=Y.split(".");$=pi(fe(xe[0])||""),j=pi(fe(xe[1])||""),q=xe[2],W=j.d||{},delete j.d}catch{}return{header:$,claims:j,data:W,signature:q}},je=function(Y){const j=de(Y).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},Ue=function(Y){const $=de(Y).claims;return"object"==typeof $&&!0===$.admin};function _t(Y,$){return Object.prototype.hasOwnProperty.call(Y,$)}function Ze(Y,$){if(Object.prototype.hasOwnProperty.call(Y,$))return Y[$]}function Ut(Y){for(const $ in Y)if(Object.prototype.hasOwnProperty.call(Y,$))return!1;return!0}function wt(Y,$,j){const W={};for(const q in Y)Object.prototype.hasOwnProperty.call(Y,q)&&(W[q]=$.call(j,Y[q],q,Y));return W}function Vt(Y,$){if(Y===$)return!0;const j=Object.keys(Y),W=Object.keys($);for(const q of j){if(!W.includes(q))return!1;const xe=Y[q],ze=$[q];if(Qt(xe)&&Qt(ze)){if(!Vt(xe,ze))return!1}else if(xe!==ze)return!1}for(const q of W)if(!j.includes(q))return!1;return!0}function Qt(Y){return null!==Y&&"object"==typeof Y}function qn(Y){const $=[];for(const[j,W]of Object.entries(Y))Array.isArray(W)?W.forEach(q=>{$.push(encodeURIComponent(j)+"="+encodeURIComponent(q))}):$.push(encodeURIComponent(j)+"="+encodeURIComponent(W));return $.length?"&"+$.join("&"):""}function Jn(Y){const $={};return Y.replace(/^\?/,"").split("&").forEach(W=>{if(W){const[q,xe]=W.split("=");$[decodeURIComponent(q)]=decodeURIComponent(xe)}}),$}function wn(Y){const $=Y.indexOf("?");if(!$)return"";const j=Y.indexOf("#",$);return Y.substring($,j>0?j:void 0)}class xn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,j){j||(j=0);const W=this.W_;if("string"==typeof $)for(let At=0;At<16;At++)W[At]=$.charCodeAt(j)<<24|$.charCodeAt(j+1)<<16|$.charCodeAt(j+2)<<8|$.charCodeAt(j+3),j+=4;else for(let At=0;At<16;At++)W[At]=$[j]<<24|$[j+1]<<16|$[j+2]<<8|$[j+3],j+=4;for(let At=16;At<80;At++){const Fn=W[At-3]^W[At-8]^W[At-14]^W[At-16];W[At]=4294967295&(Fn<<1|Fn>>>31)}let nn,fn,q=this.chain_[0],xe=this.chain_[1],ze=this.chain_[2],gt=this.chain_[3],hn=this.chain_[4];for(let At=0;At<80;At++){At<40?At<20?(nn=gt^xe&(ze^gt),fn=1518500249):(nn=xe^ze^gt,fn=1859775393):At<60?(nn=xe&ze|gt&(xe|ze),fn=2400959708):(nn=xe^ze^gt,fn=3395469782);const Fn=(q<<5|q>>>27)+nn+hn+fn+W[At]&4294967295;hn=gt,gt=ze,ze=4294967295&(xe<<30|xe>>>2),xe=q,q=Fn}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+xe&4294967295,this.chain_[2]=this.chain_[2]+ze&4294967295,this.chain_[3]=this.chain_[3]+gt&4294967295,this.chain_[4]=this.chain_[4]+hn&4294967295}update($,j){if(null==$)return;void 0===j&&(j=$.length);const W=j-this.blockSize;let q=0;const xe=this.buf_;let ze=this.inbuf_;for(;q<j;){if(0===ze)for(;q<=W;)this.compress_($,q),q+=this.blockSize;if("string"==typeof $){for(;q<j;)if(xe[ze]=$.charCodeAt(q),++ze,++q,ze===this.blockSize){this.compress_(xe),ze=0;break}}else for(;q<j;)if(xe[ze]=$[q],++ze,++q,ze===this.blockSize){this.compress_(xe),ze=0;break}}this.inbuf_=ze,this.total_+=j}digest(){const $=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&j,j/=256;this.compress_(this.buf_);let W=0;for(let q=0;q<5;q++)for(let xe=24;xe>=0;xe-=8)$[W]=this.chain_[q]>>xe&255,++W;return $}}function Gr(Y,$){const j=new En(Y,$);return j.subscribe.bind(j)}class En{constructor($,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{$(this)}).catch(W=>{this.error(W)})}next($){this.forEachObserver(j=>{j.next($)})}error($){this.forEachObserver(j=>{j.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,j,W){let q;if(void 0===$&&void 0===j&&void 0===W)throw new Error("Missing Observer.");q=function gi(Y,$){if("object"!=typeof Y||null===Y)return!1;for(const j of $)if(j in Y&&"function"==typeof Y[j])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:j,complete:W},void 0===q.next&&(q.next=Yi),void 0===q.error&&(q.error=Yi),void 0===q.complete&&(q.complete=Yi);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),xe}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,$)}sendOne($,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{j(this.observers[$])}catch(W){typeof console<"u"&&console.error&&console.error(W)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yi(){}const bn=function(Y,$,j,W){let q;if(W<$?q="at least "+$:W>j&&(q=0===j?"none":"no more than "+j),q)throw new Error(Y+" failed: Was called with "+W+(1===W?" argument.":" arguments.")+" Expects "+q+".")};function gr(Y,$){return`${Y} failed: ${$} argument `}function cn(Y,$,j,W){if((!W||j)&&"function"!=typeof j)throw new Error(gr(Y,$)+"must be a valid function.")}function dn(Y,$,j,W){if((!W||j)&&("object"!=typeof j||null===j))throw new Error(gr(Y,$)+"must be a valid context object.")}const yt=function(Y){const $=[];let j=0;for(let W=0;W<Y.length;W++){let q=Y.charCodeAt(W);if(q>=55296&&q<=56319){const xe=q-55296;W++,ee(W<Y.length,"Surrogate pair missing trail surrogate."),q=65536+(xe<<10)+(Y.charCodeAt(W)-56320)}q<128?$[j++]=q:q<2048?($[j++]=q>>6|192,$[j++]=63&q|128):q<65536?($[j++]=q>>12|224,$[j++]=q>>6&63|128,$[j++]=63&q|128):($[j++]=q>>18|240,$[j++]=q>>12&63|128,$[j++]=q>>6&63|128,$[j++]=63&q|128)}return $},It=function(Y){let $=0;for(let j=0;j<Y.length;j++){const W=Y.charCodeAt(j);W<128?$++:W<2048?$+=2:W>=55296&&W<=56319?($+=4,j++):$+=3}return $},Ln=1e3,Mn=2,Qi=144e5,or=.5;function Po(Y,$=Ln,j=Mn){const W=$*Math.pow(j,Y),q=Math.round(or*W*(Math.random()-.5)*2);return Math.min(Qi,W+q)}function Gt(Y){return Y&&Y._delegate?Y._delegate:Y}},8448:(ft,Te,L)=>{var _=L(4650);let ee=null;function O(){return ee}class ne{}const ie=new _.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function pe(){return(0,_.LFG)(z)}()},providedIn:"platform"}),n})();const fe=new _.OlP("Location Initialized");let z=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){G()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){G()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ie))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function Q(){return new z((0,_.LFG)(ie))}()},providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function Ge(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function We(n){return n&&"?"!==n[0]?"?"+n:n}let rt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(Me)},providedIn:"root"}),n})();const _e=new _.OlP("appBaseHref");let Me=(()=>{class n extends rt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,_.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ge(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+We(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+We(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+We(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(me),_.LFG(_e,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ae=(()=>{class n extends rt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ge(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+We(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+We(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(me),_.LFG(_e,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Be=(()=>{class n{constructor(t){this._subject=new _.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function $e(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Se(Pe(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+We(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Pe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=We,n.joinWithSlash=Ge,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(_.LFG(rt))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function De(){return new Be((0,_.LFG)(rt))}()},providedIn:"root"}),n})();function Pe(n){return n.replace(/\/index.html$/,"")}class Hn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _i=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Hn(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,c),Cn(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Cn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},n.\u0275dir=_.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Cn(n,e){n.context.$implicit=e.item}let Mc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();const xr="server";function hu(n){return n===xr}let Ho=(()=>{class n{}return n.\u0275prov=(0,_.Yz7)({token:n,providedIn:"root",factory:()=>new pu((0,_.LFG)(ie),window)}),n})();class pu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ro(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Go(this.window.history)||Go(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Go(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Rs extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ma extends Rs{static makeCurrent(){!function ae(n){ee||(ee=n)}(new Ma)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Xo(){return Pa=Pa||document.querySelector("base"),Pa?Pa.getAttribute("href"):null}();return null==t?null:function oi(n){xs=xs||document.createElement("a"),xs.setAttribute("href",n);const e=xs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Pa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Lo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let xs,Pa=null;const Du=new _.OlP("TRANSITION_ID"),uo=[{provide:_.ip1,useFactory:function Td(n,e,t){return()=>{t.get(_.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Du,ie,_.zs3],multi:!0}];let ff=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const co=new _.OlP("EventManagerPlugins");let Na=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(co),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Dn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ka=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let a=i.get(t)??0;return a+=r,a>0?i.set(t,a):i.delete(t),a}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),is=(()=>{class n extends ka{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(a=>a.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const a=this.styleRef.get(r);a?a.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ie))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const ss={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Jo=/%COMP%/g,ea=new _.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Fa(n,e){return e.flat(100).map(t=>t.replace(Jo,n))}function Au(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let wr=(()=>{class n{constructor(t,r,i,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.rendererByCompId=new Map,this.defaultRenderer=new Ua(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof zc?i.applyToHost(t):i instanceof Ba&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.eventManager,h=this.sharedStylesHost,m=this.removeStylesOnCompDestory;switch(r.encapsulation){case _.ifc.Emulated:a=new zc(c,h,r,this.appId,m);break;case _.ifc.ShadowDom:return new Ru(c,h,t,r);default:a=new Ba(c,h,r,m)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Na),_.LFG(is),_.LFG(_.AFp),_.LFG(ea))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Ua{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ss[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Va(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Va(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ss[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ss[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,i&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Au(r)):this.eventManager.addEventListener(e,t,Au(r))}}function Va(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ru extends Ua{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Fa(i.id,i.styles);for(const c of a){const h=document.createElement("style");h.textContent=c,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ba extends Ua{constructor(e,t,r,i,a=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Fa(a,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class zc extends Ba{constructor(e,t,r,i,a){const c=i+"-"+r.id;super(e,t,r,a,c),this.contentAttr=function ta(n){return"_ngcontent-%COMP%".replace(Jo,n)}(c),this.hostAttr=function La(n){return"_nghost-%COMP%".replace(Jo,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let lo=(()=>{class n extends Dn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ie))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const ja=["alt","control","meta","shift"],Ad={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$i={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let xu=(()=>{class n extends Dn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),ja.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),c+=w+".")}),c+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=c,m}static matchEventFullKeyCode(t,r){let i=Ad[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ja.forEach(c=>{c!==i&&(0,$i[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ie))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Md=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function Ii(){Ma.makeCurrent()},multi:!0},{provide:ie,useFactory:function xd(){return(0,_.RDi)(document),document},deps:[]}]),Wc=new _.OlP(""),Nu=[{provide:_.rWj,useClass:class Sd{addToWindow(e){_.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const i=_.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const h=function(m){c=c||m,a--,0==a&&r(c)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:_.lri,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]}],as=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function Ug(){return new _.qLn},deps:[]},{provide:co,useClass:lo,multi:!0,deps:[ie,_.R0b,_.Lbi]},{provide:co,useClass:xu,multi:!0,deps:[ie]},{provide:wr,useClass:wr,deps:[Na,is,_.AFp,ea]},{provide:_.FYo,useExisting:wr},{provide:ka,useExisting:is},{provide:is,useClass:is,deps:[ie]},{provide:Na,useClass:Na,deps:[co,_.R0b]},{provide:class md{},useClass:ff,deps:[]},[]];let $a=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId},{provide:Du,useExisting:_.AFp},uo]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Wc,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[...as,...Nu],imports:[Mc,_.hGG]}),n})(),gf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ie))},n.\u0275prov=_.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ha(){return new gf((0,_.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const za_firebase={apiKey:"AIzaSyCmiudPxJ0ijNkrf0VGcCtB5w0KkovSHuQ",authDomain:"moonrakers-697aa.firebaseapp.com",databaseURL:"https://moonrakers-697aa-default-rtdb.firebaseio.com",projectId:"moonrakers-697aa",storageBucket:"moonrakers-697aa.appspot.com",messagingSenderId:"280709970766",appId:"1:280709970766:web:50f13a7f31a267538b7c1f",measurementId:"G-66HPG5VCSC"};var rn=L(2011),fo=L(4986),bi=L(9751),ia=L(7669),Ht=L(8996);function it(...n){const e=(0,ia.yG)(n);return(0,Ht.D)(n,e)}var Ci=L(6451),vt=L(4004),Qc=L(3099),Ns=L(8421),Tn=L(4482),kn=L(5403);function vn(n,e){return(0,Tn.e)((t,r)=>{let i=null,a=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,kn.x)(r,m=>{i?.unsubscribe();let w=0;const C=a++;(0,Ns.Xf)(n(m,C)).subscribe(i=(0,kn.x)(r,S=>r.next(e?e(m,S,C,w++):S),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function T(n,e){return(0,Tn.e)(function D(n,e,t,r,i){return(a,c)=>{let h=t,m=e,w=0;a.subscribe((0,kn.x)(c,C=>{const S=w++;m=h?n(m,C,S):(h=!0,C),r&&c.next(m)},i&&(()=>{h&&c.next(m),c.complete()})))}}(n,e,arguments.length>=2,!0))}var x=L(4671);function U(n,e=x.y){return n=n??X,(0,Tn.e)((t,r)=>{let i,a=!0;t.subscribe((0,kn.x)(r,c=>{const h=e(c);(a||!n(i,h))&&(a=!1,i=h,r.next(c))}))})}function X(n,e){return n===e}var se=L(5032),qe=L(5813),Tt=(L(1451),L(3942)),st=L(4859),ue=L(5861),on=L(9681),k=L(2090),Er=L(1877);const ks="@firebase/database";let sa="";function Di(n){sa=n}class Os{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class oa{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ju=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Os(e)}}catch{}return new oa},aa=ju("localStorage"),Od=ju("sessionStorage"),Xc=new Er.Yd("@firebase/database"),Ef=function(){let n=1;return function(){return n++}}(),Bg=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},Ls=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ls.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let $u=null,Py=!0;const Ld=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Xc.logLevel=Er.in.VERBOSE,$u=Xc.log.bind(Xc),e&&Od.set("logging_enabled",!0)):"function"==typeof n?$u=n:($u=null,Od.remove("logging_enabled"))},Ir=function(...n){if(!0===Py&&(Py=!1,null===$u&&!0===Od.get("logging_enabled")&&Ld(!0)),$u){const e=Ls.apply(null,n);$u(e)}},Fd=function(n){return function(...e){Ir(n,...e)}},jg=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ls(...n);Xc.error(e)},po=function(...n){const e=`FIREBASE FATAL ERROR: ${Ls(...n)}`;throw Xc.error(e),new Error(e)},Xr=function(...n){const e="FIREBASE WARNING: "+Ls(...n);Xc.warn(e)},Jc=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Fs="[MIN_NAME]",us="[MAX_NAME]",ua=function(n,e){if(n===e)return 0;if(n===Fs||e===us)return-1;if(e===Fs||n===us)return 1;{const t=br(n),r=br(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},cs=function(n,e){return n===e?0:n<e?-1:1},el=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},Cf=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=Cf(n[e[r]]);return t+="}",t},$g=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function nr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Hu=function(n){(0,k.hu)(!Jc(n),"Invalid JSON number");const r=1023;let i,a,c,h,m;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const w=[];for(m=52;m;m-=1)w.push(c%2?1:0),c=Math.floor(c/2);for(m=11;m;m-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const C=w.join("");let S="";for(m=0;m<64;m+=8){let N=parseInt(C.substr(m,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},Tf=new RegExp("^-?(0*)\\d{1,10}$"),Hg=-2147483648,tl=2147483647,br=function(n){if(Tf.test(n)){const e=Number(n);if(e>=Hg&&e<=tl)return e}return null},go=function(n){try{n()}catch(e){setTimeout(()=>{throw Xr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Sf=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wa=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Nr{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class nl{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ir("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xr(e)}}let rl=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Vd=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Bd="websocket",jd="long_polling";class sl{constructor(e,t,r,i,a=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=aa.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&aa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Wg(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===Bd)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==jd)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function ol(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return nr(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class Oy{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const al={},ul={};function cl(n){const e=n.toString();return al[e]||(al[e]=new Oy),al[e]}class Mf{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&go(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ai{constructor(e,t,r,i,a,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fd(e),this.stats_=cl(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),Wg(t,jd,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Mf(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Hd((...a)=>{const[c,h,m,w,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=m;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Vd.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ai.forceAllow_=!0}static forceDisallow(){ai.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!ai.forceAllow_&&(ai.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=$g(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Hd{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Ef(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Hd.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Ir("frame writing exception"),h.stack&&Ir(h.stack),Ir(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ir("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ir("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Gd=null;typeof MozWebSocket<"u"?Gd=MozWebSocket:typeof WebSocket<"u"&&(Gd=WebSocket);let ds=(()=>{class n{constructor(t,r,i,a,c,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fd(this.connId),this.stats_=cl(r),this.connURL=n.connectionURL_(r,h,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const h={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&Vd.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),c&&(h.p=c),Wg(t,Bd,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,aa.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${sa}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new Gd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Gd&&!n.forceDisallow_}static previouslyFailed(){return aa.isInMemoryStorage||!0===aa.get("previous_websocket_failure")}markConnectionHealthy(){aa.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=$g(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),zd=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ai,ds]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=ds&&ds.isAvailable();let i=r&&!ds.previouslyFailed();if(t.webSocketOnly&&(r||Xr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ds];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Bf{constructor(e,t,r,i,a,c,h,m,w,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=m,this.onKill_=w,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fd("c:"+this.id+":"),this.transportManager_=new zd(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=el("t",e),r=el("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=el("t",e),r=el("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=el("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?jg("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jg("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Xr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Wa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(aa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class tm{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class nm{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class gl extends nm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new gl}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Kd=32,lr=768;class Xt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Bt(){return new Xt("")}function jt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Or(n){return n.pieces_.length-n.pieceNum_}function an(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Xt(n.pieces_,e)}function Zd(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ml(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function _l(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Xt(e,0)}function gn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Xt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Xt(t,0)}function Lt(n){return n.pieceNum_>=n.pieces_.length}function Lr(n,e){const t=jt(n),r=jt(e);if(null===t)return e;if(t===r)return Lr(an(n),an(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function rm(n,e){const t=ml(n,0),r=ml(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=ua(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function y(n,e){if(Or(n)!==Or(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function f(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Or(n)>Or(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class g{constructor(e,t){this.errorPrefix_=t,this.parts_=ml(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);P(this)}}function P(n){if(n.byteLength_>lr)throw new Error(n.errorPrefix_+"has a key path longer than "+lr+" bytes ("+n.byteLength_+").");if(n.parts_.length>Kd)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Kd+") or object contains a cycle "+K(n))}function K(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class oe extends nm{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new oe}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Le=1e3;let vl,yo=(()=>{class n extends tm{constructor(t,r,i,a,c,h,m,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=Fd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Le,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");oe.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&gl.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,k.Pz)(c)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,m=>{const w=m.d,C=m.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Xr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):jg("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Le,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Le,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Le),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ue.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,w=null;const C=function(){w?w.close():(m=!0,a())};t.realtime_={close:C,sendRequest:function(V){(0,k.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(V)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,Z]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);m?Ir("getToken() completed but was canceled"):(Ir("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=Z&&Z.token,w=new Bf(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ge=>{Xr(ge+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(V){t.log_("Failed to get token: "+V),m||(t.repoInfo_.nodeAdmin&&Xr(V),C())}}})()}interrupt(t){Ir("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ir("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Le,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>Cf(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Xt(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ir("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ir("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+sa.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=gl.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ft{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ft(e,t)}}class yl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Ft(Fs,e),i=new Ft(Fs,t);return 0!==this.compare(r,i)}minPost(){return Ft.MIN}}class Xd extends yl{static get __EMPTY_NODE(){return vl}static set __EMPTY_NODE(e){vl=e}compare(e,t){return ua(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ft.MIN}maxPost(){return new Ft(us,vl)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ft(e,vl)}toString(){return".key"}}const Ti=new Xd;class Si{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let aE,Cr=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Jr.EMPTY_NODE,this.right=c??Jr.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Jr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Jr.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Jr{constructor(e,t=Jr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Jr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Cr.BLACK,null,null))}remove(e){return new Jr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Cr.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Si(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Si(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Si(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Si(this.root_,null,this.comparator_,!0,e)}}function Jd(n,e){return ua(n.name,e.name)}function im(n,e){return ua(n,e)}Jr.EMPTY_NODE=new class jf{copy(e,t,r,i,a){return this}insert(e,t,r){return new Cr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const sm=function(n){return"number"==typeof n?"number:"+Hu(n):"string:"+n},om=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===aE||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===aE||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let VD,By,uE,$f=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),om(this.priorityNode_)}static set __childrenNodeConstructor(t){VD=t}static get __childrenNodeConstructor(){return VD}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Lt(t)?this:".priority"===jt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=jt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Or(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(an(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+sm(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Hu(this.value_):this.value_,this.lazyHash_=Bg(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const In=new class $D extends yl{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?ua(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ft.MIN}maxPost(){return new Ft(us,new $f("[PRIORITY-POST]",uE))}makePost(e,t){const r=By(e);return new Ft(t,new $f("[PRIORITY-POST]",r))}toString(){return".priority"}},am=Math.log(2);class HD{constructor(e){this.count=parseInt(Math.log(e+1)/am,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const eh=function(n,e,t,r){n.sort(e);const i=function(m,w){const C=w-m;let S,N;if(0===C)return null;if(1===C)return S=n[m],N=t?t(S):S,new Cr(N,S.node,Cr.BLACK,null,null);{const V=parseInt(C/2,10)+m,Z=i(m,V),ge=i(V+1,w);return S=n[V],N=t?t(S):S,new Cr(N,S.node,Cr.BLACK,Z,ge)}},h=function(m){let w=null,C=null,S=n.length;const N=function(Z,ge){const Ie=S-Z,mt=S;S-=Z;const dt=i(Ie+1,mt),lt=n[Ie],ut=t?t(lt):lt;V(new Cr(ut,lt.node,ge,null,dt))},V=function(Z){w?(w.left=Z,w=Z):(C=Z,w=Z)};for(let Z=0;Z<m.count;++Z){const ge=m.nextBitIsOne(),Ie=Math.pow(2,m.count-(Z+1));ge?N(Ie,Cr.BLACK):(N(Ie,Cr.BLACK),N(Ie,Cr.RED))}return C}(new HD(n.length));return new Jr(r||e,h)};let jy;const On={};class Ka{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(On&&In,"ChildrenNode.ts has not been loaded"),jy=jy||new Ka({".priority":On},{".priority":In}),jy}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Jr?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Ti,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Ft.Wrap);let h,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();h=i?eh(r,e.getCompare()):On;const m=e.toString(),w=Object.assign({},this.indexSet_);w[m]=e;const C=Object.assign({},this.indexes_);return C[m]=h,new Ka(C,w)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const c=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(c,"Missing index implementation for "+a),i===On){if(c.isDefinedOn(e.node)){const h=[],m=t.getIterator(Ft.Wrap);let w=m.getNext();for(;w;)w.name!==e.name&&h.push(w),w=m.getNext();return h.push(e),eh(h,c.getCompare())}return On}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new Ft(e.name,h))),m.insert(e,e.node)}});return new Ka(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===On)return i;{const a=t.get(e.name);return a?i.remove(new Ft(e.name,a)):i}});return new Ka(r,this.indexSet_)}}let Hf,Ot=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&om(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Hf||(Hf=new n(new Jr(im),null,Ka.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Hf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Hf:r}}getChild(t){const r=jt(t);return null===r?this:this.getImmediateChild(r).getChild(an(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Ft(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?Hf:this.priorityNode_;return new n(a,h,c)}}updateChild(t,r){const i=jt(t);if(null===i)return r;{(0,k.hu)(".priority"!==jt(t)||1===Or(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(an(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(In,(h,m)=>{r[h]=m.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+sm(this.getPriority().val())+":"),this.forEachChild(In,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":Bg(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new Ft(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Ft(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Ft(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Ft.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Ft.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Gf?-1:0}withIndex(t){if(t===Ti||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ti||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(In),a=r.getIterator(In);let c=i.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=a.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Ti?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Gf=new class cE extends Ot{constructor(){super(new Jr(im),Ot.EMPTY_NODE,Ka.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ot.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ft,{MIN:{value:new Ft(Fs,Ot.EMPTY_NODE)},MAX:{value:new Ft(us,Gf)}}),Xd.__EMPTY_NODE=Ot.EMPTY_NODE,$f.__childrenNodeConstructor=Ot,function aM(n){aE=n}(Gf),function jD(n){uE=n}(Gf);const GD=!0;function zn(n,e=null){if(null===n)return Ot.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new $f(n,zn(e));if(n instanceof Array||!GD){let t=Ot.EMPTY_NODE;return nr(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=zn(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(zn(e))}{const t=[];let r=!1;if(nr(n,(c,h)=>{if("."!==c.substring(0,1)){const m=zn(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Ft(c,m)))}}),0===t.length)return Ot.EMPTY_NODE;const a=eh(t,Jd,c=>c.name,im);if(r){const c=eh(t,In.getCompare());return new Ot(a,zn(e),new Ka({".priority":c},{".priority":In}))}return new Ot(a,zn(e),Ka.Default)}}!function BD(n){By=n}(zn);class $y extends yl{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Lt(e)&&".priority"!==jt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?ua(e.name,t.name):a}makePost(e,t){const r=zn(e),i=Ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ft(t,i)}maxPost(){const e=Ot.EMPTY_NODE.updateChild(this.indexPath_,Gf);return new Ft(us,e)}toString(){return ml(this.indexPath_,0).join("/")}}const dE=new class lE extends yl{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?ua(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ft.MIN}maxPost(){return Ft.MAX}makePost(e,t){const r=zn(e);return new Ft(t,r)}toString(){return".value"}},zf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",hE=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=zf.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=zf.charAt(e[i]);return(0,k.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),Gy=function(n){if(n===""+tl)return"-";const e=br(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return us;const a=zf.charAt(zf.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},zD=function(n){if(n===""+Hg)return Fs;const e=br(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+tl:(delete t[t.length-1],t.join("")):(t[t.length-1]=zf.charAt(zf.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function fE(n){return{type:"value",snapshotNode:n}}function El(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function th(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Il(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Wf{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(th(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(El(t,r)):c.trackChildChange(Il(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(In,(i,a)=>{t.hasChild(i)||r.trackChildChange(th(i,a))}),t.isLeafNode()||t.forEachChild(In,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(Il(i,a,c))}else r.trackChildChange(El(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ot.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class qf{constructor(e){this.indexedFilter_=new Wf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=qf.getStartPost_(e),this.endPost_=qf.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,c){return this.matches(new Ft(t,r))||(r=Ot.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ot.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ot.EMPTY_NODE);const a=this;return t.forEachChild(In,(c,h)=>{a.matches(new Ft(c,h))||(i=i.updateImmediateChild(c,Ot.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class zy{constructor(e){this.rangedFilter_=new qf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new Ft(t,r))||(r=Ot.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ot.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Ot.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),c++}}else{let a,c,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Ot.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(N,V)=>S(V,N)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,C=!1;for(;m.hasNext();){const S=m.getNext();!C&&h(a,S)<=0&&(C=!0),C&&w<this.limit_&&h(S,c)<=0?w++:i=i.updateImmediateChild(S.name,Ot.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(N,V)=>S(V,N)}else c=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const m=new Ft(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const V=null==N?1:c(N,m);if(C&&!r.isEmpty()&&V>=0)return a?.trackChildChange(Il(t,r,S)),h.updateImmediateChild(t,r);{a?.trackChildChange(th(t,S));const ge=h.updateImmediateChild(t,Ot.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(a?.trackChildChange(El(N.name,N.node)),ge.updateImmediateChild(N.name,N.node)):ge}}return r.isEmpty()?e:C&&c(w,m)>=0?(null!=a&&(a.trackChildChange(th(w.name,w.node)),a.trackChildChange(El(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Ot.EMPTY_NODE)):e}}class Kf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=In}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fs}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:us}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===In}copy(){const e=new Kf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Zf(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Wy(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Cl(n,e){const t=n.copy();return t.index_=e,t}function zu(n){const e={};if(n.isDefault())return e;let t;return n.index_===In?t="$priority":n.index_===dE?t="$value":n.index_===Ti?t="$key":((0,k.hu)(n.index_ instanceof $y,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Ky(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==In&&(e.i=n.index_.toString()),e}class nh extends tm{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Fd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=nh.getListenId_(e,r),h={};this.listens_[c]=h;const m=zu(e._queryParams);this.restRequest_(a+".json",m,(w,C)=>{let S=C;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,c)===h){let N;N=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(N,null)}})}unlisten(e,t){const r=nh.getListenId_(e,t);delete this.listens_[r]}get(e){const t=zu(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,c)=>{let h=c;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,k.cI)(h.responseText)}catch{Xr("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&Xr("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class qD{constructor(){this.rootNode_=Ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function lm(){return{value:null,children:new Map}}function Dl(n,e,t){if(Lt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=jt(e);n.children.has(r)||n.children.set(r,lm()),Dl(n.children.get(r),e=an(e),t)}}function Wu(n,e){if(Lt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(In,(r,i)=>{Dl(n,new Xt(r),i)}),Wu(n,e)}}if(n.children.size>0){const t=jt(e);return e=an(e),n.children.has(t)&&Wu(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Zy(n,e,t){null!==n.value?t(e,n.value):function KD(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Zy(i,new Xt(e.toString()+"/"+r),t)})}class ZD{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&nr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class QD{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ZD(e);const r=1e4+2e4*Math.random();Wa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;nr(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Wa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var hs=(()=>{return(n=hs||(hs={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",hs;var n})();function Tl(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class hm{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=hs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Lt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Xt(e));return new hm(Bt(),t,this.revert)}}return(0,k.hu)(jt(this.path)===e,"operationForChild called for unrelated child."),new hm(an(this.path),this.affectedTree,this.revert)}}class la{constructor(e,t){this.source=e,this.path=t,this.type=hs.LISTEN_COMPLETE}operationForChild(e){return Lt(this.path)?new la(this.source,Bt()):new la(this.source,an(this.path))}}class vo{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=hs.OVERWRITE}operationForChild(e){return Lt(this.path)?new vo(this.source,Bt(),this.snap.getImmediateChild(e)):new vo(this.source,an(this.path),this.snap)}}class rh{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=hs.MERGE}operationForChild(e){if(Lt(this.path)){const t=this.children.subtree(new Xt(e));return t.isEmpty()?null:t.value?new vo(this.source,Bt(),t.value):new rh(this.source,Bt(),t)}return(0,k.hu)(jt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new rh(this.source,an(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Za{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Lt(e))return this.isFullyInitialized()&&!this.filtered_;const t=jt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class XD{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Yf(n,e,t,r,i,a){const c=r.filter(h=>h.type===t);c.sort((h,m)=>function yE(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new Ft(e.childName,e.snapshotNode),i=new Ft(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),c.forEach(h=>{const m=function _E(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(m,n.query_))})})}function ih(n,e){return{eventCache:n,serverCache:e}}function Sl(n,e,t,r){return ih(new Za(e,t,r),n.serverCache)}function vE(n,e,t,r){return ih(n.eventCache,new Za(e,t,r))}function sh(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Qy;class Sn{constructor(e,t=(()=>(Qy||(Qy=new Jr(cs)),Qy))()){this.value=e,this.children=t}static fromObject(e){let t=new Sn(null);return nr(e,(r,i)=>{t=t.set(new Xt(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Bt(),value:this.value};if(Lt(e))return null;{const r=jt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(an(e),t);return null!=a?{path:gn(new Xt(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Lt(e))return this;{const t=jt(e),r=this.children.get(t);return null!==r?r.subtree(an(e)):new Sn(null)}}set(e,t){if(Lt(e))return new Sn(t,this.children);{const r=jt(e),a=(this.children.get(r)||new Sn(null)).set(an(e),t),c=this.children.insert(r,a);return new Sn(this.value,c)}}remove(e){if(Lt(e))return this.children.isEmpty()?new Sn(null):new Sn(null,this.children);{const t=jt(e),r=this.children.get(t);if(r){const i=r.remove(an(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Sn(null):new Sn(this.value,a)}return this}}get(e){if(Lt(e))return this.value;{const t=jt(e),r=this.children.get(t);return r?r.get(an(e)):null}}setTree(e,t){if(Lt(e))return t;{const r=jt(e),a=(this.children.get(r)||new Sn(null)).setTree(an(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Sn(this.value,c)}}fold(e){return this.fold_(Bt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(gn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Bt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Lt(e))return null;{const a=jt(e),c=this.children.get(a);return c?c.findOnPath_(an(e),gn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Bt(),t)}foreachOnPath_(e,t,r){if(Lt(e))return this;{this.value&&r(t,this.value);const i=jt(e),a=this.children.get(i);return a?a.foreachOnPath_(an(e),gn(t,i),r):new Sn(null)}}foreach(e){this.foreach_(Bt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(gn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Eo{constructor(e){this.writeTree_=e}static empty(){return new Eo(new Sn(null))}}function Qf(n,e,t){if(Lt(e))return new Eo(new Sn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Lr(i,e);return a=a.updateChild(c,t),new Eo(n.writeTree_.set(i,a))}{const i=new Sn(t),a=n.writeTree_.setTree(e,i);return new Eo(a)}}}function Xy(n,e,t){let r=n;return nr(t,(i,a)=>{r=Qf(r,gn(e,i),a)}),r}function wE(n,e){if(Lt(e))return Eo.empty();{const t=n.writeTree_.setTree(e,new Sn(null));return new Eo(t)}}function qu(n,e){return null!=Ai(n,e)}function Ai(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Lr(t.path,e)):null}function EE(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(In,(r,i)=>{e.push(new Ft(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Ft(r,i.value))}),e}function Ku(n,e){if(Lt(e))return n;{const t=Ai(n,e);return new Eo(null!=t?new Sn(t):n.writeTree_.subtree(e))}}function IE(n){return n.writeTree_.isEmpty()}function Xf(n,e){return Jy(Bt(),n.writeTree_,e)}function Jy(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Jy(gn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(gn(n,".priority"),r)),t}}function ev(n,e){return xE(e,n)}function nT(n,e){if(n.snap)return f(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&f(gn(n.path,t),e))return!0;return!1}function Io(n){return n.visible}function TE(n,e,t){let r=Eo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let h;if(a.snap)f(t,c)?(h=Lr(t,c),r=Qf(r,h,a.snap)):f(c,t)&&(h=Lr(c,t),r=Qf(r,Bt(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(f(t,c))h=Lr(t,c),r=Xy(r,h,a.children);else if(f(c,t))if(h=Lr(c,t),Lt(h))r=Xy(r,Bt(),a.children);else{const m=(0,k.DV)(a.children,jt(h));if(m){const w=m.getChild(an(h));r=Qf(r,Bt(),w)}}}}}return r}function tv(n,e,t,r,i){if(r||i){const a=Ku(n.visibleWrites,e);return!i&&IE(a)?t:i||null!=t||qu(a,Bt())?Xf(TE(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(f(w.path,e)||f(e,w.path))},e),t||Ot.EMPTY_NODE):null}{const a=Ai(n.visibleWrites,e);if(null!=a)return a;{const c=Ku(n.visibleWrites,e);return IE(c)?t:null!=t||qu(c,Bt())?Xf(c,t||Ot.EMPTY_NODE):null}}}function fm(n,e,t,r){return tv(n.writeTree,n.treePath,e,t,r)}function nv(n,e){return function iT(n,e,t){let r=Ot.EMPTY_NODE;const i=Ai(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(In,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Ku(n.visibleWrites,e);return t.forEachChild(In,(c,h)=>{const m=Xf(Ku(a,new Xt(c)),h);r=r.updateImmediateChild(c,m)}),EE(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return EE(Ku(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function Nt(n,e,t,r){return function sT(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=gn(e,t);if(qu(n.visibleWrites,a))return null;{const c=Ku(n.visibleWrites,a);return IE(c)?i.getChild(t):Xf(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Jf(n,e){return function aT(n,e){return Ai(n.visibleWrites,e)}(n.writeTree,gn(n.treePath,e))}function pm(n,e,t){return function oT(n,e,t,r){const i=gn(e,t),a=Ai(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Xf(Ku(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function RE(n,e){return xE(gn(n.treePath,e),n.writeTree)}function xE(n,e){return{treePath:n,writeTree:e}}class ME{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Il(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,th(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,El(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Il(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const rv=new class cT{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class iv{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Za(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pm(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wo(this.viewCache_),a=function AE(n,e,t,r,i,a){return function SE(n,e,t,r,i,a,c){let h;const m=Ku(n.visibleWrites,e),w=Ai(m,Bt());if(null!=w)h=w;else{if(null==t)return[];h=Xf(m,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const C=[],S=c.getCompare(),N=a?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let V=N.getNext();for(;V&&C.length<i;)0!==S(V,r)&&C.push(V),V=N.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Zu(n,e,t,r,i,a){const c=e.eventCache;if(null!=Jf(r,t))return e;{let h,m;if(Lt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=wo(e),S=nv(r,w instanceof Ot?w:Ot.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=fm(r,wo(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=jt(t);if(".priority"===w){(0,k.hu)(1===Or(t),"Can't have a priority with additional path components");const C=c.getNode();m=e.serverCache.getNode();const S=Nt(r,t,C,m);h=null!=S?n.filter.updatePriority(C,S):c.getNode()}else{const C=an(t);let S;if(c.isCompleteForChild(w)){m=e.serverCache.getNode();const N=Nt(r,t,c.getNode(),m);S=null!=N?c.getNode().getImmediateChild(w).updateChild(C,N):c.getNode().getImmediateChild(w)}else S=pm(r,w,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),w,S,C,i,a):c.getNode()}}return Sl(e,h,c.isFullyInitialized()||Lt(t),n.filter.filtersNodes())}}function gm(n,e,t,r,i,a,c,h){const m=e.serverCache;let w;const C=c?n.filter:n.filter.getIndexedFilter();if(Lt(t))w=C.updateFullNode(m.getNode(),r,null);else if(C.filtersNodes()&&!m.isFiltered()){const V=m.getNode().updateChild(t,r);w=C.updateFullNode(m.getNode(),V,null)}else{const V=jt(t);if(!m.isCompleteForPath(t)&&Or(t)>1)return e;const Z=an(t),Ie=m.getNode().getImmediateChild(V).updateChild(Z,r);w=".priority"===V?C.updatePriority(m.getNode(),Ie):C.updateChild(m.getNode(),V,Ie,Z,rv,null)}const S=vE(e,w,m.isFullyInitialized()||Lt(t),C.filtersNodes());return Zu(n,S,t,i,new iv(i,S,a),h)}function ep(n,e,t,r,i,a,c){const h=e.eventCache;let m,w;const C=new iv(i,e,a);if(Lt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,c),m=Sl(e,w,!0,n.filter.filtersNodes());else{const S=jt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),m=Sl(e,w,h.isFullyInitialized(),h.isFiltered());else{const N=an(t),V=h.getNode().getImmediateChild(S);let Z;if(Lt(N))Z=r;else{const ge=C.getCompleteChild(S);Z=null!=ge?".priority"===Zd(N)&&ge.getChild(_l(N)).isEmpty()?ge:ge.updateChild(N,r):Ot.EMPTY_NODE}m=V.equals(Z)?e:Sl(e,n.filter.updateChild(h.getNode(),S,Z,N,C,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function mm(n,e){return n.eventCache.isCompleteForChild(e)}function hT(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kE(n,e,t,r,i,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,m=e;w=Lt(t)?r:new Sn(null).setTree(t,r);const C=e.serverCache.getNode();return w.children.inorderTraversal((S,N)=>{if(C.hasChild(S)){const Z=hT(0,e.serverCache.getNode().getImmediateChild(S),N);m=gm(n,m,new Xt(S),Z,i,a,c,h)}}),w.children.inorderTraversal((S,N)=>{const V=!e.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!C.hasChild(S)&&!V){const ge=hT(0,e.serverCache.getNode().getImmediateChild(S),N);m=gm(n,m,new Xt(S),ge,i,a,c,h)}}),m}class dM{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Wf(r.getIndex()),a=function pE(n){return n.loadsAllData()?new Wf(n.getIndex()):n.hasLimit()?new zy(n):new qf(n)}(r);this.processor_=function lT(n){return{filter:n}}(a);const c=t.serverCache,h=t.eventCache,m=i.updateFullNode(Ot.EMPTY_NODE,c.getNode(),null),w=a.updateFullNode(Ot.EMPTY_NODE,h.getNode(),null),C=new Za(m,c.isFullyInitialized(),i.filtersNodes()),S=new Za(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=ih(S,C),this.eventGenerator_=new XD(this.query_)}get query(){return this.query_}}function gT(n,e){const t=wo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Lt(e)&&!t.getImmediateChild(jt(e)).isEmpty())?t.getChild(e):null}function sv(n){return 0===n.eventRegistrations_.length}function LE(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function ov(n,e,t,r){e.type===hs.MERGE&&null!==e.source.queryId&&((0,k.hu)(wo(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(sh(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function PE(n,e,t,r,i){const a=new ME;let c,h;if(t.type===hs.OVERWRITE){const w=t;w.source.fromUser?c=ep(n,e,w.path,w.snap,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!Lt(w.path),c=gm(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===hs.MERGE){const w=t;w.source.fromUser?c=function dT(n,e,t,r,i,a,c){let h=e;return r.foreach((m,w)=>{const C=gn(t,m);mm(e,jt(C))&&(h=ep(n,h,C,w,i,a,c))}),r.foreach((m,w)=>{const C=gn(t,m);mm(e,jt(C))||(h=ep(n,h,C,w,i,a,c))}),h}(n,e,w.path,w.children,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),c=kE(n,e,w.path,w.children,r,i,h,a))}else if(t.type===hs.ACK_USER_WRITE){const w=t;c=w.revert?function OE(n,e,t,r,i,a){let c;if(null!=Jf(r,t))return e;{const h=new iv(r,e,i),m=e.eventCache.getNode();let w;if(Lt(t)||".priority"===jt(t)){let C;if(e.serverCache.isFullyInitialized())C=fm(r,wo(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Ot,"serverChildren would be complete if leaf node"),C=nv(r,S)}w=n.filter.updateFullNode(m,C,a)}else{const C=jt(t);let S=pm(r,C,e.serverCache);null==S&&e.serverCache.isCompleteForChild(C)&&(S=m.getImmediateChild(C)),w=null!=S?n.filter.updateChild(m,C,S,an(t),h,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,Ot.EMPTY_NODE,an(t),h,a):m,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=fm(r,wo(e)),c.isLeafNode()&&(w=n.filter.updateFullNode(w,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=Jf(r,Bt()),Sl(e,w,c,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function lM(n,e,t,r,i,a,c){if(null!=Jf(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(Lt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return gm(n,e,t,m.getNode().getChild(t),i,a,h,c);if(Lt(t)){let w=new Sn(null);return m.getNode().forEachChild(Ti,(C,S)=>{w=w.set(new Xt(C),S)}),kE(n,e,t,w,i,a,h,c)}return e}{let w=new Sn(null);return r.foreach((C,S)=>{const N=gn(t,C);m.isCompleteForPath(N)&&(w=w.set(C,m.getNode().getChild(N)))}),kE(n,e,t,w,i,a,h,c)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==hs.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);c=function fT(n,e,t,r,i){const a=e.serverCache;return Zu(n,vE(e,a.getNode(),a.isFullyInitialized()||Lt(t),a.isFiltered()),t,r,rv,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function NE(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=sh(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(fE(sh(e)))}}(e,c,m),{viewCache:c,changes:m}}(n.processor_,i,e,t,r);return function cM(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,FE(n,a.changes,a.viewCache.eventCache.getNode(),null)}function FE(n,e,t,r){return function JD(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function uM(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Yf(n,i,"child_removed",e,r,t),Yf(n,i,"child_added",e,r,t),Yf(n,i,"child_moved",a,r,t),Yf(n,i,"child_changed",e,r,t),Yf(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let ym,tp;class UE{constructor(){this.views=new Map}}function vm(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),ov(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(ov(c,e,t,r));return a}}function wm(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=fm(t,i?r:null),m=!1;h?m=!0:r instanceof Ot?(h=nv(t,r),m=!1):(h=Ot.EMPTY_NODE,m=!1);const w=ih(new Za(h,m,!1),new Za(r,i,!1));return new dM(e,w)}return c}function Em(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Yu(n,e){let t=null;for(const r of n.views.values())t=t||gT(r,e);return t}function vT(n,e){return e._queryParams.loadsAllData()?Im(n):n.views.get(e._queryIdentifier)}function Al(n,e){return null!=vT(n,e)}function Ya(n){return null!=Im(n)}function Im(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let bm=1;class Rl{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Sn(null),this.pendingWriteTree_=function uT(){return{visibleWrites:Eo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function np(n,e,t,r,i){return function bE(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Qf(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?xl(n,new vo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function da(n,e,t=!1){const r=function tT(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function DE(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&nT(h,r.path)?i=!1:f(r.path,h.path)&&(a=!0)),c--}return!!i&&(a?(function rT(n){n.visibleWrites=TE(n.allWrites,Io,Bt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=wE(n.visibleWrites,r.path):nr(r.children,m=>{n.visibleWrites=wE(n.visibleWrites,gn(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Sn(null);return null!=r.snap?a=a.set(Bt(),!0):nr(r.children,c=>{a=a.set(new Xt(c),!0)}),xl(n,new hm(r.path,a,t))}return[]}function Qu(n,e,t){return xl(n,new vo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function ah(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let c=[];if(a&&("default"===e._queryIdentifier||Al(a,e))){const h=function hM(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const h=Ya(n);if("default"===i)for(const[m,w]of n.views.entries())c=c.concat(LE(w,t,r)),sv(w)&&(n.views.delete(m),w.query._queryParams.loadsAllData()||a.push(w.query));else{const m=n.views.get(i);m&&(c=c.concat(LE(m,t,r)),sv(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!Ya(n)&&a.push(new(function VE(){return(0,k.hu)(ym,"Reference.ts has not been loaded"),ym}())(e._repo,e._path)),{removed:a,events:c}}(a,e,t,r);(function yT(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=h.removed;c=h.events;const w=-1!==m.findIndex(S=>S._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(i,(S,N)=>Ya(N));if(w&&!C){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const N=function bT(n){return n.fold((e,t,r)=>{if(t&&Ya(t))return[Im(t)];{let i=[];return t&&(i=Em(t)),nr(r,(a,c)=>{i=i.concat(c)}),i}})}(S);for(let V=0;V<N.length;++V){const Z=N[V],ge=Z.query,Ie=zi(n,Z);n.listenProvider_.startListening(op(ge),ip(n,ge),Ie.hashFn,Ie.onComplete)}}}!C&&m.length>0&&!r&&(w?n.listenProvider_.stopListening(op(e),null):m.forEach(S=>{const N=n.queryToTagMap.get(Tm(S));n.listenProvider_.stopListening(op(S),N)})),function CT(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Tm(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return c}function Cm(n,e,t,r){const i=WE(n,r);if(null!=i){const a=sp(i),c=a.path,h=a.queryId,m=Lr(c,e);return Sm(n,c,new vo(Tl(h),m,t))}return[]}function $E(n,e){const t=n._path;let r=null,i=!1;e.syncPointTree_.foreachOnPath(t,(w,C)=>{const S=Lr(w,t);r=r||Yu(C,S),i=i||Ya(C)});let c,a=e.syncPointTree_.get(t);a?(i=i||Ya(a),r=r||Yu(a,Bt())):(a=new UE,e.syncPointTree_=e.syncPointTree_.set(t,a)),null!=r?c=!0:(c=!1,r=Ot.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((C,S)=>{const N=Yu(S,Bt());N&&(r=r.updateImmediateChild(C,N))}));const h=Al(a,n);if(!h&&!n._queryParams.loadsAllData()){const w=Tm(n);(0,k.hu)(!e.queryToTagMap.has(w),"View does not exist, but we have a tag");const C=function qE(){return bm++}();e.queryToTagMap.set(w,C),e.tagToQueryMap.set(C,w)}return{syncPoint:a,writesCache:ev(e.pendingWriteTree_,t),serverCache:r,serverCacheComplete:c,foundAncestorDefaultView:i,viewAlreadyExists:h}}function lv(n,e,t){const{syncPoint:r,serverCache:i,writesCache:a,serverCacheComplete:c,viewAlreadyExists:h,foundAncestorDefaultView:m}=$E(e,n);let w=function av(n,e,t,r,i,a){const c=wm(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function _m(n,e){n.eventRegistrations_.push(e)}(c,t),function mT(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(In,(a,c)=>{r.push(El(a,c))}),t.isFullyInitialized()&&r.push(fE(t.getNode())),FE(n,r,t.getNode(),e)}(c,t)}(r,e,t,a,i,c);if(!h&&!m){const C=vT(r,e);w=w.concat(function DT(n,e,t){const r=e._path,i=ip(n,e),a=zi(n,t),c=n.listenProvider_.startListening(op(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Ya(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((w,C,S)=>{if(!Lt(w)&&C&&Ya(C))return[Im(C).query];{let N=[];return C&&(N=N.concat(Em(C).map(V=>V.query))),nr(S,(V,Z)=>{N=N.concat(Z)}),N}});for(let w=0;w<m.length;++w){const C=m[w];n.listenProvider_.stopListening(op(C),ip(n,C))}}return c}(n,e,C))}return w}function Dm(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,h)=>{const w=Yu(h,Lr(c,e));if(w)return w});return tv(i,e,a,t,!0)}function xl(n,e){return GE(e,n.syncPointTree_,null,ev(n.pendingWriteTree_,Bt()))}function GE(n,e,t,r){if(Lt(n.path))return zE(n,e,t,r);{const i=e.get(Bt());null==t&&null!=i&&(t=Yu(i,Bt()));let a=[];const c=jt(n.path),h=n.operationForChild(c),m=e.children.get(c);if(m&&h){const w=t?t.getImmediateChild(c):null,C=RE(r,c);a=a.concat(GE(h,m,w,C))}return i&&(a=a.concat(vm(i,n,r,t))),a}}function zE(n,e,t,r){const i=e.get(Bt());null==t&&null!=i&&(t=Yu(i,Bt()));let a=[];return e.children.inorderTraversal((c,h)=>{const m=t?t.getImmediateChild(c):null,w=RE(r,c),C=n.operationForChild(c);C&&(a=a.concat(zE(C,h,m,w)))}),i&&(a=a.concat(vm(i,n,r,t))),a}function zi(n,e){const t=e.query,r=ip(n,t);return{hashFn:()=>(function pT(n){return n.viewCache_.serverCache.getNode()}(e)||Ot.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function cv(n,e,t){const r=WE(n,t);if(r){const i=sp(r),a=i.path,c=i.queryId,h=Lr(a,e);return Sm(n,a,new la(Tl(c),h))}return[]}(n,t._path,r):function uv(n,e){return xl(n,new la({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function ky(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return ah(n,t,null,a)}}}}function ip(n,e){const t=Tm(e);return n.queryToTagMap.get(t)}function Tm(n){return n._path.toString()+"$"+n._queryIdentifier}function WE(n,e){return n.tagToQueryMap.get(e)}function sp(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Xt(n.substr(0,e))}}function Sm(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),vm(r,t,ev(n.pendingWriteTree_,e),null)}function op(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function ET(){return(0,k.hu)(tp,"Reference.ts has not been loaded"),tp}())(n._repo,n._path):n}class dv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new dv(t)}node(){return this.node_}}class ap{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=gn(this.path_,e);return new ap(this.syncTree_,t)}node(){return Dm(this.syncTree_,this.path_)}}const TT=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},KE=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?ST(n[".sv"],e,t):"object"==typeof n[".sv"]?AT(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},ST=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},AT=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},ZE=function(n,e,t,r){return up(e,new ap(t,n),r)},Vs=function(n,e,t){return up(n,new dv(e),t)};function up(n,e,t){const r=n.getPriority().val(),i=KE(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,h=KE(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new $f(h,zn(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new $f(i))),c.forEachChild(In,(h,m)=>{const w=up(m,e.getImmediateChild(h),t);w!==m&&(a=a.updateImmediateChild(h,w))}),a}}class hv{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Am(n,e){let t=e instanceof Xt?e:new Xt(e),r=n,i=jt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new hv(i,r,a),t=an(t),i=jt(t)}return r}function Xu(n){return n.node.value}function fv(n,e){n.node.value=e,ch(n)}function YE(n){return n.node.childCount>0}function uh(n,e){nr(n.node.children,(t,r)=>{e(new hv(t,n,r))})}function QE(n,e,t,r){t&&!r&&e(n),uh(n,i=>{QE(i,e,!0,r)}),t&&r&&e(n)}function Ju(n){return new Xt(null===n.parent?n.name:Ju(n.parent)+"/"+n.name)}function ch(n){null!==n.parent&&function Rm(n,e,t){const r=function RT(n){return void 0===Xu(n)&&!YE(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,ch(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,ch(n))}(n.parent,n.name,n)}const fM=/[\[\].#$\/\u0000-\u001F\u007F]/,pv=/[\[\].#$\u0000-\u001F\u007F]/,XE=10485760,cp=function(n){return"string"==typeof n&&0!==n.length&&!fM.test(n)},gv=function(n){return"string"==typeof n&&0!==n.length&&!pv.test(n)},lh=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Jc(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Bs=function(n,e,t,r){r&&void 0===e||fs((0,k.gK)(n,"value"),e,t)},fs=function(n,e,t){const r=t instanceof Xt?new g(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+K(r));if("function"==typeof e)throw new Error(n+"contains a function "+K(r)+" with contents = "+e.toString());if(Jc(e))throw new Error(n+"contains "+e.toString()+" "+K(r));if("string"==typeof e&&e.length>XE/3&&(0,k.ug)(e)>XE)throw new Error(n+"contains a string greater than "+XE+" utf8 bytes "+K(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(nr(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!cp(c)))throw new Error(n+" contains an invalid key ("+c+") "+K(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function E(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),P(n)})(r,c),fs(n,h,r),function R(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+K(r)+" in addition to actual children.")}},lp=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];nr(e,(c,h)=>{const m=new Xt(c);if(fs(i,h,gn(t,m)),".priority"===Zd(m)&&!lh(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=ml(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!cp(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(rm);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&f(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Ml=function(n,e,t){if(!t||void 0!==e){if(Jc(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lh(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dp=function(n,e,t,r){if(!(r&&void 0===t||cp(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},dh=function(n,e,t,r){if(!(r&&void 0===t||gv(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},eI=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),dh(n,e,t,r)},js=function(n,e){if(".info"===jt(e))throw new Error(n+" failed = Can't modify data under /.info/")},tI=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!cp(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gv(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class hp{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Mm(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!y(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function MT(n,e,t){Mm(n,t),nI(n,r=>y(r,e))}function $s(n,e,t){Mm(n,t),nI(n,r=>f(r,e)||f(e,r))}function nI(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(PT(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function PT(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();$u&&Ir("event: "+t.toString()),go(r)}}}const rI="repo_interrupt",NT=25;class kT{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lm(),this.transactionQueueTree_=new hv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mv(n){const t=n.infoData_.getNode(new Xt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function hh(n){return TT({timestamp:mv(n)})}function iI(n,e,t,r,i){n.dataUpdateCount++;const a=new Xt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const m=(0,k.UI)(t,w=>zn(w));c=function IT(n,e,t,r){const i=WE(n,r);if(i){const a=sp(i),c=a.path,h=a.queryId,m=Lr(c,e),w=Sn.fromObject(t);return Sm(n,c,new rh(Tl(h),m,w))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=zn(t);c=Cm(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,k.UI)(t,w=>zn(w));c=function BE(n,e,t){const r=Sn.fromObject(t);return xl(n,new rh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=zn(t);c=Qu(n.serverSyncTree_,a,m)}let h=a;c.length>0&&(h=Gs(n,a)),$s(n.eventQueue_,h,c)}function Pm(n,e){_v(n,"connected",e),!1===e&&function VT(n){Pl(n,"onDisconnectEvents");const e=hh(n),t=lm();Zy(n.onDisconnect_,Bt(),(i,a)=>{const c=ZE(i,a,n.serverSyncTree_,e);Dl(t,i,c)});let r=[];Zy(t,Bt(),(i,a)=>{r=r.concat(Qu(n.serverSyncTree_,i,a));const c=tc(n,i);Gs(n,c)}),n.onDisconnect_=lm(),$s(n.eventQueue_,Bt(),r)}(n)}function _v(n,e,t){const r=new Xt("/.info/"+e),i=zn(t);n.infoData_.updateSnapshot(r,i);const a=Qu(n.infoSyncTree_,r,i);$s(n.eventQueue_,r,a)}function Nm(n){return n.nextWriteId_++}function FT(n,e){const t=function HE(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,C)=>{const S=Lr(w,t);r=r||Yu(C,S)});let i=n.syncPointTree_.get(t);i?r=r||Yu(i,Bt()):(i=new UE,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new Za(r,!0,!1):null;return function oh(n){return sh(n.viewCache_)}(wm(i,e,ev(n.pendingWriteTree_,e._path),a?c.getNode():Ot.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=zn(r).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())Qu(n.serverSyncTree_,e._path,i);else{const c=function jE(n,e){const{syncPoint:t,serverCache:r,writesCache:i,serverCacheComplete:a}=$E(e,n),c=wm(t,e,i,r,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),e._queryParams.loadsAllData()?null:ip(n,e)}(n.serverSyncTree_,e);Cm(n.serverSyncTree_,e._path,i,c)}return ah(n.serverSyncTree_,e,null).length>0&&Pl(n,"unexpected cancel events in repoGetValue"),i},r=>(Pl(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}function yv(n,e,t,r,i){Pl(n,"set",{path:e.toString(),value:t,priority:r});const a=hh(n),c=zn(t,r),h=Dm(n.serverSyncTree_,e),m=Vs(c,h,a),w=Nm(n),C=np(n.serverSyncTree_,e,m,w,!0);Mm(n.eventQueue_,C),n.server_.put(e.toString(),c.val(!0),(N,V)=>{const Z="ok"===N;Z||Xr("set at "+e+" failed: "+N);const ge=da(n.serverSyncTree_,w,!Z);$s(n.eventQueue_,e,ge),ha(0,i,N,V)});const S=tc(n,e);Gs(n,S),$s(n.eventQueue_,S,[])}function sI(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Wu(n.onDisconnect_,e),ha(0,t,r,i)})}function vv(n,e,t,r){const i=zn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&Dl(n.onDisconnect_,e,i),ha(0,r,a,c)})}function aI(n,e,t){let r;r=".info"===jt(e._path)?ah(n.infoSyncTree_,e,t):ah(n.serverSyncTree_,e,t),MT(n.eventQueue_,e._path,r)}function fp(n){n.persistentConnection_&&n.persistentConnection_.interrupt(rI)}function Pl(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ir(t,...e)}function ha(n,e,t,r){e&&go(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function Hs(n,e,t){return Dm(n.serverSyncTree_,e,t)||Ot.EMPTY_NODE}function ec(n,e=n.transactionQueueTree_){if(e||Qa(n,e),Xu(e)){const t=Om(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function ui(n,e,t){const r=t.map(w=>w.currentWriteId),i=Hs(n,e,r);let a=i;const c=i.hash();for(let w=0;w<t.length;w++){const C=t[w];(0,k.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const S=Lr(e,C.path);a=a.updateChild(S,C.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,w=>{Pl(n,"transaction put response",{path:m.toString(),status:w});let C=[];if("ok"===w){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,C=C.concat(da(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();Qa(n,Am(n.transactionQueueTree_,e)),ec(n,n.transactionQueueTree_),$s(n.eventQueue_,e,C);for(let N=0;N<S.length;N++)go(S[N])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Xr("transaction at "+m.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}Gs(n,e)}},c)}(n,Ju(e),t)}else YE(e)&&uh(e,t=>{ec(n,t)})}function Gs(n,e){const t=ps(n,e),r=Ju(t);return function km(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],w=Lr(t,m.path);let S,C=!1;if((0,k.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,S=m.abortReason,i=i.concat(da(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=NT)C=!0,S="maxretry",i=i.concat(da(n.serverSyncTree_,m.currentWriteId,!0));else{const N=Hs(n,m.path,c);m.currentInputSnapshot=N;const V=e[h].update(N.val());if(void 0!==V){fs("transaction failed: Data returned ",V,m.path);let Z=zn(V);"object"==typeof V&&null!=V&&(0,k.r3)(V,".priority")||(Z=Z.updatePriority(N.getPriority()));const Ie=m.currentWriteId,mt=hh(n),dt=Vs(Z,N,mt);m.currentOutputSnapshotRaw=Z,m.currentOutputSnapshotResolved=dt,m.currentWriteId=Nm(n),c.splice(c.indexOf(Ie),1),i=i.concat(np(n.serverSyncTree_,m.path,dt,m.currentWriteId,m.applyLocally)),i=i.concat(da(n.serverSyncTree_,Ie,!0))}else C=!0,S="nodata",i=i.concat(da(n.serverSyncTree_,m.currentWriteId,!0))}$s(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}Qa(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)go(r[h]);ec(n,n.transactionQueueTree_)}(n,Om(n,t),r),r}function ps(n,e){let t,r=n.transactionQueueTree_;for(t=jt(e);null!==t&&void 0===Xu(r);)r=Am(r,t),t=jt(e=an(e));return r}function Om(n,e){const t=[];return Nl(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Nl(n,e,t){const r=Xu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);uh(e,i=>{Nl(n,i,t)})}function Qa(n,e){const t=Xu(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,fv(e,t.length>0?t:void 0)}uh(e,r=>{Qa(n,r)})}function tc(n,e){const t=Ju(ps(n,e)),r=Am(n.transactionQueueTree_,e);return function xT(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{nc(n,i)}),nc(n,r),QE(r,i=>{nc(n,i)}),t}function nc(n,e){const t=Xu(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,k.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,k.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(da(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?fv(e,void 0):t.length=a+1,$s(n.eventQueue_,Ju(e),i);for(let c=0;c<r.length;c++)go(r[c])}}const rc=function(n,e){const t=gh(n),r=t.namespace;return"firebase.com"===t.domain&&po(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&po("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Xr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new sl(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Xt(t.pathString)}},gh=function(n){let e="",t="",r="",i="",a="",c=!0,h="https",m=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let C=n.indexOf("/");-1===C&&(C=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(C,S)),C<S&&(i=function fh(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,S)));const N=function ph(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(c="https"===h||"wss"===h,m=parseInt(e.substring(w+1),10)):w=e.length;const V=e.slice(0,w);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:a}};class kl{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class wv{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ev{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Iv{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return sI(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){js("OnDisconnect.remove",this._path);const e=new k.BH;return vv(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){js("OnDisconnect.set",this._path),Bs("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return vv(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){js("OnDisconnect.setWithPriority",this._path),Bs("OnDisconnect.setWithPriority",e,this._path,!1),Ml("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function BT(n,e,t,r,i){const a=zn(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,h)=>{"ok"===c&&Dl(n.onDisconnect_,e,a),ha(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){js("OnDisconnect.update",this._path),lp("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function pM(n,e,t,r){if((0,k.xb)(t))return Ir("onDisconnect().update() called with empty data.  Don't do anything."),void ha(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&nr(t,(c,h)=>{const m=zn(h);Dl(n.onDisconnect_,gn(e,c),m)}),ha(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ri{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Lt(this._path)?null:Zd(this._path)}get ref(){return new gs(this._repo,this._path)}get _queryIdentifier(){const e=Ky(this._queryParams),t=Cf(e);return"{}"===t?"default":t}get _queryObject(){return Ky(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof Ri))return!1;const t=this._repo===e._repo,r=y(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Yd(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function pp(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Xa(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ti){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Fs)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==us)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===In){if(null!=e&&!lh(e)||null!=t&&!lh(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof $y||n.getIndex()===dE,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function gp(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class gs extends Ri{constructor(e,t){super(e,t,new Kf,!1)}get parent(){const e=_l(this._path);return null===e?null:new gs(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ic{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Xt(e),r=sc(this.ref,e);return new ic(this._node.getChild(t),r,In)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new ic(i,sc(this.ref,r),In)))}hasChild(e){const t=new Xt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function uI(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?sc(n._root,e):n._root}function cI(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=rc(e,n._repo.repoInfo_.nodeAdmin);tI("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&po("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),uI(n,t.path.toString())}function sc(n,e){return null===jt((n=(0,k.m9)(n))._path)?eI("child","path",e,!1):dh("child","path",e,!1),new gs(n._repo,gn(n._path,e))}function mp(n,e){n=(0,k.m9)(n),js("set",n._path),Bs("set",e,n._path,!1);const t=new k.BH;return yv(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Fm(n,e){lp("update",e,n._path,!1);const t=new k.BH;return function UT(n,e,t,r){Pl(n,"update",{path:e.toString(),value:t});let i=!0;const a=hh(n),c={};if(nr(t,(h,m)=>{i=!1,c[h]=ZE(gn(e,h),zn(m),n.serverSyncTree_,a)}),i)Ir("update() called with empty data.  Don't do anything."),ha(0,r,"ok",void 0);else{const h=Nm(n),m=function rp(n,e,t,r){!function CE(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Xy(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Sn.fromObject(t);return xl(n,new rh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);Mm(n.eventQueue_,m),n.server_.merge(e.toString(),t,(w,C)=>{const S="ok"===w;S||Xr("update at "+e+" failed: "+w);const N=da(n.serverSyncTree_,h,!S),V=N.length>0?Gs(n,e):e;$s(n.eventQueue_,V,N),ha(0,r,w,C)}),nr(t,w=>{const C=tc(n,gn(e,w));Gs(n,C)}),$s(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class Um{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new kl("value",this,new ic(e.snapshotNode,new gs(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wv(this,e,t):null}matches(e){return e instanceof Um&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class mh{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wv(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=sc(new gs(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new kl(e.type,this,new ic(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof mh&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ol(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,w=(C,S)=>{aI(n._repo,n,h),m(C,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const c=new Ev(t,a||void 0),h="value"===e?new Um(c):new mh(e,c);return function oI(n,e,t){let r;r=".info"===jt(e._path)?lv(n.infoSyncTree_,e,t):lv(n.serverSyncTree_,e,t),MT(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>aI(n._repo,n,h)}function Vm(n,e,t,r){return Ol(n,"value",e,t,r)}function lI(n,e,t,r){return Ol(n,"child_added",e,t,r)}function Bm(n,e,t,r){return Ol(n,"child_changed",e,t,r)}function Dv(n,e,t,r){return Ol(n,"child_moved",e,t,r)}function Tv(n,e,t,r){return Ol(n,"child_removed",e,t,r)}function jm(n,e,t){let r=null;const i=t?new Ev(t):null;"value"===e?r=new Um(i):e&&(r=new mh(e,i)),aI(n._repo,n,r)}class zs{}class dI extends zs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bs("endAt",this._value,e._path,!0);const t=Wy(e._queryParams,this._value,this._key);if(gp(t),Xa(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ri(e._repo,e._path,t,e._orderByCalled)}}class fI extends zs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bs("endBefore",this._value,e._path,!1);const t=function qy(n,e,t){let r,i;return n.index_===Ti?("string"==typeof e&&(e=zD(e)),i=Wy(n,e,t)):(r=null==t?Fs:zD(t),i=Wy(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(gp(t),Xa(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ri(e._repo,e._path,t,e._orderByCalled)}}class gI extends zs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bs("startAt",this._value,e._path,!0);const t=Zf(e._queryParams,this._value,this._key);if(gp(t),Xa(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ri(e._repo,e._path,t,e._orderByCalled)}}class WT extends zs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bs("startAfter",this._value,e._path,!1);const t=function cm(n,e,t){let r;if(n.index_===Ti)"string"==typeof e&&(e=Gy(e)),r=Zf(n,e,t);else{let i;i=null==t?us:Gy(t),r=Zf(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(gp(t),Xa(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ri(e._repo,e._path,t,e._orderByCalled)}}class mI extends zs{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ri(e._repo,e._path,function bl(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class _I extends zs{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ri(e._repo,e._path,function WD(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class vI extends zs{constructor(e){super(),this._path=e}_apply(e){pp(e,"orderByChild");const t=new Xt(this._path);if(Lt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new $y(t),i=Cl(e._queryParams,r);return Xa(i),new Ri(e._repo,e._path,i,!0)}}class EI extends zs{_apply(e){pp(e,"orderByKey");const t=Cl(e._queryParams,Ti);return Xa(t),new Ri(e._repo,e._path,t,!0)}}class bI extends zs{_apply(e){pp(e,"orderByPriority");const t=Cl(e._queryParams,In);return Xa(t),new Ri(e._repo,e._path,t,!0)}}class Hm extends zs{_apply(e){pp(e,"orderByValue");const t=Cl(e._queryParams,dE);return Xa(t),new Ri(e._repo,e._path,t,!0)}}class KT extends zs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Bs("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new dI(this._value,this._key)._apply(new gI(this._value,this._key)._apply(e))}}function ms(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function _T(n){(0,k.hu)(!ym,"__referenceConstructor has already been defined"),ym=n})(gs),function wT(n){(0,k.hu)(!tp,"__referenceConstructor has already been defined"),tp=n}(gs);const Ll="FIREBASE_DATABASE_EMULATOR_HOST",_p={};let DI=!1;function YT(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||po("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ir("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,w,c=rc(a,i),h=c.repoInfo;typeof process<"u"&&process.env&&(w=process.env[Ll]),w?(m=!0,a=`http://${w}?ns=${h.namespace}`,c=rc(a,i),h=c.repoInfo):m=!c.repoInfo.secure;const C=i&&m?new rl(rl.OWNER):new nl(n.name,n.options,e);tI("Invalid Firebase Database URL",c),Lt(c.path)||po("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function QT(n,e,t,r){let i=_p[e.name];i||(i={},_p[e.name]=i);let a=i[n.toURLString()];return a&&po("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new kT(n,DI,t,r),i[n.toURLString()]=a,a}(h,n,C,new Nr(n.name,t));return new TI(S,n)}class TI{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function OT(n,e,t){if(n.stats_=cl(n.repoInfo_),n.forceRestClient_||Sf())n.server_=new nh(n.repoInfo_,(r,i,a,c)=>{iI(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Pm(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new yo(n.repoInfo_,e,(r,i,a,c)=>{iI(n,r,i,a,c)},r=>{Pm(n,r)},r=>{!function LT(n,e){nr(e,(t,r)=>{_v(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function ca(n,e){const t=n.toString();return ul[t]||(ul[t]=e()),ul[t]}(n.repoInfo_,()=>new QD(n.stats_,n.server_)),n.infoData_=new qD,n.infoSyncTree_=new Rl({startListening:(r,i,a,c)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=Qu(n.infoSyncTree_,r._path,m),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),_v(n,"connected",!1),n.serverSyncTree_=new Rl({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(h,m)=>{const w=c(h,m);$s(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gs(this._repo,Bt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function mM(n,e){const t=_p[e];(!t||t[n.key]!==n)&&po(`Database ${e}(${n.repoInfo_}) has already been deleted.`),fp(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&po("Cannot call "+e+" on a deleted database.")}}function SI(){zd.IS_TRANSPORT_INITIALIZED&&Xr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Dr(){SI(),ai.forceDisallow()}function AI(){SI(),ds.forceDisallow(),ai.forceAllow()}function xI(n,e){Ld(n,e)}const _h={".sv":"timestamp"};class PI{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}yo.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},yo.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function MI(n){Di(on.SDK_VERSION),(0,on._registerComponent)(new st.wA("database",(e,{instanceIdentifier:t})=>YT(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,on.registerVersion)(ks,"0.13.3",n),(0,on.registerVersion)(ks,"0.13.3","esm2017")}();const fa=new Er.Yd("@firebase/database-compat"),OI=function(n){fa.warn("FIREBASE WARNING: "+n)};class bo{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,OI("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Co{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ja{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),dh("DataSnapshot.child","path",e,!1),new Ja(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),dh("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ja(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new _s(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Fr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const c=Fr.getCancelAndContextArgs_("Query.on",r,i),h=(w,C)=>{t.call(c.context,new Ja(this.database,w),C)};h.userCallback=t,h.context=c.context;const m=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return Vm(this._delegate,h,m),t;case"child_added":return lI(this._delegate,h,m),t;case"child_removed":return Tv(this._delegate,h,m),t;case"child_changed":return Bm(this._delegate,h,m),t;case"child_moved":return Dv(this._delegate,h,m),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,jm(this._delegate,e,i)}else jm(this._delegate,e)}get(){return function Cv(n){return FT((n=(0,k.m9)(n))._repo,n).then(e=>new ic(e,new gs(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new Ja(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Fr.getCancelAndContextArgs_("Query.once",r,i),c=new k.BH,h=(w,C)=>{const S=new Ja(this.database,w);t&&t.call(a.context,S,C),c.resolve(S)};h.userCallback=t,h.context=a.context;const m=w=>{a.cancel&&a.cancel.call(a.context,w),c.reject(w)};switch(e){case"value":Vm(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":lI(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":Tv(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":Bm(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":Dv(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Fr(this.database,ms(this._delegate,function $m(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new mI(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Fr(this.database,ms(this._delegate,function yI(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new _I(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Fr(this.database,ms(this._delegate,function wI(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return dh("orderByChild","path",n,!1),new vI(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Fr(this.database,ms(this._delegate,function II(){return new EI}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Fr(this.database,ms(this._delegate,function CI(){return new bI}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Fr(this.database,ms(this._delegate,function oc(){return new Hm}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Fr(this.database,ms(this._delegate,function zT(n=null,e){return dp("startAt","key",e,!0),new gI(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Fr(this.database,ms(this._delegate,function qT(n,e){return dp("startAfter","key",e,!0),new WT(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Fr(this.database,ms(this._delegate,function hI(n,e){return dp("endAt","key",e,!0),new dI(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Fr(this.database,ms(this._delegate,function pI(n,e){return dp("endBefore","key",e,!0),new fI(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Fr(this.database,ms(this._delegate,function ZT(n,e){return dp("equalTo","key",e,!0),new KT(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Fr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new _s(this.database,new gs(this._delegate._repo,this._delegate._path))}}class _s extends Fr{constructor(e,t){super(e,new Ri(t._repo,t._path,new Kf,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new _s(this.database,sc(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new _s(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new _s(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=mp(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,OI("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}js("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=Fm(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Lm(n,e,t){if(js("setWithPriority",n._path),Bs("setWithPriority",e,n._path,!1),Ml("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return yv(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function bv(n){return js("remove",n._path),mp(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function rS(n,e,t){var r;if(n=(0,k.m9)(n),js("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new k.BH,h=Vm(n,()=>{});return function $T(n,e,t,r,i,a){Pl(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:Ef(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Hs(n,e,void 0);c.currentInputSnapshot=h;const m=c.update(h.val());if(void 0===m)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{fs("transaction failed: Data returned ",m,c.path),c.status=0;const w=Am(n.transactionQueueTree_,e),C=Xu(w)||[];let S;C.push(c),fv(w,C),"object"==typeof m&&null!==m&&(0,k.r3)(m,".priority")?(S=(0,k.DV)(m,".priority"),(0,k.hu)(lh(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Dm(n.serverSyncTree_,e)||Ot.EMPTY_NODE).getPriority().val();const N=hh(n),V=zn(m,S),Z=Vs(V,h,N);c.currentOutputSnapshotRaw=V,c.currentOutputSnapshotResolved=Z,c.currentWriteId=Nm(n);const ge=np(n.serverSyncTree_,e,Z,c.currentWriteId,c.applyLocally);$s(n.eventQueue_,e,ge),ec(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,w,C)=>{let S=null;m?a.reject(m):(S=new ic(C,new gs(n._repo,n._path),In),a.resolve(new PI(w,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Co(a.committed,new Ja(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function GT(n,e){n=(0,k.m9)(n),js("setPriority",n._path),Ml("setPriority",e,!1);const t=new k.BH;return yv(n._repo,gn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function HT(n,e){n=(0,k.m9)(n),js("push",n._path),Bs("push",e,n._path,!0);const t=mv(n._repo),r=hE(t),i=sc(n,r),a=sc(n,r);let c;return c=null!=e?mp(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new _s(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new _s(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return js("Reference.onDisconnect",this._delegate._path),new bo(new Iv(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class yp{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Dr,forceLongPolling:AI}}useEmulator(e,t,r={}){!function JT(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&po("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&po('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new rl(rl.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new rl(c)}!function Sv(n,e,t,r){n.repoInfo_=new sl(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof _s){const t=cI(this._delegate,e.toString());return new _s(this,t)}{const t=uI(this._delegate,e);return new _s(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=cI(this._delegate,e);return new _s(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function RI(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),fp(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function eS(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function jT(n){n.persistentConnection_&&n.persistentConnection_.resume(rI)}(n._repo)}(this._delegate)}}yp.ServerValue={TIMESTAMP:function tS(){return _h}(),increment:n=>function nS(n){return{".sv":{increment:n}}}(n)};var aS=Object.freeze({__proto__:null,initStandalone:function oS({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Di(t);const c=new st.zt("auth-internal",new st.H0("database-standalone"));return c.setComponent(new st.wA("auth-internal",()=>r,"PRIVATE")),{instance:new yp(YT(n,c,void 0,e,a),n),namespace:i}}});const Av=yp.ServerValue;!function vp(n){n.INTERNAL.registerComponent(new st.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new yp(i,r)},"PUBLIC").setServiceProps({Reference:_s,Query:Fr,Database:yp,DataSnapshot:Ja,enableLogging:xI,INTERNAL:aS,ServerValue:Av}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.3")}(Tt.Z);var ac=L(7579),wp=L(5363),uS=L(6063);class cS extends ac.x{constructor(e=1/0,t=1/0,r=uS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=c;m+=2)h=m;h&&r.splice(0,h+1)}}}function Rv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Qc.B)({connector:()=>new cS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Fl=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Do(n,e){return(0,Tn.e)((t,r)=>{let i=0;t.subscribe((0,kn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var eu=L(515);function Ul(n){return n<=0?()=>eu.E:(0,Tn.e)((e,t)=>{let r=0;e.subscribe((0,kn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ep(n){return(0,Tn.e)((e,t)=>{let r=!1;e.subscribe((0,kn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ip(n=FI){return(0,Tn.e)((e,t)=>{let r=!1;e.subscribe((0,kn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function FI(){return new Fl}function ga(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Do((i,a)=>n(i,a,r)):x.y,Ul(1),t?Ep(e):Ip(()=>new Fl))}var Gm=L(576);function xv(n,e){return(0,Gm.m)(e)?vn(()=>n,e):vn(()=>n)}var zm=L(9468);L(5867);const VI=new Map,fS={activated:!1,tokenObservers:[]},pS={initialized:!1,enabled:!1};function Tr(n){return VI.get(n)||fS}function Ws(n,e){VI.set(n,e)}function Cp(){return pS}const Wm="https://content-firebaseappcheck.googleapis.com/v1",$I="exchangeDebugToken",Nv={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class GI{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ue.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function zI(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const xi=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function qI(n,e){return Km.apply(this,arguments)}function Km(){return(Km=(0,ue.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const V=yield c.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const h={method:"POST",body:JSON.stringify(e),headers:a};let m,w;try{m=yield fetch(n,h)}catch(V){throw xi.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==m.status)throw xi.create("fetch-status-error",{httpStatus:m.status});try{w=yield m.json()}catch(V){throw xi.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const C=w.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw xi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const S=1e3*Number(C[1]),N=Date.now();return{token:w.token,expireTimeMillis:N+S,issuedAtTimeMillis:N}})).apply(this,arguments)}const gS="firebase-app-check-database",mS=1,Dp="firebase-app-check-store";let Zm=null;function kv(n,e){return Ov.apply(this,arguments)}function Ov(){return(Ov=(0,ue.Z)(function*(n,e){const r=(yield function Tp(){return Zm||(Zm=new Promise((n,e)=>{var t;try{const r=indexedDB.open(gS,mS);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(xi.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Dp,{keyPath:"compositeKey"})}}catch(r){e(xi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Zm)}()).transaction(Dp,"readwrite"),a=r.objectStore(Dp).put({compositeKey:n,value:e});return new Promise((c,h)=>{a.onsuccess=m=>{c()},r.onerror=m=>{var w;h(xi.create("storage-set",{originalErrorMessage:null===(w=m.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const vh=new Er.Yd("@firebase/app-check");function YI(n,e){return(0,k.hl)()?function Yn(n,e){return kv(function Fv(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{vh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function XI(){return wh.apply(this,arguments)}function wh(){return(wh=(0,ue.Z)(function*(){const n=Cp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const eb={error:"UNKNOWN_ERROR"};function tb(n){return k.US.encodeString(JSON.stringify(n),!1)}function Xm(n){return $l.apply(this,arguments)}function $l(){return($l=(0,ue.Z)(function*(n,e=!1){const t=n.app;!function Bl(n){if(!Tr(n).activated)throw xi.create("use-before-activation",{appName:n.name})}(t);const r=Tr(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&Ap(m)&&(i=m)}if(!e&&i&&Ap(i))return{token:i.token};let h,c=!1;if(function QI(){return Cp().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qI(function Dt(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Wm}/projects/${t}/apps/${r}:${$I}?key=${i}`,body:{debug_token:e}}}(t,yield XI()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),c=!0);const m=yield r.exchangeTokenPromise;return yield YI(t,m),Ws(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),c=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?vh.warn(m.message):vh.error(m),a=m}return i?(h={token:i.token},Ws(t,Object.assign(Object.assign({},r),{token:i})),yield YI(t,i)):h=function rb(n){return{token:tb(eb),error:n}}(a),c&&function jv(n,e){const t=Tr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function Bv(n,e){const t=Tr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ws(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function nb(n){const{app:e}=n,t=Tr(e);let r=t.tokenRefresher;r||(r=function yS(n){const{app:e}=n;return new GI((0,ue.Z)(function*(){let r;if(r=Tr(e).token?yield Xm(n,!0):yield Xm(n),r.error)throw r.error}),()=>!0,()=>{const t=Tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Nv.RETRIAL_MIN_WAIT,Nv.RETRIAL_MAX_WAIT)}(n),Ws(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ap(n){return n.expireTimeMillis-Date.now()>0}class vS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Tr(this.app);for(const t of e)Bv(this.app,t.next);return Promise.resolve()}}const hb="app-check-internal";!function fb(){(0,on._registerComponent)(new st.wA("app-check",n=>function ib(n,e){return new vS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(hb).initialize()})),(0,on._registerComponent)(new st.wA(hb,n=>function wS(n){return{getToken:e=>Xm(n,e),addTokenListener:e=>function Hl(n,e,t,r){const{app:i}=n,a=Tr(i),c={next:t,error:r,type:e};if(Ws(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&Ap(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),nb(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>nb(n))}(n,"INTERNAL",e),removeTokenListener:e=>Bv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,on.registerVersion)("@firebase/app-check","0.5.12")}();class Mp{constructor(){return(0,qe.vb)("app-check")}}typeof window<"u"&&window;var Gv=L(127);const r_=new _.OlP("angularfire2.auth.use-emulator"),zv=new _.OlP("angularfire2.auth.settings"),Wv=new _.OlP("angularfire2.auth.tenant-id"),i_=new _.OlP("angularfire2.auth.langugage-code"),qv=new _.OlP("angularfire2.auth.use-device-language"),Kv=new _.OlP("angularfire.auth.persistence"),Zv=(n,e,t,r,i,a,c,h)=>(0,rn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),c)for(const[w,C]of Object.entries(c))m.settings[w]=C;return h&&m.setPersistence(h),m},[t,r,i,a,c,h]);let Pp=(()=>{class n{constructor(t,r,i,a,c,h,m,w,C,S,N,V){const Z=new ac.x,ge=it(void 0).pipe((0,wp.Q)(c.outsideAngular),vn(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,1451)))),(0,vt.U)(()=>(0,rn.on)(t,a,r)),(0,vt.U)(Ie=>Zv(Ie,a,h,w,C,S,m,N)),Rv({bufferSize:1,refCount:!1}));if(hu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{ge.pipe(ga()).subscribe();const mt=ge.pipe(vn(ut=>ut.getRedirectResult().then(xt=>xt,()=>null)),qe.iC,Rv({bufferSize:1,refCount:!1})),dt=ge.pipe(vn(ut=>new bi.y(xt=>({unsubscribe:a.runOutsideAngular(()=>ut.onAuthStateChanged(Jt=>xt.next(Jt),Jt=>xt.error(Jt),()=>xt.complete()))})))),lt=ge.pipe(vn(ut=>new bi.y(xt=>({unsubscribe:a.runOutsideAngular(()=>ut.onIdTokenChanged(Jt=>xt.next(Jt),Jt=>xt.error(Jt),()=>xt.complete()))}))));this.authState=mt.pipe(xv(dt),(0,zm.R)(c.outsideAngular),(0,wp.Q)(c.insideAngular)),this.user=mt.pipe(xv(lt),(0,zm.R)(c.outsideAngular),(0,wp.Q)(c.insideAngular)),this.idToken=this.user.pipe(vn(ut=>ut?(0,Ht.D)(ut.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(vn(ut=>ut?(0,Ht.D)(ut.getIdTokenResult()):it(null))),this.credential=(0,Ci.T)(mt,Z,this.authState.pipe(Do(ut=>!ut))).pipe((0,vt.U)(ut=>ut?.user?ut:null),(0,zm.R)(c.outsideAngular),(0,wp.Q)(c.insideAngular))}return(0,rn.pX)(this,ge,a,{spy:{apply:(Ie,mt,dt)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&dt.then(lt=>Z.next(lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(rn.Dh),_.LFG(rn.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(qe.HU),_.LFG(r_,8),_.LFG(zv,8),_.LFG(Wv,8),_.LFG(i_,8),_.LFG(qv,8),_.LFG(Kv,8),_.LFG(Mp,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function yb(n){return null==n}function vb(n){return"function"==typeof n.set}function s_(n,e){return vb(e)?e:n.ref(e)}function wb(n,e){if(function _b(n){return"string"==typeof n}(n))return e.stringCase();if(vb(n))return e.firebaseCase();if(function Yv(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Np(n,e,t="on",r=fo.z){return new bi.y(i=>{let a=null;return a=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,vt.U)(i=>{const{snapshot:a,prevKey:c}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:c,key:h}}),(0,Qc.B)())}function Qv(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function WM(n,e){const{payload:t,prevKey:r,key:i}=e,a=Qv(n,i),c=function MS(n,e){if(yb(e))return 0;{const t=Qv(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const w={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function Xv(n){return(yb(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function o_(n,e,t){return function Eh(n,e,t){return Np(n,"value","once",t).pipe(vn(r=>{const i=[it(r)];return e.forEach(a=>i.push(Np(n,a,"on",t))),(0,Ci.T)(...i).pipe(T(WM,[]))}),U())}(n,e=Xv(e),t)}function Eb(n,e,t){const r=(e=Xv(e)).map(i=>Np(n,i,"on",t));return(0,Ci.T)(...r)}function a_(n,e){return function(r,i){return wb(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function bb(n){return function(t){return t?wb(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function ew(n,e){return function(){return Np(n,"value","on",e)}}const NS=new _.OlP("angularfire2.realtimeDatabaseURL"),kS=new _.OlP("angularfire2.database.use-emulator");let tw=(()=>{class n{constructor(t,r,i,a,c,h,m,w,C,S,N,V,Z,ge,Ie){this.schedulers=h;const mt=m,dt=(0,rn.on)(t,c,r);w&&Zv(dt,c,C,N,V,Z,S,ge),this.database=(0,rn.cc)(`${dt.name}.database.${i}`,"AngularFireDatabase",dt.name,()=>{const lt=c.runOutsideAngular(()=>dt.database(i||void 0));return mt&&lt.useEmulator(...mt),lt},[mt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>s_(this.database,t));let a=i;return r&&(a=r(i)),function Cb(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:a_(r,"update"),set:a_(r,"set"),push:i=>r.push(i),remove:bb(r),snapshotChanges:i=>o_(n,i,t).pipe(qe.iC),stateChanges:i=>Eb(n,i,t).pipe(qe.iC),auditTrail:i=>function Jv(n,e,t){return function Ib(n,e,t){return function PS(n,e){return Np(n,"value","on",e).pipe((0,vt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Re(...n){const e=(0,ia.jO)(n);return(0,Tn.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,Ns.Xf)(n[m]).subscribe((0,kn.x)(r,w=>{a[m]=w,!h&&!c[m]&&(c[m]=!0,(h=c.every(x.y))&&(c=null))},se.Z));t.subscribe((0,kn.x)(r,m=>{if(h){const w=[m,...a];r.next(e?e(...w):w)}}))})}(e),(0,vt.U)(([i,a])=>{const c=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:c,loadedKeys:h}}),function Ye(n){return(0,Tn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,kn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,vt.U)(i=>i.actions))}(n,Eb(n,e).pipe(T((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(qe.iC),valueChanges:(i,a)=>o_(n,i,t).pipe((0,vt.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),qe.iC)}}(a,this)}object(t){return function Db(n,e){return{query:n,snapshotChanges:()=>ew(n,e.schedulers.outsideAngular)().pipe(qe.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ew(n,e.schedulers.outsideAngular)().pipe(qe.iC,(0,vt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>s_(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(rn.Dh),_.LFG(rn.xv,8),_.LFG(NS,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(qe.HU),_.LFG(kS,8),_.LFG(Pp,8),_.LFG(r_,8),_.LFG(zv,8),_.LFG(Wv,8),_.LFG(i_,8),_.LFG(qv,8),_.LFG(Kv,8),_.LFG(Mp,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),OS=(()=>{class n{constructor(){Gv.Z.registerVersion("angularfire",qe.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[tw]}),n})();var Ih=L(8189);function u_(...n){return function qM(){return(0,Ih.J)(1)}()((0,Ht.D)(n,(0,ia.yG)(n)))}function c_(...n){const e=(0,ia.yG)(n);return(0,Tn.e)((t,r)=>{(e?u_(n,t,e):u_(n,t)).subscribe(r)})}function nw(){return(0,Tn.e)((n,e)=>{let t,r=!1;n.subscribe((0,kn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var ot,KM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tu={},rw=rw||{},kt=KM||self;function l_(){}function iw(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function kp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var sw="closure_uid_"+(1e9*Math.random()>>>0),FS=0;function US(n,e,t){return n.call.apply(n.bind,arguments)}function VS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function rr(n,e,t){return(rr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?US:VS).apply(null,arguments)}function Op(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ur(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function nu(){this.s=this.s,this.o=this.o}var Sb={};nu.prototype.s=!1,nu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function LS(n){return Object.prototype.hasOwnProperty.call(n,sw)&&n[sw]||(n[sw]=++FS)}(this);delete Sb[n]}},nu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ab=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Rb=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function xb(n){return Array.prototype.concat.apply([],arguments)}function ow(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function d_(n){return/^[\s\xa0]*$/.test(n)}var Pi,Mb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Mi(n,e){return-1!=n.indexOf(e)}function zl(n,e){return n<e?-1:n>e?1:0}e:{var h_=kt.navigator;if(h_){var To=h_.userAgent;if(To){Pi=To;break e}}Pi=""}function aw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function f_(n){const e={};for(const t in n)e[t]=n[t];return e}var bh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<bh.length;a++)t=bh[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function uw(n){return uw[" "](n),n}uw[" "]=l_;var Lp,n,p_=Mi(Pi,"Opera"),ru=Mi(Pi,"Trident")||Mi(Pi,"MSIE"),Nb=Mi(Pi,"Edge"),cw=Nb||ru,lw=Mi(Pi,"Gecko")&&!(Mi(Pi.toLowerCase(),"webkit")&&!Mi(Pi,"Edge"))&&!(Mi(Pi,"Trident")||Mi(Pi,"MSIE"))&&!Mi(Pi,"Edge"),kb=Mi(Pi.toLowerCase(),"webkit")&&!Mi(Pi,"Edge");function g_(){var n=kt.document;return n?n.documentMode:void 0}e:{var Fp="",Up=(n=Pi,lw?/rv:([^\);]+)(\)|;)/.exec(n):Nb?/Edge\/([\d\.]+)/.exec(n):ru?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):kb?/WebKit\/(\S+)/.exec(n):p_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Up&&(Fp=Up?Up[1]:""),ru){var m_=g_();if(null!=m_&&m_>parseFloat(Fp)){Lp=String(m_);break e}}Lp=Fp}var dw={};var jS=kt.document&&ru&&(g_()||parseInt(Lp,10))||void 0,$S=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",l_,e),kt.removeEventListener("test",l_,e)}catch{}return n}();function ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Wl(n,e){if(ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(lw){e:{try{uw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Lb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wl.Z.h.call(this)}}ei.prototype.h=function(){this.defaultPrevented=!0},Ur(Wl,ei);var Lb={2:"touch",3:"pen",4:"mouse"};Wl.prototype.h=function(){Wl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Vp="closure_listenable_"+(1e6*Math.random()|0),Fb=0;function Ub(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Fb,this.ca=this.fa=!1}function __(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Bp(n){this.src=n,this.g={},this.h=0}function y_(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Ab(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(__(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function pw(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Bp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=pw(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new Ub(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var v_="closure_lm_"+(1e6*Math.random()|0),gw={};function ci(n,e,t,r,i){if(r&&r.once)return Vb(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)ci(n,e[a],t,r,i);return null}return t=jp(t),n&&n[Vp]?n.N(e,t,kp(r)?!!r.capture:!!r,i):ql(n,e,t,!1,r,i)}function ql(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=kp(i)?!!i.capture:!!i,h=Kl(n);if(h||(n[v_]=h=new Bp(n)),(t=h.add(e,t,r,c,a)).proxy)return t;if(r=function HS(){var e=_w;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)$S||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(mw(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Vb(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Vb(n,e[a],t,r,i);return null}return t=jp(t),n&&n[Vp]?n.O(e,t,kp(r)?!!r.capture:!!r,i):ql(n,e,t,!0,r,i)}function GS(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)GS(n,e[a],t,r,i);else r=kp(r)?!!r.capture:!!r,t=jp(t),n&&n[Vp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=pw(a=n.g[e],t,r,i))&&(__(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Kl(n))&&(e=n.g[e.toString()],n=-1,e&&(n=pw(e,t,r,i)),(t=-1<n?e[n]:null)&&Bb(t))}function Bb(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Vp])y_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(mw(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Kl(e))?(y_(t,n),0==t.h&&(t.src=null,e[v_]=null)):__(n)}}}function mw(n){return n in gw?gw[n]:gw[n]="on"+n}function _w(n,e){if(n.ca)n=!0;else{e=new Wl(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Bb(n),n=t.call(r,e)}return n}function Kl(n){return(n=n[v_])instanceof Bp?n:null}var yw="__closure_events_fn_"+(1e9*Math.random()>>>0);function jp(n){return"function"==typeof n?n:(n[yw]||(n[yw]=function(e){return n.handleEvent(e)}),n[yw])}function Vr(){nu.call(this),this.i=new Bp(this),this.P=this,this.I=null}function Br(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ei(e,n);else if(e instanceof ei)e.target=e.target||n;else{var i=e;Pb(e=new ei(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=w_(c,r,!0,e)&&i}if(i=w_(c=e.g=n,r,!0,e)&&i,i=w_(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=w_(c=e.g=t[a],r,!1,e)&&i}function w_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var h=c.listener,m=c.ia||c.src;c.fa&&y_(n.i,c),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Ur(Vr,nu),Vr.prototype[Vp]=!0,Vr.prototype.removeEventListener=function(n,e,t,r){GS(this,n,e,t,r)},Vr.prototype.M=function(){if(Vr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)__(t[r]);delete n.g[e],n.h--}}this.I=null},Vr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var vw=kt.JSON.stringify;function zS(){var n=bw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $b,Ew=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new jb,n=>n.reset());class jb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function E_(n){kt.setTimeout(()=>{throw n},0)}function $p(n,e){$b||function Hb(){var n=kt.Promise.resolve(void 0);$b=function(){n.then(Ch)}}(),Iw||($b(),Iw=!0),bw.add(n,e)}var Iw=!1,bw=new class ww{constructor(){this.h=this.g=null}add(e,t){const r=Ew.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Ch(){for(var n;n=zS();){try{n.h.call(n.g)}catch(t){E_(t)}var e=Ew;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Iw=!1}function I_(n,e){Vr.call(this),this.h=n||1,this.g=e||kt,this.j=rr(this.kb,this),this.l=Date.now()}function b_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Hp(n,e,t){if("function"==typeof n)t&&(n=rr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=rr(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function WS(n){n.g=Hp(()=>{n.g=null,n.i&&(n.i=!1,WS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ur(I_,Vr),(ot=I_.prototype).da=!1,ot.S=null,ot.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Br(this,"tick"),this.da&&(b_(this),this.start()))}},ot.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){I_.Z.M.call(this),b_(this),delete this.g};class qS extends nu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:WS(this)}M(){super.M(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function C_(n){nu.call(this),this.h=n,this.g={}}Ur(C_,nu);var Gb=[];function zb(n,e,t,r){Array.isArray(t)||(t&&(Gb[0]=t.toString()),t=Gb);for(var i=0;i<t.length;i++){var a=ci(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Wb(n){aw(n.g,function(e,t){this.g.hasOwnProperty(t)&&Bb(e)},n),n.g={}}function Gp(){this.g=!0}function Zl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ZS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return vw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}C_.prototype.M=function(){C_.Z.M.call(this),Wb(this)},C_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gp.prototype.Aa=function(){this.g=!1},Gp.prototype.info=function(){};var Yl={},Cw=null;function D_(){return Cw=Cw||new Vr}function Dw(n){ei.call(this,Yl.Ma,n)}function Dh(n){const e=D_();Br(e,new Dw(e,n))}function Tw(n,e){ei.call(this,Yl.STAT_EVENT,n),this.stat=e}function li(n){const e=D_();Br(e,new Tw(e,n))}function Zb(n,e){ei.call(this,Yl.Na,n),this.size=e}function zp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}Yl.Ma="serverreachability",Ur(Dw,ei),Yl.STAT_EVENT="statevent",Ur(Tw,ei),Yl.Na="timingevent",Ur(Zb,ei);var Sw={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Aw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Yb(){}function QS(){}Yb.prototype.h=null;var Jb,T_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Qb(){ei.call(this,"d")}function Xb(){ei.call(this,"c")}function Rw(){}function uc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new C_(this),this.P=eC,this.W=new I_(n=cw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new XS}function XS(){this.i=null,this.g="",this.h=!1}Ur(Qb,ei),Ur(Xb,ei),Ur(Rw,Yb),Rw.prototype.g=function(){return new XMLHttpRequest},Rw.prototype.i=function(){return{}},Jb=new Rw;var eC=45e3,Th={},Wp={};function S_(n,e,t){n.K=1,n.v=M_(_a(e)),n.s=t,n.U=!0,JS(n,null)}function JS(n,e){n.F=Date.now(),R_(n),n.A=_a(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),uC(t.h,"t",r),n.C=0,t=n.l.H,n.h=new XS,n.g=IC(n.l,t?e:null,!n.s),0<n.O&&(n.L=new qS(rr(n.Ia,n,n.g),n.O)),zb(n.V,n.g,"readystatechange",n.gb),e=n.H?f_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Dh(1),function qb(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),m=0;m<h.length;m++){var w=h[m].split("=");if(1<w.length){var C=w[0];w=w[1];var S=C.split("_");c=2<=S.length&&"type"==S[1]?c+(C+"=")+w+"&":c+(C+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function A_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function xw(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=eA(n,t),i==Wp){4==e&&(n.o=4,li(14),r=!1),Zl(n.j,n.m,null,"[Incomplete Response]");break}if(i==Th){n.o=4,li(15),Zl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zl(n.j,n.m,i,null),Mw(n,i)}A_(n)&&i!=Wp&&i!=Th&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,li(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),tg(e),e.L=!0,li(11))):(Zl(n.j,n.m,t,"[Invalid Chunked Response]"),ma(n),qp(n))}function eA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Wp:(t=Number(e.substring(t,r)),isNaN(t)?Th:(r+=1)+t>e.length?Wp:(e=e.substr(r,t),n.C=r+t,e))}function R_(n){n.Y=Date.now()+n.P,tA(n,n.P)}function tA(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zp(rr(n.eb,n),e)}function x_(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function qp(n){0==n.l.G||n.I||lA(n.l,n)}function ma(n){x_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,b_(n.W),Wb(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Mw(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||lC(t.i,n)))if(t.I=n.N,!n.J&&lC(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;ed(t),O_(t)}Gw(t),li(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=zp(rr(t.ab,t),6e3));if(1>=cC(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Ph(t,11)}else if((n.J||t.g==n)&&ed(t),!d_(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const C=w[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=w[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const Z=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.i;!a.g&&(Mi(Z,"spdy")||Mi(Z,"quic")||Mi(Z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Vw(a,a.h),a.h=null))}if(r.D){const ge=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ge&&(r.sa=ge,An(r.F,r.D,ge))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=zw(r,r.H?r.la:null,r.W),c.J){dC(r.i,c);var h=c,m=r.K;m&&h.setTimeout(m),h.B&&(x_(h),R_(h)),r.g=c}else U_(r);0<t.l.length&&L_(t)}else"stop"!=w[0]&&"close"!=w[0]||Ph(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Ph(t,7):wC(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}Dh(4)}catch{}}function tC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(iw(n)||"string"==typeof n)Rb(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(iw(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function YM(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(iw(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Kp(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Kp)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Pw(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ql(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Ql(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Ql(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ot=uc.prototype).setTimeout=function(n){this.P=n},ot.gb=function(n){n=n.target;const e=this.L;e&&3==ou(n)?e.l():this.Ia(n)},ot.Ia=function(n){try{if(n==this.g)e:{const C=ou(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>C)&&(3!=C||cw||this.g&&(this.h.h||this.g.ga()||yC(this.g)))){this.I||4!=C||7==e||Dh(8==e||0>=S?3:2),x_(this);var t=this.g.ba();this.N=t;t:if(A_(this)){var r=yC(this.g);n="";var i=r.length,a=4==ou(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ma(this),qp(this);var c="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function KS(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!d_(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,li(12),ma(this),qp(this);break e}Zl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Mw(this,t)}this.U?(xw(this,C,c),cw&&this.i&&3==C&&(zb(this.V,this.W,"tick",this.fb),this.W.start())):(Zl(this.j,this.m,c,null),Mw(this,c)),4==C&&ma(this),this.i&&!this.I&&(4==C?lA(this.l,this):(this.i=!1,R_(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,li(12)):(this.o=0,li(13)),ma(this),qp(this)}}}catch{}},ot.fb=function(){if(this.g){var n=ou(this.g),e=this.g.ga();this.C<e.length&&(x_(this),xw(this,n,e),this.i&&4!=n&&R_(this))}},ot.cancel=function(){this.I=!0,ma(this)},ot.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Kb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Dh(3),li(17)),ma(this),this.o=2,qp(this)):tA(this,this.Y-n)},(ot=Kp.prototype).R=function(){Pw(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ot.T=function(){return Pw(this),this.g.concat()},ot.get=function(n,e){return Ql(this.h,n)?this.h[n]:e},ot.set=function(n,e){Ql(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ot.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var nC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Xl){this.g=void 0!==e?e:n.g,Zp(this,n.j),this.s=n.s,Nw(this,n.i),Wi(this,n.m),this.l=n.l,e=n.h;var t=new Sh;t.i=e.i,e.g&&(t.g=new Kp(e.g),t.h=e.h),rC(this,t),this.o=n.o}else n&&(t=String(n).match(nC))?(this.g=!!e,Zp(this,t[1]||"",!0),this.s=Yp(t[2]||""),Nw(this,t[3]||"",!0),Wi(this,t[4]),this.l=Yp(t[5]||"",!0),rC(this,t[6]||"",!0),this.o=Yp(t[7]||"")):(this.g=!!e,this.h=new Sh(null,this.g))}function _a(n){return new Xl(n)}function Zp(n,e,t){n.j=t?Yp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Nw(n,e,t){n.i=t?Yp(e,!0):e}function Wi(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function rC(n,e,t){e instanceof Sh?(n.h=e,function su(n,e){e&&!n.j&&(iu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(aC(this,r),uC(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Jl(e,oC)),n.h=new Sh(e,n.g))}function An(n,e,t){n.h.set(e,t)}function M_(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Yp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,nA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function nA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Jl(e,iC,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Jl(e,iC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Jl(t,"/"==t.charAt(0)?sC:kw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Jl(t,rA)),n.join("")};var iC=/[#\/\?@]/g,kw=/[#\?:]/g,sC=/[#\?]/g,oC=/[#\?@]/g,rA=/#/g;function Sh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function iu(n){n.g||(n.g=new Kp,n.h=0,n.i&&function QM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function aC(n,e){iu(n),e=cc(n,e),Ql(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ql((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Pw(n)))}function Ow(n,e){return iu(n),e=cc(n,e),Ql(n.g.h,e)}function uC(n,e,t){aC(n,e),0<t.length&&(n.i=null,n.g.set(cc(n,e),ow(t)),n.h+=t.length)}function cc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}(ot=Sh.prototype).add=function(n,e){iu(this),this.i=null,n=cc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){iu(this),this.g.forEach(function(t,r){Rb(t,function(i){n.call(e,i,r,this)},this)},this)},ot.T=function(){iu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},ot.R=function(n){iu(this);var e=[];if("string"==typeof n)Ow(this,n)&&(e=xb(e,this.g.get(cc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=xb(e,n[t])}return e},ot.set=function(n,e){return iu(this),this.i=null,Ow(this,n=cc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var lc=class{constructor(n,e){this.h=n,this.g=e}};function Lw(n){this.l=n||Fw,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ea&&kt.g.Ea()&&kt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Fw=10;function Uw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function cC(n){return n.h?1:n.g?n.g.size:0}function lC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Vw(n,e){n.g?n.g.add(e):n.h=e}function dC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function hC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ow(n.i)}function Bw(){}function fC(){this.g=new Bw}function JM(n,e,t){const r=t||"";try{tC(n,function(i,a){let c=i;kp(i)&&(c=vw(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function P_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ah(n){this.l=n.$b||null,this.j=n.ib||!1}function jw(n,e){Vr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Qp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lw.prototype.cancel=function(){if(this.i=hC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Bw.prototype.stringify=function(n){return kt.JSON.stringify(n,void 0)},Bw.prototype.parse=function(n){return kt.JSON.parse(n,void 0)},Ur(Ah,Yb),Ah.prototype.g=function(){return new jw(this.l,this.j)},Ah.prototype.i=function(n){return function(){return n}}({}),Ur(jw,Vr);var Qp=0;function $w(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Rh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,xh(n)}function xh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=jw.prototype).open=function(n,e){if(this.readyState!=Qp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,xh(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||kt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rh(this)),this.readyState=Qp},ot.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,xh(this)),this.g&&(this.readyState=3,xh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$w(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ot.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Rh(this):xh(this),3==this.readyState&&$w(this)}},ot.Ua=function(n){this.g&&(this.response=this.responseText=n,Rh(this))},ot.Ta=function(n){this.g&&(this.response=n,Rh(this))},ot.ha=function(){this.g&&Rh(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(jw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var gC=kt.JSON.parse;function ir(n){Vr.call(this),this.headers=new Kp,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Xp,this.K=this.L=!1}Ur(ir,Vr);var Xp="",N_=/^https?$/i,mC=["POST","PUT"];function sA(n){return"content-type"==n.toLowerCase()}function oA(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,aA(n),Jp(n)}function aA(n){n.D||(n.D=!0,Br(n,"complete"),Br(n,"error"))}function uA(n){if(n.h&&typeof rw<"u"&&(!n.C[1]||4!=ou(n)||2!=n.ba()))if(n.v&&4==ou(n))Hp(n.Fa,0,n);else if(Br(n,"readystatechange"),4==ou(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(nC)[1]||null;if(!i&&kt.self&&kt.self.location){var a=kt.self.location.protocol;i=a.substr(0,a.length-1)}r=!N_.test(i?i.toLowerCase():"")}t=r}if(t)Br(n,"complete"),Br(n,"success");else{n.m=6;try{var c=2<ou(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",aA(n)}}finally{Jp(n)}}}function Jp(n,e){if(n.g){_C(n);const t=n.g,r=n.C[0]?l_:null;n.g=null,n.C=null,e||Br(n,"ready");try{t.onreadystatechange=r}catch{}}}function _C(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function ou(n){return n.g?n.g.readyState:0}function yC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Xp:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function vC(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function eP(n){let e="";return aw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function k_(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function cA(n){this.za=0,this.l=[],this.h=new Gp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=k_("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=k_("baseRetryDelayMs",5e3,n),this.$a=k_("retryDelaySeedMs",1e4,n),this.Ya=k_("forwardChannelMaxRetries",2,n),this.ra=k_("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Lw(n&&n.concurrentRequestLimit),this.Ca=new fC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function wC(n){if(eg(n),3==n.G){var e=n.V++,t=_a(n.F);An(t,"SID",n.J),An(t,"RID",e),An(t,"TYPE","terminate"),Mh(n,t),(e=new uc(n,n.h,e,void 0)).K=2,e.v=M_(_a(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon&&(t=kt.navigator.sendBeacon(e.v.toString(),"")),!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=IC(e.l,null),e.g.ea(e.v)),e.F=Date.now(),R_(e)}hA(n)}function O_(n){n.g&&(tg(n),n.g.cancel(),n.g=null)}function eg(n){O_(n),n.u&&(kt.clearTimeout(n.u),n.u=null),ed(n),n.i.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function Hw(n,e){n.l.push(new lc(n.Za++,e)),3==n.G&&L_(n)}function L_(n){Uw(n.i)||n.m||(n.m=!0,$p(n.Ha,n),n.C=0)}function dc(n,e){var t;t=e?e.m:n.V++;const r=_a(n.F);An(r,"SID",n.J),An(r,"RID",t),An(r,"AID",n.U),Mh(n,r),n.o&&n.s&&vC(r,n.o,n.s),t=new uc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=F_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Vw(n.i,t),S_(t,r,e)}function Mh(n,e){n.j&&tC({},function(t,r){An(e,r,t)})}function F_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?rr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let w=i[m].h;const C=i[m].g;if(w-=a,0>w)a=Math.max(0,i[m].h-100),h=!1;else try{JM(C,c,"req"+w+"_")}catch{r&&r(C)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function U_(n){n.g||n.u||(n.Y=1,$p(n.Ga,n),n.A=0)}function Gw(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=zp(rr(n.Ga,n),dA(n,n.A)),n.A++,0))}function tg(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function V_(n){n.g=new uc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=_a(n.oa);An(e,"RID","rpc"),An(e,"SID",n.J),An(e,"CI",n.N?"0":"1"),An(e,"AID",n.U),Mh(n,e),An(e,"TYPE","xmlhttp"),n.o&&n.s&&vC(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=M_(_a(e)),t.s=null,t.U=!0,JS(t,n)}function ed(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function lA(n,e){var t=null;if(n.g==e){ed(n),tg(n),n.g=null;var r=2}else{if(!lC(n.i,e))return;t=e.D,dC(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Br(r=D_(),new Zb(r,t,e,i)),L_(n)}else U_(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function EC(n,e){return!(cC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=zp(rr(n.Ha,n,e),dA(n,n.C)),n.C++,0)))}(n,e)||2==r&&Gw(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Ph(n,5);break;case 4:Ph(n,10);break;case 3:Ph(n,6);break;default:Ph(n,2)}}function dA(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ph(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=rr(n.jb,n);t||(t=new Xl("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||Zp(t,"https"),M_(t)),function pC(n,e){const t=new Gp;if(kt.Image){const r=new Image;r.onload=Op(P_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Op(P_,t,r,"TestLoadImage: error",!1,e),r.onabort=Op(P_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Op(P_,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else li(2);n.G=0,n.j&&n.j.va(e),hA(n),eg(n)}function hA(n){n.G=0,n.I=-1,n.j&&((0!=hC(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ow(n.l),n.l.length=0),n.j.ua())}function zw(n,e,t){let r=function XM(n){return n instanceof Xl?_a(n):new Xl(n,void 0)}(t);if(""!=r.i)e&&Nw(r,e+"."+r.i),Wi(r,r.m);else{const i=kt.location;r=function qs(n,e,t,r){var i=new Xl(null,void 0);return n&&Zp(i,n),e&&Nw(i,e),t&&Wi(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&aw(n.aa,function(i,a){An(r,a,i)}),t=n.sa,(e=n.D)&&t&&An(r,e,t),An(r,"VER",n.ma),Mh(n,r),r}function IC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ir(t&&n.Ba&&!n.qa?new Ah({ib:!0}):n.qa)).L=n.H,e}function bC(){}function B_(){if(ru&&!(10<=Number(jS)))throw Error("Environmental error: no available transport.")}function ys(n,e){Vr.call(this),this.g=new cA(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!d_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!d_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new td(this)}function Ww(n){Qb.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function qw(){Xb.call(this),this.status=1}function td(n){this.g=n}(ot=ir.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jb.g(),this.C=function YS(n){return n.h||(n.h=n.i())}(this.u?this.u:Jb),this.g.onreadystatechange=rr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void oA(this,a)}n=t||"";const i=new Kp(this.headers);r&&tC(r,function(a,c){i.set(c,a)}),r=function ZM(n){e:{var e=sA;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=kt.FormData&&n instanceof kt.FormData,!(0<=Ab(mC,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_C(this),0<this.B&&((this.K=function iA(n){return ru&&function hw(){return function BS(n){var e=dw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Mb(String(Lp)).split("."),t=Mb("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=zl(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||zl(0==i[2].length,0==a[2].length)||zl(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rr(this.pa,this)):this.A=Hp(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){oA(this,a)}},ot.pa=function(){typeof rw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Br(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Br(this,"complete"),Br(this,"abort"),Jp(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jp(this,!0)),ir.Z.M.call(this)},ot.Fa=function(){this.s||(this.F||this.v||this.l?uA(this):this.cb())},ot.cb=function(){uA(this)},ot.ba=function(){try{return 2<ou(this)?this.g.status:-1}catch{return-1}},ot.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),gC(e)}},ot.Da=function(){return this.m},ot.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=cA.prototype).ma=8,ot.G=1,ot.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ot.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new uc(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=f_(a),Pb(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=F_(this,i,e),An(t=_a(this.F),"RID",n),An(t,"CVER",22),this.D&&An(t,"X-HTTP-Session-Id",this.D),Mh(this,t),this.o&&a&&vC(t,this.o,a),Vw(this.i,i),this.Ra&&An(t,"TYPE","init"),this.ja?(An(t,"$req",e),An(t,"SID","null"),i.$=!0,S_(i,t,null)):S_(i,t,e),this.G=2}}else 3==this.G&&(n?dc(this,n):0==this.l.length||Uw(this.i)||dc(this))},ot.Ga=function(){if(this.u=null,V_(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=zp(rr(this.bb,this),n)}},ot.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,li(10),O_(this),V_(this))},ot.ab=function(){null!=this.v&&(this.v=null,O_(this),Gw(this),li(19))},ot.jb=function(n){n?(this.h.info("Successfully pinged google.com"),li(2)):(this.h.info("Failed to ping google.com"),li(1))},(ot=bC.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Oa=function(){},B_.prototype.g=function(n,e){return new ys(n,e)},Ur(ys,Vr),ys.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),$p(rr(n.hb,n,e))),li(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=zw(n,null,n.W),L_(n)},ys.prototype.close=function(){wC(this.g)},ys.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Hw(this.g,e)}else this.v?((e={}).__data__=vw(n),Hw(this.g,e)):Hw(this.g,n)},ys.prototype.M=function(){this.g.j=null,delete this.j,wC(this.g),delete this.g,ys.Z.M.call(this)},Ur(Ww,Qb),Ur(qw,Xb),Ur(td,bC),td.prototype.xa=function(){Br(this.g,"a")},td.prototype.wa=function(n){Br(this.g,new Ww(n))},td.prototype.va=function(n){Br(this.g,new qw(n))},td.prototype.ua=function(){Br(this.g,"b")},B_.prototype.createWebChannel=B_.prototype.g,ys.prototype.send=ys.prototype.u,ys.prototype.open=ys.prototype.m,ys.prototype.close=ys.prototype.close,Sw.NO_ERROR=0,Sw.TIMEOUT=8,Sw.HTTP_ERROR=6,Aw.COMPLETE="complete",QS.EventType=T_,T_.OPEN="a",T_.CLOSE="b",T_.ERROR="c",T_.MESSAGE="d",Vr.prototype.listen=Vr.prototype.N,ir.prototype.listenOnce=ir.prototype.O,ir.prototype.getLastError=ir.prototype.La,ir.prototype.getLastErrorCode=ir.prototype.Da,ir.prototype.getStatus=ir.prototype.ba,ir.prototype.getResponseJson=ir.prototype.Qa,ir.prototype.getResponseText=ir.prototype.ga,ir.prototype.send=ir.prototype.ea;var fA=tu.createWebChannelTransport=function(){return new B_},pA=tu.getStatEventTarget=function(){return D_()},j_=tu.ErrorCode=Sw,Kw=tu.EventType=Aw,tP=tu.Event=Yl,Zw=tu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Yw=tu.FetchXmlHttpFactory=Ah,$_=tu.WebChannel=QS,gA=tu.XhrIo=ir;const mA="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let Nh="9.9.1";const hc=new Er.Yd("@firebase/firestore");function Qw(){return hc.logLevel}function Ve(n,...e){if(hc.logLevel<=Er.in.DEBUG){const t=e.map(Xw);hc.debug(`Firestore (${Nh}): ${n}`,...t)}}function Sr(n,...e){if(hc.logLevel<=Er.in.ERROR){const t=e.map(Xw);hc.error(`Firestore (${Nh}): ${n}`,...t)}}function H_(n,...e){if(hc.logLevel<=Er.in.WARN){const t=e.map(Xw);hc.warn(`Firestore (${Nh}): ${n}`,...t)}}function Xw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Nh}) INTERNAL ASSERTION FAILED: `+n;throw Sr(e),new Error(e)}function Rt(n,e){n||ct()}function et(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class s{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class o{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class u{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class l{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class d{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new s;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new s,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=c;e.enqueueRetryable((0,ue.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},m=w=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>m(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?m(w):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new s)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new o(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new ti(e)}}class p{constructor(e,t,r){this.type="FirstParty",this.user=ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class v{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new p(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.p=t.token,new I(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function M(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class F{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=M(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function B(n,e){return n<e?-1:n>e?1:0}function J(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ve(n){return n+"\0"}class Ce{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ce(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?B(this.nanoseconds,e.nanoseconds):B(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ce(0,0))}static max(){return new Ee(new Ce(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nt{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===nt.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nt?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ke extends nt{construct(e,t,r){return new Ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ke(t)}static emptyPath(){return new Ke([])}}const ke=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends nt{construct(e,t,r){return new at(e,t,r)}static isValidIdentifier(e){return ke.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ne(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ne(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new Ne(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(t)}static emptyPath(){return new at([])}}class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Ke.fromString(e))}static fromName(e){return new Oe(Ke.fromString(e).popFirst(5))}static empty(){return new Oe(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ke.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Ke(e.slice()))}}class Vn{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function CC(n){return n.fields.find(e=>2===e.kind)}function ng(n){return n.fields.filter(e=>2!==e.kind)}Vn.UNKNOWN_ID=-1;class DC{constructor(e,t){this.fieldPath=e,this.kind=t}}class Jw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Jw(0,So.min())}}function iP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(1e9===r?new Ce(t+1,0):new Ce(t,r));return new So(i,Oe.empty(),e)}function sP(n){return new So(n.readTime,n.key,-1)}class So{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new So(Ee.min(),Oe.empty(),-1)}static max(){return new So(Ee.max(),Oe.empty(),-1)}}function _A(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Oe.comparator(n.documentKey,e.documentKey),0!==t?t:B(n.largestBatchId,e.largestBatchId))}const oP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function kh(n){return yA.apply(this,arguments)}function yA(){return yA=(0,ue.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==oP)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),yA.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,a=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++a,c&&a===i&&t()},m=>r(m))}),c=!0,a===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const a=e.length,c=new Array(a);let h=0;for(let m=0;m<a;m++){const w=m;t(e[w]).next(C=>{c[w]=C,++h,h===a&&r(c)},C=>i(C))}})}static doWhile(e,t){return new ce((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class TC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new s,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new e0(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=vA(r.target.error);this.T.reject(new e0(e,i))}}static open(e,t,r,i){try{return new TC(t,e.transaction(i,r))}catch(a){throw new e0(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new EL(t)}}class au{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===au.v((0,k.z$)())&&Sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),rg(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,k.hl)())return!1;if(au.S())return!0;const e=(0,k.z$)(),t=au.v(e),r=0<t&&t<10,i=au.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,ue.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new e0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Ne(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new e0(e,h))},a.onupgradeneeded=c=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.P.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ue.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.k(e);const m=TC.open(a.db,e,c?"readonly":"readwrite",r),w=i(m).next(C=>(m.R(),C)).catch(C=>(m.abort(C),ce.reject(C))).toPromise();return w.catch(()=>{}),yield m.A,w}catch(m){const w=m,C="FirebaseError"!==w.name&&h<3;if(Ve("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),a.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wL{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return rg(this.$.delete())}}class e0 extends Ne{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Oh(n){return"IndexedDbTransactionError"===n.name}class EL{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rg(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),rg(this.store.add(e))}get(e){return rg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),rg(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),rg(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(c,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ce((a,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,c,h)=>h.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=a=>{const c=vA(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}G(e,t){const r=[];return new ce((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const m=new wL(h),w=t(h.primaryKey,h.value,m);if(w instanceof ce){const C=w.catch(S=>(m.done(),ce.reject(S)));r.push(C)}m.isDone?i():null===m.U?h.continue():h.continue(m.U)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rg(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=vA(r.target.error);t(i)}})}let uP=!1;function vA(n){const e=au.v((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uP||(uP=!0,setTimeout(()=>{throw r},0)),r}}return n}class IL{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ue.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Oh(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield kh(r)}yield t.Z(1)}))}}class bL{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,ue.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return ce.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ve("IndexBackiller",`Processing collection: ${c}`),this.nt(e,c,i).next(h=>{i-=h,r.add(c)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.st(i,a)).next(h=>(Ve("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=sP(a);_A(c,r)>0&&(r=c)}),new So(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ks{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function cP(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ig(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ks.ot=-1;class hr{constructor(e,t){this.comparator=e,this.root=t||Ni.EMPTY}insert(e,t){return new hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ni.BLACK,null,null))}remove(e){return new hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SC(this.root,e,this.comparator,!1)}getReverseIterator(){return new SC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SC(this.root,e,this.comparator,!0)}}class SC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ni{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ni.RED,this.left=i??Ni.EMPTY,this.right=a??Ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ni(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}Ni.EMPTY=null,Ni.RED=!0,Ni.BLACK=!1,Ni.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dP(this.data.getIterator())}getIteratorFrom(e){return new dP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class dP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function G_(n){return n.hasNext()?n.getNext():void 0}class Ao{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new Ao([])}unionWith(e){let t=new Rn(at.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ao(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return J(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ni(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return B(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const DL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lh(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=DL.exec(n);if(Rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sg(n){return"string"==typeof n?ni.fromBase64String(n):ni.fromUint8Array(n)}function wA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function hP(n){const e=n.mapValue.fields.__previous_value__;return wA(e)?hP(e):e}function t0(n){const e=Lh(n.mapValue.fields.__local_write_time__.timestampValue);return new Ce(e.seconds,e.nanos)}class TL{constructor(e,t,r,i,a,c,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class nd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nd&&e.projectId===this.projectId&&e.database===this.database}}function n0(n){return null==n}function r0(n){return 0===n&&1/n==-1/0}function fP(n){return"number"==typeof n&&Number.isInteger(n)&&!r0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Fh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},AC={nullValue:"NULL_VALUE"};function og(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wA(n)?4:_P(n)?9007199254740991:10:ct()}function fc(n,e){if(n===e)return!0;const t=og(n);if(t!==og(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return t0(n).isEqual(t0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Lh(r.timestampValue),c=Lh(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,sg(n.bytesValue).isEqual(sg(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return fr(r.geoPointValue.latitude)===fr(i.geoPointValue.latitude)&&fr(r.geoPointValue.longitude)===fr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return fr(r.integerValue)===fr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=fr(r.doubleValue),c=fr(i.doubleValue);return a===c?r0(a)===r0(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return J(n.arrayValue.values||[],e.arrayValue.values||[],fc);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(cP(a)!==cP(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===c[h]||!fc(a[h],c[h])))return!1;return!0}(n,e);default:return ct()}var i}function s0(n,e){return void 0!==(n.values||[]).find(t=>fc(t,e))}function Uh(n,e){if(n===e)return 0;const t=og(n),r=og(e);if(t!==r)return B(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return B(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=fr(i.integerValue||i.doubleValue),h=fr(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return pP(n.timestampValue,e.timestampValue);case 4:return pP(t0(n),t0(e));case 5:return B(n.stringValue,e.stringValue);case 6:return function(i,a){const c=sg(i),h=sg(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),h=a.split("/");for(let m=0;m<c.length&&m<h.length;m++){const w=B(c[m],h[m]);if(0!==w)return w}return B(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=B(fr(i.latitude),fr(a.latitude));return 0!==c?c:B(fr(i.longitude),fr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],h=a.values||[];for(let m=0;m<c.length&&m<h.length;++m){const w=Uh(c[m],h[m]);if(w)return w}return B(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Fh.mapValue&&a===Fh.mapValue)return 0;if(i===Fh.mapValue)return 1;if(a===Fh.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),m=a.fields||{},w=Object.keys(m);h.sort(),w.sort();for(let C=0;C<h.length&&C<w.length;++C){const S=B(h[C],w[C]);if(0!==S)return S;const N=Uh(c[h[C]],m[w[C]]);if(0!==N)return N}return B(h.length,w.length)}(n.mapValue,e.mapValue);default:throw ct()}}function pP(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return B(n,e);const t=Lh(n),r=Lh(e),i=B(t.seconds,r.seconds);return 0!==i?i:B(t.nanos,r.nanos)}function z_(n){return EA(n)}function EA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Lh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sg(n.bytesValue).toBase64():"referenceValue"in n?Oe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=EA(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const h of i)c?c=!1:a+=",",a+=`${h}:${EA(r.fields[h])}`;return a+"}"}(n.mapValue):ct();var e}function ag(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function IA(n){return!!n&&"integerValue"in n}function o0(n){return!!n&&"arrayValue"in n}function gP(n){return!!n&&"nullValue"in n}function mP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function RC(n){return!!n&&"mapValue"in n}function a0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ig(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=a0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=a0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _P(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function SL(n){return"nullValue"in n?AC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ag(nd.empty(),Oe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function AL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ag(nd.empty(),Oe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Fh:ct()}function yP(n,e){const t=Uh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vP(n,e){const t=Uh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ki{constructor(e){this.value=e}static empty(){return new ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!RC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=a0(t)}setAll(e){let t=at.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=a0(c):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());RC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];RC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ig(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ki(a0(this.value))}}function wP(n){const e=[];return ig(n.fields,(t,r)=>{const i=new at([t]);if(RC(r)){const a=wP(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Ao(e)}class Bn{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Bn(e,0,Ee.min(),Ee.min(),ki.empty(),0)}static newFoundDocument(e,t,r){return new Bn(e,1,t,Ee.min(),r,0)}static newNoDocument(e,t){return new Bn(e,2,t,Ee.min(),ki.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,Ee.min(),ki.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class RL{constructor(e,t=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this.ut=null}}function EP(n,e=null,t=[],r=[],i=null,a=null,c=null){return new RL(n,e,t,r,i,a,c)}function ug(n){const e=et(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+z_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),n0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>z_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>z_(r)).join(",")),e.ut=t}return e.ut}function u0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!UL(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!fc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!TP(n.startAt,e.startAt)&&TP(n.endAt,e.endAt)}function xC(n){return Oe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function MC(n,e){return n.filters.filter(t=>t instanceof Oi&&t.field.isEqual(e))}function IP(n,e,t){let r=AC,i=!0;for(const a of MC(n,e)){let c=AC,h=!0;switch(a.op){case"<":case"<=":c=SL(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,h=!1;break;case"!=":case"not-in":c=AC}yP({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];yP({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function bP(n,e,t){let r=Fh,i=!0;for(const a of MC(n,e)){let c=Fh,h=!0;switch(a.op){case">=":case">":c=AL(a.value),h=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,h=!1;break;case"!=":case"not-in":c=Fh}vP({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];vP({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Oi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new ML(e,t,r):"array-contains"===t?new kL(e,r):"in"===t?new OL(e,r):"not-in"===t?new LL(e,r):"array-contains-any"===t?new FL(e,r):new Oi(e,t,r)}static ct(e,t,r){return"in"===t?new PL(e,r):new NL(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Uh(t,this.value)):null!==t&&og(this.value)===og(t)&&this.at(Uh(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ML extends Oi{constructor(e,t,r){super(e,t,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.at(t)}}class PL extends Oi{constructor(e,t){super(e,"in",t),this.keys=CP(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class NL extends Oi{constructor(e,t){super(e,"not-in",t),this.keys=CP(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function CP(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Oe.fromName(r.referenceValue))}class kL extends Oi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return o0(t)&&s0(t.arrayValue,this.value)}}class OL extends Oi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&s0(this.value.arrayValue,t)}}class LL extends Oi{constructor(e,t){super(e,"not-in",t)}matches(e){if(s0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!s0(this.value.arrayValue,t)}}class FL extends Oi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!o0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>s0(this.value.arrayValue,r))}}class Vh{constructor(e,t){this.position=e,this.inclusive=t}}class W_{constructor(e,t="asc"){this.field=e,this.dir=t}}function UL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function DP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Oe.comparator(Oe.fromName(c.referenceValue),t.key):Uh(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function TP(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fc(n.position[t],e.position[t]))return!1;return!0}class rd{constructor(e,t=null,r=[],i=[],a=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=m,this.lt=null,this.ft=null}}function SP(n,e,t,r,i,a,c,h){return new rd(n,e,t,r,i,a,c,h)}function q_(n){return new rd(n)}function bA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function CA(n){for(const e of n.filters)if(e.ht())return e.field;return null}function DA(n){return null!==n.collectionGroup}function K_(n){const e=et(n);if(null===e.lt){e.lt=[];const t=CA(e),r=bA(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new W_(t)),e.lt.push(new W_(at.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new W_(at.keyField(),a))}}}return e.lt}function ya(n){const e=et(n);if(!e.ft)if("F"===e.limitType)e.ft=EP(e.path,e.collectionGroup,K_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of K_(e))t.push(new W_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Vh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Vh(e.startAt.position,e.startAt.inclusive):null;e.ft=EP(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function AP(n,e,t){return new rd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function c0(n,e){return u0(ya(n),ya(e))&&n.limitType===e.limitType}function RP(n){return`${ug(ya(n))}|lt:${n.limitType}`}function TA(n){return`Query(target=${function xL(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${z_(r.value)}`;var r}).join(", ")}]`),n0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>z_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>z_(t)).join(",")),`Target(${e})`}(ya(n))}; limitType=${n.limitType})`}function SA(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Oe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const h=DP(i,a,c);return i.inclusive?h<=0:h<0}(t.startAt,K_(t),r)||t.endAt&&!function(i,a,c){const h=DP(i,a,c);return i.inclusive?h>=0:h>0}(t.endAt,K_(t),r)));var t,r}function xP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MP(n){return(e,t)=>{let r=!1;for(const i of K_(n)){const a=BL(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function BL(n,e,t){const r=n.field.isKeyField()?Oe.comparator(e.key,t.key):function(i,a,c){const h=a.data.field(i),m=c.data.field(i);return null!==h&&null!==m?Uh(h,m):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function PP(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:r0(e)?"-0":e}}function NP(n){return{integerValue:""+n}}function kP(n,e){return fP(e)?NP(e):PP(n,e)}class PC{constructor(){this._=void 0}}function jL(n,e,t){return n instanceof Z_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof cg?LP(n,e):n instanceof lg?FP(n,e):function(r,i){const a=OP(r,i),c=UP(a)+UP(r._t);return IA(a)&&IA(r._t)?NP(c):PP(r.wt,c)}(n,e)}function $L(n,e,t){return n instanceof cg?LP(n,e):n instanceof lg?FP(n,e):t}function OP(n,e){return n instanceof Y_?IA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Z_ extends PC{}class cg extends PC{constructor(e){super(),this.elements=e}}function LP(n,e){const t=VP(e);for(const r of n.elements)t.some(i=>fc(i,r))||t.push(r);return{arrayValue:{values:t}}}class lg extends PC{constructor(e){super(),this.elements=e}}function FP(n,e){let t=VP(e);for(const r of n.elements)t=t.filter(i=>!fc(i,r));return{arrayValue:{values:t}}}class Y_ extends PC{constructor(e,t){super(),this.wt=e,this._t=t}}function UP(n){return fr(n.integerValue||n.doubleValue)}function VP(n){return o0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class l0{constructor(e,t){this.field=e,this.transform=t}}class GL{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function NC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class kC{}function BP(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new X_(n.key,sr.none()):new Q_(n.key,n.data,sr.none());{const t=n.data,r=ki.empty();let i=new Rn(at.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new id(n.key,r,new Ao(i.toArray()),sr.none())}}function zL(n,e,t){n instanceof Q_?function(r,i,a){const c=r.value.clone(),h=HP(r.fieldTransforms,i,a.transformResults);c.setAll(h),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof id?function(r,i,a){if(!NC(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=HP(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll($P(r)),h.setAll(c),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function d0(n,e,t,r){return n instanceof Q_?function(i,a,c,h){if(!NC(i.precondition,a))return c;const m=i.value.clone(),w=GP(i.fieldTransforms,h,a);return m.setAll(w),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof id?function(i,a,c,h){if(!NC(i.precondition,a))return c;const m=GP(i.fieldTransforms,h,a),w=a.data;return w.setAll($P(i)),w.setAll(m),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(c=t,NC(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function WL(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=OP(r.transform,i||null);null!=a&&(null===t&&(t=ki.empty()),t.set(r.field,a))}return t||null}function jP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&J(t,r,(i,a)=>function HL(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof cg&&r instanceof cg||t instanceof lg&&r instanceof lg?J(t.elements,r.elements,fc):t instanceof Y_&&r instanceof Y_?fc(t._t,r._t):t instanceof Z_&&r instanceof Z_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Q_ extends kC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class id extends kC{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $P(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function HP(n,e,t){const r=new Map;Rt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,$L(c,h,t[i]))}return r}function GP(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,jL(a,c,e))}return r}class X_ extends kC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AA extends kC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qL{constructor(e){this.count=e}}var jr,un;function zP(n){switch(n){default:return ct();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function WP(n){if(void 0===n)return Sr("GRPC error has no .code"),he.UNKNOWN;switch(n){case jr.OK:return he.OK;case jr.CANCELLED:return he.CANCELLED;case jr.UNKNOWN:return he.UNKNOWN;case jr.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case jr.INTERNAL:return he.INTERNAL;case jr.UNAVAILABLE:return he.UNAVAILABLE;case jr.UNAUTHENTICATED:return he.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case jr.NOT_FOUND:return he.NOT_FOUND;case jr.ALREADY_EXISTS:return he.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return he.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case jr.ABORTED:return he.ABORTED;case jr.OUT_OF_RANGE:return he.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return he.UNIMPLEMENTED;case jr.DATA_LOSS:return he.DATA_LOSS;default:return ct()}}(un=jr||(jr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class Bh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ig(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return lP(this.inner)}size(){return this.innerSize}}const KL=new hr(Oe.comparator);function Zs(){return KL}const qP=new hr(Oe.comparator);function h0(...n){let e=qP;for(const t of n)e=e.insert(t.key,t);return e}function KP(n){let e=qP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function pc(){return f0()}function ZP(){return f0()}function f0(){return new Bh(n=>n.toString(),(n,e)=>n.isEqual(e))}const ZL=new hr(Oe.comparator),YL=new Rn(Oe.comparator);function Wt(...n){let e=YL;for(const t of n)e=e.add(t);return e}const QL=new Rn(B);function OC(){return QL}class p0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,g0.createSynthesizedTargetChangeForCurrentChange(e,t)),new p0(Ee.min(),r,OC(),Zs(),Wt())}}class g0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new g0(ni.EMPTY_BYTE_STRING,t,Wt(),Wt(),Wt())}}class LC{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class YP{constructor(e,t){this.targetId=e,this.It=t}}class QP{constructor(e,t,r=ni.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class XP{constructor(){this.Tt=0,this.Et=eN(),this.At=ni.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Wt(),t=Wt(),r=Wt();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new g0(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=eN()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class XL{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Zs(),this.Bt=JP(),this.Lt=new Rn(B)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(xC(a))if(0===r){const c=new Oe(a.path);this.Kt(t,c,Bn.newNoDocument(c,Ee.min()))}else Rt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,c)=>{const h=this.Ht(c);if(h){if(a.current&&xC(h.target)){const m=new Oe(h.target.path);null!==this.$t.get(m)||this.Xt(c,m)||this.Kt(c,m,Bn.newNoDocument(m,e))}a.vt&&(t.set(c,a.St()),a.Dt())}});let r=Wt();this.Bt.forEach((a,c)=>{let h=!0;c.forEachWhile(m=>{const w=this.Ht(m);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.$t.forEach((a,c)=>c.setReadTime(e));const i=new p0(e,t,this.Lt,this.$t,r);return this.$t=Zs(),this.Bt=JP(),this.Lt=new Rn(B),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new XP,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Rn(B),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new XP),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function JP(){return new hr(Oe.comparator)}function eN(){return new hr(Oe.comparator)}const JL={asc:"ASCENDING",desc:"DESCENDING"},eF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class tF{constructor(e,t){this.databaseId=e,this.dt=t}}function m0(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tN(n,e){return n.dt?e.toBase64():e.toUint8Array()}function nF(n,e){return m0(n,e.toTimestamp())}function di(n){return Rt(!!n),Ee.fromTimestamp(function(e){const t=Lh(e);return new Ce(t.seconds,t.nanos)}(n))}function RA(n,e){return(t=n,new Ke(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function nN(n){const e=Ke.fromString(n);return Rt(dN(e)),e}function _0(n,e){return RA(n.databaseId,e.path)}function gc(n,e){const t=nN(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(iN(t))}function xA(n,e){return RA(n.databaseId,e)}function rN(n){const e=nN(n);return 4===e.length?Ke.emptyPath():iN(e)}function y0(n){return new Ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iN(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function sN(n,e,t){return{name:_0(n,e),fields:t.value.mapValue.fields}}function oN(n,e,t){const r=gc(n,e.name),i=di(e.updateTime),a=new ki({mapValue:{fields:e.fields}}),c=Bn.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function v0(n,e){let t;if(e instanceof Q_)t={update:sN(n,e.key,e.value)};else if(e instanceof X_)t={delete:_0(n,e.key)};else if(e instanceof id)t={update:sN(n,e.key,e.data),updateMask:dF(e.fieldMask)};else{if(!(e instanceof AA))return ct();t={verify:_0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Z_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof cg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof lg)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Y_)return{fieldPath:a.field.canonicalString(),increment:c._t};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:nF(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function MA(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?sr.updateTime(di(i.updateTime)):void 0!==i.exists?sr.exists(i.exists):sr.none():sr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;"setToServerValue"in c?(Rt("REQUEST_TIME"===c.setToServerValue),h=new Z_):"appendMissingElements"in c?h=new cg(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new lg(c.removeAllFromArray.values||[]):"increment"in c?h=new Y_(a,c.increment):ct();const m=at.fromServerFormat(c.fieldPath);return new l0(m,h)}(n,i)):[];var i;if(e.update){const i=gc(n,e.update.name),a=new ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Ao((e.updateMask.fieldPaths||[]).map(w=>at.fromServerFormat(w)));return new id(i,a,c,t,r)}return new Q_(i,a,t,r)}if(e.delete){const i=gc(n,e.delete);return new X_(i,t)}if(e.verify){const i=gc(n,e.verify);return new AA(i,t)}return ct()}function aN(n,e){return{documents:[xA(n,e.path)]}}function uN(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=xA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const w=m.map(C=>function(S){if("=="===S.op){if(mP(S.value))return{unaryFilter:{field:J_(S.field),op:"IS_NAN"}};if(gP(S.value))return{unaryFilter:{field:J_(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(mP(S.value))return{unaryFilter:{field:J_(S.field),op:"IS_NOT_NAN"}};if(gP(S.value))return{unaryFilter:{field:J_(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:J_(S.field),op:uF(S.op),value:S.value}}}(C));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(w=>{return{field:J_((C=w).field),direction:aF(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(w=e.limit,n.dt||n0(w)?w:{value:w});var w,h,m;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function cN(n){let e=rN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Rt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=lN(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new W_(ey((S=C).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(C){let S;return S="object"==typeof C?C.value:C,n0(S)?null:S}(t.limit));let m=null;var C;t.startAt&&(m=new Vh((C=t.startAt).values||[],!!C.before));let w=null;return t.endAt&&(w=function(C){return new Vh(C.values||[],!C.before)}(t.endAt)),SP(e,i,c,a,h,"F",m,w)}function lN(n){return n?void 0!==n.unaryFilter?[lF(n)]:void 0!==n.fieldFilter?[cF(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>lN(e)).reduce((e,t)=>e.concat(t)):ct():[]}function aF(n){return JL[n]}function uF(n){return eF[n]}function J_(n){return{fieldPath:n.canonicalString()}}function ey(n){return at.fromServerFormat(n.fieldPath)}function cF(n){return Oi.create(ey(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function lF(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ey(n.unaryFilter.field);return Oi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ey(n.unaryFilter.field);return Oi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ey(n.unaryFilter.field);return Oi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ey(n.unaryFilter.field);return Oi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function dF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dN(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function vs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hN(e)),e=hF(n.get(t),e);return hN(e)}function hF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function hN(n){return n+"\x01\x01"}function mc(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ke.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&ct(),n.charAt(c+1)){case"\x01":const h=n.substring(a,c);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:ct()}a=c+2}return new Ke(r)}const fN=["userId","batchId"];function FC(n,e){return[n,vs(e)]}function pN(n,e,t){return[n,vs(e),t]}const fF={},pF=["prefixPath","collectionGroup","readTime","documentId"],gF=["prefixPath","collectionGroup","documentId"],mF=["collectionGroup","readTime","prefixPath","documentId"],_F=["canonicalId","targetId"],yF=["targetId","path"],vF=["path","targetId"],wF=["collectionId","parent"],EF=["indexId","uid"],IF=["uid","sequenceNumber"],bF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CF=["indexId","uid","orderedDocumentKey"],DF=["userId","collectionPath","documentId"],TF=["userId","collectionPath","largestBatchId"],SF=["userId","collectionGroup","largestBatchId"],gN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AF=[...gN,"documentOverlays"],mN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_N=mN,RF=[..._N,"indexConfiguration","indexState","indexEntries"];class PA extends aP{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function hi(n,e){const t=et(n);return au.N(t.ee,e)}class NA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&zL(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=d0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=d0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ZP();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(i.key)?null:h;const m=BP(c,h);null!==m&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&J(this.mutations,e.mutations,(t,r)=>jP(t,r))&&J(this.baseMutations,e.baseMutations,(t,r)=>jP(t,r))}}class kA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Rt(e.mutations.length===r.length);let i=ZL;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new kA(e,t,r,i)}}class OA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jh{constructor(e,t,r,i,a=Ee.min(),c=Ee.min(),h=ni.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new jh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new jh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new jh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class yN{constructor(e){this.ne=e}}function vN(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:UC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:_0(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:m0(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:dg(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:dg(e.version)}}var i,a;return r}function UC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hg(n){const e=new Ce(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function fg(n,e){const t=(e.baseMutations||[]).map(a=>MA(n.ne,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>MA(n.ne,a)),i=Ce.fromMillis(e.localWriteTimeMs);return new NA(e.batchId,i,t,r)}function w0(n){const e=hg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hg(n.lastLimboFreeSnapshotVersion):Ee.min();let r;var i;return void 0!==n.query.documents?(Rt(1===(i=n.query).documents.length),r=ya(q_(rN(i.documents[0])))):r=ya(cN(n.query)),new jh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ni.fromBase64String(n.resumeToken))}function wN(n,e){const t=dg(e.snapshotVersion),r=dg(e.lastLimboFreeSnapshotVersion);let i;i=xC(e.target)?aN(n.ne,e.target):uN(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ug(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function LA(n){const e=cN({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?AP(e,e.limit,"L"):e}function FA(n,e){return new OA(e.largestBatchId,MA(n.ne,e.overlayMutation))}function EN(n,e){const t=e.path.lastSegment();return[n,vs(e.path.popLast()),t]}function IN(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:dg(r.readTime),documentKey:vs(r.documentKey.path),largestBatchId:r.largestBatchId}}class MF{getBundleMetadata(e,t){return bN(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:hg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return bN(e).put({bundleId:(r=t).id,createTime:dg(di(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return CN(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:LA(i.bundledQuery),readTime:hg(i.readTime)};var i})}saveNamedQuery(e,t){return CN(e).put({name:(r=t).name,readTime:dg(di(r.readTime)),bundledQuery:r.bundledQuery});var r}}function bN(n){return hi(n,"bundles")}function CN(n){return hi(n,"namedQueries")}class VC{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new VC(e,t.uid||"")}getOverlay(e,t){return E0(e).get(EN(this.userId,t)).next(r=>r?FA(this.wt,r):null)}getOverlays(e,t){const r=pc();return ce.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const h=new OA(t,c);i.push(this.ie(e,h))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(vs(c.getCollectionPath())));const a=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(E0(e).W("collectionPathOverlayIndex",h))}),ce.waitFor(a)}getOverlaysForCollection(e,t,r){const i=pc(),a=vs(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return E0(e).K("collectionPathOverlayIndex",c).next(h=>{for(const m of h){const w=FA(this.wt,m);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=pc();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return E0(e).J({index:"collectionGroupOverlayIndex",range:h},(m,w,C)=>{const S=FA(this.wt,w);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):C.done()}).next(()=>a)}ie(e,t){return E0(e).put(function(r,i,a){const[c,h,m]=EN(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:v0(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function E0(n){return hi(n,"documentOverlays")}class pg{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(fr(e.integerValue));else if("doubleValue"in e){const r=fr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),r0(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(sg(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?_P(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):ct()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),Oe.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function PF(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function DN(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=PF(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}pg.ye=new pg;class NF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=DN(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=DN(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class kF{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class OF{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class I0{constructor(){this.Me=new NF,this.Fe=new kF(this.Me),this.$e=new OF(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class gg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gg(this.indexId,this.documentKey,this.arrayValue,r)}}function mg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=TN(n.arrayValue,e.arrayValue),0!==t?t:(t=TN(n.directionalValue,e.directionalValue),0!==t?t:Oe.comparator(n.documentKey,e.documentKey)))}function TN(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class LF{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=CC(e);if(void 0!==t&&!this.Qe(t))return!1;const r=ng(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[a++],c))return!1;++i}for(;i<r.length;++i)if(a>=this.Ue.length||!this.We(this.Ue[a++],r[i]))return!1;return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class FF{constructor(){this.ze=new UA}addToCollectionParentIndex(e,t){return this.ze.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(So.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(So.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class UA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Rn(Ke.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rn(Ke.comparator)).toArray()}}const BC=new Uint8Array(0);class UF{constructor(e,t){this.user=e,this.databaseId=t,this.He=new UA,this.Je=new Bh(r=>ug(r),(r,i)=>u0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:vs(i)};return SN(e).put(a)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ve(t),""],!1,!0);return SN(e).K(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(mc(c.parent))}return r})}addFieldIndex(e,t){const r=jC(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=C0(e);return a.next(h=>{c.put(IN(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=jC(e),i=C0(e),a=b0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=b0(e);let i=!0;const a=new Map;return ce.forEach(this.Ye(t),c=>this.Xe(e,c).next(h=>{i&&(i=!!h),a.set(c,h)})).next(()=>{if(i){let c=Wt();const h=[];return ce.forEach(a,(m,w)=>{var C;Ve("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(lt=>`${lt.fieldPath}:${lt.kind}`).join(",")}`} to execute ${ug(t)}`);const S=function(lt,ut){const xt=CC(ut);if(void 0===xt)return null;for(const Jt of MC(lt,xt.fieldPath))switch(Jt.op){case"array-contains-any":return Jt.value.arrayValue.values||[];case"array-contains":return[Jt.value]}return null}(w,m),N=function(lt,ut){const xt=new Map;for(const Jt of ng(ut))for(const Hr of MC(lt,Jt.fieldPath))switch(Hr.op){case"==":case"in":xt.set(Jt.fieldPath.canonicalString(),Hr.value);break;case"not-in":case"!=":return xt.set(Jt.fieldPath.canonicalString(),Hr.value),Array.from(xt.values())}return null}(w,m),V=function(lt,ut){const xt=[];let Jt=!0;for(const Hr of ng(ut)){const lu=0===Hr.kind?IP(lt,Hr.fieldPath,lt.startAt):bP(lt,Hr.fieldPath,lt.startAt);xt.push(lu.value),Jt&&(Jt=lu.inclusive)}return new Vh(xt,Jt)}(w,m),Z=function(lt,ut){const xt=[];let Jt=!0;for(const Hr of ng(ut)){const lu=0===Hr.kind?bP(lt,Hr.fieldPath,lt.endAt):IP(lt,Hr.fieldPath,lt.endAt);xt.push(lu.value),Jt&&(Jt=lu.inclusive)}return new Vh(xt,Jt)}(w,m),ge=this.Ze(m,w,V),Ie=this.Ze(m,w,Z),mt=this.tn(m,w,N),dt=this.en(m.indexId,S,ge,V.inclusive,Ie,Z.inclusive,mt);return ce.forEach(dt,lt=>r.j(lt,t.limit).next(ut=>{ut.forEach(xt=>{const Jt=Oe.fromSegments(xt.documentKey);c.has(Jt)||(c=c.add(Jt),h.push(Jt))})}))}).next(()=>h)}return ce.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,c,h){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),w=m/(null!=t?t.length:1),C=[];for(let S=0;S<m;++S){const N=t?this.nn(t[S/w]):BC,V=this.sn(e,N,r[S%w],i),Z=this.rn(e,N,a[S%w],c),ge=h.map(Ie=>this.sn(e,N,Ie,!0));C.push(...this.createRange(V,Z,ge))}return C}sn(e,t,r,i){const a=new gg(e,Oe.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new gg(e,Oe.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new LF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const h of a)r.Ge(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;return ce.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(c){let h=new Rn(at.comparator),m=!1;for(const w of c.filters){const C=w;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?m=!0:h=h.add(C.field))}for(const w of c.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new I0;for(const i of ng(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Be(i.kind);pg.ye.re(a,c)}return r.Oe()}nn(e){const t=new I0;return pg.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new I0;return pg.ye.re(ag(this.databaseId,t),r.Be(function(i){const a=ng(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new I0);let a=0;for(const c of ng(e)){const h=r[a++];for(const m of i)if(this.cn(t,c.fieldPath)&&o0(h))i=this.an(i,c,h);else{const w=m.Be(c.kind);pg.ye.re(h,w)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const h of i){const m=new I0;m.seed(h.Oe()),pg.ye.re(c,m.Be(t.kind)),a.push(m)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof Oi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=jC(e),i=C0(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const c=[];return ce.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{c.push(function(w,C){const S=C?new Jw(C.sequenceNumber,new So(hg(C.readTime),new Oe(mc(C.documentKey)),C.largestBatchId)):Jw.empty(),N=w.fields.map(([V,Z])=>new DC(at.fromServerFormat(V),Z));return new Vn(w.indexId,w.collectionGroup,N,S)}(h,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:B(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=jC(e),a=C0(e);return this.ln(e).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ce.forEach(h,m=>a.put(IN(m.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ce.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ce.forEach(h,m=>this.fn(e,i,m).next(w=>{const C=this.dn(a,m);return w.isEqual(C)?ce.resolve():this._n(e,a,m,w,C)}))))})}wn(e,t,r,i){return b0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return b0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=b0(e);let a=new Rn(mg);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(c,h)=>{a=a.add(new gg(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}dn(e,t){let r=new Rn(mg);const i=this.on(t,e);if(null==i)return r;const a=CC(t);if(null!=a){const c=e.data.field(a.fieldPath);if(o0(c))for(const h of c.arrayValue.values||[])r=r.add(new gg(t.indexId,e.key,this.nn(h),i))}else r=r.add(new gg(t.indexId,e.key,BC,i));return r}_n(e,t,r,i,a){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,m,w,C,S){const N=h.getIterator(),V=m.getIterator();let Z=G_(N),ge=G_(V);for(;Z||ge;){let Ie=!1,mt=!1;if(Z&&ge){const dt=w(Z,ge);dt<0?mt=!0:dt>0&&(Ie=!0)}else null!=Z?mt=!0:Ie=!0;Ie?(C(ge),ge=G_(V)):mt?(S(Z),Z=G_(N)):(Z=G_(N),ge=G_(V))}}(i,a,mg,h=>{c.push(this.wn(e,t,r,h))},h=>{c.push(this.mn(e,t,r,h))}),ce.waitFor(c)}ln(e){let t=1;return C0(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>mg(c,h)).filter((c,h,m)=>!h||0!==mg(c,m[h-1]));const i=[];i.push(e);for(const c of r){const h=mg(c,e),m=mg(c,t);if(0===h)i[0]=e.Le();else if(h>0&&m<0)i.push(c),i.push(c.Le());else if(m>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2)a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,BC,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,BC,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(AN)}getMinOffset(e,t){return ce.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||ct())).next(AN)}}function SN(n){return hi(n,"collectionParents")}function b0(n){return hi(n,"indexEntries")}function jC(n){return hi(n,"indexConfiguration")}function C0(n){return hi(n,"indexState")}function AN(n){Rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;_A(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new So(e.readTime,e.documentKey,t)}const RN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ys{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ys(e,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xN(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let h=0;const m=r.J({range:c},(C,S,N)=>(h++,N.delete()));a.push(m.next(()=>{Rt(1===h)}));const w=[];for(const C of t.mutations){const S=pN(e,C.key.path,t.batchId);a.push(i.delete(S)),w.push(C.key)}return ce.waitFor(a).next(()=>w)}function $C(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}Ys.DEFAULT_COLLECTION_PERCENTILE=10,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ys.DEFAULT=new Ys(41943040,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ys.DISABLED=new Ys(-1,0,0);class HC{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){Rt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new HC(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $h(e).J({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=ty(e),c=$h(e);return c.add({}).next(h=>{Rt("number"==typeof h);const m=new NA(h,t,r,i),w=function(N,V,Z){const ge=Z.baseMutations.map(mt=>v0(N.ne,mt)),Ie=Z.mutations.map(mt=>v0(N.ne,mt));return{userId:V,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:ge,mutations:Ie}}(this.wt,this.userId,m),C=[];let S=new Rn((N,V)=>B(N.canonicalString(),V.canonicalString()));for(const N of i){const V=pN(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),C.push(c.put(w)),C.push(a.put(V,fF))}return S.forEach(N=>{C.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.gn[h]=m.keys()}),ce.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return $h(e).get(t).next(r=>r?(Rt(r.userId===this.userId),fg(this.wt,r)):null)}yn(e,t){return this.gn[t]?ce.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return $h(e).J({index:"userMutationsIndex",range:i},(c,h,m)=>{h.userId===this.userId&&(Rt(h.batchId>=r),a=fg(this.wt,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $h(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $h(e).K("userMutationsIndex",t).next(r=>r.map(i=>fg(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=FC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ty(e).J({range:i},(c,h,m)=>{const[w,C,S]=c,N=mc(C);if(w===this.userId&&t.path.isEqual(N))return $h(e).get(S).next(V=>{if(!V)throw ct();Rt(V.userId===this.userId),a.push(fg(this.wt,V))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(B);const i=[];return t.forEach(a=>{const c=FC(this.userId,a.path),h=IDBKeyRange.lowerBound(c),m=ty(e).J({range:h},(w,C,S)=>{const[N,V,Z]=w,ge=mc(V);N===this.userId&&a.path.isEqual(ge)?r=r.add(Z):S.done()});i.push(m)}),ce.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=FC(this.userId,r),c=IDBKeyRange.lowerBound(a);let h=new Rn(B);return ty(e).J({range:c},(m,w,C)=>{const[S,N,V]=m,Z=mc(N);S===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(h=h.add(V)):C.done()}).next(()=>this.pn(e,h))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push($h(e).get(a).next(c=>{if(null===c)throw ct();Rt(c.userId===this.userId),r.push(fg(this.wt,c))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return xN(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ty(e).J({range:r},(a,c,h)=>{if(a[0]===this.userId){const m=mc(a[1]);i.push(m)}else h.done()}).next(()=>{Rt(0===i.length)})})}containsKey(e,t){return MN(e,this.userId,t)}Tn(e){return PN(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function MN(n,e,t){const r=FC(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return ty(n).J({range:a,H:!0},(h,m,w)=>{const[C,S,N]=h;C===e&&S===i&&(c=!0),w.done()}).next(()=>c)}function $h(n){return hi(n,"mutations")}function ty(n){return hi(n,"documentMutations")}function PN(n){return hi(n,"mutationQueues")}class _g{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new _g(0)}static Rn(){return new _g(-1)}}class VF{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new _g(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Ee.fromTimestamp(new Ce(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ny(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ny(e).J((c,h)=>{const m=w0(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>ce.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ny(e).J((r,i)=>{const a=w0(i);t(a)})}bn(e){return NN(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}Pn(e,t){return NN(e).put("targetGlobalKey",t)}vn(e,t){return ny(e).put(wN(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ug(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ny(e).J({range:i,index:"queryTargetsIndex"},(c,h,m)=>{const w=w0(h);u0(t,w.target)&&(a=w,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Hh(e);return t.forEach(c=>{const h=vs(c.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=Hh(e);return ce.forEach(t,a=>{const c=vs(a.path);return ce.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Hh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Hh(e);let a=Wt();return i.J({range:r,H:!0},(c,h,m)=>{const w=mc(c[1]),C=new Oe(w);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=vs(t.path),i=IDBKeyRange.bound([r],[ve(r)],!1,!0);let a=0;return Hh(e).J({index:"documentTargetsIndex",H:!0,range:i},([c,h],m,w)=>{0!==c&&(a++,w.done())}).next(()=>a>0)}te(e,t){return ny(e).get(t).next(r=>r?w0(r):null)}}function ny(n){return hi(n,"targets")}function NN(n){return hi(n,"targetGlobal")}function Hh(n){return hi(n,"targetDocuments")}function kN([n,e],[t,r]){const i=B(n,t);return 0===i?B(e,r):i}class BF{constructor(e){this.Sn=e,this.buffer=new Rn(kN),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ue.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Oh(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield kh(r)}yield t.kn(3e5)}))}}class $F{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Ks.ot);const r=new BF(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(RN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RN):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,a,c,h,m,w;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),Qw()<=Er.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(w-m)+`ms\nTotal Duration: ${w-C}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class HF{constructor(e,t){this.db=e,this.garbageCollector=new $F(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return GC(e,r)}removeReference(e,t,r){return GC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return GC(e,t)}Un(e,t){return function(r,i){let a=!1;return PN(r).Y(c=>MN(r,c,i).next(h=>(h&&(a=!0),ce.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(c,h)=>{if(h<=t){const m=this.Un(e,c).next(w=>{if(!w)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ee.min()),Hh(e).delete([0,vs(c.path)])))});i.push(m)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return GC(e,t)}Ln(e,t){const r=Hh(e);let i,a=Ks.ot;return r.J({index:"documentTargetsIndex"},([c,h],{path:m,sequenceNumber:w})=>{0===c?(a!==Ks.ot&&t(new Oe(mc(i)),a),a=w,i=m):a=Ks.ot}).next(()=>{a!==Ks.ot&&t(new Oe(mc(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function GC(n,e){return Hh(n).put((r=n.currentSequenceNumber,{targetId:0,path:vs(e.path),sequenceNumber:r}));var r}class ON{constructor(){this.changes=new Bh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class GF{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yg(e).put(r)}removeEntry(e,t,r){return yg(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],UC(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Bn.newInvalidDocument(t);return yg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(D0(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:Bn.newInvalidDocument(t)};return yg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(D0(t))},(i,a)=>{r={document:this.Kn(t,a),size:$C(a)}}).next(()=>r)}getEntries(e,t){let r=Zs();return this.Qn(e,t,(i,a)=>{const c=this.Kn(i,a);r=r.insert(i,c)}).next(()=>r)}jn(e,t){let r=Zs(),i=new hr(Oe.comparator);return this.Qn(e,t,(a,c)=>{const h=this.Kn(a,c);r=r.insert(a,h),i=i.insert(a,$C(c))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return ce.resolve();let i=new Rn(VN);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(D0(i.first()),D0(i.last())),c=i.getIterator();let h=c.getNext();return yg(e).J({index:"documentKeyIndex",range:a},(m,w,C)=>{const S=Oe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&VN(h,S)<0;)r(h,null),h=c.getNext();h&&h.isEqual(S)&&(r(h,w),h=c.hasNext()?c.getNext():null),h?C.q(D0(h)):C.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),UC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yg(e).K(IDBKeyRange.bound(i,a,!0)).next(c=>{let h=Zs();for(const m of c){const w=this.Kn(Oe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Zs();const c=UN(t,r),h=UN(t,So.max());return yg(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(m,w,C)=>{const S=this.Kn(Oe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new zF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return FN(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}qn(e,t){return FN(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function xF(n,e){let t;if(e.document)t=oN(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Oe.fromSegments(e.noDocument.path),i=hg(e.noDocument.readTime);t=Bn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Oe.fromSegments(e.unknownDocument.path),i=hg(e.unknownDocument.version);t=Bn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ce(r[0],r[1]);return Ee.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Ee.min()))return r}return Bn.newInvalidDocument(e)}}function LN(n){return new GF(n)}class zF extends ON{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Bh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Rn((a,c)=>B(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const h=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,h.readTime)),c.isValidDocument()){const m=vN(this.zn.wt,c);i=i.add(a.path.popLast());const w=$C(m);r+=w-h.size,t.push(this.zn.addEntry(e,a,m))}else if(r-=h.size,this.trackRemovals){const m=vN(this.zn.wt,c.convertToNoDocument(Ee.min()));t.push(this.zn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,c)=>{this.Hn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function FN(n){return hi(n,"remoteDocumentGlobal")}function yg(n){return hi(n,"remoteDocumentsV14")}function D0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UN(n,e){const t=e.documentKey.path.toArray();return[n,UC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function VN(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=B(t[a],r[a]),i)return i;return i=B(t.length,r.length),i||(i=B(t[t.length-2],r[r.length-2]),i||B(t[t.length-1],r[r.length-1]))}class WF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class BN{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&d0(r.mutation,i,Ao.empty(),Ce.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const i=pc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=h0();return a.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=pc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let a=Zs();const c=f0(),h=f0();return t.forEach((m,w)=>{const C=r.get(w.key);i.has(w.key)&&(void 0===C||C.mutation instanceof id)?a=a.insert(w.key,w):void 0!==C&&(c.set(w.key,C.mutation.getFieldMask()),d0(C.mutation,w,C.mutation.getFieldMask(),Ce.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((w,C)=>c.set(w,C)),t.forEach((w,C)=>{var S;return h.set(w,new WF(C,null!==(S=c.get(w))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=f0();let i=new hr((c,h)=>c-h),a=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(m=>{const w=t.get(m);if(null===w)return;let C=r.get(m)||Ao.empty();C=h.applyToLocalView(w,C),r.set(m,C);const S=(i.get(h.batchId)||Wt()).add(m);i=i.insert(h.batchId,S)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),w=m.key,C=m.value,S=ZP();C.forEach(N=>{if(!a.has(N)){const V=BP(t.get(N),r.get(N));null!==V&&S.set(N,V),a=a.add(N)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,S))}return ce.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Oe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):DA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ce.resolve(pc());let h=-1,m=a;return c.next(w=>ce.forEach(w,(C,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(C)?ce.resolve():this.getBaseDocument(e,C,S).next(N=>{m=m.insert(C,N)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,m,w,Wt())).next(C=>({batchId:h,changes:KP(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next(r=>{let i=h0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=h0();return this.indexManager.getCollectionParents(e,i).next(c=>ce.forEach(c,h=>{const m=(w=t,C=h.child(i),new rd(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,C;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(w=>{w.forEach((C,S)=>{a=a.insert(C,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,m)=>{const w=m.getKey();null===i.get(w)&&(i=i.insert(w,Bn.newInvalidDocument(w)))});let c=h0();return i.forEach((h,m)=>{const w=a.get(h);void 0!==w&&d0(w.mutation,m,Ao.empty(),Ce.now()),SA(t,m)&&(c=c.insert(h,m))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ce.resolve(Bn.newInvalidDocument(t))}}class qF{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ce.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:di(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:LA(r.bundledQuery),readTime:di(r.readTime)}),ce.resolve();var r}}class KF{constructor(){this.overlays=new hr(Oe.comparator),this.Xn=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=pc();return ce.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=pc(),a=t.length+1,c=new Oe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,w=m.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new hr((w,C)=>w-C);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let C=a.get(w.largestBatchId);null===C&&(C=pc(),a=a.insert(w.largestBatchId,C)),C.set(w.getKey(),w)}}const h=pc(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((w,C)=>h.set(w,C)),!(h.size()>=i)););return ce.resolve(h)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new OA(t,r));let a=this.Xn.get(t);void 0===a&&(a=Wt(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class VA{constructor(){this.Zn=new Rn(fi.ts),this.es=new Rn(fi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new fi(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new fi(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Oe(new Ke([])),r=new fi(t,e),i=new fi(t,e+1),a=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),a.push(c.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Oe(new Ke([])),r=new fi(t,e),i=new fi(t,e+1);let a=Wt();return this.es.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new fi(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class fi{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Oe.comparator(e.key,t.key)||B(e.ls,t.ls)}static ns(e,t){return B(e.ls,t.ls)||Oe.comparator(e.key,t.key)}}class ZF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Rn(fi.ts)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const c=new NA(a,t,r,i);this.mutationQueue.push(c);for(const h of i)this.ds=this.ds.add(new fi(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ce.resolve(c)}lookupMutationBatch(e,t){return ce.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return ce.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new fi(t,0),i=new fi(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],c=>{const h=this._s(c.ls);a.push(h)}),ce.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(B);return t.forEach(i=>{const a=new fi(i,0),c=new fi(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,c],h=>{r=r.add(h.ls)})}),ce.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Oe.isDocumentKey(a)||(a=a.child(""));const c=new fi(new Oe(a),0);let h=new Rn(B);return this.ds.forEachWhile(m=>{const w=m.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(m.ls)),!0)},c),ce.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Rt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ce.forEach(t.mutations,i=>{const a=new fi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new fi(t,0),i=this.ds.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class YF{constructor(e){this.ps=e,this.docs=new hr(Oe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=Zs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Bn.newInvalidDocument(i))}),ce.resolve(r)}getAllFromCollection(e,t,r){let i=Zs();const a=new Oe(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||_A(sP(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ct()}Is(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new QF(this)}getSize(e){return ce.resolve(this.size)}}class QF extends ON{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class XF{constructor(e){this.persistence=e,this.Ts=new Bh(t=>ug(t),u0),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Es=0,this.As=new VA,this.targetCount=0,this.Rs=_g.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ce.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new _g(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.vn(t),ce.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Ts.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ce.waitFor(a).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ce.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.As.containsKey(t))}}class jN{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ks(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new XF(this),this.indexManager=new FF,this.remoteDocumentCache=new YF(r=>this.referenceDelegate.Ss(r)),this.wt=new yN(t),this.Ds=new qF(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new ZF(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new JF(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return ce.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class JF extends aP{constructor(e){super(),this.currentSequenceNumber=e}}class zC{constructor(e){this.persistence=e,this.ks=new VA,this.Os=null}static Ms(e){return new zC(e)}get Fs(){if(this.Os)return this.Os;throw ct()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ce.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Fs,r=>{const i=Oe.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,Ee.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ce.or([()=>ce.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class eU{constructor(e){this.wt=e}O(e,t,r,i){const a=new TC("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fN,{unique:!0}),h.createObjectStore("documentMutations"),$N(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),$N(e)),c=c.next(()=>function(h){const m=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,m){return m.store("mutations").K().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fN,{unique:!0});const C=m.store("mutations"),S=w.map(N=>C.put(N));return ce.waitFor(S)})}(e,a))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(a))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(c=c.next(()=>this.Us(a))),r<8&&i>=8&&(c=c.next(()=>this.qs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(a))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:DF});m.createIndex("collectionPathOverlayIndex",TF,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",SF,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:pF});m.createIndex("documentKeyIndex",gF),m.createIndex("collectionGroupIndex",mF)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(e,a))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:EF}).createIndex("sequenceNumberIndex",IF,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:bF}).createIndex("documentKeyIndex",CF,{unique:!1})}(e))),c}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=$C(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>ce.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(h=>ce.forEach(h,m=>{Rt(m.userId===a.userId);const w=fg(this.wt,m);return xN(e,a.userId,w).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((c,h)=>{const m=new Ke(c),w=[0,vs(m)];a.push(t.get(w).next(C=>C?ce.resolve():t.put({targetId:0,path:vs(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:wF});const r=t.store("collectionParents"),i=new UA,a=c=>{if(i.add(c)){const h=c.lastSegment(),m=c.popLast();return r.put({collectionId:h,parent:vs(m)})}};return t.store("remoteDocuments").J({H:!0},(c,h)=>{const m=new Ke(c);return a(m.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,h,m],w)=>{const C=mc(h);return a(C.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=w0(i),c=wN(this.wt,a);return t.put(c)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,c)=>{const h=t.store("remoteDocumentsV14"),m=(w=c,w.document?new Oe(Ke.fromString(w.document.name).popFirst(5)):w.noDocument?Oe.fromSegments(w.noDocument.path):w.unknownDocument?Oe.fromSegments(w.unknownDocument.path):ct()).path.toArray();var w;const C={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(C))}).next(()=>ce.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=LN(this.wt),a=new jN(zC.Ms,this.wt.ne);return r.K().next(c=>{const h=new Map;return c.forEach(m=>{var w;let C=null!==(w=h.get(m.userId))&&void 0!==w?w:Wt();fg(this.wt,m).keys().forEach(S=>C=C.add(S)),h.set(m.userId,C)}),ce.forEach(h,(m,w)=>{const C=new ti(w),S=VC.se(this.wt,C),N=a.getIndexManager(C),V=HC.se(C,this.wt,N,a.referenceDelegate);return new BN(i,V,S,N).recalculateAndSaveOverlaysForDocumentKeys(new PA(t,Ks.ot),m).next()})})}}function $N(n){n.createObjectStore("targetDocuments",{keyPath:yF}).createIndex("documentTargetsIndex",vF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_F,{unique:!0}),n.createObjectStore("targetGlobal")}const BA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jA{constructor(e,t,r,i,a,c,h,m,w,C,S=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=c,this.document=h,this.Ws=w,this.zs=C,this.Hs=S,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=N=>Promise.resolve(),!jA.V())throw new Ne(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HF(this,i),this.ei=t+"main",this.wt=new yN(m),this.ni=new au(this.ei,this.Hs,new eU(this.wt)),this.Vs=new VF(this.referenceDelegate,this.wt),this.remoteDocumentCache=LN(this.wt),this.Ds=new MF,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===C&&Sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(he.FAILED_PRECONDITION,BA);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Ks(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,ue.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,ue.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,ue.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>WC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Oh(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return T0(e).get("owner").next(t=>ce.resolve(this.di(t)))}_i(e){return WC(e).delete(this.clientId)}wi(){var e=this;return(0,ue.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=hi(r,"clientMetadata");return i.K().next(a=>{const c=e.gi(a,18e5),h=a.filter(m=>-1===c.indexOf(m));return ce.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ce.resolve(!0):T0(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ne(he.FAILED_PRECONDITION,BA);return!1}}return!(!this.networkEnabled||!this.inForeground)||WC(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ue.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new PA(t,Ks.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>WC(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return HC.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UF(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return VC.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.Hs)?RF:14===c?_N:13===c?mN:12===c?AF:11===c?gN:void ct();var c;let h;return this.ni.runTransaction(e,i,a,m=>(h=new PA(m,this.Ps?this.Ps.next():Ks.ot),"readwrite-primary"===t?this.ai(h).next(w=>!!w||this.hi(h)).next(w=>{if(!w)throw Sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ne(he.FAILED_PRECONDITION,oP);return r(h)}).next(w=>this.fi(h).next(()=>w)):this.bi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}bi(e){return T0(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(he.FAILED_PRECONDITION,BA)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return T0(e).put("owner",t)}static V(){return au.V()}li(e){const t=T0(e);return t.get("owner").next(r=>this.di(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Sr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function T0(n){return hi(n,"owner")}function WC(n){return hi(n,"clientMetadata")}function $A(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class HA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Wt(),i=Wt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new HA(e,t.fromCache,r,i)}}class HN{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){return ce.resolve(null)}xi(e,t,r,i){return function VL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Ee.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const c=this.ki(t,a);return this.Oi(t,c,r,i)?this.Ni(e,t):(Qw()<=Er.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),TA(t)),this.Mi(e,c,t,iP(i,-1)))})}ki(e,t){let r=new Rn(MP(e));return t.forEach((i,a)=>{SA(e,a)&&(r=r.add(a))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return Qw()<=Er.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",TA(t)),this.Di.getDocumentsMatchingQuery(e,t,So.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class tU{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new hr(B),this.Bi=new Bh(a=>ug(a),u0),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BN(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function GN(n,e,t,r){return new tU(n,e,t,r)}function zN(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,ue.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let m=Wt();for(const w of i){c.push(w.batchId);for(const C of w.mutations)m=m.add(C.key)}for(const w of a){h.push(w.batchId);for(const C of w.mutations)m=m.add(C.key)}return t.localDocuments.getDocuments(r,m).next(w=>({Ki:w,removedBatchIds:c,addedBatchIds:h}))})})}),GA.apply(this,arguments)}function WN(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function qN(n,e,t){let r=Wt(),i=Wt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Zs();return t.forEach((h,m)=>{const w=a.get(h);m.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(Ee.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):Ve("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",m.version)}),{Gi:c,Qi:i}})}function iU(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ry(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,ce.resolve(i)):t.Vs.allocateTargetId(r).next(c=>(i=new jh(e,c,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function iy(n,e,t){return zA.apply(this,arguments)}function zA(){return zA=(0,ue.Z)(function*(n,e,t){const r=et(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Oh(c))throw c;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),zA.apply(this,arguments)}function qC(n,e,t){const r=et(n);let i=Ee.min(),a=Wt();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,m,w){const C=et(h),S=C.Bi.get(w);return void 0!==S?ce.resolve(C.$i.get(S)):C.Vs.getTargetData(m,w)}(r,c,ya(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,h.targetId).next(m=>{a=m})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,e,t?i:Ee.min(),t?a:Wt())).next(h=>(YN(r,xP(e),h),{documents:h,ji:a})))}function KN(n,e){const t=et(n),r=et(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(c=>c?c.target:null))}function ZN(n,e){const t=et(n),r=t.Li.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,iP(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(YN(t,e,i),i))}function YN(n,e,t){let r=Ee.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function WA(){return WA=(0,ue.Z)(function*(n,e,t,r){const i=et(n);let a=Wt(),c=Zs();for(const w of t){const C=e.Wi(w.metadata.name);w.document&&(a=a.add(C));const S=e.zi(w);S.setReadTime(e.Hi(w.metadata.readTime)),c=c.insert(C,S)}const h=i.Ui.newChangeBuffer({trackRemovals:!0}),m=yield ry(i,(w=r,ya(q_(Ke.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>qN(w,h,c).next(C=>(h.apply(w),C)).next(C=>i.Vs.removeMatchingKeysForTargetId(w,m.targetId).next(()=>i.Vs.addMatchingKeys(w,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,C.Gi,C.Qi)).next(()=>C.Gi)))}),WA.apply(this,arguments)}function oU(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,ue.Z)(function*(n,e,t=Wt()){const r=yield ry(n,ya(LA(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=di(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(a,e);const h=r.withResumeToken(ni.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(h.targetId,h),i.Vs.updateTargetData(a,h).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),qA.apply(this,arguments)}function QN(n,e){return`firestore_clients_${n}_${e}`}function XN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function KA(n,e){return`firestore_targets_${n}_${e}`}class KC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Ne(i.error.code,i.error.message))),c?new KC(e,t,i.state,a):(Sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class S0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new S0(e,r.state,i):(Sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ZC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=OC();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=fP(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new ZC(e,a):(Sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ZA{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ZA(t.clientId,t.onlineState):(Sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class YA{constructor(){this.activeTargetIds=OC()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QA{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new hr(B),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=QN(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new YA),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ue.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(QN(e.persistenceKey,i));if(a){const c=ZC.Ji(i,a);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(KA(this.persistenceKey,e));if(r){const i=S0.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(KA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,ue.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let c=Ks.ot;if(null!=a)try{const h=JSON.parse(a);Rt("number"==typeof h),c=h}catch(h){Sr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Ks.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new KC(this.currentUser,e,t,r),a=XN(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=XN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=KA(this.persistenceKey,e),a=new S0(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return ZC.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return KC.Ji(new ti(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return S0.Ji(i,t)}wr(e){return ZA.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,ue.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),c=[],h=[];return a.forEach(m=>{i.has(m)||c.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.Mr(c,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=OC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class JN{constructor(){this.Fr=new YA,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new YA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class aU{Br(e){}shutdown(){}}class ek{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const uU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class cU{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class lU extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const c=this.oo(e,t);Ve("RestConnection","Sending: ",c,r);const h={};return this.uo(h,i,a),this.co(e,c,h,r).then(m=>(Ve("RestConnection","Received: ",m),m),m=>{throw H_("RestConnection",`${e} failed with error: `,m,"url: ",c,"request:",r),m})}ao(e,t,r,i,a,c){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${uU[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,c)=>{const h=new gA;h.listenOnce(Kw.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case j_.NO_ERROR:const w=h.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(w)),a(w);break;case j_.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),c(new Ne(he.DEADLINE_EXCEEDED,"Request time out"));break;case j_.HTTP_ERROR:const C=h.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const N=function(V){const Z=V.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(Z)>=0?Z:he.UNKNOWN}(S.status);c(new Ne(N,S.message))}else c(new Ne(he.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Ne(he.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=fA(),c=pA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Yw({})),this.uo(h.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Ve("Connection","Creating WebChannel: "+m,h);const w=a.createWebChannel(m,h);let C=!1,S=!1;const N=new cU({jr:Z=>{S?Ve("Connection","Not sending because WebChannel is closed:",Z):(C||(Ve("Connection","Opening WebChannel transport."),w.open(),C=!0),Ve("Connection","WebChannel sending:",Z),w.send(Z))},Wr:()=>w.close()}),V=(Z,ge,Ie)=>{Z.listen(ge,mt=>{try{Ie(mt)}catch(dt){setTimeout(()=>{throw dt},0)}})};return V(w,$_.EventType.OPEN,()=>{S||Ve("Connection","WebChannel transport opened.")}),V(w,$_.EventType.CLOSE,()=>{S||(S=!0,Ve("Connection","WebChannel transport closed"),N.eo())}),V(w,$_.EventType.ERROR,Z=>{S||(S=!0,H_("Connection","WebChannel transport errored:",Z),N.eo(new Ne(he.UNAVAILABLE,"The operation could not be completed")))}),V(w,$_.EventType.MESSAGE,Z=>{var ge;if(!S){const Ie=Z.data[0];Rt(!!Ie);const dt=Ie.error||(null===(ge=Ie[0])||void 0===ge?void 0:ge.error);if(dt){Ve("Connection","WebChannel received error:",dt);const lt=dt.status;let ut=function(Jt){const Hr=jr[Jt];if(void 0!==Hr)return WP(Hr)}(lt),xt=dt.message;void 0===ut&&(ut=he.INTERNAL,xt="Unknown error status: "+lt+" with message "+dt.message),S=!0,N.eo(new Ne(ut,xt)),w.close()}else Ve("Connection","WebChannel received:",Ie),N.no(Ie)}}),V(c,tP.STAT_EVENT,Z=>{Z.stat===Zw.PROXY?Ve("Connection","Detected buffering proxy"):Z.stat===Zw.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function tk(){return typeof window<"u"?window:null}function YC(){return typeof document<"u"?document:null}function A0(n){return new tF(n,!0)}class XA{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class nk{constructor(e,t,r,i,a,c,h,m){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new XA(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ue.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,ue.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,ue.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Sr(t.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Ne(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ue.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dU extends nk{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function iF(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ct(),i=e.targetChange.targetIds||[],a=function(m,w){return m.dt?(Rt(void 0===w||"string"==typeof w),ni.fromBase64String(w||"")):(Rt(void 0===w||w instanceof Uint8Array),ni.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(m){const w=void 0===m.code?he.UNKNOWN:WP(m.code);return new Ne(w,m.message||"")}(c);t=new QP(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=gc(n,r.document.name),a=di(r.document.updateTime),c=new ki({mapValue:{fields:r.document.fields}}),h=Bn.newFoundDocument(i,a,c);t=new LC(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=gc(n,r.document),a=r.readTime?di(r.readTime):Ee.min(),c=Bn.newNoDocument(i,a);t=new LC([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=gc(n,r.document);t=new LC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,a=new qL(r.count||0);t=new YP(r.targetId,a)}}var m;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Ee.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ee.min():a.readTime?di(a.readTime):Ee.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=y0(this.wt),t.addTarget=function(i,a){let c;const h=a.target;return c=xC(h)?{documents:aN(i,h)}:{query:uN(i,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=tN(i,a.resumeToken):a.snapshotVersion.compareTo(Ee.min())>0&&(c.readTime=m0(i,a.snapshotVersion.toTimestamp())),c}(this.wt,e);const r=function oF(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=y0(this.wt),t.removeTarget=e,this.Mo(t)}}class hU extends nk{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function sF(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,i){let a=di(r.updateTime?r.updateTime:i);return a.isEqual(Ee.min())&&(a=di(i)),new GL(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.Jo(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=y0(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>v0(this.wt,r))};this.Mo(t)}}class fU extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Ne(he.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(he.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.bo.ao(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(he.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class pU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Sr(t),this.su=!1):Ve("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class gU{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(h=>{r.enqueueAndForget((0,ue.Z)(function*(){var m;Gh(c)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ue.Z)(function*(w){const C=et(w);C.lu.add(4),yield sy(C),C._u.set("Unknown"),C.lu.delete(4),yield R0(C)}),function(w){return m.apply(this,arguments)})(c))}))}),this._u=new pU(r,i)}}function R0(n){return JA.apply(this,arguments)}function JA(){return JA=(0,ue.Z)(function*(n){if(Gh(n))for(const e of n.fu)yield e(!0)}),JA.apply(this,arguments)}function sy(n){return eR.apply(this,arguments)}function eR(){return eR=(0,ue.Z)(function*(n){for(const e of n.fu)yield e(!1)}),eR.apply(this,arguments)}function QC(n,e){const t=et(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),rR(t)?nR(t):ay(t).Co()&&tR(t,e))}function x0(n,e){const t=et(n),r=ay(t);t.hu.delete(e),r.Co()&&rk(t,e),0===t.hu.size&&(r.Co()?r.ko():Gh(t)&&t._u.set("Unknown"))}function tR(n,e){n.wu.Nt(e.targetId),ay(n).Qo(e)}function rk(n,e){n.wu.Nt(e),ay(n).jo(e)}function nR(n){n.wu=new XL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),ay(n).start(),n._u.iu()}function rR(n){return Gh(n)&&!ay(n).Do()&&n.hu.size>0}function Gh(n){return 0===et(n).lu.size}function ik(n){n.wu=void 0}function mU(n){return iR.apply(this,arguments)}function iR(){return iR=(0,ue.Z)(function*(n){n.hu.forEach((e,t)=>{tR(n,e)})}),iR.apply(this,arguments)}function _U(n,e){return sR.apply(this,arguments)}function sR(){return sR=(0,ue.Z)(function*(n,e){ik(n),rR(n)?(n._u.uu(e),nR(n)):n._u.set("Unknown")}),sR.apply(this,arguments)}function yU(n,e,t){return oR.apply(this,arguments)}function oR(){return oR=(0,ue.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof QP&&2===e.state&&e.cause)try{yield(r=(0,ue.Z)(function*(i,a){const c=a.cause;for(const h of a.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield XC(n,r)}else if(e instanceof LC?n.wu.Ut(e):e instanceof YP?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Ee.min()))try{const r=yield WN(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.wu.Yt(a);return c.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.hu.get(m);w&&i.hu.set(m,w.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach(h=>{const m=i.hu.get(h);if(!m)return;i.hu.set(h,m.withResumeToken(ni.EMPTY_BYTE_STRING,m.snapshotVersion)),rk(i,h);const w=new jh(m.target,h,1,m.sequenceNumber);tR(i,w)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield XC(n,r)}var r}),oR.apply(this,arguments)}function XC(n,e,t){return aR.apply(this,arguments)}function aR(){return aR=(0,ue.Z)(function*(n,e,t){if(!Oh(e))throw e;n.lu.add(1),yield sy(n),n._u.set("Offline"),t||(t=()=>WN(n.localStore)),n.asyncQueue.enqueueRetryable((0,ue.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield R0(n)}))}),aR.apply(this,arguments)}function sk(n,e){return e().catch(t=>XC(n,t,e))}function oy(n){return uR.apply(this,arguments)}function uR(){return uR=(0,ue.Z)(function*(n){const e=et(n),t=zh(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;vU(e);)try{const i=yield iU(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,wU(e,i)}catch(i){yield XC(e,i)}ok(e)&&ak(e)}),uR.apply(this,arguments)}function vU(n){return Gh(n)&&n.au.length<10}function wU(n,e){n.au.push(e);const t=zh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function ok(n){return Gh(n)&&!zh(n).Do()&&n.au.length>0}function ak(n){zh(n).start()}function EU(n){return cR.apply(this,arguments)}function cR(){return cR=(0,ue.Z)(function*(n){zh(n).Xo()}),cR.apply(this,arguments)}function IU(n){return lR.apply(this,arguments)}function lR(){return lR=(0,ue.Z)(function*(n){const e=zh(n);for(const t of n.au)e.Ho(t.mutations)}),lR.apply(this,arguments)}function bU(n,e,t){return dR.apply(this,arguments)}function dR(){return dR=(0,ue.Z)(function*(n,e,t){const r=n.au.shift(),i=kA.from(r,e,t);yield sk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield oy(n)}),dR.apply(this,arguments)}function CU(n,e){return hR.apply(this,arguments)}function hR(){return hR=(0,ue.Z)(function*(n,e){var t;e&&zh(n).zo&&(yield(t=(0,ue.Z)(function*(r,i){if(zP(a=i.code)&&a!==he.ABORTED){const c=r.au.shift();zh(r).No(),yield sk(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield oy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),ok(n)&&ak(n)}),hR.apply(this,arguments)}function uk(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,ue.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=Gh(t);t.lu.add(3),yield sy(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield R0(t)}),fR.apply(this,arguments)}function pR(n,e){return gR.apply(this,arguments)}function gR(){return gR=(0,ue.Z)(function*(n,e){const t=et(n);e?(t.lu.delete(2),yield R0(t)):e||(t.lu.add(2),yield sy(t),t._u.set("Unknown"))}),gR.apply(this,arguments)}function ay(n){return n.mu||(n.mu=function(e,t,r){const i=et(e);return i.tu(),new dU(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:mU.bind(null,n),Jr:_U.bind(null,n),Go:yU.bind(null,n)}),n.fu.push(function(){var e=(0,ue.Z)(function*(t){t?(n.mu.No(),rR(n)?nR(n):n._u.set("Unknown")):(yield n.mu.stop(),ik(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function zh(n){return n.gu||(n.gu=function(e,t,r){const i=et(e);return i.tu(),new hU(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:EU.bind(null,n),Jr:CU.bind(null,n),Yo:IU.bind(null,n),Jo:bU.bind(null,n)}),n.fu.push(function(){var e=(0,ue.Z)(function*(t){t?(n.gu.No(),yield oy(n)):(yield n.gu.stop(),n.au.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class mR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,h=new mR(e,t,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uy(n,e){if(Sr("AsyncQueue",`${e}: ${n}`),Oh(n))return new Ne(he.UNAVAILABLE,`${e}: ${n}`);throw n}class cy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Oe.comparator(t.key,r.key):(t,r)=>Oe.comparator(t.key,r.key),this.keyedMap=h0(),this.sortedSet=new hr(this.comparator)}static emptySet(e){return new cy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new cy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ck{constructor(){this.yu=new hr(Oe.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ct():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ly{constructor(e,t,r,i,a,c,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new ly(e,t,cy.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&c0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class DU{constructor(){this.Iu=void 0,this.listeners=[]}}class TU{constructor(){this.queries=new Bh(e=>RP(e),c0),this.onlineState="Unknown",this.Tu=new Set}}function _R(n,e){return yR.apply(this,arguments)}function yR(){return yR=(0,ue.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new DU),i)try{a.Iu=yield t.onListen(r)}catch(c){const h=uy(c,`Initialization of query '${TA(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&ER(t)}),yR.apply(this,arguments)}function vR(n,e){return wR.apply(this,arguments)}function wR(){return wR=(0,ue.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),wR.apply(this,arguments)}function SU(n,e){const t=et(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Au(i)&&(r=!0);c.Iu=i}}r&&ER(t)}function AU(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function ER(n){n.Tu.forEach(e=>{e.next()})}class IR{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ly(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=ly.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class RU{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class lk{constructor(e){this.wt=e}Wi(e){return gc(this.wt,e)}zi(e){return e.metadata.exists?oN(this.wt,e.document,!1):Bn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return di(e)}}class xU{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dk(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Ke.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new lk(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Wt()).add(a);t.set(c,h)}}return t}complete(){var e=this;return(0,ue.Z)(function*(){const t=yield function sU(n,e,t,r){return WA.apply(this,arguments)}(e.localStore,new lk(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield oU(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function dk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class hk{constructor(e){this.key=e}}class fk{constructor(e){this.key=e}}class pk{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Wt(),this.mutatedKeys=Wt(),this.Lu=MP(e),this.Uu=new cy(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new ck,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,S)=>{const N=i.get(C),V=SA(this.query,S)?S:null,Z=!!N&&this.mutatedKeys.has(N.key),ge=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ie=!1;N&&V?N.data.isEqual(V.data)?Z!==ge&&(r.track({type:3,doc:V}),Ie=!0):this.Qu(N,V)||(r.track({type:2,doc:V}),Ie=!0,(m&&this.Lu(V,m)>0||w&&this.Lu(V,w)<0)&&(h=!0)):!N&&V?(r.track({type:0,doc:V}),Ie=!0):N&&!V&&(r.track({type:1,doc:N}),Ie=!0,(m||w)&&(h=!0)),Ie&&(V?(c=c.add(V),a=ge?a.add(C):a.delete(C)):(c=c.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{Uu:c,Gu:r,Oi:h,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((w,C)=>function(S,N){const V=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return V(S)-V(N)}(w.type,C.type)||this.Lu(w.doc,C.doc)),this.ju(r);const c=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,m=h!==this.$u;return this.$u=h,0!==a.length||m?{snapshot:new ly(this.query,e.Uu,i,a,e.mutatedKeys,0===h,m,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new ck,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Wt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new fk(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new hk(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Wt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return ly.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class MU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class PU{constructor(e){this.key=e,this.Xu=!1}}class NU{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new Bh(h=>RP(h),c0),this.ec=new Map,this.nc=new Set,this.sc=new hr(Oe.comparator),this.ic=new Map,this.rc=new VA,this.oc={},this.uc=new Map,this.cc=_g.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function kU(n,e){return bR.apply(this,arguments)}function bR(){return bR=(0,ue.Z)(function*(n,e){const t=WR(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const c=yield ry(t.localStore,ya(e));t.isPrimaryClient&&QC(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield CR(t,e,r,"current"===h)}return i}),bR.apply(this,arguments)}function CR(n,e,t,r){return DR.apply(this,arguments)}function DR(){return DR=(0,ue.Z)(function*(n,e,t,r){n.hc=(C,S,N)=>{return(V=(0,ue.Z)(function*(Z,ge,Ie,mt){let dt=ge.view.Ku(Ie);dt.Oi&&(dt=yield qC(Z.localStore,ge.query,!1).then(({documents:xt})=>ge.view.Ku(xt,dt)));const lt=mt&&mt.targetChanges.get(ge.targetId),ut=ge.view.applyChanges(dt,Z.isPrimaryClient,lt);return OR(Z,ge.targetId,ut.zu),ut.snapshot}),function(Z,ge,Ie,mt){return V.apply(this,arguments)})(n,C,S,N);var V};const i=yield qC(n.localStore,e,!0),a=new pk(e,i.ji),c=a.Ku(i.documents),h=g0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(c,n.isPrimaryClient,h);OR(n,t,m.zu);const w=new MU(e,t,a);return n.tc.set(e,w),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),m.snapshot}),DR.apply(this,arguments)}function OU(n,e){return TR.apply(this,arguments)}function TR(){return TR=(0,ue.Z)(function*(n,e){const t=et(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!c0(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield iy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),x0(t.remoteStore,r.targetId),dy(t,r.targetId)}).catch(kh))):(dy(t,r.targetId),yield iy(t.localStore,r.targetId,!0))}),TR.apply(this,arguments)}function SR(){return SR=(0,ue.Z)(function*(n,e,t){const r=qR(n);try{const i=yield function(a,c){const h=et(a),m=Ce.now(),w=c.reduce((N,V)=>N.add(V.key),Wt());let C,S;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let V=Zs(),Z=Wt();return h.Ui.getEntries(N,w).next(ge=>{V=ge,V.forEach((Ie,mt)=>{mt.isValidDocument()||(Z=Z.add(Ie))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,V)).next(ge=>{C=ge;const Ie=[];for(const mt of c){const dt=WL(mt,C.get(mt.key).overlayedDocument);null!=dt&&Ie.push(new id(mt.key,dt,wP(dt.value.mapValue),sr.exists(!0)))}return h.mutationQueue.addMutationBatch(N,m,Ie,c)}).next(ge=>{S=ge;const Ie=ge.applyToLocalDocumentSet(C,Z);return h.documentOverlayCache.saveOverlays(N,ge.batchId,Ie)})}).then(()=>({batchId:S.batchId,changes:KP(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let m=a.oc[a.currentUser.toKey()];m||(m=new hr(B)),m=m.insert(c,h),a.oc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield sd(r,i.changes),yield oy(r.remoteStore)}catch(i){const a=uy(i,"Failed to persist write");t.reject(a)}}),SR.apply(this,arguments)}function gk(n,e){return AR.apply(this,arguments)}function AR(){return AR=(0,ue.Z)(function*(n,e){const t=et(n);try{const r=yield function rU(n,e){const t=et(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const h=[];e.targetChanges.forEach((C,S)=>{const N=i.get(S);if(!N)return;h.push(t.Vs.removeMatchingKeys(a,C.removedDocuments,S).next(()=>t.Vs.addMatchingKeys(a,C.addedDocuments,S)));let V=N.withSequenceNumber(a.currentSequenceNumber);var Z,ge,Ie;e.targetMismatches.has(S)?V=V.withResumeToken(ni.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):C.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(C.resumeToken,r)),i=i.insert(S,V),ge=V,Ie=C,(0===(Z=N).resumeToken.approximateByteSize()||ge.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(a,V))});let m=Zs(),w=Wt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),h.push(qN(a,c,e.documentUpdates).next(C=>{m=C.Gi,w=C.Qi})),!r.isEqual(Ee.min())){const C=t.Vs.getLastRemoteSnapshotVersion(a).next(S=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(C)}return ce.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,w)).next(()=>m)}).then(a=>(t.$i=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.ic.get(a);c&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Rt(c.Xu):i.removedDocuments.size>0&&(Rt(c.Xu),c.Xu=!1))}),yield sd(t,r,e)}catch(r){yield kh(r)}}),AR.apply(this,arguments)}function mk(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,c)=>{const h=c.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(a,c){const h=et(a);h.onlineState=c;let m=!1;h.queries.forEach((w,C)=>{for(const S of C.listeners)S.Eu(c)&&(m=!0)}),m&&ER(h)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function FU(n,e,t){return RR.apply(this,arguments)}function RR(){return RR=(0,ue.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let c=new hr(Oe.comparator);c=c.insert(a,Bn.newNoDocument(a,Ee.min()));const h=Wt().add(a),m=new p0(Ee.min(),new Map,new Rn(B),c,h);yield gk(r,m),r.sc=r.sc.remove(a),r.ic.delete(e),LR(r)}else yield iy(r.localStore,e,!1).then(()=>dy(r,e,t)).catch(kh)}),RR.apply(this,arguments)}function UU(n,e){return xR.apply(this,arguments)}function xR(){return xR=(0,ue.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield function nU(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(c,h,m,w){const C=m.batch,S=C.keys();let N=ce.resolve();return S.forEach(V=>{N=N.next(()=>w.getEntry(h,V)).next(Z=>{const ge=m.docVersions.get(V);Rt(null!==ge),Z.version.compareTo(ge)<0&&(C.applyToRemoteDocument(Z,m),Z.isValidDocument()&&(Z.setReadTime(m.commitVersion),w.addEntry(Z)))})}),N.next(()=>c.mutationQueue.removeMutationBatch(h,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Wt();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(h=h.add(c.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);kR(t,r,null),NR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield sd(t,i)}catch(i){yield kh(i)}}),xR.apply(this,arguments)}function VU(n,e,t){return MR.apply(this,arguments)}function MR(){return MR=(0,ue.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(a,c){const h=et(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return h.mutationQueue.lookupMutationBatch(m,c).next(C=>(Rt(null!==C),w=C.keys(),h.mutationQueue.removeMutationBatch(m,C))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,w,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w)).next(()=>h.localDocuments.getDocuments(m,w))})}(r.localStore,e);kR(r,e,t),NR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield sd(r,i)}catch(i){yield kh(i)}}),MR.apply(this,arguments)}function PR(){return PR=(0,ue.Z)(function*(n,e){const t=et(n);Gh(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=et(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=uy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),PR.apply(this,arguments)}function NR(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function kR(n,e,t){const r=et(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function dy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||_k(n,r)})}function _k(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(x0(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),LR(n))}function OR(n,e,t){for(const r of t)r instanceof hk?(n.rc.addReference(r.key,e),jU(n,r)):r instanceof fk?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||_k(n,r.key)):ct()}function jU(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.nc.add(r),LR(n))}function LR(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Oe(Ke.fromString(e)),r=n.cc.next();n.ic.set(r,new PU(t)),n.sc=n.sc.insert(t,r),QC(n.remoteStore,new jh(ya(q_(t.path)),r,2,Ks.ot))}}function sd(n,e,t){return FR.apply(this,arguments)}function FR(){return FR=(0,ue.Z)(function*(n,e,t){const r=et(n),i=[],a=[],c=[];var h;r.tc.isEmpty()||(r.tc.forEach((h,m)=>{c.push(r.hc(m,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,w.fromCache?"not-current":"current"),i.push(w);const C=HA.Vi(m.targetId,w);a.push(C)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(h=(0,ue.Z)(function*(m,w){const C=et(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ce.forEach(w,N=>ce.forEach(N.Pi,V=>C.persistence.referenceDelegate.addReference(S,N.targetId,V)).next(()=>ce.forEach(N.vi,V=>C.persistence.referenceDelegate.removeReference(S,N.targetId,V)))))}catch(S){if(!Oh(S))throw S;Ve("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const N=S.targetId;if(!S.fromCache){const V=C.$i.get(N),ge=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);C.$i=C.$i.insert(N,ge)}}}),function(m,w){return h.apply(this,arguments)})(r.localStore,a))}),FR.apply(this,arguments)}function $U(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,ue.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield zN(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(c=>{c.forEach(h=>{h.reject(new Ne(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield sd(t,r.Ki)}var i}),UR.apply(this,arguments)}function HU(n,e){const t=et(n),r=t.ic.get(e);if(r&&r.Xu)return Wt().add(r.key);{let i=Wt();const a=t.ec.get(e);if(!a)return i;for(const c of a){const h=t.tc.get(c);i=i.unionWith(h.view.qu)}return i}}function GU(n,e){return VR.apply(this,arguments)}function VR(){return VR=(0,ue.Z)(function*(n,e){const t=et(n),r=yield qC(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&OR(t,e.targetId,i.zu),i}),VR.apply(this,arguments)}function zU(n,e){return BR.apply(this,arguments)}function BR(){return BR=(0,ue.Z)(function*(n,e){const t=et(n);return ZN(t.localStore,e).then(r=>sd(t,r))}),BR.apply(this,arguments)}function WU(n,e,t,r){return jR.apply(this,arguments)}function jR(){return jR=(0,ue.Z)(function*(n,e,t,r){const i=et(n),a=yield function(c,h){const m=et(c),w=et(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>w.yn(C,h).next(S=>S?m.localDocuments.getDocuments(C,S):ce.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield oy(i.remoteStore):"acknowledged"===t||"rejected"===t?(kR(i,e,r||null),NR(i,e),h=e,et(et(i.localStore).mutationQueue).In(h)):ct(),yield sd(i,a)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),jR.apply(this,arguments)}function $R(){return $R=(0,ue.Z)(function*(n,e){const t=et(n);if(WR(t),qR(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield yk(t,r.toArray());t.ac=!0,yield pR(t.remoteStore,!0);for(const a of i)QC(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(dy(t,c),iy(t.localStore,c,!0))),x0(t.remoteStore,c)}),yield i,yield yk(t,r),function(a){const c=et(a);c.ic.forEach((h,m)=>{x0(c.remoteStore,m)}),c.rc.cs(),c.ic=new Map,c.sc=new hr(Oe.comparator)}(t),t.ac=!1,yield pR(t.remoteStore,!1)}}),$R.apply(this,arguments)}function yk(n,e,t){return HR.apply(this,arguments)}function HR(){return HR=(0,ue.Z)(function*(n,e,t){const r=et(n),i=[],a=[];for(const c of e){let h;const m=r.ec.get(c);if(m&&0!==m.length){h=yield ry(r.localStore,ya(m[0]));for(const w of m){const C=r.tc.get(w),S=yield GU(r,C);S.snapshot&&a.push(S.snapshot)}}else{const w=yield KN(r.localStore,c);h=yield ry(r.localStore,w),yield CR(r,vk(w),c,!1)}i.push(h)}return r.Zu.Go(a),i}),HR.apply(this,arguments)}function vk(n){return SP(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function KU(n){const e=et(n);return et(et(e.localStore).persistence).Ri()}function ZU(n,e,t,r){return GR.apply(this,arguments)}function GR(){return GR=(0,ue.Z)(function*(n,e,t,r){const i=et(n);if(i.ac)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield ZN(i.localStore,xP(a[0])),h=p0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield sd(i,c,h);break}case"rejected":yield iy(i.localStore,e,!0),dy(i,e,r);break;default:ct()}}),GR.apply(this,arguments)}function YU(n,e,t){return zR.apply(this,arguments)}function zR(){return zR=(0,ue.Z)(function*(n,e,t){const r=WR(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const a=yield KN(r.localStore,i),c=yield ry(r.localStore,a);yield CR(r,vk(a),c.targetId,!1),QC(r.remoteStore,c)}for(const i of t)r.ec.has(i)&&(yield iy(r.localStore,i,!1).then(()=>{x0(r.remoteStore,i),dy(r,i)}).catch(kh))}}),zR.apply(this,arguments)}function WR(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FU.bind(null,e),e.Zu.Go=SU.bind(null,e.eventManager),e.Zu.lc=AU.bind(null,e.eventManager),e}function qR(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VU.bind(null,e),e}class wk{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ue.Z)(function*(){t.wt=A0(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return GN(this.persistence,new HN,e.initialUser,this.wt)}_c(e){return new jN(zC.Ms,this.wt)}dc(e){return new JN}terminate(){var e=this;return(0,ue.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ek extends wk{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ue.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield qR(r.yc.syncEngine),yield oy(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return GN(this.persistence,new HN,e.initialUser,this.wt)}mc(e,t){return new jF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new bL(t,this.persistence);return new IL(e.asyncQueue,r)}_c(e){const t=$A(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ys.withCacheSize(this.cacheSizeBytes):Ys.DEFAULT;return new jA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,tk(),YC(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new JN}}class XU extends Ek{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ue.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof QA&&(r.sharedClientState.syncEngine={kr:WU.bind(null,i),Or:ZU.bind(null,i),Mr:YU.bind(null,i),Ri:KU.bind(null,i),Nr:zU.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,ue.Z)(function*(c){yield function qU(n,e){return $R.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}dc(e){const t=tk();if(!QA.V(t))throw new Ne(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$A(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class KR{initialize(e,t){var r=this;return(0,ue.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>mk(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=$U.bind(null,r.syncEngine),yield pR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new TU}createDatastore(e){const t=A0(e.databaseInfo.databaseId),r=new lU(e.databaseInfo);return new fU(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>mk(this.syncEngine,h,0),c=ek.V()?new ek:new aU,new gU(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,h,m,w){const C=new NU(r,i,a,c,h,m);return w&&(C.ac=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ue.Z)(function*(t){const r=et(t);Ve("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield sy(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ik(n,e=10240){let t=0;return{read:()=>(0,ue.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ue.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class JC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class JU{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new s,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,ue.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,ue.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,ue.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new RU(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,ue.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,ue.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class eV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ue.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ue.Z)(function*(a,c){const h=et(a),m=y0(h.wt)+"/documents",w={documents:c.map(V=>_0(h.wt,V))},C=yield h.ao("BatchGetDocuments",m,w,c.length),S=new Map;C.forEach(V=>{const Z=function rF(n,e){return"found"in e?function(t,r){Rt(!!r.found);const i=gc(t,r.found.name),a=di(r.found.updateTime),c=new ki({mapValue:{fields:r.found.fields}});return Bn.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const i=gc(t,r.missing),a=di(r.readTime);return Bn.newNoDocument(i,a)}(n,e):ct()}(h.wt,V);S.set(Z.key.toString(),Z)});const N=[];return c.forEach(V=>{const Z=S.get(V.toString());Rt(!!Z),N.push(Z)}),N}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new X_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ue.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Oe.fromPath(i);e.mutations.push(new AA(a,e.precondition(a)))}),yield(r=(0,ue.Z)(function*(i,a){const c=et(i),h=y0(c.wt)+"/documents",m={writes:a.map(w=>v0(c.wt,w))};yield c.ro("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=Ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ee.min()))throw new Ne(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tV{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new XA(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,ue.Z)(function*(){const t=new eV(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!n0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!zP(t)}return!1}}class nV{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ti.UNAUTHENTICATED,this.clientId=F.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ue.Z)(function*(h){Ve("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ue.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=uy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function bk(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ue.Z)(function*(a){r.isEqual(a)||(yield zN(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ZR.apply(this,arguments)}function Ck(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield QR(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>uk(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>uk(e.remoteStore,a)),n.onlineComponents=e}),YR.apply(this,arguments)}function QR(n){return XR.apply(this,arguments)}function XR(){return XR=(0,ue.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield bk(n,new wk)),n.offlineComponents}),XR.apply(this,arguments)}function eD(n){return JR.apply(this,arguments)}function JR(){return JR=(0,ue.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield Ck(n,new KR)),n.onlineComponents}),JR.apply(this,arguments)}function Dk(n){return QR(n).then(e=>e.persistence)}function ex(n){return QR(n).then(e=>e.localStore)}function Tk(n){return eD(n).then(e=>e.remoteStore)}function tx(n){return eD(n).then(e=>e.syncEngine)}function hy(n){return nx.apply(this,arguments)}function nx(){return nx=(0,ue.Z)(function*(n){const e=yield eD(n),t=e.eventManager;return t.onListen=kU.bind(null,e.syncEngine),t.onUnlisten=OU.bind(null,e.syncEngine),t}),nx.apply(this,arguments)}function Sk(n,e,t={}){const r=new s;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(i,a,c,h,m){const w=new JC({next:S=>{a.enqueueAndForget(()=>vR(i,C));const N=S.docs.has(c);!N&&S.fromCache?m.reject(new Ne(he.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?m.reject(new Ne(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),C=new IR(q_(c.path),w,{includeMetadataChanges:!0,Du:!0});return _R(i,C)}(yield hy(n),n.asyncQueue,e,t,r)})),r.promise}function Ak(n,e,t={}){const r=new s;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(i,a,c,h,m){const w=new JC({next:S=>{a.enqueueAndForget(()=>vR(i,C)),S.fromCache&&"server"===h.source?m.reject(new Ne(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),C=new IR(c,w,{includeMetadataChanges:!0,Du:!0});return _R(i,C)}(yield hy(n),n.asyncQueue,e,t,r)})),r.promise}const Rk=new Map;function rx(n,e,t){if(!t)throw new Ne(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xk(n,e,t,r){if(!0===e&&!0===r)throw new Ne(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Mk(n){if(!Oe.isDocumentKey(n))throw new Ne(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Pk(n){if(Oe.isDocumentKey(n))throw new Ne(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tD(n);throw new Ne(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Nk(n,e){if(e<=0)throw new Ne(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class kk{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,xk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class M0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kk({}),this._settingsFrozen=!1,e instanceof nd?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ne(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nd(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new u;switch(t.type){case"gapi":const r=t.client;return Rt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new v(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Rk.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),Rk.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qi(this.firestore,e,this._query)}}class _c extends qi{constructor(e,t,r){super(e,t,q_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new Oe(e))}withConverter(e){return new _c(this.firestore,e,this._path)}}function Ok(n,e,...t){if(n=(0,k.m9)(n),rx("collection","path",e),n instanceof M0){const r=Ke.fromString(e,...t);return Pk(r),new _c(n,null,r)}{if(!(n instanceof Wn||n instanceof _c))throw new Ne(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ke.fromString(e,...t));return Pk(r),new _c(n.firestore,null,r)}}function nD(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=F.I()),rx("doc","path",e),n instanceof M0){const r=Ke.fromString(e,...t);return Mk(r),new Wn(n,null,new Oe(r))}{if(!(n instanceof Wn||n instanceof _c))throw new Ne(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ke.fromString(e,...t));return Mk(r),new Wn(n.firestore,n instanceof _c?n.converter:null,new Oe(r))}}function Lk(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof Wn||n instanceof _c)&&(e instanceof Wn||e instanceof _c)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Fk(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof qi&&e instanceof qi&&n.firestore===e.firestore&&c0(n._query,e._query)&&n.converter===e.converter}class fV{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new XA(this,"async_queue_retry"),this.Kc=()=>{const t=YC();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=YC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=YC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new s;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,ue.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Oh(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Sr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=mR.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&ct()}verifyOperationInProgress(){}zc(){var e=this;return(0,ue.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function ix(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class pV{constructor(){this._progressObserver={},this._taskCompletionResolver=new s,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qn extends M0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new fV,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Uk(this),this._firestoreClient.terminate()}}function $r(n){return n._firestoreClient||Uk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Uk(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new TL(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new nV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Vk(n,e,t){const r=new s;return n.asyncQueue.enqueue((0,ue.Z)(function*(){try{yield bk(n,t),yield Ck(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(c=a).name?c.code===he.FAILED_PRECONDITION||c.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function Bk(n){if(n._initialized||n._terminated)throw new Ne(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class od{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yc(ni.fromBase64String(e))}catch(t){throw new Ne(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yc(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vg{constructor(e){this._methodName=e}}class rD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return B(this._lat,e._lat)||B(this._long,e._long)}}const CV=/^__.*__$/;class DV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new id(e,this.data,this.fieldMask,t,this.fieldTransforms):new Q_(e,this.data,t,this.fieldTransforms)}}class jk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new id(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $k(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class iD{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new iD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return aD(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if($k(this.Zc)&&CV.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class TV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||A0(e)}aa(e,t,r,i=!1){return new iD({Zc:e,methodName:t,ca:r,path:at.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function wg(n){const e=n._freezeSettings(),t=A0(n._databaseId);return new TV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sD(n,e,t,r,i,a={}){const c=n.aa(a.merge||a.mergeFields?2:0,e,t,i);ux("Data must be an object, but it was:",c,r);const h=zk(r,c);let m,w;if(a.merge)m=new Ao(c.fieldMask),w=c.fieldTransforms;else if(a.mergeFields){const C=[];for(const S of a.mergeFields){const N=cx(e,S,t);if(!c.contains(N))throw new Ne(he.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);qk(C,N)||C.push(N)}m=new Ao(C),w=c.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,w=c.fieldTransforms;return new DV(new ki(h),m,w)}class P0 extends vg{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof P0}}function Hk(n,e,t){return new iD({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class sx extends vg{_toFieldTransform(e){return new l0(e.path,new Z_)}isEqual(e){return e instanceof sx}}class SV extends vg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Hk(this,e,!0),r=this.ha.map(a=>Eg(a,t)),i=new cg(r);return new l0(e.path,i)}isEqual(e){return this===e}}class AV extends vg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Hk(this,e,!0),r=this.ha.map(a=>Eg(a,t)),i=new lg(r);return new l0(e.path,i)}isEqual(e){return this===e}}class RV extends vg{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Y_(e.wt,kP(e.wt,this.la));return new l0(e.path,t)}isEqual(e){return this===e}}function ox(n,e,t,r){const i=n.aa(1,e,t);ux("Data must be an object, but it was:",i,r);const a=[],c=ki.empty();ig(r,(m,w)=>{const C=oD(e,m,t);w=(0,k.m9)(w);const S=i.ia(C);if(w instanceof P0)a.push(C);else{const N=Eg(w,S);null!=N&&(a.push(C),c.set(C,N))}});const h=new Ao(a);return new jk(c,h,i.fieldTransforms)}function ax(n,e,t,r,i,a){const c=n.aa(1,e,t),h=[cx(e,r,t)],m=[i];if(a.length%2!=0)throw new Ne(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)h.push(cx(e,a[N])),m.push(a[N+1]);const w=[],C=ki.empty();for(let N=h.length-1;N>=0;--N)if(!qk(w,h[N])){const V=h[N];let Z=m[N];Z=(0,k.m9)(Z);const ge=c.ia(V);if(Z instanceof P0)w.push(V);else{const Ie=Eg(Z,ge);null!=Ie&&(w.push(V),C.set(V,Ie))}}const S=new Ao(w);return new jk(C,S,c.fieldTransforms)}function Gk(n,e,t,r=!1){return Eg(t,n.aa(r?4:3,e))}function Eg(n,e){if(Wk(n=(0,k.m9)(n)))return ux("Unsupported field value:",e,n),zk(n,e);if(n instanceof vg)return function(t,r){if(!$k(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let h=Eg(c,r.ra(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return kP(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ce.fromDate(t);return{timestampValue:m0(r.wt,i)}}if(t instanceof Ce){const i=new Ce(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:m0(r.wt,i)}}if(t instanceof rD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yc)return{bytesValue:tN(r.wt,t._byteString)};if(t instanceof Wn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:RA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${tD(t)}`)}(n,e)}function zk(n,e){const t={};return lP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ig(n,(r,i)=>{const a=Eg(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function Wk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ce||n instanceof rD||n instanceof yc||n instanceof Wn||n instanceof vg)}function ux(n,e,t){if(!Wk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=tD(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function cx(n,e,t){if((e=(0,k.m9)(e))instanceof od)return e._internalPath;if("string"==typeof e)return oD(n,e);throw aD("Field path arguments must be of type string or ",n,!1,void 0,t)}const xV=new RegExp("[~\\*/\\[\\]]");function oD(n,e,t){if(e.search(xV)>=0)throw aD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new od(...e.split("."))._internalPath}catch{throw aD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function aD(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new Ne(he.INVALID_ARGUMENT,h+n+m)}function qk(n,e){return n.some(t=>t.isEqual(e))}class N0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new MV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class MV extends N0{data(){return super.data()}}function uD(n,e){return"string"==typeof e?oD(n,e):e instanceof od?e._internalPath:e._delegate._internalPath}class Ig{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ad extends N0{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new k0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(uD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class k0 extends ad{data(e={}){return super.data(e)}}class Wh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ig(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new k0(this._firestore,this._userDataWriter,r.key,r,new Ig(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new k0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ig(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new k0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ig(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,w=-1;return 0!==c.type&&(m=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),w=a.indexOf(c.doc.key)),{type:PV(c.type),doc:h,oldIndex:m,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function PV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function Kk(n,e){return n instanceof ad&&e instanceof ad?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wh&&e instanceof Wh&&n._firestore===e._firestore&&Fk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Zk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O0{}function qh(n,...e){for(const t of e)n=t._apply(n);return n}class NV extends O0{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=wg(e.firestore),r=function(i,a,c,h,m,w,C){let S;if(m.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){tO(C,w);const V=[];for(const Z of C)V.push(eO(h,i,Z));S={arrayValue:{values:V}}}else S=eO(h,i,C)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||tO(C,w),S=Gk(c,"where",C,"in"===w||"not-in"===w);const N=Oi.create(m,w,S);return function(V,Z){if(Z.ht()){const Ie=CA(V);if(null!==Ie&&!Ie.isEqual(Z.field))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ie.toString()}' and '${Z.field.toString()}'`);const mt=bA(V);null!==mt&&nO(0,Z.field,mt)}const ge=function(Ie,mt){for(const dt of Ie.filters)if(mt.indexOf(dt.op)>=0)return dt.op;return null}(V,function(Ie){switch(Ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==ge)throw new Ne(he.INVALID_ARGUMENT,ge===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${ge.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new qi(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new rd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class OV extends O0{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new W_(i,a);return function(h,m){if(null===bA(h)){const w=CA(h);null!==w&&nO(0,w,m.field)}}(r,c),c}(e._query,this.fa,this.wa);return new qi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new rd(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Yk extends O0{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new qi(e.firestore,e.converter,AP(e._query,this.ma,this.ga))}}class Qk extends O0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Jk(e,this.type,this.ya,this.pa);return new qi(e.firestore,e.converter,(i=t,new rd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Xk extends O0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Jk(e,this.type,this.ya,this.pa);return new qi(e.firestore,e.converter,(i=t,new rd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Jk(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof N0)return function(i,a,c,h,m){if(!h)throw new Ne(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const C of K_(i))if(C.field.isKeyField())w.push(ag(a,h.key));else{const S=h.data.field(C.field);if(wA(S))throw new Ne(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=C.field.canonicalString();throw new Ne(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}w.push(S)}return new Vh(w,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=wg(n.firestore);return function(a,c,h,m,w,C){const S=a.explicitOrderBy;if(w.length>S.length)throw new Ne(he.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let V=0;V<w.length;V++){const Z=w[V];if(S[V].field.isKeyField()){if("string"!=typeof Z)throw new Ne(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof Z}`);if(!DA(a)&&-1!==Z.indexOf("/"))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${Z}' contains a slash.`);const ge=a.path.child(Ke.fromString(Z));if(!Oe.isDocumentKey(ge))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ge}' is not because it contains an odd number of segments.`);const Ie=new Oe(ge);N.push(ag(c,Ie))}else{const ge=Gk(h,m,Z);N.push(ge)}}return new Vh(N,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function eO(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DA(e)&&-1!==t.indexOf("/"))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ke.fromString(t));if(!Oe.isDocumentKey(r))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ag(n,new Oe(r))}if(t instanceof Wn)return ag(n,t._key);throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tD(t)}.`)}function tO(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function nO(n,e,t){if(!t.isEqual(e))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const HV={maxAttempts:5};class lx{convertValue(e,t="none"){switch(og(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return ig(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new rD(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hP(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(t0(e));default:return null}}convertTimestamp(e){const t=Lh(e);return new Ce(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ke.fromString(e);Rt(dN(r));const i=new nd(r.get(1),r.get(3)),a=new Oe(r.popFirst(5));return i.isEqual(t)||Sr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function cD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class GV extends lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class rO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wg(e)}set(e,t,r){this._verifyNotCommitted();const i=Kh(e,this._firestore),a=cD(i.converter,t,r),c=sD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,sr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Kh(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof od?ax(this._dataReader,"WriteBatch.update",a._key,t,r,i):ox(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Kh(e,this._firestore);return this._mutations=this._mutations.concat(new X_(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kh(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Ne(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bg extends lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function iO(n,e,t){n=sn(n,Wn);const r=sn(n.firestore,Qn),i=cD(n.converter,e,t);return fy(r,[sD(wg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,sr.none())])}function sO(n,e,t,...r){n=sn(n,Wn);const i=sn(n.firestore,Qn),a=wg(i);let c;return c="string"==typeof(e=(0,k.m9)(e))||e instanceof od?ax(a,"updateDoc",n._key,e,t,r):ox(a,"updateDoc",n._key,e),fy(i,[c.toMutation(n._key,sr.exists(!0))])}function oO(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||ix(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges};if(ix(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,w,C;if(n instanceof Wn)w=sn(n.firestore,Qn),C=q_(n._key.path),m={next:S=>{e[c]&&e[c](dx(w,n,S))},error:e[c+1],complete:e[c+2]};else{const S=sn(n,qi);w=sn(S.firestore,Qn),C=S._query;const N=new bg(w);m={next:V=>{e[c]&&e[c](new Wh(w,N,S,V))},error:e[c+1],complete:e[c+2]},Zk(n._query)}return function(S,N,V,Z){const ge=new JC(Z),Ie=new IR(N,ge,V);return S.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return _R(yield hy(S),Ie)})),()=>{ge.Tc(),S.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return vR(yield hy(S),Ie)}))}}($r(w),C,h,m)}function fy(n,e){return function(t,r){const i=new s;return t.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function LU(n,e,t){return SR.apply(this,arguments)}(yield tx(t),r,i)})),i.promise}($r(n),e)}function dx(n,e,t){const r=t.docs.get(e._key),i=new bg(n);return new ad(n,i,e._key,r,new Ig(t.hasPendingWrites,t.fromCache),e.converter)}class e2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wg(e)}get(e){const t=Kh(e,this._firestore),r=new GV(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const a=i[0];if(a.isFoundDocument())return new N0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new N0(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=Kh(e,this._firestore),a=cD(i.converter,t,r),c=sD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Kh(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof od?ax(this._dataReader,"Transaction.update",a._key,t,r,i):ox(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Kh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Kh(e,this._firestore),r=new bg(this._firestore);return super.get(e).then(i=>new ad(this._firestore,r,t._key,i._document,new Ig(!1,!1),t.converter))}}!function(n,e=!0){Nh=on.SDK_VERSION,(0,on._registerComponent)(new st.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Qn(i,new d(t.getProvider("auth-internal")),new b(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,on.registerVersion)(mA,"3.4.13",n),(0,on.registerVersion)(mA,"3.4.13","esm2017")}();function hx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function uO(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function cO(){if(!function CL(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}class L0{constructor(e){this._delegate=e}static fromBase64String(e){return cO(),new L0(yc.fromBase64String(e))}static fromUint8Array(e){return uO(),new L0(yc.fromUint8Array(e))}toBase64(){return cO(),this._delegate.toBase64()}toUint8Array(){return uO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fx(n){return function c2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class l2{enableIndexedDbPersistence(e,t){return function mV(n,e){Bk(n=sn(n,Qn));const t=$r(n),r=n._freezeSettings(),i=new KR;return Vk(t,i,new Ek(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function _V(n){Bk(n=sn(n,Qn));const e=$r(n),t=n._freezeSettings(),r=new KR;return Vk(e,r,new XU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yV(n){if(n._initialized&&!n._terminated)throw new Ne(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new s;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{yield(t=(0,ue.Z)(function*(r){if(!au.V())return Promise.resolve();const i=r+"main";yield au.delete(i)}),function(r){return t.apply(this,arguments)})($A(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof nd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&H_("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function dV(n,e,t,r={}){var i;const a=(n=sn(n,M0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&H_("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=ti.MOCK_USER;else{c=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ne(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ti(m)}n._authCredentials=new l(new o(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function wV(n){return function rV(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield Dk(n),t=yield Tk(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i.lu.delete(0),R0(i)}(t)}))}($r(n=sn(n,Qn)))}(this._delegate)}disableNetwork(){return function EV(n){return function iV(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield Dk(n),t=yield Tk(n);return e.setNetworkEnabled(!1),(r=(0,ue.Z)(function*(i){const a=et(i);a.lu.add(0),yield sy(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}($r(n=sn(n,Qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,xk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function vV(n){return function(e){const t=new s;return e.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function BU(n,e){return PR.apply(this,arguments)}(yield tx(e),t)})),t.promise}($r(n=sn(n,Qn)))}(this._delegate)}onSnapshotsInSync(e){return function JV(n,e){return function aV(n,e){const t=new JC(e);return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return r=yield hy(n),i=t,et(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return r=yield hy(n),i=t,void et(r).Tu.delete(i);var r,i}))}}($r(n=sn(n,Qn)),ix(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new py(this,Ok(this._delegate,e))}catch(t){throw ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new va(this,nD(this._delegate,e))}catch(t){throw ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Es(this,function hV(n,e){if(n=sn(n,M0),rx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qi(n,null,(t=e,new rd(Ke.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function t2(n,e,t){n=sn(n,Qn);const r=Object.assign(Object.assign({},HV),t);return function(i){if(i.maxAttempts<1)throw new Ne(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function uV(n,e,t){const r=new s;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){const i=yield(a=n,eD(a).then(c=>c.datastore));var a;new tV(n.asyncQueue,i,t,e,r).run()})),r.promise}($r(n),i=>e(new e2(n,i)),r)}(this._delegate,t=>e(new dO(this,t)))}batch(){return $r(this._delegate),new hO(new rO(this._delegate,e=>fy(this._delegate,e)))}loadBundle(e){return function IV(n,e){const t=$r(n=sn(n,Qn)),r=new pV;return function cV(n,e,t,r){const i=function(a,c){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,w){if(m instanceof Uint8Array)return Ik(m,w);if(m instanceof ArrayBuffer)return Ik(new Uint8Array(m),w);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new JU(m,c);var m}(t,A0(e));n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){!function QU(n,e,t){const r=et(n);var i;(i=(0,ue.Z)(function*(a,c,h){try{const m=yield c.getMetadata();if(yield function(N,V){const Z=et(N),ge=di(V.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Ie=>Z.Ds.getBundleMetadata(Ie,V.id)).then(Ie=>!!Ie&&Ie.createTime.compareTo(ge)>=0)}(a.localStore,m))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=m).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(dk(m));const w=new xU(m,a.localStore,c.wt);let C=yield c.fc();for(;C;){const N=yield w.Nu(C);N&&h._updateProgress(N),C=yield c.fc()}const S=yield w.complete();return yield sd(a,S.Mu,void 0),yield function(N,V){const Z=et(N);return Z.persistence.runTransaction("Save bundle","readwrite",ge=>Z.Ds.saveBundleMetadata(ge,V))}(a.localStore,m),h._completeWith(S.progress),Promise.resolve(S.Ou)}catch(m){return H_("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var N}),function(a,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield tx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function bV(n,e){return function lV(n,e){return n.asyncQueue.enqueue((0,ue.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield ex(n),e)}))}($r(n=sn(n,Qn)),e).then(t=>t?new qi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Es(this,t):null)}}class lD extends lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new L0(new yc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return va.forKey(t,this.firestore,null)}}class dO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lD(e)}get(e){const t=Dg(e);return this._delegate.get(t).then(r=>new F0(this._firestore,new ad(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Dg(e);return r?(hx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Dg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Dg(e);return this._delegate.delete(t),this}}class hO{constructor(e){this._delegate=e}set(e,t,r){const i=Dg(e);return r?(hx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Dg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Dg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Cg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new k0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new U0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Cg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Cg(e,new lD(e),t),i.set(t,a)),a}}Cg.INSTANCES=new WeakMap;class va{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new va(t,new Wn(t._delegate,r,new Oe(e)))}static forKey(e,t,r){return new va(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new py(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new py(this.firestore,Ok(this._delegate,e))}catch(t){throw ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof Wn&&Lk(this._delegate,e)}set(e,t){t=hx("DocumentReference.set",t);try{return t?iO(this._delegate,e,t):iO(this._delegate,e)}catch(r){throw ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?sO(this._delegate,e):sO(this._delegate,e,t,...r)}catch(i){throw ws(i,"updateDoc()","DocumentReference.update()")}}delete(){return function QV(n){return fy(sn(n.firestore,Qn),[new X_(n._key,sr.none())])}(this._delegate)}onSnapshot(...e){const t=fO(e),r=pO(e,i=>new F0(this.firestore,new ad(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return oO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function WV(n){n=sn(n,Wn);const e=sn(n.firestore,Qn),t=$r(e),r=new bg(e);return function sV(n,e){const t=new s;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(r=(0,ue.Z)(function*(i,a,c){try{const h=yield function(m,w){const C=et(m);return C.persistence.runTransaction("read document","readonly",S=>C.localDocuments.getDocument(S,w))}(i,a);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Ne(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=uy(h,`Failed to get document '${a} from cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield ex(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ad(e,r,n._key,i,new Ig(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function qV(n){n=sn(n,Wn);const e=sn(n.firestore,Qn);return Sk($r(e),n._key,{source:"server"}).then(t=>dx(e,n,t))}(this._delegate):function zV(n){n=sn(n,Wn);const e=sn(n.firestore,Qn);return Sk($r(e),n._key).then(t=>dx(e,n,t))}(this._delegate),t.then(r=>new F0(this.firestore,new ad(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new va(this.firestore,this._delegate.withConverter(e?Cg.getInstance(this.firestore,e):null))}}function ws(n,e,t){return n.message=n.message.replace(e,t),n}function fO(n){for(const e of n)if("object"==typeof e&&!fx(e))return e;return{}}function pO(n,e){var t,r;let i;return i=fx(n[0])?n[0]:fx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class F0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new va(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Kk(this._delegate,e._delegate)}}class U0 extends F0{data(e){const t=this._delegate.data(e);return function rP(n,e){n||ct()}(void 0!==t),t}}class Es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lD(e)}where(e,t,r){try{return new Es(this.firestore,qh(this._delegate,function kV(n,e,t){const r=e,i=uD("where",n);return new NV(i,r,t)}(e,t,r)))}catch(i){throw ws(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Es(this.firestore,qh(this._delegate,function LV(n,e="asc"){const t=e,r=uD("orderBy",n);return new OV(r,t)}(e,t)))}catch(r){throw ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Es(this.firestore,qh(this._delegate,function FV(n){return Nk("limit",n),new Yk("limit",n,"F")}(e)))}catch(t){throw ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Es(this.firestore,qh(this._delegate,function UV(n){return Nk("limitToLast",n),new Yk("limitToLast",n,"L")}(e)))}catch(t){throw ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Es(this.firestore,qh(this._delegate,function VV(...n){return new Qk("startAt",n,!0)}(...e)))}catch(t){throw ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Es(this.firestore,qh(this._delegate,function BV(...n){return new Qk("startAfter",n,!1)}(...e)))}catch(t){throw ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Es(this.firestore,qh(this._delegate,function jV(...n){return new Xk("endBefore",n,!1)}(...e)))}catch(t){throw ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Es(this.firestore,qh(this._delegate,function $V(...n){return new Xk("endAt",n,!0)}(...e)))}catch(t){throw ws(t,"endAt()","Query.endAt()")}}isEqual(e){return Fk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ZV(n){n=sn(n,qi);const e=sn(n.firestore,Qn),t=$r(e),r=new bg(e);return function oV(n,e){const t=new s;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(r=(0,ue.Z)(function*(i,a,c){try{const h=yield qC(i,a,!0),m=new pk(a,h.ji),w=m.Ku(h.documents),C=m.applyChanges(w,!1);c.resolve(C.snapshot)}catch(h){const m=uy(h,`Failed to execute query '${a} against cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield ex(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Wh(e,r,n,i))}(this._delegate):"server"===e?.source?function YV(n){n=sn(n,qi);const e=sn(n.firestore,Qn),t=$r(e),r=new bg(e);return Ak(t,n._query,{source:"server"}).then(i=>new Wh(e,r,n,i))}(this._delegate):function KV(n){n=sn(n,qi);const e=sn(n.firestore,Qn),t=$r(e),r=new bg(e);return Zk(n._query),Ak(t,n._query).then(i=>new Wh(e,r,n,i))}(this._delegate),t.then(r=>new px(this.firestore,new Wh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=fO(e),r=pO(e,i=>new px(this.firestore,new Wh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return oO(this._delegate,t,r)}withConverter(e){return new Es(this.firestore,this._delegate.withConverter(e?Cg.getInstance(this.firestore,e):null))}}class h2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new U0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class px{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new U0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new h2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new U0(this._firestore,r))})}isEqual(e){return Kk(this._delegate,e._delegate)}}class py extends Es{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new va(this.firestore,e):null}doc(e){try{return new va(this.firestore,void 0===e?nD(this._delegate):nD(this._delegate,e))}catch(t){throw ws(t,"doc()","CollectionReference.doc()")}}add(e){return function XV(n,e){const t=sn(n.firestore,Qn),r=nD(n),i=cD(n.converter,e);return fy(t,[sD(wg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new va(this.firestore,t))}isEqual(e){return Lk(this._delegate,e._delegate)}withConverter(e){return new py(this.firestore,this._delegate.withConverter(e?Cg.getInstance(this.firestore,e):null))}}function Dg(n){return sn(n,Wn)}class gx{constructor(...e){this._delegate=new od(...e)}static documentId(){return new gx(at.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof od&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function r2(){return new sx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tg(e)}static delete(){const e=function n2(){return new P0("deleteField")}();return e._methodName="FieldValue.delete",new Tg(e)}static arrayUnion(...e){const t=function i2(...n){return new SV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tg(t)}static arrayRemove(...e){const t=function s2(...n){return new AV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tg(t)}static increment(e){const t=function o2(n){return new RV("increment",n)}(e);return t._methodName="FieldValue.increment",new Tg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const f2={Firestore:lO,GeoPoint:rD,Timestamp:Ce,Blob:L0,Transaction:dO,WriteBatch:hO,DocumentReference:va,DocumentSnapshot:F0,Query:Es,QueryDocumentSnapshot:U0,QuerySnapshot:px,CollectionReference:py,FieldPath:gx,FieldValue:Tg,setLogLevel:function d2(n){!function nP(n){hc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function gO(n,e){return function m2(n,e=fo.z){return new bi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function mx(n,e){return gO(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function dD(n,e){return mx(n,e).pipe(c_(void 0),nw(),(0,vt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const m=i.find(C=>C.doc.ref.isEqual(c.ref)),w=t?.payload.docs.find(C=>C.ref.isEqual(c.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(c.metadata)||!m&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),a}))}function mO(n,e,t){return dD(n,t).pipe(T((r,i)=>function y2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function v2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return _x(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return _x(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _x(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),U(),(0,vt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function _x(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function _O(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function g2(n){(function p2(n,e){n.INTERNAL.registerComponent(new st.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},f2)))})(n,(e,t)=>new lO(e,t,new l2)),n.registerVersion("@firebase/firestore-compat","0.1.22")}(Tt.Z);class yO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=dD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(c_(void 0),nw(),Do(([r,i])=>i.length>0||!r),(0,vt.U)(([r,i])=>i),qe.iC)}auditTrail(e){return this.stateChanges(e).pipe(T((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_O(e);return mO(this.query,t,this.afs.schedulers.outsideAngular).pipe(qe.iC)}valueChanges(e={}){return mx(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),qe.iC)}get(e){return(0,Ht.D)(this.query.get(e)).pipe(qe.iC)}add(e){return this.ref.add(e)}doc(e){return new vO(this.ref.doc(e),this.afs)}}class vO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=IO(r,t);return new yO(i,a,this.afs)}snapshotChanges(){return function _2(n,e){return gO(n,e).pipe(c_(void 0),nw(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ht.D)(this.ref.get(e)).pipe(qe.iC)}}class w2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?dD(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Do(t=>t.length>0),qe.iC):dD(this.query,this.afs.schedulers.outsideAngular).pipe(qe.iC)}auditTrail(e){return this.stateChanges(e).pipe(T((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_O(e);return mO(this.query,t,this.afs.schedulers.outsideAngular).pipe(qe.iC)}valueChanges(e={}){return mx(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),qe.iC)}get(e){return(0,Ht.D)(this.query.get(e)).pipe(qe.iC)}}const wO=new _.OlP("angularfire2.enableFirestorePersistence"),EO=new _.OlP("angularfire2.firestore.persistenceSettings"),E2=new _.OlP("angularfire2.firestore.settings"),I2=new _.OlP("angularfire2.firestore.use-emulator");function IO(n,e=(t=>t)){return{query:e(n),ref:n}}let b2=(()=>{class n{constructor(t,r,i,a,c,h,m,w,C,S,N,V,Z,ge,Ie,mt,dt){this.schedulers=m;const lt=(0,rn.on)(t,h,r),ut=C;S&&Zv(lt,h,N,Z,ge,Ie,V,mt),[this.firestore,this.persistenceEnabled$]=(0,rn.cc)(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const xt=h.runOutsideAngular(()=>lt.firestore());if(a&&xt.settings(a),ut&&xt.useEmulator(...ut),i&&!hu(c)){const Jt=()=>{try{return(0,Ht.D)(xt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Hr){return typeof console<"u"&&console.warn(Hr),it(!1)}};return[xt,h.runOutsideAngular(Jt)]}return[xt,it(!1)]},[a,ut,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=IO(i,r),h=this.schedulers.ngZone.run(()=>a);return new yO(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new w2(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new vO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(rn.Dh),_.LFG(rn.xv,8),_.LFG(wO,8),_.LFG(E2,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(qe.HU),_.LFG(EO,8),_.LFG(I2,8),_.LFG(Pp,8),_.LFG(r_,8),_.LFG(zv,8),_.LFG(Wv,8),_.LFG(i_,8),_.LFG(qv,8),_.LFG(Kv,8),_.LFG(Mp,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),C2=(()=>{class n{constructor(){Gv.Z.registerVersion("angularfire",qe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:wO,useValue:!0},{provide:EO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[b2]}),n})();const bO="firebasestorage.googleapis.com",CO="storageBucket";class pr extends k.ZR{constructor(e,t){super(yx(e),`Firebase Storage: ${t} (${yx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}_codeEquals(e){return yx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function yx(n){return"storage/"+n}function vx(){return new pr("unknown","An unknown error occurred, please check the error payload for server response.")}function DO(){return new pr("canceled","User canceled the upload/download.")}function TO(){return new pr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function gy(n){return new pr("invalid-argument",n)}function SO(){return new pr("app-deleted","The Firebase app was deleted.")}function AO(n){return new pr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function V0(n,e){return new pr("invalid-format","String does not match format '"+n+"': "+e)}function B0(n){throw new pr("internal-error","Internal error: "+n)}class Ki{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ki.makeFromUrl(e,t)}catch{return new Ki(e,"")}if(""===r.path)return r;throw function O2(n){return new pr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(ut){ut.path_=decodeURIComponent(ut.path)}const S=t.replace(/[.]/g,"\\."),lt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(ut){"/"===ut.path.charAt(ut.path.length-1)&&(ut.path_=ut.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===bO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let ut=0;ut<lt.length;ut++){const xt=lt[ut],Jt=xt.regex.exec(e);if(Jt){let lu=Jt[xt.indices.path];lu||(lu=""),r=new Ki(Jt[xt.indices.bucket],lu),xt.postModify(r);break}}if(null==r)throw function k2(n){return new pr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class V2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function hD(n){return"string"==typeof n||n instanceof String}function RO(n){return wx()&&n instanceof Blob}function wx(){return typeof Blob<"u"}function Ex(n,e,t,r){if(r<e)throw gy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw gy(`Invalid value for '${n}'. Expected ${t} or less.`)}function ud(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function xO(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Zh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Zh||(Zh={})),Zh))();class z2{constructor(e,t,r,i,a,c,h,m,w,C,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=w,this.progressCallback_=C,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,V)=>{this.resolve_=N,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function $2(n){return void 0!==n}(m)?a():a(m)}catch(m){c(m)}else if(null!==h){const m=vx();m.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,m):m)}else c(i.canceled?this.appDelete_?SO():DO():function N2(){return new pr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new fD(!1,null,!0)):this.backoffId_=function B2(n,e,t){let r=1,i=null,a=null,c=!1,h=0;function m(){return 2===h}let w=!1;function C(...Ie){w||(w=!0,e.apply(null,Ie))}function S(Ie){i=setTimeout(()=>{i=null,n(V,m())},Ie)}function N(){a&&clearTimeout(a)}function V(Ie,...mt){if(w)return void N();if(Ie)return N(),void C.call(null,Ie,...mt);if(m()||c)return N(),void C.call(null,Ie,...mt);let lt;r<64&&(r*=2),1===h?(h=2,lt=0):lt=1e3*(r+Math.random()),S(lt)}let Z=!1;function ge(Ie){Z||(Z=!0,N(),!w&&(null!==i?(Ie||(h=2),clearTimeout(i),S(0)):Ie||(h=1)))}return S(0),a=setTimeout(()=>{c=!0,ge(!0)},t),ge}((r,i)=>{if(i)return void r(!1,new fD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===Zh.NO_ERROR,m=a.getStatus();if(!h||this.isRetryStatusCode_(m)){const C=a.getErrorCode()===Zh.ABORT;return void r(!1,new fD(!1,null,C))}const w=-1!==this.successCodes_.indexOf(m);r(!0,new fD(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function j2(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class fD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function X2(...n){const e=function Q2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(wx())return new Blob(n);throw new pr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ro={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ix{constructor(e,t){this.data=e,this.contentType=t||null}}function bx(n,e){switch(n){case Ro.RAW:return new Ix(MO(e));case Ro.BASE64:case Ro.BASE64URL:return new Ix(PO(n,e));case Ro.DATA_URL:return new Ix(function nB(n){const e=new NO(n);return e.base64?PO(Ro.BASE64,e.rest):function tB(n){let e;try{e=decodeURIComponent(n)}catch{throw V0(Ro.DATA_URL,"Malformed data URL.")}return MO(e)}(e.rest)}(e),function rB(n){return new NO(n).contentType}(e))}throw vx()}function MO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function PO(n,e){switch(n){case Ro.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw V0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ro.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw V0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function eB(n){return atob(n)}(e)}catch{throw V0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class NO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw V0(Ro.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function iB(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class vc{constructor(e,t){let r=0,i="";RO(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(RO(this.data_)){const i=function J2(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new vc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new vc(r,!0)}}static getBlob(...e){if(wx()){const t=e.map(r=>r instanceof vc?r.data_:r);return new vc(X2.apply(null,t))}{const t=e.map(c=>hD(c)?bx(Ro.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[a++]=c[h]}),new vc(i,!0)}}uploadData(){return this.data_}}function Cx(n){let e;try{e=JSON.parse(n)}catch{return null}return function G2(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function kO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function aB(n,e){return e}class Is{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||aB}}let pD=null;function j0(){if(pD)return pD;const n=[];n.push(new Is("bucket")),n.push(new Is("generation")),n.push(new Is("metageneration")),n.push(new Is("name","fullPath",!0));const t=new Is("name");t.xform=function e(a,c){return function uB(n){return!hD(n)||n.length<2?n:kO(n)}(c)},n.push(t);const i=new Is("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Is("timeCreated")),n.push(new Is("updated")),n.push(new Is("md5Hash",null,!0)),n.push(new Is("cacheControl",null,!0)),n.push(new Is("contentDisposition",null,!0)),n.push(new Is("contentEncoding",null,!0)),n.push(new Is("contentLanguage",null,!0)),n.push(new Is("contentType",null,!0)),n.push(new Is("metadata","customMetadata",!0)),pD=n,pD}function OO(n,e,t){const r=Cx(e);return null===r?null:function lB(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function cB(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Ki(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Dx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const LO="prefixes",FO="items";class wc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ec(n){if(!n)throw vx()}function gD(n,e){return function t(r,i){const a=OO(n,i,e);return Ec(null!==a),a}}function my(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function M2(){return new pr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function x2(){return new pr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function R2(n){return new pr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function P2(n){return new pr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function $0(n){const e=my(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function A2(n){return new pr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function UO(n,e,t){const i=ud(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new wc(i,"GET",gD(n,t),c);return h.errorHandler=$0(e),h}function mB(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=ud(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,C=new wc(h,"GET",function pB(n,e){return function t(r,i){const a=function fB(n,e,t){const r=Cx(t);return null===r?null:function hB(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[LO])for(const i of t[LO]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new Ki(e,a));r.prefixes.push(c)}if(t[FO])for(const i of t[FO]){const a=n._makeStorageReference(new Ki(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Ec(null!==a),a}}(n,e.bucket),w);return C.urlParams=a,C.errorHandler=my(e),C}function BO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function wB(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class mD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Tx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ec(!1)}return Ec(!!t&&-1!==(e||["active"]).indexOf(t)),t}const CB={STATE_CHANGED:"state_changed"},bs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Sx(n){switch(n){case"running":case"pausing":case"canceling":return bs.RUNNING;case"paused":return bs.PAUSED;case"success":return bs.SUCCESS;case"canceled":return bs.CANCELED;default:return bs.ERROR}}class DB{constructor(e,t,r){if(function H2(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function _y(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let HO=null;class TB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw B0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw B0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw B0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw B0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw B0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class SB extends TB{initXhr(){this.xhr_.responseType="text"}}function uu(){return HO?HO():new SB}class GO{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=j0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function EB(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=BO(e,r,i),h={name:c.fullPath},m=ud(a,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=Dx(c,t),Z=new wc(m,"POST",function V(ge){let Ie;Tx(ge);try{Ie=ge.getResponseHeader("X-Goog-Upload-URL")}catch{Ec(!1)}return Ec(hD(Ie)),Ie},n.maxUploadRetryTime);return Z.urlParams=h,Z.headers=C,Z.body=S,Z.errorHandler=my(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,uu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function IB(n,e,t,r){const m=new wc(t,"POST",function a(w){const C=Tx(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ec(!1)}S||Ec(!1);const N=Number(S);return Ec(!isNaN(N)),new mD(N,r.size(),"final"===C)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=my(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,uu,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new mD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function bB(n,e,t,r,i,a,c,h){const m=new mD(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function F2(){return new pr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=m.total-m.current;let C=w;i>0&&(C=Math.min(C,i));const S=m.current,Z={"X-Goog-Upload-Command":C===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},ge=r.slice(S,S+C);if(null===ge)throw TO();const lt=new wc(t,"POST",function Ie(ut,xt){const Jt=Tx(ut,["active","final"]),Hr=m.current+C,lu=r.size();let oM;return oM="final"===Jt?gD(e,a)(ut,xt):null,new mD(Hr,lu,"final"===Jt,oM)},e.maxUploadRetryTime);return lt.headers=Z,lt.body=ge.uploadData(),lt.progressCallback=h||null,lt.errorHandler=my(n),lt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(c,uu,i,a);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=UO(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,uu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function jO(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let lt="";for(let ut=0;ut<2;ut++)lt+=Math.random().toString().slice(2);return lt}();c["Content-Type"]="multipart/related; boundary="+m;const w=BO(e,r,i),C=Dx(w,t),V=vc.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+m+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===V)throw TO();const Z={name:w.fullPath},ge=ud(a,n.host,n._protocol),mt=n.maxUploadRetryTime,dt=new wc(ge,"POST",gD(n,t),mt);return dt.urlParams=Z,dt.headers=c,dt.body=V.uploadData(),dt.errorHandler=my(e),dt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,uu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=DO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Sx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new DB(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Sx(this._state)){case bs.SUCCESS:_y(this._resolve.bind(null,this.snapshot))();break;case bs.CANCELED:case bs.ERROR:_y(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Sx(this._state)){case bs.RUNNING:case bs.PAUSED:e.next&&_y(e.next.bind(e,this.snapshot))();break;case bs.SUCCESS:e.complete&&_y(e.complete.bind(e))();break;default:e.error&&_y(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Sg{constructor(e,t){this._service=e,this._location=t instanceof Ki?t:Ki.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Sg(e,t)}get root(){const e=new Ki(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kO(this._location.path)}get storage(){return this._service}get parent(){const e=function sB(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ki(this._location.bucket,e);return new Sg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw AO(e)}}function WO(n,e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,ue.Z)(function*(n,e,t){const i=yield qO(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield WO(n,e,i.nextPageToken))}),Ax.apply(this,arguments)}function qO(n,e){null!=e&&"number"==typeof e.maxResults&&Ex("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=mB(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,uu)}function VB(n){n._throwIfRoot("getDownloadURL");const e=function _B(n,e,t){const i=ud(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new wc(i,"GET",function gB(n,e){return function t(r,i){const a=OO(n,i,e);return Ec(null!==a),function dB(n,e,t,r){const i=Cx(e);if(null===i||!hD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return ud("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+xO({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=$0(e),h}(n.storage,n._location,j0());return n.storage.makeRequestWithTokens(e,uu).then(t=>{if(null===t)throw function U2(){return new pr("no-download-url","The given file does not have any download URLs.")}();return t})}function KO(n,e){const t=function oB(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ki(n._location.bucket,t);return new Sg(n.storage,r)}function ZO(n,e){if(n instanceof Rx){const t=n;if(null==t._bucket)throw function L2(){return new pr("no-default-bucket","No default bucket found. Did you set the '"+CO+"' property when initializing the app?")}();const r=new Sg(t,t._bucket);return null!=e?ZO(r,e):r}return void 0!==e?KO(n,e):n}function HB(n,e){if(e&&function jB(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Rx)return function $B(n,e){return new Sg(n,e)}(n,e);throw gy("To use ref(service, url), the first argument must be a Storage instance.")}return ZO(n,e)}function YO(n,e){const t=e?.[CO];return null==t?null:Ki.makeFromBucketSpec(t,n)}class Rx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=bO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ki.makeFromBucketSpec(i,this._host):YO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ki.makeFromBucketSpec(this._url,e):YO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ex("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ex("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ue.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ue.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new V2(SO());{const a=function Y2(n,e,t,r,i,a){const c=xO(n.urlParams),h=n.url+c,m=Object.assign({},n.headers);return function K2(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function W2(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function q2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(m,a),function Z2(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new z2(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ue.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const QO="@firebase/storage";function e1(n,e){return HB(n=(0,k.m9)(n),e)}function ej(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Rx(t,r,i,e,on.SDK_VERSION)}!function tj(){(0,on._registerComponent)(new st.wA("storage",ej,"PUBLIC").setMultipleInstances(!0)),(0,on.registerVersion)(QO,"0.9.9",""),(0,on.registerVersion)(QO,"0.9.9","esm2017")}();class _D{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class t1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _D(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new _D(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new _D(c,this,this._ref)):{next:t.next?c=>t.next(new _D(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class n1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new cd(e,this._service))}get items(){return this._delegate.items.map(e=>new cd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class cd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function XB(n,e){return KO(n,e)}(this._delegate,e);return new cd(t,this.storage)}get root(){return new cd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new cd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new t1(function zB(n,e,t){return function kB(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new GO(n,new vc(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ro.RAW,r){this._throwIfRoot("putString");const i=bx(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new t1(new GO(this._delegate,new vc(i.data,!0),a),this)}listAll(){return function ZB(n){return function LB(n){const e={prefixes:[],items:[]};return WO(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new n1(e,this.storage))}list(e){return function KB(n,e){return qO(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new n1(t,this.storage))}getMetadata(){return function WB(n){return function FB(n){n._throwIfRoot("getMetadata");const e=UO(n.storage,n._location,j0());return n.storage.makeRequestWithTokens(e,uu)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function qB(n,e){return function UB(n,e){n._throwIfRoot("updateMetadata");const t=function yB(n,e,t,r){const a=ud(e.fullServerUrl(),n.host,n._protocol),h=Dx(t,r),w=n.maxOperationRetryTime,C=new wc(a,"PATCH",gD(n,r),w);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=h,C.errorHandler=$0(e),C}(n.storage,n._location,e,j0());return n.storage.makeRequestWithTokens(t,uu)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function YB(n){return VB(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function QB(n){return function BB(n){n._throwIfRoot("deleteObject");const e=function vB(n,e){const r=ud(e.fullServerUrl(),n.host,n._protocol),h=new wc(r,"DELETE",function c(m,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=$0(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,uu)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw AO(e)}}class r1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(i1(e))throw gy("ref() expected a child path but got a URL, use refFromURL instead.");return new cd(e1(this._delegate,e),this)}refFromURL(e){if(!i1(e))throw gy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ki.makeFromUrl(e,this._delegate.host)}catch{throw gy("refFromUrl() expected a valid full URL but got an invalid one.")}return new cd(e1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function JB(n,e,t,r={}){!function GB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function i1(n){return/^[A-Za-z]+:\/\//.test(n)}function sj(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new r1(t,r)}function s1(n){const e=function aj(n){return new bi.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function D2(n,e=fo.z){return(0,Tn.e)((t,r)=>{let i=null,a=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function m(){const w=c+n,C=e.now();if(C<w)return i=this.schedule(void 0,w-C),void r.add(i);h()}t.subscribe((0,kn.x)(r,w=>{a=w,c=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,vt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function yD(n){return{getDownloadURL:()=>it(void 0).pipe(qe.fc,vn(()=>n.getDownloadURL()),qe.iC),getMetadata:()=>it(void 0).pipe(qe.fc,vn(()=>n.getMetadata()),qe.iC),delete:()=>(0,Ht.D)(n.delete()),child:e=>yD(n.child(e)),updateMetadata:e=>(0,Ht.D)(n.updateMetadata(e)),put:(e,t)=>s1(n.put(e,t)),putString:(e,t,r)=>s1(n.putString(e,t,r)),list:e=>(0,Ht.D)(n.list(e)),listAll:()=>(0,Ht.D)(n.listAll())}}!function oj(n){const e={TaskState:bs,TaskEvent:CB,StringFormat:Ro,Storage:r1,Reference:cd};n.INTERNAL.registerComponent(new st.wA("storage-compat",sj,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(Tt.Z);const uj=new _.OlP("angularfire2.storageBucket"),cj=new _.OlP("angularfire2.storage.maxUploadRetryTime"),lj=new _.OlP("angularfire2.storage.maxOperationRetryTime"),dj=new _.OlP("angularfire2.storage.use-emulator");let hj=(()=>{class n{constructor(t,r,i,a,c,h,m,w,C,S){const N=(0,rn.on)(t,c,r);this.storage=(0,rn.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const V=c.runOutsideAngular(()=>N.storage(i||void 0)),Z=C;return Z&&V.useEmulator(...Z),m&&V.setMaxUploadRetryTime(m),w&&V.setMaxOperationRetryTime(w),V},[m,w])}ref(t){return yD(this.storage.ref(t))}refFromURL(t){return yD(this.storage.refFromURL(t))}upload(t,r,i){return yD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(rn.Dh),_.LFG(rn.xv,8),_.LFG(uj,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(qe.HU),_.LFG(cj,8),_.LFG(lj,8),_.LFG(dj,8),_.LFG(Mp,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})(),pj=(()=>{class n{constructor(){Gv.Z.registerVersion("angularfire",qe.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[hj],imports:[fj]}),n})();class cu extends ac.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:gj}=Array,{getPrototypeOf:mj,prototype:_j,keys:yj}=Object;const{isArray:Ej}=Array;var Dj=L(9672);function o1(...n){const e=(0,ia.yG)(n),t=(0,ia.jO)(n),{args:r,keys:i}=function vj(n){if(1===n.length){const e=n[0];if(gj(e))return{args:e,keys:null};if(function wj(n){return n&&"object"==typeof n&&mj(n)===_j}(e)){const t=yj(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Ht.D)([],e);const a=new bi.y(function Tj(n,e,t=x.y){return r=>{a1(e,()=>{const{length:i}=n,a=new Array(i);let c=i,h=i;for(let m=0;m<i;m++)a1(e,()=>{const w=(0,Ht.D)(n[m],e);let C=!1;w.subscribe((0,kn.x)(r,S=>{a[m]=S,C||(C=!0,h--),h||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function Cj(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):x.y));return t?a.pipe(function bj(n){return(0,vt.U)(e=>function Ij(n,e){return Ej(e)?n(...e):n(e)}(n,e))}(t)):a}function a1(n,e,t){n?(0,Dj.f)(t,n,e):e()}function u1(n){return new bi.y(e=>{(0,Ns.Xf)(n()).subscribe(e)})}var Sj=L(9635);function H0(n,e){const t=(0,Gm.m)(n)?n:()=>n,r=i=>i.error(t());return new bi.y(e?i=>e.schedule(r,0,i):r)}var c1=L(727);function xx(){return(0,Tn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,kn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class l1 extends bi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Tn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new c1.w0;const t=this.getSubject();e.add(this.source.subscribe((0,kn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=c1.w0.EMPTY)}return e}refCount(){return xx()(this)}}var Cs=L(5577);function Ag(n,e){return(0,Gm.m)(e)?(0,Cs.z)(n,e,1):(0,Cs.z)(n,1)}var Zi=L(8505);function Yh(n){return(0,Tn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,kn.x)(t,void 0,void 0,c=>{a=(0,Ns.Xf)(n(c,Yh(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Mx(n){return n<=0?()=>eu.E:(0,Tn.e)((e,t)=>{let r=[];e.subscribe((0,kn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function d1(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Do((i,a)=>n(i,a,r)):x.y,Mx(1),t?Ep(e):Ip(()=>new Fl))}function Px(n){return(0,Tn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const $t="primary",G0=Symbol("RouteTitle");class xj{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function yy(n){return new xj(n)}function Mj(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],h=n[a];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ic(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!h1(n[i],e[i]))return!1;return!0}function h1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function f1(n){return Array.prototype.concat.apply([],n)}function p1(n){return n.length>0?n[n.length-1]:null}function Li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Qh(n){return(0,_.CqO)(n)?n:(0,_.QGY)(n)?(0,Ht.D)(Promise.resolve(n)):it(n)}const vD=!1,Nj={exact:function _1(n,e,t){if(!Rg(n.segments,e.segments)||!wD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_1(n.children[r],e.children[r],t))return!1;return!0},subset:y1},g1={exact:function kj(n,e){return Ic(n,e)},subset:function Oj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>h1(n[t],e[t]))},ignored:()=>!0};function m1(n,e,t){return Nj[t.paths](n.root,e.root,t.matrixParams)&&g1[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function y1(n,e,t){return v1(n,e,e.segments,t)}function v1(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Rg(i,t)||e.hasChildren()||!wD(i,t,r))}if(n.segments.length===t.length){if(!Rg(n.segments,t)||!wD(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!y1(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Rg(n.segments,i)&&wD(n.segments,i,r)&&n.children[$t])&&v1(n.children[$t],e,a,r)}}function wD(n,e,t){return e.every((r,i)=>g1[t](n[i].parameters,r.parameters))}class Xh{constructor(e=new Yt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yy(this.queryParams)),this._queryParamMap}toString(){return Uj.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Li(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ED(this)}}class z0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=yy(this.parameters)),this._parameterMap}toString(){return I1(this)}}function Rg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let W0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return new Nx},providedIn:"root"}),n})();class Nx{parse(e){const t=new qj(e);return new Xh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${q0(e.root,!0)}`,r=function jj(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ID(t)}=${ID(i)}`).join("&"):`${ID(t)}=${ID(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function Vj(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const Uj=new Nx;function ED(n){return n.segments.map(e=>I1(e)).join("/")}function q0(n,e){if(!n.hasChildren())return ED(n);if(e){const t=n.children[$t]?q0(n.children[$t],!1):"",r=[];return Li(n.children,(i,a)=>{a!==$t&&r.push(`${a}:${q0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Fj(n,e){let t=[];return Li(n.children,(r,i)=>{i===$t&&(t=t.concat(e(r,i)))}),Li(n.children,(r,i)=>{i!==$t&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===$t?[q0(n.children[$t],!1)]:[`${i}:${q0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[$t]?`${ED(n)}/${t[0]}`:`${ED(n)}/(${t.join("//")})`}}function w1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ID(n){return w1(n).replace(/%3B/gi,";")}function kx(n){return w1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bD(n){return decodeURIComponent(n)}function E1(n){return bD(n.replace(/\+/g,"%20"))}function I1(n){return`${kx(n.path)}${function Bj(n){return Object.keys(n).map(e=>`;${kx(e)}=${kx(n[e])}`).join("")}(n.parameters)}`}const $j=/^[^\/()?;=#]+/;function CD(n){const e=n.match($j);return e?e[0]:""}const Hj=/^[^=?&#]+/,zj=/^[^&#]+/;class qj{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[$t]=new Yt(e,t)),r}parseSegment(){const e=CD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new _.vHH(4009,vD);return this.capture(e),new z0(bD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=CD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=CD(this.remaining);i&&(r=i,this.capture(r))}e[bD(t)]=bD(r)}parseQueryParam(e){const t=function Gj(n){const e=n.match(Hj);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Wj(n){const e=n.match(zj);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=E1(t),a=E1(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=CD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new _.vHH(4010,vD);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=$t);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[$t]:new Yt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new _.vHH(4011,vD)}}function Ox(n){return n.segments.length>0?new Yt([],{[$t]:n}):n}function DD(n){const e={};for(const r of Object.keys(n.children)){const a=DD(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Kj(n){if(1===n.numberOfChildren&&n.children[$t]){const e=n.children[$t];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}function xg(n){return n instanceof Xh}const Lx=!1;function Zj(n,e,t,r,i){if(0===t.length)return vy(e.root,e.root,e.root,r,i);const a=function S1(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new T1(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Li(a.outlets,(m,w)=>{h[w]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new T1(t,e,r)}(t);return a.toRoot()?vy(e.root,e.root,new Yt([],{}),r,i):function c(m){const w=function Qj(n,e,t,r){if(n.isAbsolute)return new wy(e.root,!0,0);if(-1===r)return new wy(t,t===e.root,0);return function A1(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new _.vHH(4005,Lx&&"Invalid number of '../'");i=r.segments.length}return new wy(r,!1,i-a)}(t,r+(K0(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),C=w.processChildren?Ey(w.segmentGroup,w.index,a.commands):Fx(w.segmentGroup,w.index,a.commands);return vy(e.root,w.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function K0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Z0(n){return"object"==typeof n&&null!=n&&n.outlets}function vy(n,e,t,r,i){let c,a={};r&&Li(r,(m,w)=>{a[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),c=n===e?t:D1(n,e,t);const h=Ox(DD(c));return new Xh(h,a,i)}function D1(n,e,t){const r={};return Li(n.children,(i,a)=>{r[a]=i===e?t:D1(i,e,t)}),new Yt(n.segments,r)}class T1{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&K0(r[0]))throw new _.vHH(4003,Lx&&"Root segment cannot have matrix parameters");const i=r.find(Z0);if(i&&i!==p1(r))throw new _.vHH(4004,Lx&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Fx(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return Ey(n,e,t);const r=function Jj(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],h=t[r];if(Z0(h))break;const m=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&w&&"object"==typeof w&&void 0===w.outlets){if(!x1(m,w,c))return a;r+=2}else{if(!x1(m,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Yt(n.segments.slice(0,r.pathIndex),{});return a.children[$t]=new Yt(n.segments.slice(r.pathIndex),n.children),Ey(a,0,i)}return r.match&&0===i.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?Ux(n,e,t):r.match?Ey(n,0,i):Ux(n,e,t)}function Ey(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function Xj(n){return Z0(n[0])?n[0].outlets:{[$t]:n}}(t),i={};if(!r[$t]&&n.children[$t]&&1===n.numberOfChildren&&0===n.children[$t].segments.length){const a=Ey(n.children[$t],e,t);return new Yt(n.segments,a.children)}return Li(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=Fx(n.children[c],e,a))}),Li(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new Yt(n.segments,i)}}function Ux(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Z0(a)){const m=e$(a.outlets);return new Yt(r,m)}if(0===i&&K0(t[0])){r.push(new z0(n.segments[e].path,R1(t[0]))),i++;continue}const c=Z0(a)?a.outlets[$t]:`${a}`,h=i<t.length-1?t[i+1]:null;c&&h&&K0(h)?(r.push(new z0(c,R1(h))),i+=2):(r.push(new z0(c,{})),i++)}return new Yt(r,{})}function e$(n){const e={};return Li(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ux(new Yt([],{}),0,t))}),e}function R1(n){const e={};return Li(n,(t,r)=>e[r]=`${t}`),e}function x1(n,e,t){return n==t.path&&Ic(e,t.parameters)}const Y0="imperative";class bc{constructor(e,t){this.id=e,this.url=t}}class Vx extends bc{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mg extends bc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class TD extends bc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class SD extends bc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Bx extends bc{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class t$ extends bc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n$ extends bc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class r$ extends bc{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class i$ extends bc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s$ extends bc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class o${constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class a${constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class u${constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class c${constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l${constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class d${constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class M1{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let p$=(()=>{class n{createUrlTree(t,r,i,a,c,h){return Zj(t||r.root,i,a,c,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),m$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(e){return p$.\u0275fac(e)},providedIn:"root"}),n})();class P1{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jx(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$x(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $x(e,this._root).map(t=>t.value)}}function jx(n,e){if(n===e.value)return e;for(const t of e.children){const r=jx(n,t);if(r)return r}return null}function $x(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$x(n,t);if(r.length)return r.unshift(e),r}return[]}class ld{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Iy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class N1 extends P1{constructor(e,t){super(e),this.snapshot=t,Hx(this,e)}toString(){return this.snapshot.toString()}}function k1(n,e){const t=function _$(n,e){const c=new AD([],{},{},"",{},$t,e,null,n.root,-1,{});return new L1("",new ld(c,[]))}(n,e),r=new cu([new z0("",{})]),i=new cu({}),a=new cu({}),c=new cu({}),h=new cu(""),m=new by(r,i,c,h,a,$t,e,t.root);return m.snapshot=t.root,new N1(new ld(m,[]),t)}class by{constructor(e,t,r,i,a,c,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,vt.U)(w=>w[G0]))??it(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>yy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>yy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function O1(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function y$(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class AD{get title(){return this.data?.[G0]}constructor(e,t,r,i,a,c,h,m,w,C,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.routeConfig=m,this._urlSegment=w,this._lastPathIndex=C,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class L1 extends P1{constructor(e,t){super(t),this.url=e,Hx(this,t)}toString(){return F1(this._root)}}function Hx(n,e){e.value._routerState=n,e.children.forEach(t=>Hx(n,t))}function F1(n){const e=n.children.length>0?` { ${n.children.map(F1).join(", ")} } `:"";return`${n.value}${e}`}function Gx(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ic(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ic(e.params,t.params)||n.params.next(t.params),function Pj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ic(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ic(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function zx(n,e){const t=Ic(n.params,e.params)&&function Lj(n,e){return Rg(n,e)&&n.every((t,r)=>Ic(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zx(n.parent,e.parent))}function Q0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function w$(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Q0(n,r,i);return Q0(n,r)})}(n,e,t);return new ld(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>Q0(n,h)),c}}const r=function E$(n){return new by(new cu(n.url),new cu(n.params),new cu(n.queryParams),new cu(n.fragment),new cu(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Q0(n,a));return new ld(r,i)}}const Wx="ngNavigationCancelingError";function U1(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=xg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=V1(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function V1(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Wx]=!0,r.cancellationCode=e,t&&(r.url=t),r}function B1(n){return j1(n)&&xg(n.url)}function j1(n){return n&&n[Wx]}class I${constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new X0,this.attachRef=null}}let X0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new I$,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const RD=!1;let qx=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=$t,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.parentContexts=(0,_.f3M)(X0),this.location=(0,_.f3M)(_.s_b),this.changeDetector=(0,_.f3M)(_.sBO),this.environmentInjector=(0,_.f3M)(_.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.vHH(4012,RD);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.vHH(4012,RD);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.vHH(4012,RD);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new _.vHH(4013,RD);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new b$(t,h,i.injector);if(r&&function C$(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(c);this.activated=i.createComponent(w,i.length,m)}else this.activated=i.createComponent(c,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=_.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.TTD]}),n})();class b${constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===by?this.route:e===X0?this.childContexts:this.parent.get(e,t)}}let Kx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[_.jDz],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},dependencies:[qx],encapsulation:2}),n})();function $1(n,e){return n.providers&&!n._injector&&(n._injector=(0,_.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Yx(n){const e=n.children&&n.children.map(Yx),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=Kx),t}function wa(n){return n.outlet||$t}function H1(n,e){const t=n.filter(r=>wa(r)===e);return t.push(...n.filter(r=>wa(r)!==e)),t}function J0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class R${constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gx(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Iy(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Li(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Iy(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Iy(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Iy(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new d$(a.value.snapshot))}),e.children.length&&this.forwardEvent(new c$(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Gx(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),Gx(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=J0(i.snapshot),m=h?.get(_._Vd)??null;c.attachRef=null,c.route=i,c.resolver=m,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class G1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xD{constructor(e,t){this.component=e,this.route=t}}function x$(n,e,t){const r=n._root;return eE(r,e?e._root:null,t,[r.value])}function Cy(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,_.Z0I)(n)?e.get(n):n:r}function eE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Iy(e);return n.children.forEach(c=>{(function P$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const m=function N$(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Rg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rg(n.url,e.url)||!Ic(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zx(n,e)||!Ic(n.queryParams,e.queryParams);default:return!zx(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new G1(r)):(a.data=c.data,a._resolvedData=c._resolvedData),eE(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new xD(h.outlet.component,c))}else c&&tE(e,h,i),i.canActivateChecks.push(new G1(r)),eE(n,null,a.component?h?h.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Li(a,(c,h)=>tE(c,t.getContext(h),i)),i}function tE(n,e,t){const r=Iy(n),i=n.value;Li(r,(a,c)=>{tE(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new xD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function nE(n){return"function"==typeof n}function Qx(n){return n instanceof Fl||"EmptyError"===n?.name}const MD=Symbol("INITIAL_VALUE");function Dy(){return vn(n=>o1(n.map(e=>e.pipe(Ul(1),c_(MD)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===MD)return MD;if(!1===t||t instanceof Xh)return t}return!0}),Do(e=>e!==MD),Ul(1)))}function z1(n){return(0,Sj.z)((0,Zi.b)(e=>{if(xg(e))throw U1(0,e)}),(0,vt.U)(e=>!0===e))}const Xx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function W1(n,e,t,r,i){const a=Jx(n,e,t);return a.matched?function Y$(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?it(i.map(c=>{const h=Cy(c,n);return Qh(function V$(n){return n&&nE(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Dy(),z1()):it(!0)}(r=$1(e,r),e,t).pipe((0,vt.U)(c=>!0===c?a:{...Xx})):it(a)}function Jx(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Xx}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Mj)(t,n,e);if(!i)return{...Xx};const a={};Li(i.posParams,(h,m)=>{a[m]=h.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function PD(n,e,t,r){if(t.length>0&&function J$(n,e,t){return t.some(r=>ND(n,e,r)&&wa(r)!==$t)}(n,t,r)){const a=new Yt(e,function X$(n,e,t,r){const i={};i[$t]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&wa(a)!==$t){const c=new Yt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[wa(a)]=c}return i}(n,e,r,new Yt(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function eH(n,e,t){return t.some(r=>ND(n,e,r))}(n,t,r)){const a=new Yt(n.segments,function Q$(n,e,t,r,i){const a={};for(const c of r)if(ND(n,t,c)&&!i[wa(c)]){const h=new Yt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[wa(c)]=h}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new Yt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function ND(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function q1(n,e,t,r){return!!(wa(n)===r||r!==$t&&ND(e,t,n))&&("**"===n.path||Jx(e,n,t).matched)}function K1(n,e,t){return 0===e.length&&!n.children[t]}const kD=!1;class OD{constructor(e){this.segmentGroup=e||null}}class Z1{constructor(e){this.urlTree=e}}function rE(n){return H0(new OD(n))}function Y1(n){return H0(new Z1(n))}function tH(n){return H0(new _.vHH(4e3,kD&&`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class iH{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=PD(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,$t).pipe((0,vt.U)(a=>this.createUrlTree(DD(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yh(a=>{if(a instanceof Z1)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof OD?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,$t).pipe((0,vt.U)(i=>this.createUrlTree(DD(i),e.queryParams,e.fragment))).pipe(Yh(i=>{throw i instanceof OD?this.noMatchError(i):i}))}noMatchError(e){return new _.vHH(4002,kD&&`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=Ox(e);return new Xh(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(a=>new Yt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Ht.D)(i).pipe(Ag(a=>{const c=r.children[a],h=H1(t,a);return this.expandSegmentGroup(e,h,c,a).pipe((0,vt.U)(m=>({segment:m,outlet:a})))}),T((a,c)=>(a[c.outlet]=c.segment,a),{}),d1())}expandSegment(e,t,r,i,a,c){return(0,Ht.D)(r).pipe(Ag(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,c).pipe(Yh(w=>{if(w instanceof OD)return it(null);throw w}))),ga(h=>!!h),Yh((h,m)=>{if(Qx(h))return K1(t,i,a)?it(new Yt([],{})):rE(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,c,h){return q1(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):rE(t):rE(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Y1(a):this.lineralizeSegments(r,a).pipe((0,Cs.z)(c=>{const h=new Yt(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:h,consumedSegments:m,remainingSegments:w,positionalParamSegments:C}=Jx(t,i,a);if(!h)return rE(t);const S=this.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?Y1(S):this.lineralizeSegments(i,S).pipe((0,Cs.z)(N=>this.expandSegment(e,t,r,N.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=$1(r,e),r.loadChildren?(r._loadedRoutes?it({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,vt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Yt(i,{})))):it(new Yt(i,{}))):W1(t,r,i,e).pipe(vn(({matched:c,consumedSegments:h,remainingSegments:m})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Cs.z)(C=>{const S=C.injector??e,N=C.routes,{segmentGroup:V,slicedSegments:Z}=PD(t,h,m,N),ge=new Yt(V.segments,V.children);if(0===Z.length&&ge.hasChildren())return this.expandChildren(S,N,ge).pipe((0,vt.U)(lt=>new Yt(h,lt)));if(0===N.length&&0===Z.length)return it(new Yt(h,{}));const Ie=wa(r)===a;return this.expandSegment(S,ge,N,Z,Ie?$t:a,!0).pipe((0,vt.U)(dt=>new Yt(h.concat(dt.segments),dt.children)))})):rE(t)))}getChildConfig(e,t,r){return t.children?it({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?it({routes:t._loadedRoutes,injector:t._loadedInjector}):function Z$(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?it(!0):it(i.map(c=>{const h=Cy(c,n);return Qh(function O$(n){return n&&nE(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Dy(),z1())}(e,t,r).pipe((0,Cs.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Zi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function nH(n){return H0(V1(kD&&`Cannot load children because the guard of the route "path: '${n.path}'" returned false`,3))}(t))):it({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return it(r);if(i.numberOfChildren>1||!i.children[$t])return tH(e.redirectTo);i=i.children[$t]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Xh(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Li(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Li(t.children,(h,m)=>{c[m]=this.createSegmentGroup(e,h,r,i)}),new Yt(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new _.vHH(4001,kD&&`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class oH{}class cH{constructor(e,t,r,i,a,c,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=c,this.urlSerializer=h}recognize(){const e=PD(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,$t).pipe((0,vt.U)(t=>{if(null===t)return null;const r=new AD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ld(r,t),a=new L1(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=O1(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Ht.D)(Object.keys(r.children)).pipe(Ag(i=>{const a=r.children[i],c=H1(t,i);return this.processSegmentGroup(e,c,a,i)}),T((i,a)=>i&&a?(i.push(...a),i):null),function Aj(n,e=!1){return(0,Tn.e)((t,r)=>{let i=0;t.subscribe((0,kn.x)(r,a=>{const c=n(a,i++);(c||e)&&r.next(a),!c&&r.complete()}))})}(i=>null!==i),Ep(null),d1(),(0,vt.U)(i=>{if(null===i)return null;const a=X1(i);return function lH(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Ht.D)(t).pipe(Ag(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,a)),ga(c=>!!c),Yh(c=>{if(Qx(c))return K1(r,i,a)?it([]):it(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!q1(t,r,i,a))return it(null);let c;if("**"===t.path){const h=i.length>0?p1(i).parameters:{},m=eL(r)+i.length;c=it({snapshot:new AD(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tL(t),wa(t),t.component??t._loadedComponent??null,t,J1(r),m,nL(t)),consumedSegments:[],remainingSegments:[]})}else c=W1(r,t,i,e).pipe((0,vt.U)(({matched:h,consumedSegments:m,remainingSegments:w,parameters:C})=>{if(!h)return null;const S=eL(r)+m.length;return{snapshot:new AD(m,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tL(t),wa(t),t.component??t._loadedComponent??null,t,J1(r),S,nL(t)),consumedSegments:m,remainingSegments:w}}));return c.pipe(vn(h=>{if(null===h)return it(null);const{snapshot:m,consumedSegments:w,remainingSegments:C}=h;e=t._injector??e;const S=t._loadedInjector??e,N=function dH(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:Z}=PD(r,w,C,N.filter(Ie=>void 0===Ie.redirectTo));if(0===Z.length&&V.hasChildren())return this.processChildren(S,N,V).pipe((0,vt.U)(Ie=>null===Ie?null:[new ld(m,Ie)]));if(0===N.length&&0===Z.length)return it([new ld(m,[])]);const ge=wa(t)===a;return this.processSegment(S,N,V,Z,ge?$t:a).pipe((0,vt.U)(Ie=>null===Ie?null:[new ld(m,Ie)]))}))}}function hH(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function X1(n){const e=[],t=new Set;for(const r of n){if(!hH(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=X1(r.children);e.push(new ld(r.value,i))}return e.filter(r=>!t.has(r))}function J1(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function eL(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function tL(n){return n.data||{}}function nL(n){return n.resolve||{}}function rL(n){return"string"==typeof n.title||null===n.title}function eM(n){return vn(e=>{const t=n(e);return t?(0,Ht.D)(t).pipe((0,vt.U)(()=>e)):it(e)})}const Ty=new _.OlP("ROUTES");let tM=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.f3M)(_.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return it(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Qh(t.loadComponent()).pipe((0,vt.U)(sL),(0,Zi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Px(()=>{this.componentLoaders.delete(t)})),i=new l1(r,()=>new ac.x).pipe(xx());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return it({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,vt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,w,C=!1;Array.isArray(h)?w=h:(m=h.create(t).injector,w=f1(m.get(Ty,[],_.XFs.Self|_.XFs.Optional)));return{routes:w.map(Yx),injector:m}}),Px(()=>{this.childrenLoaders.delete(r)})),c=new l1(a,()=>new ac.x).pipe(xx());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Qh(t()).pipe((0,vt.U)(sL),(0,Cs.z)(r=>r instanceof _.YKP||Array.isArray(r)?it(r):(0,Ht.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sL(n){return function wH(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let FD=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ac.x,this.configLoader=(0,_.f3M)(tM),this.environmentInjector=(0,_.f3M)(_.lqb),this.urlSerializer=(0,_.f3M)(W0),this.rootContexts=(0,_.f3M)(X0),this.navigationId=0,this.afterPreactivation=()=>it(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new a$(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new o$(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new cu({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Y0,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Do(r=>0!==r.id),(0,vt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),vn(r=>{let i=!1,a=!1;return it(r).pipe((0,Zi.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),vn(c=>{const h=t.browserUrlTree.toString(),m=!t.navigated||c.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!m&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const C="";return this.events.next(new SD(c.id,t.serializeUrl(r.rawUrl),C,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),eu.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return oL(c.source)&&(t.browserUrlTree=c.extractedUrl),it(c).pipe(vn(C=>{const S=this.transitions?.getValue();return this.events.next(new Vx(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),S!==this.transitions?.getValue()?eu.E:Promise.resolve(C)}),function sH(n,e,t,r){return vn(i=>function rH(n,e,t,r,i){return new iH(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,vt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Zi.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},r.urlAfterRedirects=C.urlAfterRedirects}),function pH(n,e,t,r,i){return(0,Cs.z)(a=>function uH(n,e,t,r,i,a,c="emptyOnly"){return new cH(n,e,t,r,i,c,a).recognize().pipe(vn(h=>null===h?function aH(n){return new bi.y(e=>e.error(n))}(new oH):it(h)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,vt.U)(c=>({...a,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Zi.b)(C=>{if(r.targetSnapshot=C.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!C.extras.skipLocationChange){const N=t.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);t.setBrowserUrl(N,C)}t.browserUrlTree=C.urlAfterRedirects}const S=new t$(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(S)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:C,extractedUrl:S,source:N,restoredState:V,extras:Z}=c,ge=new Vx(C,this.urlSerializer.serialize(S),N,V);this.events.next(ge);const Ie=k1(S,this.rootComponentType).snapshot;return it(r={...c,targetSnapshot:Ie,urlAfterRedirects:S,extras:{...Z,skipLocationChange:!1,replaceUrl:!1}})}{const C="";return this.events.next(new SD(c.id,t.serializeUrl(r.extractedUrl),C,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),eu.E}}),(0,Zi.b)(c=>{const h=new n$(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),(0,vt.U)(c=>r={...c,guards:x$(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function j$(n,e){return(0,Cs.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?it({...t,guardsResult:!0}):function $$(n,e,t,r){return(0,Ht.D)(n).pipe((0,Cs.z)(i=>function K$(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?it(a.map(h=>{const m=J0(e)??i,w=Cy(h,m);return Qh(function U$(n){return n&&nE(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):m.runInContext(()=>w(n,e,t,r))).pipe(ga())})).pipe(Dy()):it(!0)}(i.component,i.route,t,e,r)),ga(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Cs.z)(h=>h&&function k$(n){return"boolean"==typeof n}(h)?function H$(n,e,t,r){return(0,Ht.D)(e).pipe(Ag(i=>u_(function z$(n,e){return null!==n&&e&&e(new u$(n)),it(!0)}(i.route.parent,r),function G$(n,e){return null!==n&&e&&e(new l$(n)),it(!0)}(i.route,r),function q$(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function M$(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>u1(()=>it(c.guards.map(m=>{const w=J0(c.node)??t,C=Cy(m,w);return Qh(function F$(n){return n&&nE(n.canActivateChild)}(C)?C.canActivateChild(r,n):w.runInContext(()=>C(r,n))).pipe(ga())})).pipe(Dy())));return it(a).pipe(Dy())}(n,i.path,t),function W$(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const i=r.map(a=>u1(()=>{const c=J0(e)??t,h=Cy(a,c);return Qh(function L$(n){return n&&nE(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(ga())}));return it(i).pipe(Dy())}(n,i.route,t))),ga(i=>!0!==i,!0))}(r,a,n,e):it(h)),(0,vt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,c=>this.events.next(c)),(0,Zi.b)(c=>{if(r.guardsResult=c.guardsResult,xg(c.guardsResult))throw U1(0,c.guardsResult);const h=new r$(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),Do(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),eM(c=>{if(c.guards.canActivateChecks.length)return it(c).pipe((0,Zi.b)(h=>{const m=new i$(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}),vn(h=>{let m=!1;return it(h).pipe(function gH(n,e){return(0,Cs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return it(t);let a=0;return(0,Ht.D)(i).pipe(Ag(c=>function mH(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!rL(i)&&(a[G0]=i.title),function _H(n,e,t,r){const i=function yH(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return it({});const a={};return(0,Ht.D)(i).pipe((0,Cs.z)(c=>function vH(n,e,t,r){const i=J0(e)??r,a=Cy(n,i);return Qh(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(ga(),(0,Zi.b)(h=>{a[c]=h}))),Mx(1),function Rj(n){return(0,vt.U)(()=>n)}(a),Yh(c=>Qx(c)?eu.E:H0(c)))}(a,n,e,r).pipe((0,vt.U)(c=>(n._resolvedData=c,n.data=O1(n,t).resolve,i&&rL(i)&&(n.data[G0]=i.title),null)))}(c.route,r,n,e)),(0,Zi.b)(()=>a++),Mx(1),(0,Cs.z)(c=>a===i.length?it(t):eu.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Zi.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,Zi.b)(h=>{const m=new s$(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}))}),eM(c=>{const h=m=>{const w=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,Zi.b)(C=>{m.component=C}),(0,vt.U)(()=>{})));for(const C of m.children)w.push(...h(C));return w};return o1(h(c.targetSnapshot.root)).pipe(Ep(),Ul(1))}),eM(()=>this.afterPreactivation()),(0,vt.U)(c=>{const h=function v$(n,e,t){const r=Q0(n,e._root,t?t._root:void 0);return new N1(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:h}}),(0,Zi.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new R$(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),Ul(1),(0,Zi.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Mg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),Px(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Yh(c=>{if(a=!0,j1(c)){B1(c)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new TD(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(h),B1(c)){const m=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||oL(r.source)};t.scheduleNavigation(m,Y0,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new Bx(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(c))}catch(m){r.reject(m)}}return eu.E}))}))}cancelNavigationTransition(t,r,i){const a=new TD(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oL(n){return n!==Y0}let aL=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===$t);return r}getResolvedTitleForRoute(t){return t.data[G0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(EH)},providedIn:"root"}),n})(),EH=(()=>{class n extends aL{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(gf))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(CH)},providedIn:"root"}),n})();class bH{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let CH=(()=>{class n extends bH{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=_.n5z(n)))(r||n)}}(),n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UD=new _.OlP("",{providedIn:"root",factory:()=>({})});let TH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return(0,_.f3M)(SH)},providedIn:"root"}),n})(),SH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AH(n){throw n}function RH(n,e,t){return e.parse("/")}const xH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,_.f3M)(_.c2e),this.isNgZoneEnabled=!1,this.options=(0,_.f3M)(UD,{optional:!0})||{},this.errorHandler=this.options.errorHandler||AH,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||RH,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,_.f3M)(TH),this.routeReuseStrategy=(0,_.f3M)(IH),this.urlCreationStrategy=(0,_.f3M)(m$),this.titleStrategy=(0,_.f3M)(aL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=f1((0,_.f3M)(Ty,{optional:!0})??[]),this.navigationTransitions=(0,_.f3M)(FD),this.urlSerializer=(0,_.f3M)(W0),this.location=(0,_.f3M)(Be),this.isNgZoneEnabled=(0,_.f3M)(_.R0b)instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Xh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=k1(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Y0,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Yx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:h,preserveFragment:m}=r,w=m?this.currentUrlTree.fragment:c;let C=null;switch(h){case"merge":C={...this.currentUrlTree.queryParams,...a};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=a||null}return null!==C&&(C=this.removeEmptyProps(C)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,C,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=xg(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Y0,null,r)}navigate(t,r={skipLocationChange:!1}){return function PH(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new _.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...xH}:!1===r?{...MH}:r,xg(t))return m1(this.currentUrlTree,t,i);const a=this.parseUrl(t);return m1(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let h,m,w,C;return c?(h=c.resolve,m=c.reject,w=c.promise):w=new Promise((S,N)=>{h=S,m=N}),C="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:h,reject:m,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iE=(()=>{class n{constructor(t,r,i,a,c,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ac.x;const m=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof Mg&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,_.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,_.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,_.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,_.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(xo),_.Y36(by),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(rt))},n.\u0275dir=_.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&_.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&_.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[_.TTD]}),n})(),uL=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,a,c){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=c,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new _.vpe,this.routerEventsSubscription=t.events.subscribe(h=>{h instanceof Mg&&this.update()})}ngAfterContentInit(){it(this.links.changes,it(null)).pipe((0,Ih.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Ht.D)(t).pipe((0,Ih.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function NH(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(xo),_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(_.sBO),_.Y36(iE,8))},n.\u0275dir=_.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&_.Suo(i,iE,5),2&t){let a;_.iGM(a=_.CRH())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[_.TTD]}),n})();class cL{}let kH=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Do(t=>t instanceof Mg),Ag(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,_.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,h=a._loadedInjector??c;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(c,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,Ht.D)(i).pipe((0,Ih.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):it(null);const a=i.pipe((0,Cs.z)(c=>null===c?it(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Ht.D)([a,c]).pipe((0,Ih.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(xo),_.LFG(_.Sil),_.LFG(_.lqb),_.LFG(cL),_.LFG(tM))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rM=new _.OlP("");let lL=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Vx?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof M1&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new M1(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();var Mo=(()=>((Mo=Mo||{})[Mo.COMPLETE=0]="COMPLETE",Mo[Mo.FAILED=1]="FAILED",Mo[Mo.REDIRECTING=2]="REDIRECTING",Mo))();const Sy=!1;function Jh(n,e){return{\u0275kind:n,\u0275providers:e}}const iM=new _.OlP("",{providedIn:"root",factory:()=>!1});function hL(){const n=(0,_.f3M)(_.zs3);return e=>{const t=n.get(_.z2F);if(e!==t.components[0])return;const r=n.get(xo),i=n.get(fL);1===n.get(sM)&&r.initialNavigation(),n.get(pL,null,_.XFs.Optional)?.setUpPreloading(),n.get(rM,null,_.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const fL=new _.OlP(Sy?"bootstrap done indicator":"",{factory:()=>new ac.x}),sM=new _.OlP(Sy?"initial navigation":"",{providedIn:"root",factory:()=>1});function VH(){let n=[];return n=Sy?[{provide:_.Xts,multi:!0,useFactory:()=>{const e=(0,_.f3M)(xo);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function h$(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Jh(1,n)}const pL=new _.OlP(Sy?"router preloader":"");function BH(n){return Jh(0,[{provide:pL,useExisting:kH},{provide:cL,useExisting:n}])}const sE=!1,gL=new _.OlP(sE?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),jH=[Be,{provide:W0,useClass:Nx},xo,X0,{provide:by,useFactory:function dL(n){return n.routerState.root},deps:[xo]},tM,sE?{provide:iM,useValue:!0}:[]];function $H(){return new _.PXZ("Router",xo)}let mL=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[jH,sE&&r?.enableTracing?VH().\u0275providers:[],{provide:Ty,multi:!0,useValue:t},{provide:gL,useFactory:WH,deps:[[xo,new _.FiY,new _.tp0]]},{provide:UD,useValue:r||{}},r?.useHash?{provide:rt,useClass:Ae}:{provide:rt,useClass:Me},{provide:rM,useFactory:()=>{const n=(0,_.f3M)(Ho),e=(0,_.f3M)(_.R0b),t=(0,_.f3M)(UD),r=(0,_.f3M)(FD),i=(0,_.f3M)(W0);return t.scrollOffset&&n.setOffset(t.scrollOffset),new lL(i,r,n,e,t)}},r?.preloadingStrategy?BH(r.preloadingStrategy).\u0275providers:[],{provide:_.PXZ,multi:!0,useFactory:$H},r?.initialNavigation?qH(r):[],[{provide:_L,useFactory:hL},{provide:_.tb,multi:!0,useExisting:_L}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ty,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(gL,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[Kx]}),n})();function WH(n){if(sE&&n)throw new _.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function qH(n){return["disabled"===n.initialNavigation?Jh(3,[{provide:_.ip1,multi:!0,useFactory:()=>{const e=(0,_.f3M)(xo);return()=>{e.setUpLocationChangeListener()}}},{provide:sM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Jh(2,[{provide:sM,useValue:0},{provide:_.ip1,multi:!0,deps:[_.zs3],useFactory:e=>{const t=e.get(fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(xo),a=e.get(fL);(function OH(n,e){n.events.pipe(Do(t=>t instanceof Mg||t instanceof TD||t instanceof Bx||t instanceof SD),(0,vt.U)(t=>t instanceof Mg||t instanceof SD?Mo.COMPLETE:t instanceof TD&&(0===t.code||1===t.code)?Mo.REDIRECTING:Mo.FAILED),Do(t=>t!==Mo.REDIRECTING),Ul(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(FD).afterPreactivation=()=>(r(!0),a.closed?it(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const _L=new _.OlP(sE?"Router Initializer":"");let ZH=(()=>{class n{constructor(){this.title="chads-website"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:14,vars:0,consts:[[1,"header"],[1,"navbar","navbar-expand-md","navbar-dark","bg-dark"],[1,"container"],["routerLink","/",1,"navbar-brand"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/about",1,"nav-link"],["routerLink","/contact",1,"nav-link"]],template:function(t,r){1&t&&(_.TgZ(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),_._uU(4,"Games"),_.qZA(),_.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),_._uU(9,"About"),_.qZA()(),_.TgZ(10,"li",6)(11,"a",8),_._uU(12,"Contact"),_.qZA()()()()()()(),_._UZ(13,"router-outlet"))},dependencies:[qx,iE]}),n})(),YH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-about"]],decls:6,vars:0,consts:[[1,"about"],[1,"container"]],template:function(t,r){1&t&&(_.TgZ(0,"section",0)(1,"div",1)(2,"h2"),_._uU(3,"About Me"),_.qZA(),_.TgZ(4,"p"),_._uU(5," I am a passionate software developer from Las Vegas, Nevada. I am studying Computer science & Engineering at the University of Nevada, Reno. I took some fantastic classes where I got to learn Machine Learning and AI, Software Development, and Algorithms. The classes were very project-driven, and I got to create some really cool things. Outside of school, I had the fortunate opportunity to Intern at Tesla and IGT. During my internships, I got some real industry experience and got to work on complex problems and systems. I am excited to start my career and keep learning. "),_.qZA()()())},styles:[".about[_ngcontent-%COMP%]{padding:40px 0}"]}),n})(),QH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-contact"]],decls:10,vars:0,consts:[[1,"contact"],[1,"container"]],template:function(t,r){1&t&&(_.TgZ(0,"section",0)(1,"div",1)(2,"h2"),_._uU(3,"Contact Me"),_.qZA(),_.TgZ(4,"p"),_._uU(5," You can contact me at: "),_._UZ(6,"br"),_._uU(7," Email: your@email.com "),_._UZ(8,"br"),_._uU(9," Phone: +1 (123) 456-7890 "),_.qZA()()())},styles:[".contact[_ngcontent-%COMP%]{padding:40px 0}"]}),n})();function XH(n,e){if(1&n&&(_.TgZ(0,"div")(1,"button",1),_._uU(2),_.qZA()()),2&n){const t=e.$implicit;_.xp6(1),_.MGl("routerLink","/games/",t,""),_.xp6(1),_.hij(" ",t," ")}}let JH=(()=>{class n{constructor(){this.games=["Moon-Rakers"]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],["type","button","routerLinkActive","active",1,"black",3,"routerLink"]],template:function(t,r){1&t&&(_.TgZ(0,"h1"),_._uU(1,"Play games"),_.qZA(),_.YNc(2,XH,3,2,"div",0)),2&t&&(_.xp6(2),_.Q6J("ngForOf",r.games))},dependencies:[_i,iE,uL]}),n})();const eG=["reactor","reactor","reactor","thruster","thruster","shield","shield","damage","damage","miss"];class tG{constructor(e,t=eG,r=[],i=[],a=[],c=2,h=[]){this.id=e,this.deck=t,this.hand=r,this.discard=i,this.shipParts=a,this.gold=c,this.objectives=h,this.id=e,this.deck=t,this.hand=r,this.discard=i,this.shipParts=a,this.gold=c,this.objectives=h}getDeck(){return this.deck}}let nG=(()=>{class n{constructor(){this.players=[],this.db=(0,_.f3M)(tw)}createPlayer(){let t=new tG("me");console.log(t),this.db.object("me").set(t)}getPlayerInfo(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class yL{constructor(e,t,r){this.id=e,this.name=t,this.players=[r]}addPlayers(e){this.players[this.players.indexOf("")]=e}removePlayer(e){this.players=this.players.filter(t=>t!==e)}}let rG=(()=>{class n{constructor(){this.db=(0,_.f3M)(tw),this.player_info=[],this.game=new yL("","","me")}createGame(t,r,i){this.game=new yL(t,r,i)}addPlayer(t){this.game.addPlayers(t)}pushGame(){this.db.object(this.game.id.toString()).set({name:this.game.name,players:this.game.players})}getPlayerInfo(t){return this.db.object(t).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-ship-parts"]],decls:13,vars:0,consts:[[1,"ship-parts"],[1,"ship-part"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"div",1),_._uU(2,"part 1"),_.qZA(),_.TgZ(3,"div",1),_._uU(4,"part 2"),_.qZA(),_.TgZ(5,"div",1),_._uU(6,"part 3"),_.qZA(),_.TgZ(7,"div",1),_._uU(8,"part 4"),_.qZA(),_.TgZ(9,"div",1),_._uU(10,"part 5"),_.qZA(),_.TgZ(11,"div",1),_._uU(12,"part 6"),_.qZA()())},styles:[".ship-parts[_ngcontent-%COMP%]{display:flex;width:200px;height:200px;justify-content:space-between;flex-wrap:wrap}.ship-part[_ngcontent-%COMP%]{border:1px solid #000;width:60px;flex-grow:1;margin:4px}"]}),n})(),sG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-crewmates"]],decls:7,vars:0,consts:[[1,"crewmates"],[1,"crew"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"div",1),_._uU(2,"crew 1"),_.qZA(),_.TgZ(3,"div",1),_._uU(4,"crew 2"),_.qZA(),_.TgZ(5,"div",1),_._uU(6,"crew 3"),_.qZA()())},styles:[".crewmates[_ngcontent-%COMP%]{display:flex;width:200px;height:150px;justify-content:space-between}.crew[_ngcontent-%COMP%]{border:1px solid #000;flex-grow:1;margin:4px}"]}),n})(),oG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-coins"]],decls:5,vars:0,consts:[["coins",""]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"div"),_._uU(2,"Add subtract 3 coins"),_.qZA(),_.TgZ(3,"div"),_._uU(4,"Add subtract 1 coins"),_.qZA()())}}),n})(),aG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-shop"]],decls:6,vars:0,consts:[[1,"shop"]],template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"shop"),_.qZA(),_.TgZ(2,"div",0),_._UZ(3,"app-crewmates")(4,"app-ship-parts")(5,"app-coins"),_.qZA())},dependencies:[iG,sG,oG],styles:[".shop[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}"]}),n})(),uG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-leader-board"]],decls:23,vars:0,consts:[[1,"leader"],[1,"prestiege"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"h5",1),_._uU(2,"Prestige"),_.qZA(),_.TgZ(3,"div",1),_._uU(4,"10"),_.qZA(),_.TgZ(5,"div",1),_._uU(6,"9"),_.qZA(),_.TgZ(7,"div",1),_._uU(8,"8"),_.qZA(),_.TgZ(9,"div",1),_._uU(10,"7"),_.qZA(),_.TgZ(11,"div",1),_._uU(12,"6"),_.qZA(),_.TgZ(13,"div",1),_._uU(14,"5"),_.qZA(),_.TgZ(15,"div",1),_._uU(16,"4"),_.qZA(),_.TgZ(17,"div",1),_._uU(18,"3"),_.qZA(),_.TgZ(19,"div",1),_._uU(20,"2"),_.qZA(),_.TgZ(21,"div",1),_._uU(22,"1"),_.qZA()())},styles:[".leader[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:100%}.prestiege[_ngcontent-%COMP%]{flex-grow:1;border:1px solid #000;text-align:center}"]}),n})(),cG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-objectives"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"div"),_._uU(1,"Draw objective "),_.qZA())}}),n})(),lG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-missions"]],decls:18,vars:0,consts:[[1,"missions"],[1,"mission"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"div",1),_._uU(2,"mission"),_.qZA(),_.TgZ(3,"div",1),_._uU(4,"mission"),_.qZA(),_.TgZ(5,"div",1),_._uU(6,"mission"),_.qZA(),_.TgZ(7,"div",1),_._uU(8,"mission"),_.qZA(),_.TgZ(9,"div",1),_._uU(10,"mission"),_.qZA(),_.TgZ(11,"div",1),_._uU(12,"mission"),_.qZA(),_.TgZ(13,"div",1),_._uU(14,"mission"),_.qZA(),_.TgZ(15,"div",1),_._uU(16,"mission"),_.qZA(),_._UZ(17,"app-objectives"),_.qZA())},dependencies:[cG],styles:[".missions[_ngcontent-%COMP%]{width:200px;display:flex;flex-wrap:wrap;justify-content:space-between}.mission[_ngcontent-%COMP%]{width:80px;height:100px;border:1px solid #000;padding:1px;margin:1px;flex-grow:1}"]}),n})(),dG=(()=>{class n{constructor(){this.service=(0,_.f3M)(rG),this.pserv=(0,_.f3M)(nG)}clicked(){this.service.createGame("gID1","test1","me"),this.service.pushGame(),this.service.getPlayerInfo("me").subscribe(t=>console.log(t)),this.pserv.createPlayer()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-board"]],decls:23,vars:0,consts:[[1,"board"],[1,"p1"],[1,"b1",3,"click"],[1,"p2"],[1,"b2"],[1,"p3"],[1,"b3"],[1,"p4"],[1,"b4"],[1,"p5"],[1,"b5"],[1,"center-board"],[1,"shop"],[1,"prestige"],[1,"missions"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"div",1)(2,"button",2),_.NdJ("click",function(){return r.clicked()}),_._uU(3,"P1"),_.qZA()(),_.TgZ(4,"div",3)(5,"button",4),_._uU(6,"P2"),_.qZA()(),_.TgZ(7,"div",5)(8,"button",6),_._uU(9,"P3"),_.qZA()(),_.TgZ(10,"div",7)(11,"button",8),_._uU(12,"P4"),_.qZA()(),_.TgZ(13,"div",9)(14,"button",10),_._uU(15,"P5"),_.qZA()(),_.TgZ(16,"div",11)(17,"div",12),_._UZ(18,"app-shop"),_.qZA(),_.TgZ(19,"div",13),_._UZ(20,"app-leader-board"),_.qZA(),_.TgZ(21,"div",14),_._UZ(22,"app-missions"),_.qZA()()())},dependencies:[aG,uG,lG],styles:[".board[_ngcontent-%COMP%]{position:absolute;top:50px;bottom:0;width:100%;flex-shrink:0;background-color:#333}.p1[_ngcontent-%COMP%]{width:128px;height:49px;position:fixed;top:10%;left:10%}.p1[_ngcontent-%COMP%]   .b1[_ngcontent-%COMP%]{width:100%;height:100%}.p2[_ngcontent-%COMP%]{width:128px;height:49px;position:fixed;top:10%;right:15%}.p2[_ngcontent-%COMP%]   .b2[_ngcontent-%COMP%]{width:100%;height:100%}.p3[_ngcontent-%COMP%]{width:128px;height:49px;transform:rotate(90deg);position:fixed;top:50%;right:0%}.p3[_ngcontent-%COMP%]   .b3[_ngcontent-%COMP%]{width:100%;height:100%}.p4[_ngcontent-%COMP%]{width:128px;height:49px;position:fixed;top:90%;left:10%}.p4[_ngcontent-%COMP%]   .b4[_ngcontent-%COMP%]{width:100%;height:100%}.p5[_ngcontent-%COMP%]{width:128px;height:49px;position:fixed;top:90%;right:15%}.p5[_ngcontent-%COMP%]   .b5[_ngcontent-%COMP%]{width:100%;height:100%}.center-board[_ngcontent-%COMP%]{background-color:#999;position:fixed;display:flex;justify-content:space-between;top:20%;left:10%;width:75%;height:65%}.shop[_ngcontent-%COMP%], .prestige[_ngcontent-%COMP%], .missions[_ngcontent-%COMP%]{position:relative;background-color:#ddd}"]}),n})();const hG=[{path:"",component:JH},{path:"about",component:YH},{path:"contact",component:QH},{path:"games/Moon-Rakers",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-moon-rakers"]],decls:4,vars:0,consts:[[1,"mr"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"p"),_._uU(2,"moon-rakers"),_.qZA(),_._UZ(3,"app-board"),_.qZA())},dependencies:[dG],styles:[".mr[_ngcontent-%COMP%]{height:100%;width:100%}"]}),n})()},{path:"**",redirectTo:"",pathMatch:"full"}];let fG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[mL.forRoot(hG),mL]}),n})(),pG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n,bootstrap:[ZH]}),n.\u0275inj=_.cJS({imports:[$a,fG,rn.hO.initializeApp(za_firebase),OS,C2,pj]}),n})();Md().bootstrapModule(pG).catch(n=>console.error(n))},5867:(ft,Te,L)=>{L.d(Te,{C6:()=>_.getApps,Mq:()=>_.getApp});var _=L(9681);(0,_.registerVersion)("firebase","9.9.1","app")},127:(ft,Te,L)=>{L.d(Te,{Z:()=>_.Z});var _=L(3942);_.Z.registerVersion("firebase","9.9.1","app-compat")},1451:(ft,Te,L)=>{L.r(Te);var _=L(5861),ee=L(3942),O=L(2090),ae=L(9681),ne=L(7582),ie=L(1877),me=L(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Q_EMAIL_SIGNIN="EMAIL_SIGNIN",Q_PASSWORD_RESET="PASSWORD_RESET",Q_RECOVER_EMAIL="RECOVER_EMAIL",Q_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Q_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Q_VERIFY_EMAIL="VERIFY_EMAIL";const We=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},rt=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new ie.Yd("@firebase/auth");function Be(y,...f){Ae.logLevel<=ie.in.ERROR&&Ae.error(`Auth (${ae.SDK_VERSION}): ${y}`,...f)}function De(y,...f){throw Fe(y,...f)}function be(y,...f){return Fe(y,...f)}function Pe(y,f,g){const E=Object.assign(Object.assign({},rt()),{[f]:g});return new O.LL("auth","Firebase",E).create(f,{appName:y.name})}function $e(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&De(y,"argument-error"),Pe(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fe(y,...f){if("string"!=typeof y){const g=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(g,...E)}return _e.create(y,...f)}function H(y,f,...g){if(!y)throw Fe(f,...g)}function we(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Be(f),new Error(f)}function He(y,f){y||we(f)}const Qe=new Map;function ht(y){He(y instanceof Function,"Expected a class definition");let f=Qe.get(y);return f?(He(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Qe.set(y,f),f)}function Xn(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function jn(){return"http:"===pi()||"https:"===pi()}function pi(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class le{constructor(f,g){this.shortDelay=f,this.longDelay=g,He(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function re(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(jn()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function te(y,f){He(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class je{static initialize(f,g,E){this.fetchImpl=f,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ue={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},_t=new le(3e4,6e4);function Ze(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Ut(y,f,g,E){return wt.apply(this,arguments)}function wt(){return(wt=(0,_.Z)(function*(y,f,g,E,R={}){return Vt(y,R,(0,_.Z)(function*(){let P={},K={};E&&("GET"===f?K=E:P={body:JSON.stringify(E)});const oe=(0,O.xO)(Object.assign({key:y.config.apiKey},K)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),je.fetch()(Jn(y,y.config.apiHost,g,oe),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Vt(y,f,g){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,_.Z)(function*(y,f,g){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ue),f);try{const R=new wn(y),P=yield Promise.race([g(),R.promise]);R.clearNetworkTimeout();const K=yield P.json();if("needConfirmation"in K)throw xn(y,"account-exists-with-different-credential",K);if(P.ok&&!("errorMessage"in K))return K;{const oe=P.ok?K.errorMessage:K.error.message,[Le,tt]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw xn(y,"credential-already-in-use",K);if("EMAIL_EXISTS"===Le)throw xn(y,"email-already-in-use",K);if("USER_DISABLED"===Le)throw xn(y,"user-disabled",K);const Ct=E[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw Pe(y,Ct,tt);De(y,Ct)}}catch(R){if(R instanceof O.ZR)throw R;De(y,"network-request-failed")}})).apply(this,arguments)}function qt(y,f,g,E){return qn.apply(this,arguments)}function qn(){return(qn=(0,_.Z)(function*(y,f,g,E,R={}){const P=yield Ut(y,f,g,E,R);return"mfaPendingCredential"in P&&De(y,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Jn(y,f,g,E){const R=`${f}${g}?${E}`;return y.config.emulator?te(y.config,R):`${y.config.apiScheme}://${R}`}class wn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(be(this.auth,"network-request-failed")),_t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xn(y,f,g){const E={appName:y.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const R=be(y,f,E);return R.customData._tokenResponse=g,R}function En(){return(En=(0,_.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function gi(){return(gi=(0,_.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function bn(){return(bn=(0,_.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function gr(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function dn(){return(dn=(0,_.Z)(function*(y,f=!1){const g=(0,O.m9)(y),E=yield g.getIdToken(f),R=It(E);H(R&&R.exp&&R.auth_time&&R.iat,g.auth,"internal-error");const P="object"==typeof R.firebase?R.firebase:void 0,K=P?.sign_in_provider;return{claims:R,token:E,authTime:gr(yt(R.auth_time)),issuedAtTime:gr(yt(R.iat)),expirationTime:gr(yt(R.exp)),signInProvider:K||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function yt(y){return 1e3*Number(y)}function It(y){var f;const[g,E,R]=y.split(".");if(void 0===g||void 0===E||void 0===R)return Be("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,O.tV)(E);return P?JSON.parse(P):(Be("Failed to decode base64 JWT payload"),null)}catch(P){return Be("Caught error parsing JWT payload as JSON",null===(f=P)||void 0===f?void 0:f.toString()),null}}function Ln(y,f){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,_.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(E){throw E instanceof O.ZR&&function Qi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}class or{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const R=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,_.Z)(function*(){yield g.iteration()}),E)}iteration(){var f=this;return(0,_.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(g=E)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class Po{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=gr(this.lastLoginAt),this.creationTime=gr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tn(y){return zr.apply(this,arguments)}function zr(){return zr=(0,_.Z)(function*(y){var f;const g=y.auth,E=yield y.getIdToken(),R=yield Ln(y,function Yi(y,f){return bn.apply(this,arguments)}(g,{idToken:E}));H(R?.users.length,g,"internal-error");const P=R.users[0];y._notifyReloadListener(P);const K=null!==(f=P.providerUserInfo)&&void 0!==f&&f.length?function j(y){return y.map(f=>{var{providerId:g}=f,E=(0,ne._T)(f,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(P.providerUserInfo):[],oe=function $(y,f){return[...y.filter(E=>!f.some(R=>R.providerId===E.providerId)),...f]}(y.providerData,K),Ct=!!y.isAnonymous&&!(y.email&&P.passwordHash||oe?.length),Et={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:oe,metadata:new Po(P.createdAt,P.lastLoginAt),isAnonymous:Ct};Object.assign(y,Et)}),zr.apply(this,arguments)}function Y(){return(Y=(0,_.Z)(function*(y){const f=(0,O.m9)(y);yield tn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function q(){return(q=(0,_.Z)(function*(y,f){const g=yield Vt(y,{},(0,_.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:R,apiKey:P}=y.config,K=Jn(y,R,"/v1/token",`key=${P}`),oe=yield y._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",je.fetch()(K,{method:"POST",headers:oe,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){H(f.idToken,"internal-error"),H(typeof f.idToken<"u","internal-error"),H(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function mi(y){const f=It(y);return H(f,"internal-error"),H(typeof f.exp<"u","internal-error"),H(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var E=this;return(0,_.Z)(function*(){return H(!E.accessToken||E.refreshToken,f,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var E=this;return(0,_.Z)(function*(){const{accessToken:R,refreshToken:P,expiresIn:K}=yield function W(y,f){return q.apply(this,arguments)}(f,g);E.updateTokensAndExpiration(R,P,Number(K))})()}updateTokensAndExpiration(f,g,E){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,g){const{refreshToken:E,accessToken:R,expirationTime:P}=g,K=new xe;return E&&(H("string"==typeof E,"internal-error",{appName:f}),K.refreshToken=E),R&&(H("string"==typeof R,"internal-error",{appName:f}),K.accessToken=R),P&&(H("number"==typeof P,"internal-error",{appName:f}),K.expirationTime=P),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new xe,this.toJSON())}_performRefresh(){return we("not implemented")}}function ze(y,f){H("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class gt{constructor(f){var{uid:g,auth:E,stsTokenManager:R}=f,P=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new or(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Po(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,_.Z)(function*(){const E=yield Ln(g,g.stsTokenManager.getToken(g.auth,f));return H(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(f){return function cn(y){return dn.apply(this,arguments)}(this,f)}reload(){return function Gt(y){return Y.apply(this,arguments)}(this)}_assign(f){this!==f&&(H(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new gt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var E=this;return(0,_.Z)(function*(){let R=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),R=!0),g&&(yield tn(E)),yield E.auth._persistUserIfCurrent(E),R&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,_.Z)(function*(){const g=yield f.getIdToken();return yield Ln(f,function Gr(y,f){return En.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var E,R,P,K,oe,Le,tt,Ct;const Et=null!==(E=g.displayName)&&void 0!==E?E:void 0,dr=null!==(R=g.email)&&void 0!==R?R:void 0,Us=null!==(P=g.phoneNumber)&&void 0!==P?P:void 0,Qd=null!==(K=g.photoURL)&&void 0!==K?K:void 0,yo=null!==(oe=g.tenantId)&&void 0!==oe?oe:void 0,Ft=null!==(Le=g._redirectEventId)&&void 0!==Le?Le:void 0,yl=null!==(tt=g.createdAt)&&void 0!==tt?tt:void 0,vl=null!==(Ct=g.lastLoginAt)&&void 0!==Ct?Ct:void 0,{uid:Xd,emailVerified:Ti,isAnonymous:Si,providerData:Cr,stsTokenManager:jf}=g;H(Xd&&jf,f,"internal-error");const Jr=xe.fromJSON(this.name,jf);H("string"==typeof Xd,f,"internal-error"),ze(Et,f.name),ze(dr,f.name),H("boolean"==typeof Ti,f,"internal-error"),H("boolean"==typeof Si,f,"internal-error"),ze(Us,f.name),ze(Qd,f.name),ze(yo,f.name),ze(Ft,f.name),ze(yl,f.name),ze(vl,f.name);const Jd=new gt({uid:Xd,auth:f,email:dr,emailVerified:Ti,displayName:Et,isAnonymous:Si,photoURL:Qd,phoneNumber:Us,tenantId:yo,stsTokenManager:Jr,createdAt:yl,lastLoginAt:vl});return Cr&&Array.isArray(Cr)&&(Jd.providerData=Cr.map(im=>Object.assign({},im))),Ft&&(Jd._redirectEventId=Ft),Jd}static _fromIdTokenResponse(f,g,E=!1){return(0,_.Z)(function*(){const R=new xe;R.updateFromServerResponse(g);const P=new gt({uid:g.localId,auth:f,stsTokenManager:R,isAnonymous:E});return yield tn(P),P})()}}const nn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(g,E){var R=this;return(0,_.Z)(function*(){R.storage[g]=E})()}_get(g){var E=this;return(0,_.Z)(function*(){const R=E.storage[g];return void 0===R?null:R})()}_remove(g){var E=this;return(0,_.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return y.type="NONE",y})();function fn(y,f,g){return`firebase:${y}:${f}:${g}`}class At{constructor(f,g,E){this.persistence=f,this.auth=g,this.userKey=E;const{config:R,name:P}=this.auth;this.fullUserKey=fn(this.userKey,R.apiKey,P),this.fullPersistenceKey=fn("persistence",R.apiKey,P),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,_.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?gt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,_.Z)(function*(){if(g.persistence===f)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,E="authUser"){return(0,_.Z)(function*(){if(!g.length)return new At(ht(nn),f,E);const R=(yield Promise.all(g.map(function(){var tt=(0,_.Z)(function*(Ct){if(yield Ct._isAvailable())return Ct});return function(Ct){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let P=R[0]||ht(nn);const K=fn(E,f.config.apiKey,f.name);let oe=null;for(const tt of g)try{const Ct=yield tt._get(K);if(Ct){const Et=gt._fromJSON(f,Ct);tt!==P&&(oe=Et),P=tt;break}}catch{}const Le=R.filter(tt=>tt._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],oe&&(yield P._set(K,oe.toJSON())),yield Promise.all(g.map(function(){var tt=(0,_.Z)(function*(Ct){if(Ct!==P)try{yield Ct._remove(K)}catch{}});return function(Ct){return tt.apply(this,arguments)}}())),new At(P,f,E)):new At(P,f,E)})()}}function Fn(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(du(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(er(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(No(f))return"Blackberry";if(ar(f))return"Webos";if(zt(f))return"Safari";if((f.includes("chrome/")||Ds(f))&&!f.includes("edge/"))return"Chrome";if(Fi(f))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function er(y=(0,O.z$)()){return/firefox\//i.test(y)}function zt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ds(y=(0,O.z$)()){return/crios\//i.test(y)}function du(y=(0,O.z$)()){return/iemobile/i.test(y)}function Fi(y=(0,O.z$)()){return/android/i.test(y)}function No(y=(0,O.z$)()){return/blackberry/i.test(y)}function ar(y=(0,O.z$)()){return/webos/i.test(y)}function Ui(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function tf(y=(0,O.z$)()){return Ui(y)||Fi(y)||ar(y)||No(y)||/windows phone/i.test(y)||du(y)}function Oo(y,f=[]){let g;switch(y){case"Browser":g=Fn((0,O.z$)());break;case"Worker":g=`${Fn((0,O.z$)())}-${y}`;break;default:g=y}const E=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${E}`}class dd{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const E=P=>new Promise((K,oe)=>{try{K(f(P))}catch(Le){oe(Le)}});E.onAbort=g,this.queue.push(E);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,_.Z)(function*(){var E;if(g.auth.currentUser===f)return;const R=[];try{for(const P of g.queue)yield P(f),P.onAbort&&R.push(P.onAbort)}catch(P){R.reverse();for(const K of R)try{K()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=P)||void 0===E?void 0:E.message})}})()}}class hd{constructor(f,g,E){this.app=f,this.heartbeatServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dc(this),this.idTokenSubscription=new Dc(this),this.beforeStateQueue=new dd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,g){var E=this;return g&&(this._popupRedirectResolver=ht(g)),this._initializationPromise=this.queue((0,_.Z)(function*(){var R,P;if(!E._deleted&&(E.persistenceManager=yield At.create(E,f),!E._deleted)){if(null!==(R=E._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,_.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,_.Z)(function*(){var E;const R=yield g.assertedPersistence.getCurrentUser();let P=R,K=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const oe=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,Le=P?._redirectEventId,tt=yield g.tryRedirectSignIn(f);(!oe||oe===Le)&&tt?.user&&(P=tt.user,K=!0)}if(!P)return g.directlySetCurrentUser(null);if(!P._redirectEventId){if(K)try{yield g.beforeStateQueue.runMiddleware(P)}catch(oe){P=R,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(oe))}return P?g.reloadAndSetCurrentUserOrClear(P):g.directlySetCurrentUser(null)}return H(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===P._redirectEventId?g.directlySetCurrentUser(P):g.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var g=this;return(0,_.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,_.Z)(function*(){var E;try{yield tn(f)}catch(R){if("auth/network-request-failed"!==(null===(E=R)||void 0===E?void 0:E.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function de(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,_.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,_.Z)(function*(){const E=f?(0,O.m9)(f):null;return E&&H(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(f,g=!1){var E=this;return(0,_.Z)(function*(){if(!E._deleted)return f&&H(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,_.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,_.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,_.Z)(function*(){yield g.assertedPersistence.setPersistence(ht(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,E){return this.registerStateListener(this.authStateSubscription,f,g,E)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,E){return this.registerStateListener(this.idTokenSubscription,f,g,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var E=this;return(0,_.Z)(function*(){const R=yield E.getOrInitRedirectPersistenceManager(g);return null===f?R.removeCurrentUser():R.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,_.Z)(function*(){if(!g.redirectPersistenceManager){const E=f&&ht(f)||g._popupRedirectResolver;H(E,g,"argument-error"),g.redirectPersistenceManager=yield At.create(g,[ht(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,_.Z)(function*(){var E,R;return g._isInitialized&&(yield g.queue((0,_.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===f?g._currentUser:(null===(R=g.redirectUser)||void 0===R?void 0:R._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,_.Z)(function*(){if(f===g.currentUser)return g.queue((0,_.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,E,R){if(this._deleted)return()=>{};const P="function"==typeof g?g:g.next.bind(g),K=this._isInitialized?Promise.resolve():this._initializationPromise;return H(K,this,"internal-error"),K.then(()=>P(this.currentUser)),"function"==typeof g?f.addObserver(g,E,R):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,_.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Oo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,_.Z)(function*(){var g;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const R=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return R&&(E["X-Firebase-Client"]=R),E})()}}function Pn(y){return(0,O.m9)(y)}class Dc{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $n(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Xi(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Qs{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return we("not implemented")}_getIdTokenResponse(f){return we("not implemented")}_linkToIdToken(f,g){return we("not implemented")}_getReauthenticationResolver(f){return we("not implemented")}}function _r(y,f){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,_.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:resetPassword",Ze(y,f))})).apply(this,arguments)}function ii(y,f){return Je.apply(this,arguments)}function Je(){return(Je=(0,_.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function _n(){return(_n=(0,_.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",Ze(y,f))})).apply(this,arguments)}function Ji(){return(Ji=(0,_.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:signInWithPassword",Ze(y,f))})).apply(this,arguments)}function Hn(y,f){return _i.apply(this,arguments)}function _i(){return(_i=(0,_.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:sendOobCode",Ze(y,f))})).apply(this,arguments)}function Fo(){return(Fo=(0,_.Z)(function*(y,f){return Hn(y,f)})).apply(this,arguments)}function Pt(){return(Pt=(0,_.Z)(function*(y,f){return Hn(y,f)})).apply(this,arguments)}function Ts(){return(Ts=(0,_.Z)(function*(y,f){return Hn(y,f)})).apply(this,arguments)}function yi(){return(yi=(0,_.Z)(function*(y,f){return Hn(y,f)})).apply(this,arguments)}function Vo(){return(Vo=(0,_.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:signInWithEmailLink",Ze(y,f))})).apply(this,arguments)}function vi(){return(vi=(0,_.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:signInWithEmailLink",Ze(y,f))})).apply(this,arguments)}class Ss extends Qs{constructor(f,g,E,R=null){super("password",E),this._email=f,this._password=g,this._tenantId=R}static _fromEmailAndPassword(f,g){return new Ss(f,g,"password")}static _fromEmailAndCode(f,g,E=null){return new Ss(f,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,_.Z)(function*(){switch(g.signInMethod){case"password":return function Ar(y,f){return Ji.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function yr(y,f){return Vo.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:De(f,"internal-error")}})()}_linkToIdToken(f,g){var E=this;return(0,_.Z)(function*(){switch(E.signInMethod){case"password":return ii(f,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Xs(y,f){return vi.apply(this,arguments)}(f,{idToken:g,email:E._email,oobCode:E._password});default:De(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function es(y,f){return ln.apply(this,arguments)}function ln(){return(ln=(0,_.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:signInWithIdp",Ze(y,f))})).apply(this,arguments)}class si extends Qs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new si(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):De("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:R}=g,P=(0,ne._T)(g,["providerId","signInMethod"]);if(!E||!R)return null;const K=new si(E,R);return K.idToken=P.idToken||void 0,K.accessToken=P.accessToken||void 0,K.secret=P.secret,K.nonce=P.nonce,K.pendingToken=P.pendingToken||null,K}_getIdTokenResponse(f){return es(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,es(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,es(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function Bo(){return(Bo=(0,_.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:sendVerificationCode",Ze(y,f))})).apply(this,arguments)}function Rr(){return(Rr=(0,_.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ze(y,f))})).apply(this,arguments)}function pd(){return(pd=(0,_.Z)(function*(y,f){const g=yield qt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ze(y,f));if(g.temporaryProof)throw xn(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Wr={USER_NOT_FOUND:"user-not-found"};function Ea(){return(Ea=(0,_.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ze(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Wr)})).apply(this,arguments)}class Ei extends Qs{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Ei({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Ei({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Js(y,f){return Rr.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function vr(y,f){return pd.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function wi(y,f){return Ea.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:E,verificationCode:R}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:E,code:R}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:E,phoneNumber:R,temporaryProof:P}=f;return E||g||R||P?new Ei({verificationId:g,verificationCode:E,phoneNumber:R,temporaryProof:P}):null}}class Ia{constructor(f){var g,E,R,P,K,oe;const Le=(0,O.zd)((0,O.pd)(f)),tt=null!==(g=Le.apiKey)&&void 0!==g?g:null,Ct=null!==(E=Le.oobCode)&&void 0!==E?E:null,Et=function Ac(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=Le.mode)&&void 0!==R?R:null);H(tt&&Ct&&Et,"argument-error"),this.apiKey=tt,this.operation=Et,this.code=Ct,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(K=Le.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(f){const g=function qr(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||g||f||y}(f);try{return new Ia(g)}catch{return null}}}let Rc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,E){return Ss._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const R=Ia.parseLink(E);return H(R,"argument-error"),Ss._fromEmailAndCode(g,R.code,R.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ts{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class jo extends ts{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class ba extends jo{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return H("providerId"in g&&"signInMethod"in g,"argument-error"),si._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return H(f.idToken||f.accessToken,"argument-error"),si._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return ba.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return ba.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:R,pendingToken:P,nonce:K,providerId:oe}=f;if(!E&&!R&&!g&&!P||!oe)return null;try{return new ba(oe)._credential({idToken:g,accessToken:E,nonce:K,pendingToken:P})}catch{return null}}}let xc=(()=>{class y extends jo{constructor(){super("facebook.com")}static credential(g){return si._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),rf=(()=>{class y extends jo{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return si._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:R}=g;if(!E&&!R)return null;try{return y.credential(E,R)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),sf=(()=>{class y extends jo{constructor(){super("github.com")}static credential(g){return si._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class $o extends Qs{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return es(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,es(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,es(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:R,pendingToken:P}=g;return E&&R&&P&&E===R?new $o(E,P):null}static _create(f,g){return new $o(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bi extends ts{constructor(f){H(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Bi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Bi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=$o.fromJSON(f);return H(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:E}=f;if(!g||!E)return null;try{return $o._create(E,g)}catch{return null}}}let kg=(()=>{class y extends jo{constructor(){super("twitter.com")}static credential(g,E){return si._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:R}=g;if(!E||!R)return null;try{return y.credential(E,R)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Mc(y,f){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,_.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:signUp",Ze(y,f))})).apply(this,arguments)}class xr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,E,R=!1){return(0,_.Z)(function*(){const P=yield gt._fromIdTokenResponse(f,E,R),K=Nc(E);return new xr({user:P,providerId:K,_tokenResponse:E,operationType:g})})()}static _forOperation(f,g,E){return(0,_.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const R=Nc(E);return new xr({user:f,providerId:R,_tokenResponse:E,operationType:g})})()}}function Nc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function af(){return(af=(0,_.Z)(function*(y){var f;const g=Pn(y);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new xr({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield Mc(g,{returnSecureToken:!0}),R=yield xr._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(R.user),R})).apply(this,arguments)}class hu extends O.ZR{constructor(f,g,E,R){var P;super(g.code,g.message),this.operationType=E,this.user=R,Object.setPrototypeOf(this,hu.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,g,E,R){return new hu(f,g,E,R)}}function to(y,f,g,E){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?hu._fromErrorAndOperation(y,P,f,E):P})}function no(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Ho(){return Ho=(0,_.Z)(function*(y,f){const g=(0,O.m9)(y);yield ro(!0,g,f);const{providerUserInfo:E}=yield function pt(y,f){return gi.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),R=no(E||[]);return g.providerData=g.providerData.filter(P=>R.has(P.providerId)),R.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),Ho.apply(this,arguments)}function pu(y,f){return Go.apply(this,arguments)}function Go(){return(Go=(0,_.Z)(function*(y,f,g=!1){const E=yield Ln(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return xr._forOperation(y,"link",E)})).apply(this,arguments)}function ro(y,f,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,_.Z)(function*(y,f,g){yield tn(f);const R=!1===y?"provider-already-linked":"no-such-provider";H(no(f.providerData).has(g)===y,f.auth,R)})).apply(this,arguments)}function md(y,f){return zo.apply(this,arguments)}function zo(){return(zo=(0,_.Z)(function*(y,f,g=!1){var E;const{auth:R}=y,P="reauthenticate";try{const K=yield Ln(y,to(R,P,f,y),g);H(K.idToken,R,"internal-error");const oe=It(K.idToken);H(oe,R,"internal-error");const{sub:Le}=oe;return H(y.uid===Le,R,"user-mismatch"),xr._forOperation(y,P,K)}catch(K){throw"auth/user-not-found"===(null===(E=K)||void 0===E?void 0:E.code)&&De(R,"user-mismatch"),K}})).apply(this,arguments)}function Wo(y,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,_.Z)(function*(y,f,g=!1){const E="signIn",R=yield to(y,E,f),P=yield xr._fromIdTokenResponse(y,E,R);return g||(yield y._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Nn(y,f){return gu.apply(this,arguments)}function gu(){return(gu=(0,_.Z)(function*(y,f){return Wo(Pn(y),f)})).apply(this,arguments)}function Un(y,f){return qo.apply(this,arguments)}function qo(){return(qo=(0,_.Z)(function*(y,f){const g=(0,O.m9)(y);return yield ro(!1,g,f.providerId),pu(g,f)})).apply(this,arguments)}function io(y,f){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,_.Z)(function*(y,f){return md((0,O.m9)(y),f)})).apply(this,arguments)}function Ko(){return(Ko=(0,_.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:signInWithCustomToken",Ze(y,f))})).apply(this,arguments)}function Kn(){return Kn=(0,_.Z)(function*(y,f){const g=Pn(y),E=yield function kc(y,f){return Ko.apply(this,arguments)}(g,{token:f,returnSecureToken:!0}),R=yield xr._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(R.user),R}),Kn.apply(this,arguments)}class Da{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Zo._fromServerResponse(f,g):De(f,"internal-error")}}class Zo extends Da{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Zo(g)}}function mu(y,f,g){var E;H((null===(E=g.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),H(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(H(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(H(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Ta(){return Ta=(0,_.Z)(function*(y,f,g){const E=(0,O.m9)(y),R={requestType:"PASSWORD_RESET",email:f};g&&mu(E,R,g),yield function Uo(y,f){return Pt.apply(this,arguments)}(E,R)}),Ta.apply(this,arguments)}function St(){return(St=(0,_.Z)(function*(y,f,g){yield _r((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function _d(){return _d=(0,_.Z)(function*(y,f){yield function Mt(y,f){return _n.apply(this,arguments)}((0,O.m9)(y),{oobCode:f})}),_d.apply(this,arguments)}function yu(y,f){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,_.Z)(function*(y,f){const g=(0,O.m9)(y),E=yield _r(g,{oobCode:f}),R=E.requestType;switch(H(R,g,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(E.mfaInfo,g,"internal-error");default:H(E.email,g,"internal-error")}let P=null;return E.mfaInfo&&(P=Da._fromServerResponse(Pn(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:R}})).apply(this,arguments)}function vu(){return(vu=(0,_.Z)(function*(y,f){const{data:g}=yield yu((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function Fc(){return(Fc=(0,_.Z)(function*(y,f,g){const E=Pn(y),R=yield Mc(E,{returnSecureToken:!0,email:f,password:g}),P=yield xr._fromIdTokenResponse(E,"signIn",R);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function yd(){return yd=(0,_.Z)(function*(y,f,g){const E=(0,O.m9)(y),R={requestType:"EMAIL_SIGNIN",email:f};H(g.handleCodeInApp,E,"argument-error"),g&&mu(E,R,g),yield function Tc(y,f){return Ts.apply(this,arguments)}(E,R)}),yd.apply(this,arguments)}function Aa(){return(Aa=(0,_.Z)(function*(y,f,g){const E=(0,O.m9)(y),R=Rc.credentialWithLink(f,g||Xn());return H(R._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Nn(E,R)})).apply(this,arguments)}function Zr(){return(Zr=(0,_.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:createAuthUri",Ze(y,f))})).apply(this,arguments)}function Iu(){return Iu=(0,_.Z)(function*(y,f){const E={identifier:f,continueUri:jn()?Xn():"http://localhost"},{signinMethods:R}=yield function wu(y,f){return Zr.apply(this,arguments)}((0,O.m9)(y),E);return R||[]}),Iu.apply(this,arguments)}function Uc(){return Uc=(0,_.Z)(function*(y,f){const g=(0,O.m9)(y),R={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&mu(g.auth,R,f);const{email:P}=yield function Cn(y,f){return Fo.apply(this,arguments)}(g.auth,R);P!==y.email&&(yield y.reload())}),Uc.apply(this,arguments)}function Zn(){return Zn=(0,_.Z)(function*(y,f,g){const E=(0,O.m9)(y),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&mu(E.auth,P,g);const{email:K}=yield function Sc(y,f){return yi.apply(this,arguments)}(E.auth,P);K!==y.email&&(yield y.reload())}),Zn.apply(this,arguments)}function As(){return(As=(0,_.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ji(){return ji=(0,_.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const E=(0,O.m9)(y),P={idToken:yield E.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},K=yield Ln(E,function Yr(y,f){return As.apply(this,arguments)}(E.auth,P));E.displayName=K.displayName||null,E.photoURL=K.photoUrl||null;const oe=E.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=E.displayName,oe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(K)}),ji.apply(this,arguments)}function Ed(y,f,g){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,_.Z)(function*(y,f,g){const{auth:E}=y,P={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(P.email=f),g&&(P.password=g);const K=yield Ln(y,ii(E,P));yield y._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class rs{constructor(f,g,E={}){this.isNewUser=f,this.providerId=g,this.profile=E}}class Id extends rs{constructor(f,g,E,R){super(f,g,E),this.username=R}}class jc extends rs{constructor(f,g){super(f,"facebook.com",g)}}class bd extends Id{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class lf extends rs{constructor(f,g){super(f,"google.com",g)}}class Cu extends Id{constructor(f,g,E){super(f,"twitter.com",g,E)}}function df(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Bc(y){var f,g;if(!y)return null;const{providerId:E}=y,R=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},P=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const K=null===(g=null===(f=It(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(K)return new rs(P,"anonymous"!==K&&"custom"!==K?K:null)}if(!E)return null;switch(E){case"facebook.com":return new jc(P,R);case"github.com":return new bd(P,R);case"google.com":return new lf(P,R);case"twitter.com":return new Cu(P,R,y.screenName||null);case"custom":case"anonymous":return new rs(P,null);default:return new rs(P,E,R)}}(g)}class Qo{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Qo("enroll",f)}static _fromMfaPendingCredential(f){return new Qo("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,E;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Qo._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return Qo._fromIdtoken(f.multiFactorSession.idToken)}return null}}class $c{constructor(f,g,E){this.session=f,this.hints=g,this.signInResolver=E}static _fromError(f,g){const E=Pn(f),R=g.customData._serverResponse,P=(R.mfaInfo||[]).map(oe=>Da._fromServerResponse(E,oe));H(R.mfaPendingCredential,E,"internal-error");const K=Qo._fromMfaPendingCredential(R.mfaPendingCredential);return new $c(K,P,function(){var oe=(0,_.Z)(function*(Le){const tt=yield Le._process(E,K);delete R.mfaInfo,delete R.mfaPendingCredential;const Ct=Object.assign(Object.assign({},R),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(g.operationType){case"signIn":const Et=yield xr._fromIdTokenResponse(E,g.operationType,Ct);return yield E._updateCurrentUser(Et.user),Et;case"reauthenticate":return H(g.user,E,"internal-error"),xr._forOperation(g.user,g.operationType,Ct);default:De(E,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,_.Z)(function*(){return g.signInResolver(f)})()}}class xa{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>Da._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new xa(f)}getSession(){var f=this;return(0,_.Z)(function*(){return Qo._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var E=this;return(0,_.Z)(function*(){const R=f,P=yield E.getSession(),K=yield Ln(E.user,R._process(E.user.auth,P,g));return yield E.user._updateTokensIfNecessary(K),E.user.reload()})()}unenroll(f){var g=this;return(0,_.Z)(function*(){var E;const R="string"==typeof f?f:f.uid,P=yield g.user.getIdToken(),K=yield Ln(g.user,function Fg(y,f){return Ut(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ze(y,f))}(g.user.auth,{idToken:P,mfaEnrollmentId:R}));g.enrolledFactors=g.enrolledFactors.filter(({uid:oe})=>oe!==R),yield g.user._updateTokensIfNecessary(K);try{yield g.user.reload()}catch(oe){if("auth/user-token-expired"!==(null===(E=oe)||void 0===E?void 0:E.code))throw oe}})()}}const ao=new WeakMap,Rs="__sak";class Ma{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Rs,"1"),this.storage.removeItem(Rs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Du=(()=>{class y extends Ma{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pa(){const y=(0,O.z$)();return zt(y)||Ui(y)}()&&function Cc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=tf(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const R=this.storage.getItem(E),P=this.localCache[E];R!==P&&g(E,P,R)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((oe,Le,tt)=>{this.notifyListeners(oe,tt)});const R=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(R);if(g.newValue!==oe)null!==g.newValue?this.storage.setItem(R,g.newValue):this.storage.removeItem(R);else if(this.localCache[R]===g.newValue&&!E)return}const P=()=>{const oe=this.storage.getItem(R);!E&&this.localCache[R]===oe||this.notifyListeners(R,oe)},K=this.storage.getItem(R);!function ef(){return(0,O.w1)()&&10===document.documentMode}()||K===g.newValue||g.newValue===g.oldValue?P():setTimeout(P,10)}notifyListeners(g,E){this.localCache[g]=E;const R=this.listeners[g];if(R)for(const P of Array.from(R))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var R=()=>super._set,P=this;return(0,_.Z)(function*(){yield R().call(P,g,E),P.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,R=this;return(0,_.Z)(function*(){const P=yield E().call(R,g);return R.localCache[g]=JSON.stringify(P),P})()}_remove(g){var E=()=>super._remove,R=this;return(0,_.Z)(function*(){yield E().call(R,g),delete R.localCache[g]})()}}return y.type="LOCAL",y})(),uo=(()=>{class y extends Ma{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return y.type="SESSION",y})();let ff=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(P=>P.isListeningto(g));if(E)return E;const R=new y(g);return this.receivers.push(R),R}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,_.Z)(function*(){const R=g,{eventId:P,eventType:K,data:oe}=R.data,Le=E.handlersMap[K];if(!Le?.size)return;R.ports[0].postMessage({status:"ack",eventId:P,eventType:K});const tt=Array.from(Le).map(function(){var Et=(0,_.Z)(function*(dr){return dr(R.origin,oe)});return function(dr){return Et.apply(this,arguments)}}()),Ct=yield function Sd(y){return Promise.all(y.map(function(){var f=(0,_.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return f.apply(this,arguments)}}()))}(tt);R.ports[0].postMessage({status:"done",eventId:P,eventType:K,response:Ct})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function co(y="",f=10){let g="";for(let E=0;E<f;E++)g+=Math.floor(10*Math.random());return y+g}class Na{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,E=50){var R=this;return(0,_.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let K,oe;return new Promise((Le,tt)=>{const Ct=co("",20);P.port1.start();const Et=setTimeout(()=>{tt(new Error("unsupported_event"))},E);oe={messageChannel:P,onMessage(dr){const Us=dr;if(Us.data.eventId===Ct)switch(Us.data.status){case"ack":clearTimeout(Et),K=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Le(Us.data.response);break;default:clearTimeout(Et),clearTimeout(K),tt(new Error("invalid_response"))}}},R.handlers.add(oe),P.port1.addEventListener("message",oe.onMessage),R.target.postMessage({eventType:f,eventId:Ct,data:g},[P.port2])}).finally(()=>{oe&&R.removeMessageHandler(oe)})})()}}function Dn(){return window}function is(){return typeof Dn().WorkerGlobalScope<"u"&&"function"==typeof Dn().importScripts}function Jo(){return(Jo=(0,_.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Tu="firebaseLocalStorageDb",Su=1,Ms="firebaseLocalStorage",ea="fbase_key";class ta{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function La(y,f){return y.transaction([Ms],f?"readwrite":"readonly").objectStore(Ms)}function Au(){const y=indexedDB.open(Tu,Su);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Ms,{keyPath:ea})}catch(R){g(R)}}),y.addEventListener("success",(0,_.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Ms)?f(E):(E.close(),yield function Fa(){const y=indexedDB.deleteDatabase(Tu);return new ta(y).toPromise()}(),f(yield Au()))}))})}function wr(y,f,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,_.Z)(function*(y,f,g){const E=La(y,!0).put({[ea]:f,value:g});return new ta(E).toPromise()})).apply(this,arguments)}function Ps(){return(Ps=(0,_.Z)(function*(y,f){const g=La(y,!1).get(f),E=yield new ta(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Va(y,f){const g=La(y,!0).delete(f);return new ta(g).toPromise()}const lo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,_.Z)(function*(){return g.db||(g.db=yield Au()),g.db})()}_withRetries(g){var E=this;return(0,_.Z)(function*(){let R=0;for(;;)try{const P=yield E._openDb();return yield g(P)}catch(P){if(R++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,_.Z)(function*(){return is()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,_.Z)(function*(){g.receiver=ff._getInstance(function Oa(){return is()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,_.Z)(function*(R,P){return{keyProcessed:(yield g._poll()).includes(P.key)}});return function(R,P){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,_.Z)(function*(R,P){return["keyChanged"]});return function(R,P){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,_.Z)(function*(){var E,R;if(g.activeServiceWorker=yield function ss(){return Jo.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Na(g.activeServiceWorker);const P=yield g.sender._send("ping",{},800);P&&null!==(E=P[0])&&void 0!==E&&E.fulfilled&&null!==(R=P[0])&&void 0!==R&&R.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,_.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Gc(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Au();return yield wr(g,Rs,"1"),yield Va(g,Rs),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,_.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var R=this;return(0,_.Z)(function*(){return R._withPendingWrite((0,_.Z)(function*(){return yield R._withRetries(P=>wr(P,g,E)),R.localCache[g]=E,R.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,_.Z)(function*(){const R=yield E._withRetries(P=>function na(y,f){return Ps.apply(this,arguments)}(P,g));return E.localCache[g]=R,R})()}_remove(g){var E=this;return(0,_.Z)(function*(){return E._withPendingWrite((0,_.Z)(function*(){return yield E._withRetries(R=>Va(R,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,_.Z)(function*(){const E=yield g._withRetries(K=>{const oe=La(K,!1).getAll();return new ta(oe).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const R=[],P=new Set;for(const{fbase_key:K,value:oe}of E)P.add(K),JSON.stringify(g.localCache[K])!==JSON.stringify(oe)&&(g.notifyListeners(K,oe),R.push(K));for(const K of Object.keys(g.localCache))g.localCache[K]&&!P.has(K)&&(g.notifyListeners(K,null),R.push(K));return R})()}notifyListeners(g,E){this.localCache[g]=E;const R=this.listeners[g];if(R)for(const P of Array.from(R))P(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function xu(){return(xu=(0,_.Z)(function*(y){return(yield Ut(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Hi(y){return new Promise((f,g)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=f,E.onerror=R=>{const P=be("internal-error");P.customData=R,g(P)},E.type="text/javascript",E.charset="UTF-8",function ho(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(E)})}function Rd(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ii=1e12;class Ug{constructor(f){this.auth=f,this.counter=Ii,this._widgets=new Map}render(f,g){const E=this.counter;return this._widgets.set(E,new xd(f,this.auth.name,g||{})),this.counter++,E}reset(f){var g;const E=f||Ii;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ii))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,_.Z)(function*(){var E;return null===(E=g._widgets.get(f||Ii))||void 0===E||E.execute(),""})()}}class xd{constructor(f,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof f?document.getElementById(f):f;H(R,"argument-error",{appName:g}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Pu(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Md=Rd("rcb"),Wc=new le(3e4,6e4);class as{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Dn().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return H(function $a(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Dn().grecaptcha):new Promise((E,R)=>{const P=Dn().setTimeout(()=>{R(be(f,"network-request-failed"))},Wc.get());Dn()[Md]=()=>{Dn().clearTimeout(P),delete Dn()[Md];const oe=Dn().grecaptcha;if(!oe)return void R(be(f,"internal-error"));const Le=oe.render;oe.render=(tt,Ct)=>{const Et=Le(tt,Ct);return this.counter++,Et},this.hostLanguage=g,E(oe)},Hi(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Md,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(P),R(be(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=Dn().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ku{load(f){return(0,_.Z)(function*(){return new Ug(f)})()}clearedOneInstance(){}}const Pd="recaptcha",pf={theme:"light",type:"image"};class Ha{constructor(f,g=Object.assign({},pf),E){this.parameters=g,this.type=Pd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pn(E),this.isInvisible="invisible"===this.parameters.size,H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof f?document.getElementById(f):f;H(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ku:new as,this.validateStartingState()}verify(){var f=this;return(0,_.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(g)||new Promise(P=>{const K=oe=>{oe&&(f.tokenChangeListeners.delete(K),P(oe))};f.tokenChangeListeners.add(K),f.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof f)f(g);else if("string"==typeof f){const E=Dn()[f];"function"==typeof E&&E(g)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,_.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,_.Z)(function*(){H(jn()&&!is(),f.auth,"internal-error"),yield function gf(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function $i(y){return xu.apply(this,arguments)}(f.auth);H(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qc{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Ei._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Kc(){return(Kc=(0,_.Z)(function*(y,f,g){const E=Pn(y),R=yield Nd(E,f,(0,O.m9)(g));return new qc(R,P=>Nn(E,P))})).apply(this,arguments)}function Ou(){return(Ou=(0,_.Z)(function*(y,f,g){const E=(0,O.m9)(y);yield ro(!1,E,"phone");const R=yield Nd(E.auth,f,(0,O.m9)(g));return new qc(R,P=>Un(E,P))})).apply(this,arguments)}function _f(){return(_f=(0,_.Z)(function*(y,f,g){const E=(0,O.m9)(y),R=yield Nd(E.auth,f,(0,O.m9)(g));return new qc(R,P=>io(E,P))})).apply(this,arguments)}function Nd(y,f,g){return yf.apply(this,arguments)}function yf(){return yf=(0,_.Z)(function*(y,f,g){var E;const R=yield g.verify();try{let P;if(H("string"==typeof R,y,"argument-error"),H(g.type===Pd,y,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const K=P.session;if("phoneNumber"in P)return H("enroll"===K.type,y,"internal-error"),(yield function hf(y,f){return Ut(y,"POST","/v2/accounts/mfaEnrollment:start",Ze(y,f))}(y,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{H("signin"===K.type,y,"internal-error");const oe=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return H(oe,y,"missing-multi-factor-info"),(yield function ja(y,f){return Ut(y,"POST","/v2/accounts/mfaSignIn:start",Ze(y,f))}(y,{mfaPendingCredential:K.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield function fd(y,f){return Bo.apply(this,arguments)}(y,{phoneNumber:P.phoneNumber,recaptchaToken:R});return K}}finally{g._reset()}}),yf.apply(this,arguments)}function vf(){return(vf=(0,_.Z)(function*(y,f){yield pu((0,O.m9)(y),f)})).apply(this,arguments)}let Zc=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Pn(g)}verifyPhoneNumber(g,E){return Nd(this.auth,g,(0,O.m9)(E))}static credential(g,E){return Ei._fromVerification(g,E)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:R}=g;return E&&R?Ei._fromTokenResponse(E,R):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function pn(y,f){return f?ht(f):(H(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Fu extends Qs{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return es(f,this._buildIdpRequest())}_linkToIdToken(f,g){return es(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return es(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Uu(y){return Wo(y.auth,new Fu(y),y.bypassAuthState)}function Yc(y){const{auth:f,user:g}=y;return H(g,f,"internal-error"),md(g,new Fu(y),y.bypassAuthState)}function Qr(y){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,_.Z)(function*(y){const{auth:f,user:g}=y;return H(g,f,"internal-error"),pu(g,new Fu(y),y.bypassAuthState)})).apply(this,arguments)}class Vu{constructor(f,g,E,R,P=!1){this.auth=f,this.resolver=E,this.user=R,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,_.Z)(function*(E,R){f.pendingPromise={resolve:E,reject:R};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(E,R){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,_.Z)(function*(){const{urlResponse:E,sessionId:R,postBody:P,tenantId:K,error:oe,type:Le}=f;if(oe)return void g.reject(oe);const tt={auth:g.auth,requestUri:E,sessionId:R,tenantId:K||void 0,postBody:P||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Le)(tt))}catch(Ct){g.reject(Ct)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Uu;case"linkViaPopup":case"linkViaRedirect":return Qr;case"reauthViaPopup":case"reauthViaRedirect":return Yc;default:De(this.auth,"internal-error")}}resolve(f){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ga=new le(2e3,1e4);function Bu(){return(Bu=(0,_.Z)(function*(y,f,g){const E=Pn(y);$e(y,f,ts);const R=pn(E,g);return new za(E,"signInViaPopup",f,R).executeNotNull()})).apply(this,arguments)}function wf(){return(wf=(0,_.Z)(function*(y,f,g){const E=(0,O.m9)(y);$e(E.auth,f,ts);const R=pn(E.auth,g);return new za(E.auth,"reauthViaPopup",f,R,E).executeNotNull()})).apply(this,arguments)}function Pr(){return(Pr=(0,_.Z)(function*(y,f,g){const E=(0,O.m9)(y);$e(E.auth,f,ts);const R=pn(E.auth,g);return new za(E.auth,"linkViaPopup",f,R,E).executeNotNull()})).apply(this,arguments)}let za=(()=>{class y extends Vu{constructor(g,E,R,P,K){super(g,E,P,K),this.provider=R,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,_.Z)(function*(){const E=yield g.execute();return H(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,_.Z)(function*(){He(1===g.filter.length,"Popup operations only handle one event");const E=co();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(R=>{g.reject(R)}),g.resolver._isIframeWebStorageSupported(g.auth,R=>{R||g.reject(be(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,R;this.pollId=null!==(R=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Ga.get())};g()}}return y.currentPopupAction=null,y})();const rn="pendingRedirect",fo=new Map;class bi extends Vu{constructor(f,g,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,_.Z)(function*(){let E=fo.get(g.auth._key());if(!E){try{const P=(yield function ia(y,f){return Ht.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;E=()=>Promise.resolve(P)}catch(R){E=()=>Promise.reject(R)}fo.set(g.auth._key(),E)}return g.bypassAuthState||fo.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,E=this;return(0,_.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(E,f);if("unknown"!==f.type){if(f.eventId){const R=yield E.auth._redirectUserForId(f.eventId);if(R)return E.user=R,g().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Ht(){return(Ht=(0,_.Z)(function*(y,f){const g=Tn(f),E=Ns(y);if(!(yield E._isAvailable()))return!1;const R="true"===(yield E._get(g));return yield E._remove(g),R})).apply(this,arguments)}function it(y,f){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,_.Z)(function*(y,f){return Ns(y)._set(Tn(f),"true")})).apply(this,arguments)}function Qc(y,f){fo.set(y._key(),f)}function Ns(y){return ht(y._redirectPersistence)}function Tn(y){return fn(rn,y.config.apiKey,y.name)}function kn(y,f,g){return function vn(y,f,g){return D.apply(this,arguments)}(y,f,g)}function D(){return(D=(0,_.Z)(function*(y,f,g){const E=Pn(y);$e(y,f,ts);const R=pn(E,g);return yield it(R,E),R._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function T(y,f,g){return function x(y,f,g){return U.apply(this,arguments)}(y,f,g)}function U(){return(U=(0,_.Z)(function*(y,f,g){const E=(0,O.m9)(y);$e(E.auth,f,ts);const R=pn(E.auth,g);yield it(R,E.auth);const P=yield st(E);return R._openRedirect(E.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function X(y,f,g){return function se(y,f,g){return Re.apply(this,arguments)}(y,f,g)}function Re(){return(Re=(0,_.Z)(function*(y,f,g){const E=(0,O.m9)(y);$e(E.auth,f,ts);const R=pn(E.auth,g);yield ro(!1,E,f.providerId),yield it(R,E.auth);const P=yield st(E);return R._openRedirect(E.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function qe(){return(qe=(0,_.Z)(function*(y,f){return yield Pn(y)._initializationPromise,bt(y,f,!1)})).apply(this,arguments)}function bt(y,f){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,_.Z)(function*(y,f,g=!1){const E=Pn(y),R=pn(E,f),K=yield new bi(E,R,g).execute();return K&&!g&&(delete K.user._redirectEventId,yield E._persistUserIfCurrent(K.user),yield E._setRedirectUser(null,f)),K})).apply(this,arguments)}function st(y){return ue.apply(this,arguments)}function ue(){return(ue=(0,_.Z)(function*(y){const f=co(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class k{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(g=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function kd(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ks(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var E;if(f.error&&!ks(f)){const R=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(be(this.auth,R))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const E=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Er(f))}saveEventToCache(f){this.cachedEventUids.add(Er(f)),this.lastProcessedEventTime=Date.now()}}function Er(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function ks({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function sa(y){return Di.apply(this,arguments)}function Di(){return(Di=(0,_.Z)(function*(y,f={}){return Ut(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Os=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oa=/^https?/;function aa(){return(aa=(0,_.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield sa(y);for(const g of f)try{if(Od(g))return}catch{}De(y,"unauthorized-domain")})).apply(this,arguments)}function Od(y){const f=Xn(),{protocol:g,hostname:E}=new URL(f);if(y.startsWith("chrome-extension://")){const K=new URL(y);return""===K.hostname&&""===E?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&K.hostname===E}if(!oa.test(g))return!1;if(Os.test(y))return E===y;const R=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(E)}const Xc=new le(3e4,6e4);function Ef(){const y=Dn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Ls=null;const Py=new le(5e3,15e3),Ld="__/auth/iframe",Ir="emulator/auth/iframe",Fd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function po(y){const f=y.config;H(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?te(f,Ir):`https://${y.config.authDomain}/${Ld}`,E={apiKey:f.apiKey,appName:y.name,v:ae.SDK_VERSION},R=jg.get(y.config.apiHost);R&&(E.eid=R);const P=y._getFrameworks();return P.length&&(E.fw=P.join(",")),`${g}?${(0,O.xO)(E).slice(1)}`}function If(){return If=(0,_.Z)(function*(y){const f=yield function $u(y){return Ls=Ls||function Bg(y){return new Promise((f,g)=>{var E,R,P;function K(){Ef(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ef(),g(be(y,"network-request-failed"))},timeout:Xc.get()})}if(null!==(R=null===(E=Dn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==R&&R.Iframe)f(gapi.iframes.getContext());else{if(null===(P=Dn().gapi)||void 0===P||!P.load){const oe=Rd("iframefcb");return Dn()[oe]=()=>{gapi.load?K():g(be(y,"network-request-failed"))},Hi(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>g(Le))}K()}}).catch(f=>{throw Ls=null,f})}(y),Ls}(y),g=Dn().gapi;return H(g,y,"internal-error"),f.open({where:document.body,url:po(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fd,dontclear:!0},E=>new Promise(function(){var R=(0,_.Z)(function*(P,K){yield E.restyle({setHideOnLeave:!1});const oe=be(y,"network-request-failed"),Le=Dn().setTimeout(()=>{K(oe)},Py.get());function tt(){Dn().clearTimeout(Le),P(E)}E.ping(tt).then(tt,()=>{K(oe)})});return function(P,K){return R.apply(this,arguments)}}()))}),If.apply(this,arguments)}const Jc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bf=500,Fs=600,us="_blank",ua="http://localhost";class cs{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const $g="__/auth/handler",nr="emulator/auth/handler";function Hu(y,f,g,E,R,P){H(y.config.authDomain,y,"auth-domain-config-required"),H(y.config.apiKey,y,"invalid-api-key");const K={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:E,v:ae.SDK_VERSION,eventId:R};if(f instanceof ts){f.setDefaultLanguage(y.languageCode),K.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(K.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,tt]of Object.entries(P||{}))K[Le]=tt}if(f instanceof jo){const Le=f.getScopes().filter(tt=>""!==tt);Le.length>0&&(K.scopes=Le.join(","))}y.tenantId&&(K.tid=y.tenantId);const oe=K;for(const Le of Object.keys(oe))void 0===oe[Le]&&delete oe[Le];return`${function Ny({config:y}){return y.emulator?te(y,nr):`https://${y.authDomain}/${$g}`}(y)}?${(0,O.xO)(oe).slice(1)}`}const Df="webStorageSupport",Tf=class ky{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uo,this._completeRedirectFn=bt,this._overrideRedirectResult=Qc}_openPopup(f,g,E,R){var P=this;return(0,_.Z)(function*(){var K;He(null===(K=P.eventManagers[f._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const oe=Hu(f,g,E,Xn(),R);return function el(y,f,g,E=bf,R=Fs){const P=Math.max((window.screen.availHeight-R)/2,0).toString(),K=Math.max((window.screen.availWidth-E)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},Jc),{width:E.toString(),height:R.toString(),top:P,left:K}),tt=(0,O.z$)().toLowerCase();g&&(oe=Ds(tt)?us:g),er(tt)&&(f=f||ua,Le.scrollbars="yes");const Ct=Object.entries(Le).reduce((dr,[Us,Qd])=>`${dr}${Us}=${Qd},`,"");if(function ko(y=(0,O.z$)()){var f;return Ui(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(tt)&&"_self"!==oe)return function Cf(y,f){const g=document.createElement("a");g.href=y,g.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(f||"",oe),new cs(null);const Et=window.open(f||"",oe,Ct);H(Et,y,"popup-blocked");try{Et.focus()}catch{}return new cs(Et)}(f,oe,co())})()}_openRedirect(f,g,E,R){var P=this;return(0,_.Z)(function*(){return yield P._originValidation(f),function ka(y){Dn().location.href=y}(Hu(f,g,E,Xn(),R)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:R,promise:P}=this.eventManagers[g];return R?Promise.resolve(R):(He(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(f);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(f){var g=this;return(0,_.Z)(function*(){const E=yield function Xr(y){return If.apply(this,arguments)}(f),R=new k(f);return E.register("authEvent",P=>(H(P?.authEvent,f,"invalid-auth-event"),{status:R.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:R},g.iframes[f._key()]=E,R})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Df,{type:Df},R=>{var P;const K=null===(P=R?.[0])||void 0===P?void 0:P[Df];void 0!==K&&g(!!K),De(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ju(y){return aa.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return tf()||zt()||Ui()}};class Hg{constructor(f){this.factorId=f}_process(f,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,E);case"signin":return this._finalizeSignIn(f,g.credential);default:return we("unexpected MultiFactorSessionType")}}}class tl extends Hg{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new tl(f)}_finalizeEnroll(f,g,E){return function Lg(y,f){return Ut(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ze(y,f))}(f,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Ad(y,f){return Ut(y,"POST","/v2/accounts/mfaSignIn:finalize",Ze(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let br=(()=>{class y{constructor(){}static assertion(g){return tl._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var go="@firebase/auth";class Wa{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,_.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(E=>{var R;f((null===(R=E)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);g&&(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ls(){return window}!function nl(y){(0,ae._registerComponent)(new me.wA("auth",(f,{options:g})=>{const E=f.getProvider("app").getImmediate(),R=f.getProvider("heartbeat"),{apiKey:P,authDomain:K}=E.options;return((oe,Le)=>{H(P&&!P.includes(":"),"invalid-api-key",{appName:oe.name}),H(!K?.includes(":"),"argument-error",{appName:oe.name});const tt={apiKey:P,authDomain:K,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oo(y)},Ct=new hd(oe,Le,tt);return function mn(y,f){const g=f?.persistence||[],E=(Array.isArray(g)?g:[g]).map(ht);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(E,f?.popupRedirectResolver)}(Ct,g),Ct})(E,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,E)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new me.wA("auth-internal",f=>{const g=Pn(f.getProvider("auth").getImmediate());return new Wa(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(go,"0.20.5",function Nr(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(go,"0.20.5","esm2017")}("Browser");const Gg=2e3;function Ud(){return Ud=(0,_.Z)(function*(y,f,g){var E;const{BuildInfo:R}=ls();He(f.sessionId,"AuthEvent did not contain a session ID");const P=yield function jd(y){return sl.apply(this,arguments)}(f.sessionId),K={};return Ui()?K.ibi=R.packageName:Fi()?K.apn=R.packageName:De(y,"operation-not-supported-in-this-environment"),R.displayName&&(K.appDisplayName=R.displayName),K.sessionId=P,Hu(y,g,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,K)}),Ud.apply(this,arguments)}function Vd(){return(Vd=(0,_.Z)(function*(y){const{BuildInfo:f}=ls(),g={};Ui()?g.iosBundleId=f.packageName:Fi()?g.androidPackageName=f.packageName:De(y,"operation-not-supported-in-this-environment"),yield sa(y,g)})).apply(this,arguments)}function il(){return(il=(0,_.Z)(function*(y,f,g){const{cordova:E}=ls();let R=()=>{};try{yield new Promise((P,K)=>{let oe=null;function Le(){var Et;P();const dr=null===(Et=E.plugins.browsertab)||void 0===Et?void 0:Et.close;"function"==typeof dr&&dr(),"function"==typeof g?.close&&g.close()}function tt(){oe||(oe=window.setTimeout(()=>{K(be(y,"redirect-cancelled-by-user"))},Gg))}function Ct(){"visible"===document?.visibilityState&&tt()}f.addPassiveListener(Le),document.addEventListener("resume",tt,!1),Fi()&&document.addEventListener("visibilitychange",Ct,!1),R=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",tt,!1),document.removeEventListener("visibilitychange",Ct,!1),oe&&window.clearTimeout(oe)}})}finally{R()}})).apply(this,arguments)}function sl(){return(sl=(0,_.Z)(function*(y){const f=function ol(y){if(He(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let E=0;E<y.length;E++)g[E]=y.charCodeAt(E);return g}(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Wg=20;class Oy extends k{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,_.Z)(function*(){yield f.initPromise})()}}function cl(y){return ca.apply(this,arguments)}function ca(){return(ca=(0,_.Z)(function*(y){const f=yield Nf()._get(ll(y));return f&&(yield Nf()._remove(ll(y))),f})).apply(this,arguments)}function Pf(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<Wg;g++){const E=Math.floor(Math.random()*f.length);y.push(f.charAt(E))}return y.join("")}function Nf(){return ht(Du)}function ll(y){return fn("authEvent",y.config.apiKey,y.name)}function dl(y){if(!y?.includes("?"))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}const Uy=class Fy{constructor(){this._redirectPersistence=uo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bt,this._overrideRedirectResult=Qc}_initialize(f){var g=this;return(0,_.Z)(function*(){const E=f._key();let R=g.eventManagers.get(E);return R||(R=new Oy(f),g.eventManagers.set(E,R),g.attachCallbackListeners(f,R)),R})()}_openPopup(f){De(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,E,R){var P=this;return(0,_.Z)(function*(){!function Bd(y){var f,g,E,R,P,K,oe,Le,tt,Ct;const Et=ls();H("function"==typeof(null===(f=Et?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(typeof(null===(g=Et?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H("function"==typeof(null===(P=null===(R=null===(E=Et?.cordova)||void 0===E?void 0:E.plugins)||void 0===R?void 0:R.browsertab)||void 0===P?void 0:P.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(Le=null===(oe=null===(K=Et?.cordova)||void 0===K?void 0:K.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(Ct=null===(tt=Et?.cordova)||void 0===tt?void 0:tt.InAppBrowser)||void 0===Ct?void 0:Ct.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const K=yield P._initialize(f);yield K.initialized(),K.resetRedirect(),function vt(){fo.clear()}(),yield P._originValidation(f);const oe=function al(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Pf(),postBody:null,tenantId:y.tenantId,error:be(y,"no-auth-event")}}(f,E,R);yield function ul(y,f){return Nf()._set(ll(y),f)}(f,oe);const Le=yield function Af(y,f,g){return Ud.apply(this,arguments)}(f,oe,g),tt=yield function xf(y){const{cordova:f}=ls();return new Promise(g=>{f.plugins.browsertab.isAvailable(E=>{let R=null;E?f.plugins.browsertab.openUrl(y):R=f.InAppBrowser.open(y,function Pg(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(R)})})}(Le);return function zg(y,f,g){return il.apply(this,arguments)}(f,K,tt)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Rf(y){return Vd.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:E,handleOpenURL:R,BuildInfo:P}=ls(),K=setTimeout((0,_.Z)(function*(){yield cl(f),g.onEvent(kf())}),500),oe=function(){var Ct=(0,_.Z)(function*(Et){clearTimeout(K);const dr=yield cl(f);let Us=null;dr&&Et?.url&&(Us=function Mf(y,f){var g,E;const R=function qg(y){const f=dl(y),g=f.link?decodeURIComponent(f.link):void 0,E=dl(g).link,R=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return dl(R).link||R||E||g||y}(f);if(R.includes("/__/auth/callback")){const P=dl(R),K=P.firebaseError?function Ly(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,oe=null===(E=null===(g=K?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Le=oe?be(oe):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:R,postBody:null}}return null}(dr,Et.url)),g.onEvent(Us||kf())});return function(dr){return Ct.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,oe);const Le=R,tt=`${P.packageName.toLowerCase()}://`;ls().handleOpenURL=function(){var Ct=(0,_.Z)(function*(Et){if(Et.toLowerCase().startsWith(tt)&&oe({url:Et}),"function"==typeof Le)try{Le(Et)}catch(dr){console.error(dr)}});return function(Et){return Ct.apply(this,arguments)}}()}};function kf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:be("no-auth-event")}}const Yg=1e3;function hl(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Lf(y=(0,O.z$)()){return!("file:"!==hl()&&"ionic:"!==hl()&&"capacitor:"!==hl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gd(){try{const y=self.localStorage,f=co();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Vy(y=(0,O.z$)()){return function Hd(){return(0,O.w1)()&&11===document?.documentMode}()||function Xg(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return ds()&&(0,O.hl)()}return!1}function ds(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zd(){return(function Qg(){return"http:"===hl()||"https:"===hl()}()||(0,O.ru)()||Lf())&&!function ai(){return(0,O.b$)()||(0,O.UG)()}()&&Gd()&&!ds()}function Ff(){return Lf()&&typeof document<"u"}function Wd(){return(Wd=(0,_.Z)(function*(){return!!Ff()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},Yg);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const kr={LOCAL:"local",NONE:"none",SESSION:"session"},mo=H,fl="persistence";function pl(y){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,_.Z)(function*(y){yield y._initializationPromise;const f=qa(),g=fn(fl,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function qa(){var y;try{return(null===(y=function Uf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const em=H;class _o{constructor(){this.browserResolver=ht(Tf),this.cordovaResolver=ht(Uy),this.underlyingResolver=null,this._redirectPersistence=uo,this._completeRedirectFn=bt,this._overrideRedirectResult=Qc}_initialize(f){var g=this;return(0,_.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,E,R){var P=this;return(0,_.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(f,g,E,R)})()}_openRedirect(f,g,E,R){var P=this;return(0,_.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(f,g,E,R)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Ff()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return em(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,_.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Jg(){return Wd.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Bf(y){return y.unwrap()}function nm(y){return Kd(y)}function Kd(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Zc.credentialFromResult(y);const g=f.providerId;if(!g||g===fe.PASSWORD)return null;let E;switch(g){case fe.GOOGLE:E=rf;break;case fe.FACEBOOK:E=xc;break;case fe.GITHUB:E=sf;break;case fe.TWITTER:E=kg;break;default:const{oauthIdToken:R,oauthAccessToken:P,oauthTokenSecret:K,pendingToken:oe,nonce:Le}=f;return P||K||R||oe?oe?g.startsWith("saml.")?$o._create(g,oe):si._fromParams({providerId:g,signInMethod:g,pendingToken:oe,idToken:R,accessToken:P}):new ba(g).credential({idToken:R,accessToken:P,rawNonce:Le}):null}return y instanceof O.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function lr(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function gl(y,f){var g,E;const R=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=f)||void 0===E?void 0:E.code))f.resolver=new jt(y,function cr(y,f){var g;const E=(0,O.m9)(y),R=f;return H(f.customData.operationType,E,"argument-error"),H(null===(g=R.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),$c._fromError(E,R)}(y,f));else if(R){const P=Kd(f),K=f;P&&(K.credential=P,K.tenantId=R.tenantId||void 0,K.email=R.email||void 0,K.phoneNumber=R.phoneNumber||void 0)}}(y,g),g}).then(g=>{const R=g.user;return{operationType:g.operationType,credential:nm(g),additionalUserInfo:df(g),user:Or.getOrCreate(R)}})}function Xt(y,f){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,_.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:E=>lr(y,g.confirm(E))}})).apply(this,arguments)}class jt{constructor(f,g){this.resolver=g,this.auth=function tm(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return lr(Bf(this.auth),this.resolver.resolveSignIn(f))}}class Or{constructor(f){this._delegate=f,this.multiFactor=function Hc(y){const f=(0,O.m9)(y);return ao.has(f)||ao.set(f,xa._fromUser(f)),ao.get(f)}(f)}static getOrCreate(f){return Or.USER_MAP.has(f)||Or.USER_MAP.set(f,new Or(f)),Or.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,_.Z)(function*(){return lr(g.auth,Un(g._delegate,f))})()}linkWithPhoneNumber(f,g){var E=this;return(0,_.Z)(function*(){return Xt(E.auth,function Vg(y,f,g){return Ou.apply(this,arguments)}(E._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,_.Z)(function*(){return lr(g.auth,function My(y,f,g){return Pr.apply(this,arguments)}(g._delegate,f,_o))})()}linkWithRedirect(f){var g=this;return(0,_.Z)(function*(){return yield pl(Pn(g.auth)),X(g._delegate,f,_o)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,_.Z)(function*(){return lr(g.auth,io(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Xt(this.auth,function mf(y,f,g){return _f.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return lr(this.auth,function oE(y,f,g){return wf.apply(this,arguments)}(this._delegate,f,_o))}reauthenticateWithRedirect(f){var g=this;return(0,_.Z)(function*(){return yield pl(Pn(g.auth)),T(g._delegate,f,_o)})()}sendEmailVerification(f){return function vd(y,f){return Uc.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,_.Z)(function*(){return yield function fu(y,f){return Ho.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function wd(y,f){return Ed((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Ra(y,f){return Ed((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Lu(y,f){return vf.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function oo(y,f){return ji.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function bu(y,f,g){return Zn.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Or.USER_MAP=new WeakMap;const an=H;let Zd=(()=>{class y{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=g.options;an(R,"invalid-api-key",{appName:g.name}),an(R,"invalid-api-key",{appName:g.name});const P=typeof window<"u"?_o:void 0;this._delegate=E.initialize({options:{persistence:ml(R,g.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Or.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function en(y,f,g){const E=Pn(y);H(E._canInitEmulator,E,"emulator-config-failed"),H(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const R=!!g?.disableWarnings,P=$n(f),{host:K,port:oe}=function tr(y){const f=$n(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(E);if(R){const P=R[1];return{host:P,port:Xi(E.substr(P.length+1))}}{const[P,K]=E.split(":");return{host:P,port:Xi(K)}}}(f);E.config.emulator={url:`${P}//${K}${null===oe?"":`:${oe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:K,port:oe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function mr(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,E)}applyActionCode(g){return function _u(y,f){return _d.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return yu(this._delegate,g)}confirmPasswordReset(g,E){return function Sa(y,f,g){return St.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var R=this;return(0,_.Z)(function*(){return lr(R._delegate,function uf(y,f,g){return Fc.apply(this,arguments)}(R._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Eu(y,f){return Iu.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function cf(y,f){return"EMAIL_SIGNIN"===Ia.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,_.Z)(function*(){an(zd(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function Ye(y,f){return qe.apply(this,arguments)}(g._delegate,_o);return E?lr(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Of(y,f){Pn(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,E,R){const{next:P,error:K,complete:oe}=Yd(g,E,R);return this._delegate.onAuthStateChanged(P,K,oe)}onIdTokenChanged(g,E,R){const{next:P,error:K,complete:oe}=Yd(g,E,R);return this._delegate.onIdTokenChanged(P,K,oe)}sendSignInLinkToEmail(g,E){return function Zt(y,f,g){return yd.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function ns(y,f,g){return Ta.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,_.Z)(function*(){let R;switch(function Vf(y,f){mo(Object.values(kr).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?mo(f!==kr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?mo(f===kr.NONE,y,"unsupported-persistence-type"):ds()?mo(f===kr.NONE||f===kr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):mo(f===kr.NONE||Gd(),y,"unsupported-persistence-type")}(E._delegate,g),g){case kr.SESSION:R=uo;break;case kr.LOCAL:R=(yield ht(lo)._isAvailable())?lo:Du;break;case kr.NONE:R=nn;break;default:return De("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return lr(this._delegate,function gd(y){return af.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return lr(this._delegate,Nn(this._delegate,g))}signInWithCustomToken(g){return lr(this._delegate,function so(y,f){return Kn.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return lr(this._delegate,function ye(y,f,g){return Nn((0,O.m9)(y),Rc.credential(f,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return lr(this._delegate,function ur(y,f,g){return Aa.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return Xt(this._delegate,function Kt(y,f,g){return Kc.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,_.Z)(function*(){return an(zd(),E._delegate,"operation-not-supported-in-this-environment"),lr(E._delegate,function ra(y,f,g){return Bu.apply(this,arguments)}(E._delegate,g,_o))})()}signInWithRedirect(g){var E=this;return(0,_.Z)(function*(){return an(zd(),E._delegate,"operation-not-supported-in-this-environment"),yield pl(E._delegate),kn(E._delegate,g,_o)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Lc(y,f){return vu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=kr,y})();function Yd(y,f,g){let E=y;"function"!=typeof y&&({next:E,error:f,complete:g}=y);const R=E;return{next:K=>R(K&&Or.getOrCreate(K)),error:f,complete:g}}function ml(y,f){const g=function qd(y,f){const g=qa();if(!g)return[];const E=fn(fl,y,f);switch(g.getItem(E)){case kr.NONE:return[nn];case kr.LOCAL:return[lo,uo];case kr.SESSION:return[uo];default:return[]}}(y,f);if(typeof self<"u"&&!g.includes(lo)&&g.push(lo),typeof window<"u")for(const E of[Du,uo])g.includes(E)||g.push(E);return g.includes(nn)||g.push(nn),g}class _l{constructor(){this.providerId="phone",this._delegate=new Zc(Bf(ee.Z.auth()))}static credential(f,g){return Zc.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}_l.PHONE_SIGN_IN_METHOD=Zc.PHONE_SIGN_IN_METHOD,_l.PROVIDER_ID=Zc.PROVIDER_ID;const gn=H;class Lt{constructor(f,g,E=ee.Z.app()){var R;gn(null===(R=E.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Ha(f,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function rm(y){y.INTERNAL.registerComponent(new me.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new Zd(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Q_EMAIL_SIGNIN,PASSWORD_RESET:Q_PASSWORD_RESET,RECOVER_EMAIL:Q_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Q_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Q_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Q_VERIFY_EMAIL}},EmailAuthProvider:Rc,FacebookAuthProvider:xc,GithubAuthProvider:sf,GoogleAuthProvider:rf,OAuthProvider:ba,SAMLAuthProvider:Bi,PhoneAuthProvider:_l,PhoneMultiFactorGenerator:br,RecaptchaVerifier:Lt,TwitterAuthProvider:kg,Auth:Zd,AuthCredential:Qs,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.18")}(ee.Z)},9751:(ft,Te,L)=>{L.d(Te,{y:()=>pe});var _=L(930),ee=L(727),O=L(8822),ae=L(9635),ne=L(2416),ie=L(576),me=L(2806);let pe=(()=>{class Q{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const We=new Q;return We.source=this,We.operator=Se,We}subscribe(Se,We,rt){const _e=function G(Q){return Q&&Q instanceof _.Lv||function z(Q){return Q&&(0,ie.m)(Q.next)&&(0,ie.m)(Q.error)&&(0,ie.m)(Q.complete)}(Q)&&(0,ee.Nn)(Q)}(Se)?Se:new _.Hp(Se,We,rt);return(0,me.x)(()=>{const{operator:Me,source:Ae}=this;_e.add(Me?Me.call(_e,Ae):Ae?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Se){try{return this._subscribe(Se)}catch(We){Se.error(We)}}forEach(Se,We){return new(We=fe(We))((rt,_e)=>{const Me=new _.Hp({next:Ae=>{try{Se(Ae)}catch(Be){_e(Be),Me.unsubscribe()}},error:_e,complete:rt});this.subscribe(Me)})}_subscribe(Se){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(Se)}[O.L](){return this}pipe(...Se){return(0,ae.U)(Se)(this)}toPromise(Se){return new(Se=fe(Se))((We,rt)=>{let _e;this.subscribe(Me=>_e=Me,Me=>rt(Me),()=>We(_e))})}}return Q.create=Ge=>new Q(Ge),Q})();function fe(Q){var Ge;return null!==(Ge=Q??ne.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(ft,Te,L)=>{L.d(Te,{x:()=>me});var _=L(9751),ee=L(727);const ae=(0,L(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=L(8737),ie=L(2806);let me=(()=>{class fe extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Q=new pe(this,this);return Q.operator=G,Q}_throwIfClosed(){if(this.closed)throw new ae}next(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(G)}})}error(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Q}=this;for(;Q.length;)Q.shift().error(G)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Q,isStopped:Ge,observers:Se}=this;return Q||Ge?ee.Lc:(this.currentObservers=null,Se.push(G),new ee.w0(()=>{this.currentObservers=null,(0,ne.P)(Se,G)}))}_checkFinalizedStatuses(G){const{hasError:Q,thrownError:Ge,isStopped:Se}=this;Q?G.error(Ge):Se&&G.complete()}asObservable(){const G=new _.y;return G.source=this,G}}return fe.create=(z,G)=>new pe(z,G),fe})();class pe extends me{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Q||Q.call(G,z)}error(z){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Q||Q.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,Q;return null!==(Q=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==Q?Q:ee.Lc}}},930:(ft,Te,L)=>{L.d(Te,{Hp:()=>rt,Lv:()=>Q});var _=L(576),ee=L(727),O=L(2416),ae=L(7849),ne=L(5032);const ie=fe("C",void 0,void 0);function fe(De,be,Pe){return{kind:De,value:be,error:Pe}}var z=L(3410),G=L(2806);class Q extends ee.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,ee.Nn)(be)&&be.add(this)):this.destination=Be}static create(be,Pe,$e){return new rt(be,Pe,$e)}next(be){this.isStopped?Ae(function pe(De){return fe("N",De,void 0)}(be),this):this._next(be)}error(be){this.isStopped?Ae(function me(De){return fe("E",void 0,De)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?Ae(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Se(De,be){return Ge.call(De,be)}class We{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Pe}=this;if(Pe.next)try{Pe.next(be)}catch($e){_e($e)}}error(be){const{partialObserver:Pe}=this;if(Pe.error)try{Pe.error(be)}catch($e){_e($e)}else _e(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Pe){_e(Pe)}}}class rt extends Q{constructor(be,Pe,$e){let Fe;if(super(),(0,_.m)(be)||!be)Fe={next:be??void 0,error:Pe??void 0,complete:$e??void 0};else{let H;this&&O.v.useDeprecatedNextContext?(H=Object.create(be),H.unsubscribe=()=>this.unsubscribe(),Fe={next:be.next&&Se(be.next,H),error:be.error&&Se(be.error,H),complete:be.complete&&Se(be.complete,H)}):Fe=be}this.destination=new We(Fe)}}function _e(De){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(De):(0,ae.h)(De)}function Ae(De,be){const{onStoppedNotification:Pe}=O.v;Pe&&z.z.setTimeout(()=>Pe(De,be))}const Be={closed:!0,next:ne.Z,error:function Me(De){throw De},complete:ne.Z}},727:(ft,Te,L)=>{L.d(Te,{Lc:()=>ie,w0:()=>ne,Nn:()=>me});var _=L(576);const O=(0,L(3888).d)(fe=>function(G){fe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Q,Ge)=>`${Ge+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ae=L(8737);class ne{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Se of G)Se.remove(this);else G.remove(this);const{initialTeardown:Q}=this;if((0,_.m)(Q))try{Q()}catch(Se){z=Se instanceof O?Se.errors:[Se]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Se of Ge)try{pe(Se)}catch(We){z=z??[],We instanceof O?z=[...z,...We.errors]:z.push(We)}}if(z)throw new O(z)}}add(z){var G;if(z&&z!==this)if(this.closed)pe(z);else{if(z instanceof ne){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,ae.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,ae.P)(G,z),z instanceof ne&&z._removeParent(this)}}ne.EMPTY=(()=>{const fe=new ne;return fe.closed=!0,fe})();const ie=ne.EMPTY;function me(fe){return fe instanceof ne||fe&&"closed"in fe&&(0,_.m)(fe.remove)&&(0,_.m)(fe.add)&&(0,_.m)(fe.unsubscribe)}function pe(fe){(0,_.m)(fe)?fe():fe.unsubscribe()}},2416:(ft,Te,L)=>{L.d(Te,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ft,Te,L)=>{L.d(Te,{E:()=>ee});const ee=new(L(9751).y)(ne=>ne.complete())},8996:(ft,Te,L)=>{L.d(Te,{D:()=>be});var _=L(8421),ee=L(5363),O=L(9468),ie=L(9751),pe=L(2202),fe=L(576),z=L(9672);function Q(Pe,$e){if(!Pe)throw new Error("Iterable cannot be null");return new ie.y(Fe=>{(0,z.f)(Fe,$e,()=>{const H=Pe[Symbol.asyncIterator]();(0,z.f)(Fe,$e,()=>{H.next().then(we=>{we.done?Fe.complete():Fe.next(we.value)})},0,!0)})})}var Ge=L(3670),Se=L(8239),We=L(1144),rt=L(6495),_e=L(2206),Me=L(4532),Ae=L(3260);function be(Pe,$e){return $e?function De(Pe,$e){if(null!=Pe){if((0,Ge.c)(Pe))return function ae(Pe,$e){return(0,_.Xf)(Pe).pipe((0,O.R)($e),(0,ee.Q)($e))}(Pe,$e);if((0,We.z)(Pe))return function me(Pe,$e){return new ie.y(Fe=>{let H=0;return $e.schedule(function(){H===Pe.length?Fe.complete():(Fe.next(Pe[H++]),Fe.closed||this.schedule())})})}(Pe,$e);if((0,Se.t)(Pe))return function ne(Pe,$e){return(0,_.Xf)(Pe).pipe((0,O.R)($e),(0,ee.Q)($e))}(Pe,$e);if((0,_e.D)(Pe))return Q(Pe,$e);if((0,rt.T)(Pe))return function G(Pe,$e){return new ie.y(Fe=>{let H;return(0,z.f)(Fe,$e,()=>{H=Pe[pe.h](),(0,z.f)(Fe,$e,()=>{let we,He;try{({value:we,done:He}=H.next())}catch(Qe){return void Fe.error(Qe)}He?Fe.complete():Fe.next(we)},0,!0)}),()=>(0,fe.m)(H?.return)&&H.return()})}(Pe,$e);if((0,Ae.L)(Pe))return function Be(Pe,$e){return Q((0,Ae.Q)(Pe),$e)}(Pe,$e)}throw(0,Me.z)(Pe)}(Pe,$e):(0,_.Xf)(Pe)}},8421:(ft,Te,L)=>{L.d(Te,{Xf:()=>Ge});var _=L(7582),ee=L(1144),O=L(8239),ae=L(9751),ne=L(3670),ie=L(2206),me=L(4532),pe=L(6495),fe=L(3260),z=L(576),G=L(7849),Q=L(8822);function Ge(De){if(De instanceof ae.y)return De;if(null!=De){if((0,ne.c)(De))return function Se(De){return new ae.y(be=>{const Pe=De[Q.L]();if((0,z.m)(Pe.subscribe))return Pe.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,ee.z)(De))return function We(De){return new ae.y(be=>{for(let Pe=0;Pe<De.length&&!be.closed;Pe++)be.next(De[Pe]);be.complete()})}(De);if((0,O.t)(De))return function rt(De){return new ae.y(be=>{De.then(Pe=>{be.closed||(be.next(Pe),be.complete())},Pe=>be.error(Pe)).then(null,G.h)})}(De);if((0,ie.D)(De))return Me(De);if((0,pe.T)(De))return function _e(De){return new ae.y(be=>{for(const Pe of De)if(be.next(Pe),be.closed)return;be.complete()})}(De);if((0,fe.L)(De))return function Ae(De){return Me((0,fe.Q)(De))}(De)}throw(0,me.z)(De)}function Me(De){return new ae.y(be=>{(function Be(De,be){var Pe,$e,Fe,H;return(0,_.mG)(this,void 0,void 0,function*(){try{for(Pe=(0,_.KL)(De);!($e=yield Pe.next()).done;)if(be.next($e.value),be.closed)return}catch(we){Fe={error:we}}finally{try{$e&&!$e.done&&(H=Pe.return)&&(yield H.call(Pe))}finally{if(Fe)throw Fe.error}}be.complete()})})(De,be).catch(Pe=>be.error(Pe))})}},6451:(ft,Te,L)=>{L.d(Te,{T:()=>ie});var _=L(8189),ee=L(8421),O=L(515),ae=L(7669),ne=L(8996);function ie(...me){const pe=(0,ae.yG)(me),fe=(0,ae._6)(me,1/0),z=me;return z.length?1===z.length?(0,ee.Xf)(z[0]):(0,_.J)(fe)((0,ne.D)(z,pe)):O.E}},5403:(ft,Te,L)=>{L.d(Te,{x:()=>ee});var _=L(930);function ee(ae,ne,ie,me,pe){return new O(ae,ne,ie,me,pe)}class O extends _.Lv{constructor(ne,ie,me,pe,fe,z){super(ne),this.onFinalize=fe,this.shouldUnsubscribe=z,this._next=ie?function(G){try{ie(G)}catch(Q){ne.error(Q)}}:super._next,this._error=pe?function(G){try{pe(G)}catch(Q){ne.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(G){ne.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(ft,Te,L)=>{L.d(Te,{U:()=>O});var _=L(4482),ee=L(5403);function O(ae,ne){return(0,_.e)((ie,me)=>{let pe=0;ie.subscribe((0,ee.x)(me,fe=>{me.next(ae.call(ne,fe,pe++))}))})}},8189:(ft,Te,L)=>{L.d(Te,{J:()=>O});var _=L(5577),ee=L(4671);function O(ae=1/0){return(0,_.z)(ee.y,ae)}},5577:(ft,Te,L)=>{L.d(Te,{z:()=>pe});var _=L(4004),ee=L(8421),O=L(4482),ae=L(9672),ne=L(5403),me=L(576);function pe(fe,z,G=1/0){return(0,me.m)(z)?pe((Q,Ge)=>(0,_.U)((Se,We)=>z(Q,Se,Ge,We))((0,ee.Xf)(fe(Q,Ge))),G):("number"==typeof z&&(G=z),(0,O.e)((Q,Ge)=>function ie(fe,z,G,Q,Ge,Se,We,rt){const _e=[];let Me=0,Ae=0,Be=!1;const De=()=>{Be&&!_e.length&&!Me&&z.complete()},be=$e=>Me<Q?Pe($e):_e.push($e),Pe=$e=>{Se&&z.next($e),Me++;let Fe=!1;(0,ee.Xf)(G($e,Ae++)).subscribe((0,ne.x)(z,H=>{Ge?.(H),Se?be(H):z.next(H)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(Me--;_e.length&&Me<Q;){const H=_e.shift();We?(0,ae.f)(z,We,()=>Pe(H)):Pe(H)}De()}catch(H){z.error(H)}}))};return fe.subscribe((0,ne.x)(z,be,()=>{Be=!0,De()})),()=>{rt?.()}}(Q,Ge,fe,G)))}},5363:(ft,Te,L)=>{L.d(Te,{Q:()=>ae});var _=L(9672),ee=L(4482),O=L(5403);function ae(ne,ie=0){return(0,ee.e)((me,pe)=>{me.subscribe((0,O.x)(pe,fe=>(0,_.f)(pe,ne,()=>pe.next(fe),ie),()=>(0,_.f)(pe,ne,()=>pe.complete(),ie),fe=>(0,_.f)(pe,ne,()=>pe.error(fe),ie)))})}},3099:(ft,Te,L)=>{L.d(Te,{B:()=>ne});var _=L(8421),ee=L(7579),O=L(930),ae=L(4482);function ne(me={}){const{connector:pe=(()=>new ee.x),resetOnError:fe=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=me;return Q=>{let Ge,Se,We,rt=0,_e=!1,Me=!1;const Ae=()=>{Se?.unsubscribe(),Se=void 0},Be=()=>{Ae(),Ge=We=void 0,_e=Me=!1},De=()=>{const be=Ge;Be(),be?.unsubscribe()};return(0,ae.e)((be,Pe)=>{rt++,!Me&&!_e&&Ae();const $e=We=We??pe();Pe.add(()=>{rt--,0===rt&&!Me&&!_e&&(Se=ie(De,G))}),$e.subscribe(Pe),!Ge&&rt>0&&(Ge=new O.Hp({next:Fe=>$e.next(Fe),error:Fe=>{Me=!0,Ae(),Se=ie(Be,fe,Fe),$e.error(Fe)},complete:()=>{_e=!0,Ae(),Se=ie(Be,z),$e.complete()}}),(0,_.Xf)(be).subscribe(Ge))})(Q)}}function ie(me,pe,...fe){if(!0===pe)return void me();if(!1===pe)return;const z=new O.Hp({next:()=>{z.unsubscribe(),me()}});return pe(...fe).subscribe(z)}},9468:(ft,Te,L)=>{L.d(Te,{R:()=>ee});var _=L(4482);function ee(O,ae=0){return(0,_.e)((ne,ie)=>{ie.add(O.schedule(()=>ne.subscribe(ie),ae))})}},8505:(ft,Te,L)=>{L.d(Te,{b:()=>ne});var _=L(576),ee=L(4482),O=L(5403),ae=L(4671);function ne(ie,me,pe){const fe=(0,_.m)(ie)||me||pe?{next:ie,error:me,complete:pe}:ie;return fe?(0,ee.e)((z,G)=>{var Q;null===(Q=fe.subscribe)||void 0===Q||Q.call(fe);let Ge=!0;z.subscribe((0,O.x)(G,Se=>{var We;null===(We=fe.next)||void 0===We||We.call(fe,Se),G.next(Se)},()=>{var Se;Ge=!1,null===(Se=fe.complete)||void 0===Se||Se.call(fe),G.complete()},Se=>{var We;Ge=!1,null===(We=fe.error)||void 0===We||We.call(fe,Se),G.error(Se)},()=>{var Se,We;Ge&&(null===(Se=fe.unsubscribe)||void 0===Se||Se.call(fe)),null===(We=fe.finalize)||void 0===We||We.call(fe)}))}):ae.y}},4408:(ft,Te,L)=>{L.d(Te,{o:()=>ne});var _=L(727);class ee extends _.w0{constructor(me,pe){super()}schedule(me,pe=0){return this}}const O={setInterval(ie,me,...pe){const{delegate:fe}=O;return fe?.setInterval?fe.setInterval(ie,me,...pe):setInterval(ie,me,...pe)},clearInterval(ie){const{delegate:me}=O;return(me?.clearInterval||clearInterval)(ie)},delegate:void 0};var ae=L(8737);class ne extends ee{constructor(me,pe){super(me,pe),this.scheduler=me,this.work=pe,this.pending=!1}schedule(me,pe=0){var fe;if(this.closed)return this;this.state=me;const z=this.id,G=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(G,z,pe)),this.pending=!0,this.delay=pe,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(G,this.id,pe),this}requestAsyncId(me,pe,fe=0){return O.setInterval(me.flush.bind(me,this),fe)}recycleAsyncId(me,pe,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return pe;null!=pe&&O.clearInterval(pe)}execute(me,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(me,pe);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,pe){let z,fe=!1;try{this.work(me)}catch(G){fe=!0,z=G||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:me,scheduler:pe}=this,{actions:fe}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(fe,this),null!=me&&(this.id=this.recycleAsyncId(pe,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(ft,Te,L)=>{L.d(Te,{v:()=>O});var _=L(6063);class ee{constructor(ne,ie=ee.now){this.schedulerActionCtor=ne,this.now=ie}schedule(ne,ie=0,me){return new this.schedulerActionCtor(this,ne).schedule(me,ie)}}ee.now=_.l.now;class O extends ee{constructor(ne,ie=ee.now){super(ne,ie),this.actions=[],this._active=!1}flush(ne){const{actions:ie}=this;if(this._active)return void ie.push(ne);let me;this._active=!0;do{if(me=ne.execute(ne.state,ne.delay))break}while(ne=ie.shift());if(this._active=!1,me){for(;ne=ie.shift();)ne.unsubscribe();throw me}}}},4986:(ft,Te,L)=>{L.d(Te,{z:()=>O});var _=L(4408);const O=new(L(7565).v)(_.o)},6063:(ft,Te,L)=>{L.d(Te,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(ft,Te,L)=>{L.d(Te,{z:()=>_});const _={setTimeout(ee,O,...ae){const{delegate:ne}=_;return ne?.setTimeout?ne.setTimeout(ee,O,...ae):setTimeout(ee,O,...ae)},clearTimeout(ee){const{delegate:O}=_;return(O?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(ft,Te,L)=>{L.d(Te,{h:()=>ee});const ee=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ft,Te,L)=>{L.d(Te,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ft,Te,L)=>{L.d(Te,{_6:()=>ie,jO:()=>ae,yG:()=>ne});var _=L(576);function O(me){return me[me.length-1]}function ae(me){return(0,_.m)(O(me))?me.pop():void 0}function ne(me){return function ee(me){return me&&(0,_.m)(me.schedule)}(O(me))?me.pop():void 0}function ie(me,pe){return"number"==typeof O(me)?me.pop():pe}},8737:(ft,Te,L)=>{function _(ee,O){if(ee){const ae=ee.indexOf(O);0<=ae&&ee.splice(ae,1)}}L.d(Te,{P:()=>_})},3888:(ft,Te,L)=>{function _(ee){const ae=ee(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}L.d(Te,{d:()=>_})},2806:(ft,Te,L)=>{L.d(Te,{O:()=>ae,x:()=>O});var _=L(2416);let ee=null;function O(ne){if(_.v.useDeprecatedSynchronousErrorHandling){const ie=!ee;if(ie&&(ee={errorThrown:!1,error:null}),ne(),ie){const{errorThrown:me,error:pe}=ee;if(ee=null,me)throw pe}}else ne()}function ae(ne){_.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=ne)}},9672:(ft,Te,L)=>{function _(ee,O,ae,ne=0,ie=!1){const me=O.schedule(function(){ae(),ie?ee.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(ee.add(me),!ie)return me}L.d(Te,{f:()=>_})},4671:(ft,Te,L)=>{function _(ee){return ee}L.d(Te,{y:()=>_})},1144:(ft,Te,L)=>{L.d(Te,{z:()=>_});const _=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(ft,Te,L)=>{L.d(Te,{D:()=>ee});var _=L(576);function ee(O){return Symbol.asyncIterator&&(0,_.m)(O?.[Symbol.asyncIterator])}},576:(ft,Te,L)=>{function _(ee){return"function"==typeof ee}L.d(Te,{m:()=>_})},3670:(ft,Te,L)=>{L.d(Te,{c:()=>O});var _=L(8822),ee=L(576);function O(ae){return(0,ee.m)(ae[_.L])}},6495:(ft,Te,L)=>{L.d(Te,{T:()=>O});var _=L(2202),ee=L(576);function O(ae){return(0,ee.m)(ae?.[_.h])}},8239:(ft,Te,L)=>{L.d(Te,{t:()=>ee});var _=L(576);function ee(O){return(0,_.m)(O?.then)}},3260:(ft,Te,L)=>{L.d(Te,{L:()=>ae,Q:()=>O});var _=L(7582),ee=L(576);function O(ne){return(0,_.FC)(this,arguments,function*(){const me=ne.getReader();try{for(;;){const{value:pe,done:fe}=yield(0,_.qq)(me.read());if(fe)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(pe)}}finally{me.releaseLock()}})}function ae(ne){return(0,ee.m)(ne?.getReader)}},4482:(ft,Te,L)=>{L.d(Te,{A:()=>ee,e:()=>O});var _=L(576);function ee(ae){return(0,_.m)(ae?.lift)}function O(ae){return ne=>{if(ee(ne))return ne.lift(function(ie){try{return ae(ie,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ft,Te,L)=>{function _(){}L.d(Te,{Z:()=>_})},9635:(ft,Te,L)=>{L.d(Te,{U:()=>O,z:()=>ee});var _=L(4671);function ee(...ae){return O(ae)}function O(ae){return 0===ae.length?_.y:1===ae.length?ae[0]:function(ie){return ae.reduce((me,pe)=>pe(me),ie)}}},7849:(ft,Te,L)=>{L.d(Te,{h:()=>O});var _=L(2416),ee=L(3410);function O(ae){ee.z.setTimeout(()=>{const{onUnhandledError:ne}=_.v;if(!ne)throw ae;ne(ae)})}},4532:(ft,Te,L)=>{function _(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Te,{z:()=>_})},4650:(ft,Te,L)=>{L.d(Te,{$8M:()=>Nu,$WT:()=>Xi,$Z:()=>Ya,AFp:()=>Wp,AaK:()=>pe,CRH:()=>Ub,CZH:()=>Th,CqO:()=>Tv,D6c:()=>Qw,EJc:()=>Mw,F4k:()=>Dv,FYo:()=>Za,FiY:()=>vn,GfV:()=>_E,JOm:()=>cs,LFG:()=>$,Lbi:()=>eA,Lck:()=>MS,MGl:()=>$m,MMx:()=>Jv,NdJ:()=>jm,OlP:()=>Kt,P3R:()=>lE,PXZ:()=>dC,Q6J:()=>bv,QGY:()=>Bm,Qsj:()=>XD,R0b:()=>qs,RDi:()=>ml,Rgc:()=>bh,SBq:()=>vo,Sil:()=>Ql,Suo:()=>Fb,TTD:()=>fu,TgZ:()=>Lm,X6Q:()=>sA,XFs:()=>pt,Xpm:()=>ko,Xts:()=>um,Y36:()=>Al,YKP:()=>Qv,YNc:()=>sc,Yjl:()=>Dc,Yz7:()=>Ze,Z0I:()=>Qt,ZZ4:()=>Kw,_UZ:()=>Cv,_Vd:()=>Tl,_c5:()=>Nh,_uU:()=>Ul,aQg:()=>Yw,c2e:()=>x_,cJS:()=>wt,cg1:()=>yh,dDg:()=>aC,dqk:()=>cn,eFA:()=>pC,eJc:()=>_w,eoX:()=>Ow,f3M:()=>W,g9A:()=>xw,h0i:()=>Eh,hGG:()=>hc,hij:()=>Ip,iGM:()=>Lb,ifc:()=>Fn,ip1:()=>eC,jDz:()=>Ib,kL8:()=>Km,lG2:()=>Pn,lqb:()=>zu,lri:()=>Sh,n5z:()=>xd,oAB:()=>Oo,q4F:()=>yE,qLn:()=>wo,qZA:()=>Fm,rWj:()=>iu,sBO:()=>_C,s_b:()=>ru,soG:()=>ma,tb:()=>Uw,tp0:()=>T,uIk:()=>Om,vHH:()=>_e,vpe:()=>To,wAp:()=>Dt,xp6:()=>Jf,z2F:()=>Xp,zSh:()=>Zf,zs3:()=>Zu});var _=L(7579),ee=L(727),O=L(9751),ae=L(6451),ne=L(3099);function ie(s){for(let o in s)if(s[o]===ie)return o;throw Error("Could not find renamed property on target object.")}function pe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(pe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=ie({__forward_ref__:ie});function G(s){return s.__forward_ref__=G,s.toString=function(){return pe(this())},s}function Q(s){return Ge(s)?s():s}function Ge(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===G}function Se(s){return s&&!!s.\u0275providers}const rt="https://g.co/ng/security#xss";class _e extends Error{constructor(o,u){super(Me(o,u)),this.code=o}}function Me(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function Ae(s){return"string"==typeof s?s:null==s?"":String(s)}function $e(s,o){throw new _e(-201,!1)}function le(s,o){null==s&&function te(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Ze(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function wt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Vt(s){return qt(s,wn)||qt(s,Gr)}function Qt(s){return null!==Vt(s)}function qt(s,o){return s.hasOwnProperty(o)?s[o]:null}function Jn(s){return s&&(s.hasOwnProperty(xn)||s.hasOwnProperty(En))?s[xn]:null}const wn=ie({\u0275prov:ie}),xn=ie({\u0275inj:ie}),Gr=ie({ngInjectableDef:ie}),En=ie({ngInjectorDef:ie});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let gi;function bn(s){const o=gi;return gi=s,o}function gr(s,o,u){const l=Vt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&pt.Optional?null:void 0!==o?o:void $e(pe(s))}const cn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),mi={},Ln="__NG_DI_FLAG__",Mn="ngTempTokenPath",Qi="ngTokenPath",or=/\n/gm,Po="\u0275",tn="__source";let zr;function Gt(s){const o=zr;return zr=s,o}function Y(s,o=pt.Default){if(void 0===zr)throw new _e(-203,!1);return null===zr?gr(s,void 0,o):zr.get(s,o&pt.Optional?null:void 0,o)}function $(s,o=pt.Default){return(function Yi(){return gi}()||Y)(Q(s),o)}function W(s,o=pt.Default){return $(s,q(o))}function q(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function xe(s){const o=[];for(let u=0;u<s.length;u++){const l=Q(s[u]);if(Array.isArray(l)){if(0===l.length)throw new _e(900,!1);let d,p=pt.Default;for(let v=0;v<l.length;v++){const I=l[v],b=gt(I);"number"==typeof b?-1===b?d=I.token:p|=b:d=I}o.push($(d,p))}else o.push($(l))}return o}function ze(s,o){return s[Ln]=o,s.prototype[Ln]=o,s}function gt(s){return s[Ln]}function fn(s){return{toString:s}.toString()}var At=(()=>((At=At||{})[At.OnPush=0]="OnPush",At[At.Default=1]="Default",At))(),Fn=(()=>{return(s=Fn||(Fn={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Fn;var s})();const er={},zt=[],Ds=ie({\u0275cmp:ie}),du=ie({\u0275dir:ie}),Fi=ie({\u0275pipe:ie}),No=ie({\u0275mod:ie}),ar=ie({\u0275fac:ie}),Ui=ie({__NG_ELEMENT_ID__:ie});let Pg=0;function ko(s){return fn(()=>{const o=Qs(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===At.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||Fn.Emulated,id:"c"+Pg++,styles:s.styles||zt,_:null,schemas:s.schemas||null,tView:null};_r(u);const l=s.dependencies;return u.directiveDefs=Lo(l,!1),u.pipeDefs=Lo(l,!0),u})}function tf(s){return en(s)||$n(s)}function Cc(s){return null!==s}function Oo(s){return fn(()=>({type:s.type,bootstrap:s.bootstrap||zt,declarations:s.declarations||zt,imports:s.imports||zt,exports:s.exports||zt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function hd(s,o){if(null==s)return er;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=l,o&&(o[d]=p)}return u}function Pn(s){return fn(()=>{const o=Qs(s);return _r(o),o})}function Dc(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function en(s){return s[Ds]||null}function $n(s){return s[du]||null}function tr(s){return s[Fi]||null}function Xi(s){const o=en(s)||$n(s)||tr(s);return null!==o&&o.standalone}function mr(s,o){const u=s[No]||null;if(!u&&!0===o)throw new Error(`Type ${pe(s)} does not have '\u0275mod' property.`);return u}function Qs(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||zt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hd(s.inputs,o),outputs:hd(s.outputs)}}function _r(s){s.features?.forEach(o=>o(s))}function Lo(s,o){if(!s)return null;const u=o?tr:tf;return()=>("function"==typeof s?s():s).map(l=>u(l)).filter(Cc)}const ii=0,Je=1,Mt=2,_n=3,Ar=4,Ji=5,Hn=6,_i=7,Cn=8,Fo=9,Uo=10,Pt=11,Tc=12,Ts=13,Sc=14,yi=15,yr=16,Vo=17,Xs=18,vi=19,Ss=20,es=21,ln=22,si=1,fd=2,Bo=7,Js=8,Rr=9,vr=10;function Wr(s){return Array.isArray(s)&&"object"==typeof s[si]}function wi(s){return Array.isArray(s)&&!0===s[si]}function Ea(s){return 0!=(4&s.flags)}function Ei(s){return s.componentOffset>-1}function Ac(s){return 1==(1&s.flags)}function qr(s){return!!s.template}function Ia(s){return 0!=(256&s[Mt])}function to(s,o){return s.hasOwnProperty(ar)?s[ar]:null}class no{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function fu(){return Ho}function Ho(s){return s.type.prototype.ngOnChanges&&(s.setInput=Go),pu}function pu(){const s=Ca(this),o=s?.current;if(o){const u=s.previous;if(u===er)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Go(s,o,u,l){const d=this.declaredInputs[u],p=Ca(s)||function md(s,o){return s[ro]=o}(s,{previous:er,current:null}),v=p.current||(p.current={}),I=p.previous,b=I[d];v[d]=new no(b&&b.currentValue,o,I===er),s[l]=o}fu.ngInherit=!0;const ro="__ngSimpleChanges__";function Ca(s){return s[ro]||null}const Kr=function(s,o,u){};function Un(s){for(;Array.isArray(s);)s=s[ii];return s}function Gn(s,o){return Un(o[s.index])}function Ko(s,o){return s.data[o]}function Kn(s,o){const u=o[s];return Wr(u)?u:u[ii]}function Zo(s){return 64==(64&s[Mt])}function ns(s,o){return null==o?null:s[o]}function Ta(s){s[Xs]=0}function Sa(s,o){s[Ji]+=o;let u=s,l=s[_n];for(;null!==l&&(1===o&&1===u[Ji]||-1===o&&0===u[Ji]);)l[Ji]+=o,u=l,l=l[_n]}const St={lFrame:Ay(null),bindingsEnabled:!0};function vu(){return St.bindingsEnabled}function ye(){return St.lFrame.lView}function Zt(){return St.lFrame.tView}function ur(){let s=Aa();for(;null!==s&&64===s.type;)s=s.parent;return s}function Aa(){return St.lFrame.currentTNode}function Zr(s,o){const u=St.lFrame;u.currentTNode=s,u.isParent=o}function Eu(){return St.lFrame.isParent}function oo(){return St.lFrame.bindingIndex++}function Ed(s,o){const u=St.lFrame;u.bindingIndex=u.bindingRootIndex=s,Bc(o)}function Bc(s){St.lFrame.currentDirectiveIndex=s}function Id(){return St.lFrame.currentQueryIndex}function jc(s){St.lFrame.currentQueryIndex=s}function bd(s){const o=s[Je];return 2===o.type?o.declTNode:1===o.type?s[Hn]:null}function lf(s,o,u){if(u&pt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&pt.Host||(d=bd(p),null===d||(p=p[yi],10&d.type))););if(null===d)return!1;o=d,s=p}const l=St.lFrame=df();return l.currentTNode=o,l.lView=s,!0}function Cu(s){const o=df(),u=s[Je];St.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function df(){const s=St.lFrame,o=null===s?null:s.child;return null===o?Ay(s):o}function Ay(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ry(){const s=St.lFrame;return St.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Cd=Ry;function Og(){const s=Ry();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Mr(){return St.lFrame.selectedIndex}function Yo(s){St.lFrame.selectedIndex=s}function yn(){const s=St.lFrame;return Ko(s.tView,s.selectedIndex)}function xa(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:M}=p;v&&(s.contentHooks??(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks??(s.contentHooks=[])).push(u,I),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(u,I)),b&&(s.viewHooks??(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks??(s.viewHooks=[])).push(u,A),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(u,A)),null!=M&&(s.destroyHooks??(s.destroyHooks=[])).push(u,M)}}function ao(s,o,u){Ma(s,o,3,u)}function Hc(s,o,u,l){(3&s[Mt])===u&&Ma(s,o,u,l)}function Rs(s,o){let u=s[Mt];(3&u)===o&&(u&=2047,u+=1,s[Mt]=u)}function Ma(s,o,u,l){const p=l??-1,v=o.length-1;let I=0;for(let b=void 0!==l?65535&s[Xs]:0;b<v;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=l&&I>=l)break}else o[b]<0&&(s[Xs]+=65536),(I<p||-1==p)&&(Pa(s,u,o,b),s[Xs]=(4294901760&s[Xs])+b+2),b++}function Pa(s,o,u,l){const d=u[l]<0,p=u[l+1],I=s[d?-u[l]:u[l]];if(d){if(s[Mt]>>11<s[Xs]>>16&&(3&s[Mt])===o){s[Mt]+=2048,Kr(4,I,p);try{p.call(I)}finally{Kr(5,I,p)}}}else{Kr(4,I,p);try{p.call(I)}finally{Kr(5,I,p)}}}const Xo=-1;class xs{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function Dn(s,o,u){let l=0;for(;l<u.length;){const d=u[l];if("number"==typeof d){if(0!==d)break;l++;const p=u[l++],v=u[l++],I=u[l++];s.setAttribute(o,v,I,p)}else{const p=d,v=u[++l];is(p)?s.setProperty(o,p,v):s.setAttribute(o,p,v),l++}}return l}function ka(s){return 3===s||4===s||6===s}function is(s){return 64===s.charCodeAt(0)}function ss(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||Jo(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function Jo(s,o,u,l,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===u){if(null===l)return void(null!==d&&(s[p+1]=d));if(l===s[p+1])return void(s[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,u),null!==l&&s.splice(p++,0,l),null!==d&&s.splice(p++,0,d)}function Gc(s){return s!==Xo}function Oa(s){return 32767&s}function Su(s,o){let u=function Tu(s){return s>>16}(s),l=o;for(;u>0;)l=l[yi],u--;return l}let Ms=!0;function ea(s){const o=Ms;return Ms=s,o}const La=255,Fa=5;let Au=0;const wr={};function na(s,o){const u=Va(s,o);if(-1!==u)return u;const l=o[Je];l.firstCreatePass&&(s.injectorIndex=o.length,Ps(l.data,s),Ps(o,null),Ps(l.blueprint,null));const d=Ru(s,o),p=s.injectorIndex;if(Gc(d)){const v=Oa(d),I=Su(d,o),b=I[Je].data;for(let A=0;A<8;A++)o[p+A]=I[v+A]|b[v+A]}return o[p+8]=d,p}function Ps(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Va(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ru(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){if(l=Wc(d),null===l)return Xo;if(u++,d=d[yi],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return Xo}function Ba(s,o,u){!function Ua(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(Ui)&&(l=u[Ui]),null==l&&(l=u[Ui]=Au++);const d=l&La;o.data[s+(d>>Fa)]|=1<<d}(s,o,u)}function lo(s,o,u){if(u&pt.Optional||void 0!==s)return s;$e()}function ja(s,o,u,l){if(u&pt.Optional&&void 0===l&&(l=null),!(u&(pt.Self|pt.Host))){const d=s[Fo],p=bn(void 0);try{return d?d.get(o,l,u&pt.Optional):gr(o,l,u&pt.Optional)}finally{bn(p)}}return lo(l,0,u)}function Ad(s,o,u,l=pt.Default,d){if(null!==s){if(1024&o[Mt]){const v=function Md(s,o,u,l,d){let p=s,v=o;for(;null!==p&&null!==v&&1024&v[Mt]&&!(256&v[Mt]);){const I=$i(p,v,u,l|pt.Self,wr);if(I!==wr)return I;let b=p.parent;if(!b){const A=v[es];if(A){const M=A.get(u,wr,l);if(M!==wr)return M}b=Wc(v),v=v[yi]}p=b}return d}(s,o,u,l,wr);if(v!==wr)return v}const p=$i(s,o,u,l,wr);if(p!==wr)return p}return ja(o,u,l,d)}function $i(s,o,u,l,d){const p=function Rd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ui)?s[Ui]:void 0;return"number"==typeof o?o>=0?o&La:Ug:o}(u);if("function"==typeof p){if(!lf(o,s,l))return l&pt.Host?lo(d,0,l):ja(o,u,l,d);try{const v=p(l);if(null!=v||l&pt.Optional)return v;$e()}finally{Cd()}}else if("number"==typeof p){let v=null,I=Va(s,o),b=Xo,A=l&pt.Host?o[yr][Hn]:null;for((-1===I||l&pt.SkipSelf)&&(b=-1===I?Ru(s,o):o[I+8],b!==Xo&&os(l,!1)?(v=o[Je],I=Oa(b),o=Su(b,o)):I=-1);-1!==I;){const M=o[Je];if(Mu(p,I,M.data)){const F=xu(I,o,u,v,l,A);if(F!==wr)return F}b=o[I+8],b!==Xo&&os(l,o[Je].data[I+8]===A)&&Mu(p,I,o)?(v=M,I=Oa(b),o=Su(b,o)):I=-1}}return d}function xu(s,o,u,l,d,p){const v=o[Je],I=v.data[s+8],M=ho(I,v,u,null==l?Ei(I)&&Ms:l!=v&&0!=(3&I.type),d&pt.Host&&p===I);return null!==M?Hi(o,v,M,I):wr}function ho(s,o,u,l,d){const p=s.providerIndexes,v=o.data,I=1048575&p,b=s.directiveStart,M=p>>20,B=d?I+M:s.directiveEnd;for(let J=l?I:I+M;J<B;J++){const ve=v[J];if(J<b&&u===ve||J>=b&&ve.type===u)return J}if(d){const J=v[b];if(J&&qr(J)&&J.type===u)return b}return null}function Hi(s,o,u,l){let d=s[u];const p=o.data;if(function oi(s){return s instanceof xs}(d)){const v=d;v.resolving&&function De(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new _e(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ae(s)}(p[u]));const I=ea(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?bn(v.injectImpl):null;lf(s,l,pt.Default);try{d=s[u]=v.factory(void 0,p,s,l),o.firstCreatePass&&u>=l.directiveStart&&function Fg(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const v=Ho(o);(u.preOrderHooks??(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks??(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==b&&bn(b),ea(I),v.resolving=!1,Cd()}}return d}function Mu(s,o,u){return!!(u[o+(s>>Fa)]&1<<s)}function os(s,o){return!(s&pt.Self||s&pt.Host&&o)}class Ii{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return Ad(this._tNode,this._lView,o,q(l),u)}}function Ug(){return new Ii(ur(),ye())}function xd(s){return fn(()=>{const o=s.prototype.constructor,u=o[ar]||Pu(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const p=d[ar]||Pu(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Pu(s){return Ge(s)?()=>{const o=Pu(Q(s));return o&&o()}:to(s)}function Wc(s){const o=s[Je],u=o.type;return 2===u?o.declTNode:1===u?s[Hn]:null}function Nu(s){return function zc(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const p=u[d];if(ka(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(ur(),s)}const $a="__parameters__";function Ha(s,o,u){return fn(()=>{const l=function pf(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const v=new d(...p);return I.annotation=v,I;function I(b,A,M){const F=b.hasOwnProperty($a)?b[$a]:Object.defineProperty(b,$a,{value:[]})[$a];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(v),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Kt{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Ze({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Gi(s,o){s.forEach(u=>Array.isArray(u)?Gi(u,o):o(u))}function Vu(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Ga(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const vn=ze(Ha("Optional"),8),T=ze(Ha("SkipSelf"),4);var cs=(()=>((cs=cs||{})[cs.Important=1]="Important",cs[cs.DashCase=2]="DashCase",cs))();const Hu=new Map;let Ny=0;const Wa="__ngContext__";function Nr(s,o){Wr(o)?(s[Wa]=o[Ss],function ky(s){Hu.set(s[Ss],s)}(o)):s[Wa]=o}let Bd;function jd(s,o){return Bd(s,o)}function ol(s){const o=s[_n];return wi(o)?o[_n]:o}function al(s){return cl(s[Ts])}function ul(s){return cl(s[Ar])}function cl(s){for(;null!==s&&!wi(s);)s=s[Ar];return s}function ca(s,o,u,l,d){if(null!=l){let p,v=!1;wi(l)?p=l:Wr(l)&&(v=!0,l=l[ii]);const I=Un(l);0===s&&null!==u?null==d?Hd(o,u,I):ai(o,u,I,d||null,!0):1===s&&null!==u?ai(o,u,I,d||null,!0):2===s?function Gu(s,o,u){const l=ds(s,o);l&&function Vy(s,o,u,l){s.removeChild(o,u,l)}(s,l,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=p&&function Bf(s,o,u,l,d){const p=u[Bo];p!==Un(u)&&ca(o,s,l,p,d);for(let I=vr;I<u.length;I++){const b=u[I];qa(b[Je],b,s,o,l,p)}}(o,s,p,u,d)}}function ll(s,o,u){return s.createElement(o,u)}function kf(s,o){const u=s[Rr],l=u.indexOf(o),d=o[_n];512&o[Mt]&&(o[Mt]&=-513,Sa(d,-1)),u.splice(l,1)}function Of(s,o){if(s.length<=vr)return;const u=vr+o,l=s[u];if(l){const d=l[Vo];null!==d&&d!==s&&kf(d,l),o>0&&(s[u-1][Ar]=l[Ar]);const p=Ga(s,vr+o);!function Ly(s,o){qa(s,o,o[Pt],2,null,null),o[ii]=null,o[Hn]=null}(l[Je],l);const v=p[vi];null!==v&&v.detachView(p[Je]),l[_n]=null,l[Ar]=null,l[Mt]&=-65}return l}function Zg(s,o){if(!(128&o[Mt])){const u=o[Pt];u.destroyNode&&qa(s,o,u,3,null,null),function Kg(s){let o=s[Ts];if(!o)return $d(s[Je],s);for(;o;){let u=null;if(Wr(o))u=o[Ts];else{const l=o[vr];l&&(u=l)}if(!u){for(;o&&!o[Ar]&&o!==s;)Wr(o)&&$d(o[Je],o),o=o[_n];null===o&&(o=s),Wr(o)&&$d(o[Je],o),u=o&&o[Ar]}o=u}}(o)}}function $d(s,o){if(!(128&o[Mt])){o[Mt]&=-65,o[Mt]|=128,function hl(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof xs)){const p=u[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const I=d[p[v]],b=p[v+1];Kr(4,I,b);try{b.call(I)}finally{Kr(5,I,b)}}else{Kr(4,d,p);try{p.call(d)}finally{Kr(5,d,p)}}}}}(s,o),function Yg(s,o){const u=s.cleanup,l=o[_i];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+3];v>=0?l[d=v]():l[d=-v].unsubscribe(),p+=2}else{const v=l[d=u[p+1]];u[p].call(v)}if(null!==l){for(let p=d+1;p<l.length;p++)(0,l[p])();o[_i]=null}}(s,o),1===o[Je].type&&o[Pt].destroy();const u=o[Vo];if(null!==u&&wi(o[_n])){u!==o[_n]&&kf(u,o);const l=o[vi];null!==l&&l.detachView(s)}!function Hg(s){Hu.delete(s[Ss])}(o)}}function Qg(s,o,u){return function Lf(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[ii];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:p}=s.data[l.directiveStart+d];if(p===Fn.None||p===Fn.Emulated)return null}return Gn(l,u)}}(s,o.parent,u)}function ai(s,o,u,l,d){s.insertBefore(o,u,l,d)}function Hd(s,o,u){s.appendChild(o,u)}function Xg(s,o,u,l,d){null!==l?ai(s,o,u,l,d):Hd(s,o,u)}function ds(s,o){return s.parentNode(o)}let Uf,Yd,gn,Wd=function Jg(s,o,u){return 40&s.type?Gn(s,u):null};function mo(s,o,u,l){const d=Qg(s,l,o),p=o[Pt],I=function Ff(s,o,u){return Wd(s,o,u)}(l.parent||o[Hn],l,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)Xg(p,d,u[b],I,!1);else Xg(p,d,u,I,!1);void 0!==Uf&&Uf(p,l,o,u,d)}function fl(s,o){if(null!==o){const u=o.type;if(3&u)return Gn(o,s);if(4&u)return pl(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return fl(s,l);{const d=s[o.index];return wi(d)?pl(-1,d):Un(d)}}if(32&u)return jd(o,s)()||Un(s[o.index]);{const l=Vf(s,o);return null!==l?Array.isArray(l)?l[0]:fl(ol(s[yr]),l):fl(s,o.next)}}return null}function Vf(s,o){return null!==o?s[yr][Hn].projection[o.projection]:null}function pl(s,o){const u=vr+s+1;if(u<o.length){const l=o[u],d=l[Je].firstChild;if(null!==d)return fl(l,d)}return o[Bo]}function qd(s,o,u,l,d,p,v){for(;null!=u;){const I=l[u.index],b=u.type;if(v&&0===o&&(I&&Nr(Un(I),l),u.flags|=2),32!=(32&u.flags))if(8&b)qd(s,o,u.child,l,d,p,!1),ca(o,s,d,I,p);else if(32&b){const A=jd(u,l);let M;for(;M=A();)ca(o,s,d,M,p);ca(o,s,d,I,p)}else 16&b?_o(s,o,l,u,d,p):ca(o,s,d,I,p);u=v?u.projectionNext:u.next}}function qa(s,o,u,l,d,p){qd(u,l,s.firstChild,o,d,p,!1)}function _o(s,o,u,l,d,p){const v=u[yr],b=v[Hn].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)ca(o,s,d,b[A],p);else qd(s,o,b,v[_n],d,p,!0)}function gl(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function Kd(s,o,u){const{mergedAttrs:l,classes:d,styles:p}=u;null!==l&&Dn(s,o,l),null!==d&&gl(s,o,d),null!==p&&function nm(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function ml(s){Yd=s}function y(s){return function Lt(){if(void 0===gn&&(gn=null,cn.trustedTypes))try{gn=cn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return gn}()?.createScriptURL(s)||s}class f{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rt})`}}function oe(s){return s instanceof f?s.changingThisBreaksApplicationSecurity:s}function Le(s,o){const u=function tt(s){return s instanceof f&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${rt})`)}return u===o}const Xd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var On=(()=>((On=On||{})[On.NONE=0]="NONE",On[On.HTML=1]="HTML",On[On.STYLE=2]="STYLE",On[On.SCRIPT=3]="SCRIPT",On[On.URL=4]="URL",On[On.RESOURCE_URL=5]="RESOURCE_URL",On))();function Ot(s){const o=wl();return o?o.sanitize(On.URL,s)||"":Le(s,"URL")?oe(s):function Ti(s){return(s=String(s)).match(Xd)?s:"unsafe:"+s}(Ae(s))}function cE(s){const o=wl();if(o)return y(o.sanitize(On.RESOURCE_URL,s)||"");if(Le(s,"ResourceURL"))return y(oe(s));throw new _e(904,!1)}function lE(s,o,u){return function $y(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?cE:Ot}(o,u)(s)}function wl(){const s=ye();return s&&s[Tc]}const um=new Kt("ENVIRONMENT_INITIALIZER"),Hy=new Kt("INJECTOR",-1),hE=new Kt("INJECTOR_DEF_TYPES");class Gy{get(o,u=mi){if(u===mi){const l=new Error(`NullInjectorError: No provider for ${pe(o)}!`);throw l.name="NullInjectorError",l}return u}}function fE(...s){return{\u0275providers:El(0,s),\u0275fromNgModule:!0}}function El(s,...o){const u=[],l=new Set;let d;return Gi(o,p=>{const v=p;Il(v,u,[],l)&&(d||(d=[]),d.push(v))}),void 0!==d&&th(d,u),u}function th(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];Wf(d,p=>{o.push(p)})}}function Il(s,o,u,l){if(!(s=Q(s)))return!1;let d=null,p=Jn(s);const v=!p&&en(s);if(p||v){if(v&&!v.standalone)return!1;d=s}else{const b=s.ngModule;if(p=Jn(b),!p)return!1;d=b}const I=l.has(d);if(v){if(I)return!1;if(l.add(d),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of b)Il(A,o,u,l)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let A;l.add(d);try{Gi(p.imports,M=>{Il(M,o,u,l)&&(A||(A=[]),A.push(M))})}finally{}void 0!==A&&th(A,o)}if(!I){const A=to(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:zt},{provide:hE,useValue:d,multi:!0},{provide:um,useValue:()=>$(d),multi:!0})}const b=p.providers;null==b||I||Wf(b,M=>{o.push(M)})}}return d!==s&&void 0!==s.providers}function Wf(s,o){for(let u of s)Se(u)&&(u=u.\u0275providers),Array.isArray(u)?Wf(u,o):o(u)}const qf=ie({provide:String,useValue:ie});function zy(s){return null!==s&&"object"==typeof s&&qf in s}function bl(s){return"function"==typeof s}const Zf=new Kt("Set Injector scope."),cm={},Wy={};let qy;function Cl(){return void 0===qy&&(qy=new Gy),qy}class zu{}class Ky extends zu{get destroyed(){return this._destroyed}constructor(o,u,l,d){super(),this.parent=u,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dm(o,v=>this.processProvider(v)),this.records.set(Hy,Wu(void 0,this)),d.has("environment")&&this.records.set(zu,Wu(void 0,this));const p=this.records.get(Zf);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(hE.multi,zt,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Gt(this),l=bn(void 0);try{return o()}finally{Gt(u),bn(l)}}get(o,u=mi,l=pt.Default){this.assertNotDestroyed(),l=q(l);const d=Gt(this),p=bn(void 0);try{if(!(l&pt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function ZD(s){return"function"==typeof s||"object"==typeof s&&s instanceof Kt}(o)&&Vt(o);I=b&&this.injectableDefInScope(b)?Wu(nh(o),cm):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&pt.Self?Cl():this.parent).get(o,u=l&pt.Optional&&u===mi?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Mn]=v[Mn]||[]).unshift(pe(o)),d)throw v;return function hn(s,o,u,l){const d=s[Mn];throw o[tn]&&d.unshift(o[tn]),s.message=function nn(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==Po?s.slice(2):s;let d=pe(o);if(Array.isArray(o))d=o.map(pe).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];p.push(v+":"+("string"==typeof I?JSON.stringify(I):pe(I)))}d=`{${p.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(or,"\n  ")}`}("\n"+s.message,d,u,l),s[Qi]=d,s[Mn]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{bn(p),Gt(d)}}resolveInjectorInitializers(){const o=Gt(this),u=bn(void 0);try{const l=this.get(um.multi,zt,pt.Self);for(const d of l)d()}finally{Gt(o),bn(u)}}toString(){const o=[],u=this.records;for(const l of u.keys())o.push(pe(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(o){let u=bl(o=Q(o))?o:Q(o&&o.provide);const l=function lm(s){return zy(s)?Wu(void 0,s.useValue):Wu(function Dl(s,o,u){let l;if(bl(s)){const d=Q(s);return to(d)||nh(d)}if(zy(s))l=()=>Q(s.useValue);else if(function pE(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...xe(s.deps||[]));else if(function Kf(s){return!(!s||!s.useExisting)}(s))l=()=>$(Q(s.useExisting));else{const d=Q(s&&(s.useClass||s.provide));if(!function Zy(s){return!!s.deps}(s))return to(d)||nh(d);l=()=>new d(...xe(s.deps))}return l}(s),cm)}(o);if(bl(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Wu(void 0,cm,!0),d.factory=()=>xe(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,l)}hydrate(o,u){return u.value===cm&&(u.value=Wy,u.value=u.factory()),"object"==typeof u.value&&u.value&&function KD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Q(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function nh(s){const o=Vt(s),u=null!==o?o.factory:to(s);if(null!==u)return u;if(s instanceof Kt)throw new _e(204,!1);if(s instanceof Function)return function qD(s){const o=s.length;if(o>0)throw function ra(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?"),new _e(204,!1);const u=function qn(s){return s&&(s[wn]||s[Gr])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new _e(204,!1)}function Wu(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function dm(s,o){for(const u of s)Array.isArray(u)?dm(u,o):u&&Se(u)?dm(u.\u0275providers,o):o(u)}class YD{}class gE{}class Yy{resolveComponentFactory(o){throw function QD(s){const o=Error(`No component factory found for ${pe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Tl=(()=>{class s{}return s.NULL=new Yy,s})();function hm(){return la(ur(),ye())}function la(s,o){return new vo(Gn(s,o))}let vo=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=hm,s})();function rh(s){return s instanceof vo?s.nativeElement:s}class Za{}let XD=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function JD(){const s=ye(),u=Kn(ur().index,s);return(Wr(u)?u:s)[Pt]}(),s})(),Yf=(()=>{class s{}return s.\u0275prov=Ze({token:s,providedIn:"root",factory:()=>null}),s})();class _E{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const yE=new _E("15.2.9"),ih={},Sl="ngOriginalError";function sh(s){return s[Sl]}class wo{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&sh(o);for(;u&&sh(u);)u=sh(u);return u||null}}function Ai(s){return s instanceof Function?s():s}function bE(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||s.charCodeAt(d+p)<=32)return d}u=d+1}}const CE="ng-template";function tT(s,o,u){let l=0,d=!0;for(;l<s.length;){let p=s[l++];if("string"==typeof p&&d){const v=s[l++];if(u&&"class"===p&&-1!==bE(v.toLowerCase(),o,0))return!0}else{if(1===p){for(;l<s.length&&"string"==typeof(p=s[l++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function DE(s){return 4===s.type&&s.value!==CE}function nT(s,o,u){return o===(4!==s.type||u?s.value:CE)}function rT(s,o,u){let l=4;const d=s.attrs||[],p=function sT(s){for(let o=0;o<s.length;o++)if(ka(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!v)if(4&l){if(l=2|1&l,""!==b&&!nT(s,b,u)||""===b&&1===o.length){if(Io(l))return!1;v=!0}}else{const A=8&l?b:o[++I];if(8&l&&null!==s.attrs){if(!tT(s.attrs,A,u)){if(Io(l))return!1;v=!0}continue}const F=TE(8&l?"class":b,d,DE(s),u);if(-1===F){if(Io(l))return!1;v=!0;continue}if(""!==A){let B;B=F>p?"":d[F+1].toLowerCase();const J=8&l?B:null;if(J&&-1!==bE(J,A,0)||2&l&&A!==B){if(Io(l))return!1;v=!0}}}}else{if(!v&&!Io(l)&&!Io(b))return!1;if(v&&Io(b))continue;v=!1,l=b|1&l}}return Io(l)||v}function Io(s){return 0==(1&s)}function TE(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function oT(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function tv(s,o,u=!1){for(let l=0;l<o.length;l++)if(rT(s,o[l],u))return!0;return!1}function SE(s,o){return s?":not("+o.trim()+")":o}function uT(s){let o=s[0],u=1,l=2,d="",p=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&l){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!Io(v)&&(o+=SE(p,d),d=""),l=v,p=p||!Io(l);u++}return""!==d&&(o+=SE(p,d)),o}const Nt={};function Jf(s){AE(Zt(),ye(),Mr()+s,!1)}function AE(s,o,u,l){if(!l)if(3==(3&o[Mt])){const p=s.preOrderCheckHooks;null!==p&&ao(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Hc(o,p,0,u)}Yo(u)}function PE(s,o=null,u=null,l){const d=NE(s,o,u,l);return d.resolveInjectorInitializers(),d}function NE(s,o=null,u=null,l,d=new Set){const p=[u||zt,fE(s)];return l=l||("object"==typeof s?void 0:pe(s)),new Ky(p,o||Cl(),l||null,d)}let Zu=(()=>{class s{static create(u,l){if(Array.isArray(u))return PE({name:""},l,u,"");{const d=u.name??"";return PE({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=mi,s.NULL=new Gy,s.\u0275prov=Ze({token:s,providedIn:"any",factory:()=>$(Hy)}),s.__NG_ELEMENT_ID__=-1,s})();function Al(s,o=pt.Default){const u=ye();return null===u?$(s,o):Ad(ur(),u,Q(s),o)}function Ya(){throw new Error("invalid")}function tp(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const p=u[l+1];if(-1!==p){const v=s.data[p];jc(u[l]),v.contentQueries(2,o[p],p)}}}function bm(s,o,u,l,d,p,v,I,b,A,M){const F=o.blueprint.slice();return F[ii]=d,F[Mt]=76|l,(null!==M||s&&1024&s[Mt])&&(F[Mt]|=1024),Ta(F),F[_n]=F[yi]=s,F[Cn]=u,F[Uo]=v||s&&s[Uo],F[Pt]=I||s&&s[Pt],F[Tc]=b||s&&s[Tc]||null,F[Fo]=A||s&&s[Fo]||null,F[Hn]=p,F[Ss]=function Df(){return Ny++}(),F[es]=M,F[yr]=2==o.type?s[yr]:F,F}function Rl(s,o,u,l,d){let p=s.data[o];if(null===p)p=function np(s,o,u,l,d){const p=Aa(),v=Eu(),b=s.data[o]=function Dm(s,o,u,l,d,p){return{type:u,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(s,o,u,l,d),function wd(){return St.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=l,p.attrs=d;const v=function wu(){const s=St.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Zr(p,!0),p}function rp(s,o,u,l){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function da(s,o,u){Cu(o);try{const l=s.viewQuery;null!==l&&pv(1,l,u);const d=s.template;null!==d&&BE(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&tp(s,o),s.staticViewQueries&&pv(2,s.viewQuery,u);const p=s.components;null!==p&&function ET(s,o){for(let u=0;u<o.length;u++)QE(s,o[u])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[Mt]&=-5,Og()}}function Qu(s,o,u,l){const d=o[Mt];if(128!=(128&d)){Cu(o);try{Ta(o),function As(s){return St.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&BE(s,o,u,2,l);const v=3==(3&d);if(v){const A=s.preOrderCheckHooks;null!==A&&ao(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Hc(o,A,0,null),Rs(o,0)}if(function YE(s){for(let o=al(s);null!==o;o=ul(o)){if(!o[fd])continue;const u=o[Rr];for(let l=0;l<u.length;l++){const d=u[l];512&d[Mt]||Sa(d[_n],1),d[Mt]|=512}}}(o),function fv(s){for(let o=al(s);null!==o;o=ul(o))for(let u=vr;u<o.length;u++){const l=o[u],d=l[Je];Zo(l)&&Qu(d,l,d.template,l[Cn])}}(o),null!==s.contentQueries&&tp(s,o),v){const A=s.contentCheckHooks;null!==A&&ao(o,A)}else{const A=s.contentHooks;null!==A&&Hc(o,A,1),Rs(o,1)}!function Im(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let l=0;l<u.length;l++){const d=u[l];if(d<0)Yo(~d);else{const p=d,v=u[++l],I=u[++l];Ed(v,p),I(2,o[p])}}}finally{Yo(-1)}}(s,o);const I=s.components;null!==I&&function wT(s,o){for(let u=0;u<o.length;u++)RT(s,o[u])}(o,I);const b=s.viewQuery;if(null!==b&&pv(2,b,l),v){const A=s.viewCheckHooks;null!==A&&ao(o,A)}else{const A=s.viewHooks;null!==A&&Hc(o,A,2),Rs(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Mt]&=-41,512&o[Mt]&&(o[Mt]&=-513,Sa(o[_n],-1))}finally{Og()}}}function BE(s,o,u,l,d){const p=Mr(),v=2&l;try{Yo(-1),v&&o.length>ln&&AE(s,o,ln,!1),Kr(v?2:0,d),u(l,d)}finally{Yo(p),Kr(v?3:1,d)}}function uv(s,o,u){if(Ea(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}function cv(s,o,u){vu()&&(function CT(s,o,u,l){const d=u.directiveStart,p=u.directiveEnd;Ei(u)&&function ZE(s,o,u){const l=Gn(o,s),d=jE(u),p=s[Uo],v=Ju(s,bm(s,d,null,u.onPush?32:16,l,o,p,p.createRenderer(l,u),null,null,null));s[o.index]=v}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||na(u,o),Nr(l,o);const v=u.initialInputs;for(let I=d;I<p;I++){const b=s.data[I],A=Hi(o,s,I,u);Nr(A,o),null!==v&&hv(0,I-d,A,b,0,v),qr(b)&&(Kn(u.index,o)[Cn]=Hi(o,s,I,u))}}(s,o,u,Gn(u,o)),64==(64&u.flags)&&qE(s,o,u))}function ah(s,o,u=Gn){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const v=l[p+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function jE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Cm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Cm(s,o,u,l,d,p,v,I,b,A){const M=ln+l,F=M+d,B=function IT(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:Nt);return u}(M,F),J="function"==typeof A?A():A;return B[Je]={type:s,blueprint:B,template:u,queries:null,viewQuery:I,declTNode:o,data:B.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:J,incompleteFirstPass:!1}}function lv(s,o,u,l){const d=cp(o);null===u?d.push(l):(d.push(u),s.firstCreatePass&&gv(s).push(l,d.length-1))}function HE(s,o,u,l){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const p=s[d];null===l?xl(u,o,d,p):l.hasOwnProperty(d)&&xl(u,o,l[d],p)}return u}function xl(s,o,u,l){s.hasOwnProperty(u)?s[u].push(o,l):s[u]=[o,l]}function zi(s,o,u,l,d,p,v,I){const b=Gn(o,u);let M,A=o.inputs;!I&&null!=A&&(M=A[l])?(Bs(s,u,M,l,d),Ei(o)&&function ip(s,o){const u=Kn(o,s);16&u[Mt]||(u[Mt]|=32)}(u,o.index)):3&o.type&&(l=function zE(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,p.setProperty(b,l,d))}function sp(s,o,u,l){if(vu()){const d=null===l?null:{"":-1},p=function dv(s,o){const u=s.directiveRegistry;let l=null,d=null;if(u)for(let p=0;p<u.length;p++){const v=u[p];if(tv(o,v.selectors,!1))if(l||(l=[]),qr(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),l.unshift(...I,v),ap(s,o,I.length)}else l.unshift(v),ap(s,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,l,d),l.push(v)}return null===l?null:[l,d]}(s,u);let v,I;null===p?v=I=null:[v,I]=p,null!==v&&Sm(s,o,u,v,d,I),d&&function TT(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new _e(-301,!1);l.push(o[d],p)}}}(u,l,d)}u.mergedAttrs=ss(u.mergedAttrs,u.attrs)}function Sm(s,o,u,l,d,p){for(let A=0;A<l.length;A++)Ba(na(u,o),s,l[A].type);!function ST(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,l.length);for(let A=0;A<l.length;A++){const M=l[A];M.providersResolver&&M.providersResolver(M)}let v=!1,I=!1,b=rp(s,o,l.length,null);for(let A=0;A<l.length;A++){const M=l[A];u.mergedAttrs=ss(u.mergedAttrs,M.hostAttrs),AT(s,u,o,b,M),KE(b,M,d),null!==M.contentQueries&&(u.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(u.flags|=64);const F=M.type.prototype;!v&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(u.index),v=!0),!I&&(F.ngOnChanges||F.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(u.index),I=!0),b++}!function GE(s,o,u){const d=o.directiveEnd,p=s.data,v=o.attrs,I=[];let b=null,A=null;for(let M=o.directiveStart;M<d;M++){const F=p[M],B=u?u.get(F):null,ve=B?B.outputs:null;b=HE(F.inputs,M,b,B?B.inputs:null),A=HE(F.outputs,M,A,ve);const Ce=null===b||null===v||DE(o)?null:Am(b,M,v);I.push(Ce)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=b,o.outputs=A}(s,u,p)}function qE(s,o,u){const l=u.directiveStart,d=u.directiveEnd,p=u.index,v=function Vc(){return St.lFrame.currentDirectiveIndex}();try{Yo(p);for(let I=l;I<d;I++){const b=s.data[I],A=o[I];Bc(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&DT(b,A)}}finally{Yo(-1),Bc(v)}}function DT(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function ap(s,o,u){o.componentOffset=u,(s.components??(s.components=[])).push(o.index)}function KE(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;qr(o)&&(u[""]=s)}}function AT(s,o,u,l,d){s.data[l]=d;const p=d.factory||(d.factory=to(d.type)),v=new xs(p,qr(d),Al);s.blueprint[l]=v,u[l]=v,function bT(s,o,u,l,d){const p=d.hostBindings;if(p){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const I=~o.index;(function op(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=I&&v.push(I),v.push(u,l,p)}}(s,o,l,rp(s,u,d.hostVars,Nt),d)}function Vs(s,o,u,l,d,p){const v=Gn(s,o);!function up(s,o,u,l,d,p,v){if(null==p)s.removeAttribute(o,d,u);else{const I=null==v?Ae(p):v(p,l||"",d);s.setAttribute(o,d,I,u)}}(o[Pt],v,p,s.value,u,l,d)}function hv(s,o,u,l,d,p){const v=p[o];if(null!==v){const I=l.setInput;for(let b=0;b<v.length;){const A=v[b++],M=v[b++],F=v[b++];null!==I?l.setInput(u,F,A,M):u[M]=F}}}function Am(s,o,u){let l=null,d=0;for(;d<u.length;){const p=u[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===l&&(l=[]);const v=s[p];for(let I=0;I<v.length;I+=2)if(v[I]===o){l.push(p,v[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function Xu(s,o,u,l){return[s,!0,!1,o,null,0,l,u,null,null]}function RT(s,o){const u=Kn(o,s);if(Zo(u)){const l=u[Je];48&u[Mt]?Qu(l,u,l.template,u[Cn]):u[Ji]>0&&uh(u)}}function uh(s){for(let l=al(s);null!==l;l=ul(l))for(let d=vr;d<l.length;d++){const p=l[d];if(Zo(p))if(512&p[Mt]){const v=p[Je];Qu(v,p,v.template,p[Cn])}else p[Ji]>0&&uh(p)}const u=s[Je].components;if(null!==u)for(let l=0;l<u.length;l++){const d=Kn(u[l],s);Zo(d)&&d[Ji]>0&&uh(d)}}function QE(s,o){const u=Kn(o,s),l=u[Je];(function xT(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(l,u),da(l,u,u[Cn])}function Ju(s,o){return s[Ts]?s[Sc][Ar]=o:s[Ts]=o,s[Sc]=o,o}function ch(s){for(;s;){s[Mt]|=32;const o=ol(s);if(Ia(s)&&!o)return s;s=o}return null}function Rm(s,o,u,l=!0){const d=o[Uo];d.begin&&d.begin();try{Qu(s,o,s.template,u)}catch(v){throw l&&lh(o,v),v}finally{d.end&&d.end()}}function pv(s,o,u){jc(0),o(s,u)}function cp(s){return s[_i]||(s[_i]=[])}function gv(s){return s.cleanup||(s.cleanup=[])}function lh(s,o){const u=s[Fo],l=u?u.get(wo,null):null;l&&l.handleError(o)}function Bs(s,o,u,l,d){for(let p=0;p<u.length;){const v=u[p++],I=u[p++],b=o[v],A=s.data[v];null!==A.setInput?A.setInput(b,d,l,I):b[I]=d}}function fs(s,o,u){const l=function io(s,o){return Un(o[s])}(o,s);!function Pf(s,o,u){s.setValue(o,u)}(s[Pt],l,u)}function xm(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?p=I:1==p?d=fe(d,I):2==p&&(l=fe(l,I+": "+o[++v]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}function lp(s,o,u,l,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&l.push(Un(p)),wi(p))for(let I=vr;I<p.length;I++){const b=p[I],A=b[Je].firstChild;null!==A&&lp(b[Je],b,A,l)}const v=u.type;if(8&v)lp(s,o,u.child,l);else if(32&v){const I=jd(u,o);let b;for(;b=I();)l.push(b)}else if(16&v){const I=Vf(o,u);if(Array.isArray(I))l.push(...I);else{const b=ol(o[yr]);lp(b[Je],b,I,l,!0)}}u=d?u.projectionNext:u.next}return l}class Ml{get rootNodes(){const o=this._lView,u=o[Je];return lp(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Cn]}set context(o){this._lView[Cn]=o}get destroyed(){return 128==(128&this._lView[Mt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[_n];if(wi(o)){const u=o[Js],l=u?u.indexOf(this):-1;l>-1&&(Of(o,l),Ga(u,l))}this._attachedToViewContainer=!1}Zg(this._lView[Je],this._lView)}onDestroy(o){lv(this._lView[Je],this._lView,null,o)}markForCheck(){ch(this._cdRefInjectingView||this._lView)}detach(){this._lView[Mt]&=-65}reattach(){this._lView[Mt]|=64}detectChanges(){Rm(this._lView[Je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dl(s,o){qa(s,o,o[Pt],2,null,null)}(this._lView[Je],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=o}}class dp extends Ml{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Rm(o[Je],o,o[Cn],!1)}checkNoChanges(){}get context(){return null}}class dh extends Tl{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=en(o);return new hp(u,this.ngModule)}}function eI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class tI{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,l){l=q(l);const d=this.injector.get(o,ih,l);return d!==ih||u===ih?d:this.parentInjector.get(o,u,l)}}class hp extends gE{get inputs(){return eI(this.componentDef.inputs)}get outputs(){return eI(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function fm(s){return s.map(uT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,l,d){let p=(d=d||this.ngModule)instanceof zu?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new tI(o,p):o,I=v.get(Za,null);if(null===I)throw new _e(407,!1);const b=v.get(Yf,null),A=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",F=l?function $E(s,o,u){return s.selectRootElement(o,u===Fn.ShadowDom)}(A,l,this.componentDef.encapsulation):ll(A,M,function js(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),B=this.componentDef.onPush?288:272,J=Cm(0,null,null,1,0,null,null,null,null,null),ve=bm(null,J,null,B,null,null,I,A,b,v,null);let Ce,Ee;Cu(ve);try{const nt=this.componentDef;let Ke,ke=null;nt.findHostDirectiveDefs?(Ke=[],ke=new Map,nt.findHostDirectiveDefs(nt,Ke,ke),Ke.push(nt)):Ke=[nt];const at=function $s(s,o){const u=s[Je],l=ln;return s[l]=o,Rl(u,l,2,"#host",null)}(ve,F),Oe=function nI(s,o,u,l,d,p,v,I){const b=d[Je];!function PT(s,o,u,l){for(const d of s)o.mergedAttrs=ss(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(xm(o,o.mergedAttrs,!0),null!==u&&Kd(l,u,o))}(l,s,o,v);const A=p.createRenderer(o,u),M=bm(d,jE(u),null,u.onPush?32:16,d[s.index],s,p,A,I||null,null,null);return b.firstCreatePass&&ap(b,s,l.length-1),Ju(d,M),d[s.index]=M}(at,F,nt,Ke,ve,I,A);Ee=Ko(J,ln),F&&function NT(s,o,u,l){if(l)Dn(s,u,["ng-version",yE.full]);else{const{attrs:d,classes:p}=function nv(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++l]):8===d&&u.push(p);else{if(!Io(d))break;d=p}l++}return{attrs:o,classes:u}}(o.selectors[0]);d&&Dn(s,u,d),p&&p.length>0&&gl(s,u,p.join(" "))}}(A,nt,F,l),void 0!==u&&function kT(s,o,u){const l=s.projection=[];for(let d=0;d<o.length;d++){const p=u[d];l.push(null!=p?Array.from(p):null)}}(Ee,this.ngContentSelectors,u),Ce=function rI(s,o,u,l,d,p){const v=ur(),I=d[Je],b=Gn(v,d);Sm(I,d,v,u,null,l);for(let M=0;M<u.length;M++)Nr(Hi(d,I,v.directiveStart+M,v),d);qE(I,d,v),b&&Nr(b,d);const A=Hi(d,I,v.directiveStart+v.componentOffset,v);if(s[Cn]=d[Cn]=A,null!==p)for(const M of p)M(A,o);return uv(I,v,s),A}(Oe,nt,Ke,ke,ve,[OT]),da(J,ve,null)}finally{Og()}return new Mm(this.componentType,Ce,la(Ee,ve),ve,Ee)}}class Mm extends YD{constructor(o,u,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new dp(d),this.componentType=o}setInput(o,u){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const p=this._rootLView;Bs(p[Je],p,d,o,u),ch(Kn(this._tNode.index,p))}}get injector(){return new Ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function OT(){const s=ur();xa(ye()[Je],s)}function fp(s){return!!ha(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function ha(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ui(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Om(s,o,u,l){const d=ye();return ui(d,oo(),o)&&(Zt(),Vs(yn(),d,s,o,u,l)),Om}function Qa(s,o,u,l){return ui(s,oo(),u)?o+Ae(u)+l:Nt}function sc(s,o,u,l,d,p,v,I){const b=ye(),A=Zt(),M=s+ln,F=A.firstCreatePass?function cI(s,o,u,l,d,p,v,I,b){const A=o.consts,M=Rl(o,s,4,v||null,ns(A,I));sp(o,u,M,ns(A,b)),xa(o,M);const F=M.tView=Cm(2,M,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),F.queries=o.queries.embeddedTView(M)),M}(M,A,b,o,u,l,d,p,v):A.data[M];Zr(F,!1);const B=b[Pt].createComment("");mo(A,b,B,F),Nr(B,b),Ju(b,b[M]=Xu(B,b,B,F)),Ac(F)&&cv(A,b,F),null!=v&&ah(b,F,I)}function bv(s,o,u){const l=ye();return ui(l,oo(),o)&&zi(Zt(),yn(),l,s,o,l[Pt],u,!1),bv}function mp(s,o,u,l,d){const v=d?"class":"style";Bs(s,u,o.inputs[v],v,l)}function Lm(s,o,u,l){const d=ye(),p=Zt(),v=ln+s,I=d[Pt],b=p.firstCreatePass?function GT(s,o,u,l,d,p){const v=o.consts,b=Rl(o,s,2,l,ns(v,d));return sp(o,u,b,ns(v,p)),null!==b.attrs&&xm(b,b.attrs,!1),null!==b.mergedAttrs&&xm(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(v,p,d,o,u,l):p.data[v],A=d[v]=ll(I,o,function Lg(){return St.lFrame.currentNamespace}()),M=Ac(b);return Zr(b,!0),Kd(I,A,b),32!=(32&b.flags)&&mo(p,d,A,b),0===function yu(){return St.lFrame.elementDepthCount}()&&Nr(A,d),function Oc(){St.lFrame.elementDepthCount++}(),M&&(cv(p,d,b),uv(p,b,d)),null!==l&&ah(d,b),Lm}function Fm(){let s=ur();Eu()?function Iu(){St.lFrame.isParent=!1}():(s=s.parent,Zr(s,!1));const o=s;!function Lc(){St.lFrame.elementDepthCount--}();const u=Zt();return u.firstCreatePass&&(xa(u,s),Ea(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Sd(s){return 0!=(8&s.flags)}(o)&&mp(u,o,ye(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ff(s){return 0!=(16&s.flags)}(o)&&mp(u,o,ye(),o.stylesWithoutHost,!1),Fm}function Cv(s,o,u,l){return Lm(s,o,u,l),Fm(),Cv}function Bm(s){return!!s&&"function"==typeof s.then}function Dv(s){return!!s&&"function"==typeof s.subscribe}const Tv=Dv;function jm(s,o,u,l){const d=ye(),p=Zt(),v=ur();return function hI(s,o,u,l,d,p,v){const I=Ac(l),A=s.firstCreatePass&&gv(s),M=o[Cn],F=cp(o);let B=!0;if(3&l.type||v){const Ce=Gn(l,o),Ee=v?v(Ce):Ce,nt=F.length,Ke=v?at=>v(Un(at[l.index])):l.index;let ke=null;if(!v&&I&&(ke=function dI(s,o,u,l){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===u&&d[p+1]===l){const I=o[_i],b=d[p+2];return I.length>b?I[b]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,l.index)),null!==ke)(ke.__ngLastListenerFn__||ke).__ngNextListenerFn__=p,ke.__ngLastListenerFn__=p,B=!1;else{p=pI(l,o,M,p,!1);const at=u.listen(Ee,d,p);F.push(p,at),A&&A.push(d,Ke,nt,nt+1)}}else p=pI(l,o,M,p,!1);const J=l.outputs;let ve;if(B&&null!==J&&(ve=J[d])){const Ce=ve.length;if(Ce)for(let Ee=0;Ee<Ce;Ee+=2){const Oe=o[ve[Ee]][ve[Ee+1]].subscribe(p),Vn=F.length;F.push(p,Oe),A&&A.push(d,l.index,Vn,-(Vn+1))}}}(p,d,d[Pt],v,s,o,l),jm}function fI(s,o,u,l){try{return Kr(6,o,u),!1!==u(l)}catch(d){return lh(s,d),!1}finally{Kr(7,o,u)}}function pI(s,o,u,l,d){return function p(v){if(v===Function)return l;ch(s.componentOffset>-1?Kn(s.index,o):o);let b=fI(o,u,l,v),A=p.__ngNextListenerFn__;for(;A;)b=fI(o,u,A,v)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function $m(s,o,u,l,d){const p=ye(),v=Qa(p,o,u,l);return v!==Nt&&zi(Zt(),yn(),p,s,v,p[Pt],d,!1),$m}function Ul(s,o=""){const u=ye(),l=Zt(),d=s+ln,p=l.firstCreatePass?Rl(l,d,1,o,null):l.data[d],v=u[d]=function Mf(s,o){return s.createText(o)}(u[Pt],o);mo(l,u,v,p),Zr(p,!1)}function Ip(s,o,u){const l=ye(),d=Qa(l,s,o,u);return d!==Nt&&fs(l,Mr(),d),Ip}const Vl=void 0;var qm=["en",[["a","p"],["AM","PM"],Vl],[["AM","PM"],Vl,Vl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vl,"{1} 'at' {0}",Vl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xi(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let Bl={};function yh(s){const o=function gS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=KI(o);if(u)return u;const l=o.split("-")[0];if(u=KI(l),u)return u;if("en"===l)return qm;throw new _e(701,!1)}function Km(s){return yh(s)[Dt.PluralCase]}function KI(s){return s in Bl||(Bl[s]=cn.ng&&cn.ng.common&&cn.ng.common.locales&&cn.ng.common.locales[s]),Bl[s]}var Dt=(()=>((Dt=Dt||{})[Dt.LocaleId=0]="LocaleId",Dt[Dt.DayPeriodsFormat=1]="DayPeriodsFormat",Dt[Dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dt[Dt.DaysFormat=3]="DaysFormat",Dt[Dt.DaysStandalone=4]="DaysStandalone",Dt[Dt.MonthsFormat=5]="MonthsFormat",Dt[Dt.MonthsStandalone=6]="MonthsStandalone",Dt[Dt.Eras=7]="Eras",Dt[Dt.FirstDayOfWeek=8]="FirstDayOfWeek",Dt[Dt.WeekendRange=9]="WeekendRange",Dt[Dt.DateFormat=10]="DateFormat",Dt[Dt.TimeFormat=11]="TimeFormat",Dt[Dt.DateTimeFormat=12]="DateTimeFormat",Dt[Dt.NumberSymbols=13]="NumberSymbols",Dt[Dt.NumberFormats=14]="NumberFormats",Dt[Dt.CurrencyCode=15]="CurrencyCode",Dt[Dt.CurrencySymbol=16]="CurrencySymbol",Dt[Dt.CurrencyName=17]="CurrencyName",Dt[Dt.Currencies=18]="Currencies",Dt[Dt.Directionality=19]="Directionality",Dt[Dt.PluralCase=20]="PluralCase",Dt[Dt.ExtraData=21]="ExtraData",Dt))();const jl="en-US";let ZI=jl;class Eh{}class Qv{}function MS(s,o){return new Xv(s,o??null)}class Xv extends Eh{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dh(this);const l=mr(o);this._bootstrapComponents=Ai(l.bootstrap),this._r3Injector=NE(o,u,[{provide:Eh,useValue:this},{provide:Tl,useValue:this.componentFactoryResolver}],pe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class o_ extends Qv{constructor(o){super(),this.moduleType=o}create(o){return new Xv(this.moduleType,o)}}class Eb extends Eh{constructor(o,u,l){super(),this.componentFactoryResolver=new dh(this),this.instance=null;const d=new Ky([...o,{provide:Eh,useValue:this},{provide:Tl,useValue:this.componentFactoryResolver}],u||Cl(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Jv(s,o,u=null){return new Eb(s,o,u).injector}let PS=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const l=El(0,u.type),d=l.length>0?Jv([l],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Ze({token:s,providedIn:"environment",factory:()=>new s($(zu))}),s})();function Ib(s){s.getStandaloneInjector=o=>o.get(PS).getOrCreateStandaloneInjector(s)}function h_(s){return o=>{setTimeout(s,void 0,o)}}const To=class Pi extends _.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){let d=o,p=u||(()=>null),v=l;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),p=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(p=h_(p),d&&(d=h_(d)),v&&(v=h_(v)));const I=super.subscribe({next:d,error:p,complete:v});return o instanceof ee.w0&&o.add(I),I}};function aw(){return this._results[Symbol.iterator]()}class f_{get changes(){return this._changes||(this._changes=new To)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=f_.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=aw)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=function Qr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Yc(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],p=o[l];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let bh=(()=>{class s{}return s.__NG_ELEMENT_ID__=BS,s})();const Pb=bh,uw=class extends Pb{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}createEmbeddedView(o,u){const l=this._declarationTContainer.tView,d=bm(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,u||null);d[Vo]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[vi];return null!==v&&(d[vi]=v.createEmbeddedView(l)),da(l,d,o),new Ml(d)}};function BS(){return p_(ur(),ye())}function p_(s,o){return 4&s.type?new uw(o,s,la(s,o)):null}let ru=(()=>{class s{}return s.__NG_ELEMENT_ID__=Nb,s})();function Nb(){return Lp(ur(),ye())}const cw=ru,lw=class extends cw{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return la(this._hostTNode,this._hostLView)}get injector(){return new Ii(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ru(this._hostTNode,this._hostLView);if(Gc(o)){const u=Su(o,this._hostLView),l=Oa(o);return new Ii(u[Je].data[l+8],u)}return new Ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=kb(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-vr}createEmbeddedView(o,u,l){let d,p;"number"==typeof l?d=l:null!=l&&(d=l.index,p=l.injector);const v=o.createEmbeddedView(u||{},p);return this.insert(v,d),v}createComponent(o,u,l,d,p){const v=o&&!function Uu(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const F=u||{};I=F.index,l=F.injector,d=F.projectableNodes,p=F.environmentInjector||F.ngModuleRef}const b=v?o:new hp(en(o)),A=l||this.parentInjector;if(!p&&null==b.ngModule){const B=(v?A:this.parentInjector).get(zu,null);B&&(p=B)}const M=b.create(A,d,void 0,p);return this.insert(M.hostView,I),M}insert(o,u){const l=o._lView,d=l[Je];if(function mu(s){return wi(s[_n])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const F=l[_n],B=new lw(F,F[Hn],F[_n]);B.detach(B.indexOf(o))}}const p=this._adjustIndex(u),v=this._lContainer;!function Fy(s,o,u,l){const d=vr+l,p=u.length;l>0&&(u[d-1][Ar]=o),l<p-vr?(o[Ar]=u[d],Vu(u,vr+l,o)):(u.push(o),o[Ar]=null),o[_n]=u;const v=o[Vo];null!==v&&u!==v&&function Uy(s,o){const u=s[Rr];o[yr]!==o[_n][_n][yr]&&(s[fd]=!0),null===u?s[Rr]=[o]:u.push(o)}(v,o);const I=o[vi];null!==I&&I.insertView(s),o[Mt]|=64}(d,l,v,p);const I=pl(p,v),b=l[Pt],A=ds(b,v[Bo]);return null!==A&&function qg(s,o,u,l,d,p){l[ii]=d,l[Hn]=o,qa(s,l,u,1,d,p)}(d,v[Hn],b,l,A,I),o.attachToViewContainerRef(),Vu(g_(v),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=kb(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=Of(this._lContainer,u);l&&(Ga(g_(this._lContainer),u),Zg(l[Je],l))}detach(o){const u=this._adjustIndex(o,-1),l=Of(this._lContainer,u);return l&&null!=Ga(g_(this._lContainer),u)?new Ml(l):null}_adjustIndex(o,u=0){return o??this.length+u}};function kb(s){return s[Js]}function g_(s){return s[Js]||(s[Js]=[])}function Lp(s,o){let u;const l=o[s.index];if(wi(l))u=l;else{let d;if(8&s.type)d=Un(l);else{const p=o[Pt];d=p.createComment("");const v=Gn(s,o);ai(p,ds(p,v),d,function zd(s,o){return s.nextSibling(o)}(p,v),!1)}o[s.index]=u=Xu(l,o,d,s),Ju(o,u)}return new lw(u,s,o)}class Fp{constructor(o){this.queryList=o,this.matches=null}clone(){return new Fp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Up{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<l;p++){const v=u.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new Up(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==v_(o,u).matches&&this.queries[u].setDirty()}}class m_{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class dw{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==u?u.push(p):u=[p])}return null!==u?new dw(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class hw{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new hw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,u,fw(u,p)),this.matchTNodeWithReadOption(o,u,ho(u,o,p,!1,!1))}else l===bh?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,ho(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===vo||d===ru||d===bh&&4&u.type)this.addMatch(u.index,-2);else{const p=ho(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function fw(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function jS(s,o,u,l){return-1===u?function Ob(s,o){return 11&s.type?la(s,o):4&s.type?p_(s,o):null}(o,s):-2===u?function $S(s,o,u){return u===vo?la(o,s):u===bh?p_(o,s):u===ru?Lp(o,s):void 0}(s,o,l):Hi(s,s[Je],u,o)}function ei(s,o,u,l){const d=o[vi].queries[l];if(null===d.matches){const p=s.data,v=u.matches,I=[];for(let b=0;b<v.length;b+=2){const A=v[b];I.push(A<0?null:jS(o,p[A],v[b+1],u.metadata.read))}d.matches=I}return d.matches}function Wl(s,o,u,l){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const v=ei(s,o,d,u);for(let I=0;I<p.length;I+=2){const b=p[I];if(b>0)l.push(v[I/2]);else{const A=p[I+1],M=o[-b];for(let F=vr;F<M.length;F++){const B=M[F];B[Vo]===B[_n]&&Wl(B[Je],B,A,l)}if(null!==M[Rr]){const F=M[Rr];for(let B=0;B<F.length;B++){const J=F[B];Wl(J[Je],J,A,l)}}}}}return l}function Lb(s){const o=ye(),u=Zt(),l=Id();jc(l+1);const d=v_(u,l);if(s.dirty&&function Da(s){return 4==(4&s[Mt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Wl(u,o,l,[]):ei(u,o,d,l);s.reset(p,rh),s.notifyOnChanges()}return!0}return!1}function Fb(s,o,u,l){const d=Zt();if(d.firstCreatePass){const p=ur();(function y_(s,o,u){null===s.queries&&(s.queries=new dw),s.queries.track(new hw(o,u))})(d,new m_(o,u,l),p.index),function pw(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Bp(s,o,u){const l=new f_(4==(4&u));lv(s,o,l,l.destroy),null===o[vi]&&(o[vi]=new Up),o[vi].queries.push(new Fp(l))}(d,ye(),u)}function Ub(){return function __(s,o){return s[vi].queries[o].queryList}(ye(),Id())}function v_(s,o){return s.queries.getByIndex(o)}function _w(s){return!!mr(s)}function uc(...s){}const eC=new Kt("Application Initializer");let Th=(()=>{class s{constructor(u){this.appInits=u,this.resolve=uc,this.reject=uc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Bm(p))u.push(p);else if(Tv(p)){const v=new Promise((I,b)=>{p.subscribe({complete:I,error:b})});u.push(v)}}Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)($(eC,8))},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Wp=new Kt("AppId",{providedIn:"root",factory:function S_(){return`${A_()}${A_()}${A_()}`}});function A_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xw=new Kt("Platform Initializer"),eA=new Kt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let x_=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const ma=new Kt("LocaleId",{providedIn:"root",factory:()=>W(ma,pt.Optional|pt.SkipSelf)||function qp(){return typeof $localize<"u"&&$localize.locale||jl}()}),Mw=new Kt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Pw{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Ql=(()=>{class s{compileModuleSync(u){return new o_(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),p=Ai(mr(u).declarations).reduce((v,I)=>{const b=en(I);return b&&v.push(new hp(b)),v},[]);return new Pw(l,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const rC=(()=>Promise.resolve(0))();function An(s){typeof Zone>"u"?rC.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class qs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new To(!1),this.onMicrotaskEmpty=new To(!1),this.onStable=new To(!1),this.onError=new To(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function M_(){let s=cn.requestAnimationFrame,o=cn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function iC(s){const o=()=>{!function nA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(cn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,kw(s),s.isCheckStableRunning=!0,Jl(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),kw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,p,v,I)=>{try{return sC(s),u.invokeTask(d,p,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),oC(s)}},onInvoke:(u,l,d,p,v,I,b)=>{try{return sC(s),u.invoke(d,p,v,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),oC(s)}},onHasTask:(u,l,d,p)=>{u.hasTask(d,p),l===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,kw(s),Jl(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,l,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qs.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(qs.isInAngularZone())throw new _e(909,!1)}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,Yp,uc,uc);try{return p.runTask(v,u,l)}finally{p.cancelTask(v)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const Yp={};function Jl(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function kw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function sC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function oC(s){s._nesting--,Jl(s)}class rA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new To,this.onMicrotaskEmpty=new To,this.onStable=new To,this.onError=new To}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}const Sh=new Kt(""),iu=new Kt("");let cc,aC=(()=>{class s{constructor(u,l,d){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,cc||(function uC(s){cc=s}(d),d.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qs.assertNotInAngularZone(),An(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())An(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,d){return[]}}return s.\u0275fac=function(u){return new(u||s)($(qs),$(Ow),$(iu))},s.\u0275prov=Ze({token:s,factory:s.\u0275fac}),s})(),Ow=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return cc?.findTestabilityInTree(this,u,l)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const su=!1;let lc=null;const Lw=new Kt("AllowMultipleToken"),Fw=new Kt("PlatformDestroyListeners"),Uw=new Kt("appBootstrapListener");class dC{constructor(o,u){this.name=o,this.token=u}}function pC(s,o,u=[]){const l=`Platform: ${o}`,d=new Kt(l);return(p=[])=>{let v=Qp();if(!v||v.injector.get(Lw,!1)){const I=[...u,...p,{provide:d,useValue:!0}];s?s(I):function hC(s){if(lc&&!lc.get(Lw,!1))throw new _e(400,!1);lc=s;const o=s.get($w);(function fC(s){const o=s.get(xw,null);o&&o.forEach(u=>u())})(s)}(function Ah(s=[],o){return Zu.create({name:o,providers:[{provide:Zf,useValue:"platform"},{provide:Fw,useValue:new Set([()=>lc=null])},...s]})}(I,l))}return function P_(s){const o=Qp();if(!o)throw new _e(401,!1);return o}()}}function Qp(){return lc?.get($w)??null}let $w=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const d=function xh(s,o){let u;return u="noop"===s?new rA:("zone.js"===s?void 0:s)||new qs(o),u}(l?.ngZone,function Rh(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),p=[{provide:qs,useValue:d}];return d.run(()=>{const v=Zu.create({providers:p,parent:this.injector,name:u.moduleType.name}),I=u.create(v),b=I.injector.get(wo,null);if(!b)throw new _e(402,!1);return d.runOutsideAngular(()=>{const A=d.onError.subscribe({next:M=>{b.handleError(M)}});I.onDestroy(()=>{N_(this._modules,I),A.unsubscribe()})}),function gC(s,o,u){try{const l=u();return Bm(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(b,d,()=>{const A=I.injector.get(Th);return A.runInitializers(),A.donePromise.then(()=>(function kv(s){le(s,"Expected localeId to be defined"),"string"==typeof s&&(ZI=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(ma,jl)||jl),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,l=[]){const d=ir({},l);return function cC(s,o,u){const l=new o_(u);return Promise.resolve(l)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const l=u.injector.get(Xp);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new _e(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(Fw,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)($(Zu))},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function ir(s,o){return Array.isArray(o)?o.reduce(ir,s):{...s,...o}}let Xp=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,l,d){this._zone=u,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new O.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{qs.assertNotInAngularZone(),An(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{qs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ae.T)(p,v.pipe((0,ne.B)()))}bootstrap(u,l){const d=u instanceof gE;if(!this._injector.get(Th).done){!d&&Xi(u);throw new _e(405,su)}let v;v=d?u:this._injector.get(Tl).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function Vw(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Eh),A=v.create(Zu.NULL,[],l||v.selector,I),M=A.location.nativeElement,F=A.injector.get(Sh,null);return F?.registerApplication(M),A.onDestroy(()=>{this.detachView(A.hostView),N_(this.components,A),F?.unregisterApplication(M)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;N_(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(Uw,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>N_(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new _e(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)($(qs),$(zu),$(wo))},s.\u0275prov=Ze({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function N_(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function sA(){return!1}let _C=(()=>{class s{}return s.__NG_ELEMENT_ID__=ou,s})();function ou(s){return function yC(s,o,u){if(Ei(s)&&!u){const l=Kn(s.index,o);return new Ml(l,l)}return 47&s.type?new Ml(o[yr],o):null}(ur(),ye(),16==(16&s))}class zw{constructor(){}supports(o){return fp(o)}create(o){return new bC(o)}}const IC=(s,o)=>o;class bC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||IC}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,p=null;for(;u||l;){const v=!l||u&&u.currentIndex<qw(l,d,p)?u:l,I=qw(v,d,p),b=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{p||(p=[]);const A=I-d,M=b-d;if(A!=M){for(let B=0;B<A;B++){const J=B<p.length?p[B]:p[B]=0,ve=J+B;M<=ve&&ve<A&&(p[B]=J+1)}p[v.previousIndex]=M-A}}I!==b&&o(v,I,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!fp(o))throw new _e(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],v=this._trackByFn(I,p),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,p,v,I)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,I),l=!0),u=u._next}else d=0,function Pl(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new B_(u,l),p,d),o}_verifyReinsertion(o,u,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ww),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ww),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class B_{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ys{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class Ww{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new ys,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qw(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class td{constructor(){}supports(o){return o instanceof Map||ha(o)}create(){return new fA}}class fA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||ha(o)))throw new _e(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const l=new pA(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class pA{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function j_(){return new Kw([new zw])}let Kw=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||j_()),deps:[[s,new T,new vn]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new _e(901,!1)}}return s.\u0275prov=Ze({token:s,providedIn:"root",factory:j_}),s})();function Zw(){return new Yw([new td])}let Yw=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||Zw()),deps:[[s,new T,new vn]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(l)return l;throw new _e(901,!1)}}return s.\u0275prov=Ze({token:s,providedIn:"root",factory:Zw}),s})();const Nh=pC(null,"core",[]);let hc=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)($(Xp))},s.\u0275mod=Oo({type:s}),s.\u0275inj=wt({}),s})();function Qw(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ft,Te,L)=>{L.d(Te,{Z:()=>We});var _=L(2090),ee=L(4859),O=L(9681),ae=L(1877);class ne{constructor(_e,Me){this._delegate=_e,this.firebase=Me,(0,O._addComponent)(_e,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(_e,Me=O._DEFAULT_ENTRY_NAME){var Ae;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(_e);return!Be.isInitialized()&&"EXPLICIT"===(null===(Ae=Be.getComponent())||void 0===Ae?void 0:Ae.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:Me})}_removeServiceInstance(_e,Me=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(Me)}_addComponent(_e){(0,O._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,O._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function fe(){const rt=function pe(rt){const _e={},Me={__esModule:!0,initializeApp:function De(Fe,H={}){const we=O.initializeApp(Fe,H);if((0,_.r3)(_e,we.name))return _e[we.name];const He=new rt(we,Me);return _e[we.name]=He,He},app:Be,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Pe(Fe){const H=Fe.name,we=H.replace("-compat","");if(O._registerComponent(Fe)&&"PUBLIC"===Fe.type){const He=(Qe=Be())=>{if("function"!=typeof Qe[we])throw me.create("invalid-app-argument",{appName:H});return Qe[we]()};void 0!==Fe.serviceProps&&(0,_.ZB)(He,Fe.serviceProps),Me[we]=He,rt.prototype[we]=function(...Qe){return this._getService.bind(this,H).apply(this,Fe.multipleInstances?Qe:[])}}return"PUBLIC"===Fe.type?Me[we]:null},removeApp:function Ae(Fe){delete _e[Fe]},useAsService:function $e(Fe,H){return"serverAuth"===H?null:H},modularAPIs:O}};function Be(Fe){if(!(0,_.r3)(_e,Fe=Fe||O._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Fe});return _e[Fe]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function be(){return Object.keys(_e).map(Fe=>_e[Fe])}}),Be.App=rt,Me}(ne);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function _e(Me){(0,_.ZB)(rt,Me)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),rt}(),G=new ae.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=z;!function Se(rt){(0,O.registerVersion)("@firebase/app-compat","0.1.30",rt)}()},9681:(ft,Te,L)=>{L.r(Te),L.d(Te,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>qn,_DEFAULT_ENTRY_NAME:()=>re,_addComponent:()=>je,_addOrOverwriteComponent:()=>Ue,_apps:()=>le,_clearComponents:()=>wt,_components:()=>te,_getProvider:()=>Ze,_registerComponent:()=>_t,_removeServiceInstance:()=>Ut,deleteApp:()=>Gr,getApp:()=>wn,getApps:()=>xn,initializeApp:()=>Jn,onLog:()=>gi,registerVersion:()=>pt,setLogLevel:()=>Yi});var _=L(5861),ee=L(4859),O=L(1877),ae=L(2090),ne=L(8766);class ie{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map(q=>{if(function me(j){return"VERSION"===j.getComponent()?.type}(q)){const xe=q.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(q=>q).join(" ")}}const pe="@firebase/app",z=new O.Yd("@firebase/app"),re="[DEFAULT]",de={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},le=new Map,te=new Map;function je(j,W){try{j.container.addComponent(W)}catch(q){z.debug(`Component ${W.name} failed to register with FirebaseApp ${j.name}`,q)}}function Ue(j,W){j.container.addOrOverwriteComponent(W)}function _t(j){const W=j.name;if(te.has(W))return z.debug(`There were multiple attempts to register component ${W}.`),!1;te.set(W,j);for(const q of le.values())je(q,j);return!0}function Ze(j,W){const q=j.container.getProvider("heartbeat").getImmediate({optional:!0});return q&&q.triggerHeartbeat(),j.container.getProvider(W)}function Ut(j,W,q=re){Ze(j,W).clearInstance(q)}function wt(){te.clear()}const Qt=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class qt{constructor(W,q,xe){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const qn="9.9.1";function Jn(j,W={}){"object"!=typeof W&&(W={name:W});const q=Object.assign({name:re,automaticDataCollectionEnabled:!1},W),xe=q.name;if("string"!=typeof xe||!xe)throw Qt.create("bad-app-name",{appName:String(xe)});const ze=le.get(xe);if(ze){if((0,ae.vZ)(j,ze.options)&&(0,ae.vZ)(q,ze.config))return ze;throw Qt.create("duplicate-app",{appName:xe})}const gt=new ee.H0(xe);for(const nn of te.values())gt.addComponent(nn);const hn=new qt(j,q,gt);return le.set(xe,hn),hn}function wn(j=re){const W=le.get(j);if(!W)throw Qt.create("no-app",{appName:j});return W}function xn(){return Array.from(le.values())}function Gr(j){return En.apply(this,arguments)}function En(){return(En=(0,_.Z)(function*(j){const W=j.name;le.has(W)&&(le.delete(W),yield Promise.all(j.container.getProviders().map(q=>q.delete())),j.isDeleted=!0)})).apply(this,arguments)}function pt(j,W,q){var xe;let ze=null!==(xe=de[j])&&void 0!==xe?xe:j;q&&(ze+=`-${q}`);const gt=ze.match(/\s|\//),hn=W.match(/\s|\//);if(gt||hn){const nn=[`Unable to register library "${ze}" with version "${W}":`];return gt&&nn.push(`library name "${ze}" contains illegal characters (whitespace or "/")`),gt&&hn&&nn.push("and"),hn&&nn.push(`version name "${W}" contains illegal characters (whitespace or "/")`),void z.warn(nn.join(" "))}_t(new ee.wA(`${ze}-version`,()=>({library:ze,version:W}),"VERSION"))}function gi(j,W){if(null!==j&&"function"!=typeof j)throw Qt.create("invalid-log-argument");(0,O.Am)(j,W)}function Yi(j){(0,O.Ub)(j)}const bn="firebase-heartbeat-database",gr=1,ri="firebase-heartbeat-store";let cn=null;function dn(){return cn||(cn=(0,ne.X3)(bn,gr,{upgrade:(j,W)=>{0===W&&j.createObjectStore(ri)}}).catch(j=>{throw Qt.create("storage-open",{originalErrorMessage:j.message})})),cn}function It(){return(It=(0,_.Z)(function*(j){var W;try{return(yield dn()).transaction(ri).objectStore(ri).get(Mn(j))}catch(q){throw Qt.create("storage-get",{originalErrorMessage:null===(W=q)||void 0===W?void 0:W.message})}})).apply(this,arguments)}function mi(j,W){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,_.Z)(function*(j,W){var q;try{const ze=(yield dn()).transaction(ri,"readwrite");return yield ze.objectStore(ri).put(W,Mn(j)),ze.done}catch(xe){throw Qt.create("storage-set",{originalErrorMessage:null===(q=xe)||void 0===q?void 0:q.message})}})).apply(this,arguments)}function Mn(j){return`${j.name}!${j.options.appId}`}class Po{constructor(W){this.container=W,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this._storage=new Gt(q),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var W=this;return(0,_.Z)(function*(){const xe=W.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ze=tn();if(null===W._heartbeatsCache&&(W._heartbeatsCache=yield W._heartbeatsCachePromise),W._heartbeatsCache.lastSentHeartbeatDate!==ze&&!W._heartbeatsCache.heartbeats.some(gt=>gt.date===ze))return W._heartbeatsCache.heartbeats.push({date:ze,agent:xe}),W._heartbeatsCache.heartbeats=W._heartbeatsCache.heartbeats.filter(gt=>{const hn=new Date(gt.date).valueOf();return Date.now()-hn<=2592e6}),W._storage.overwrite(W._heartbeatsCache)})()}getHeartbeatsHeader(){var W=this;return(0,_.Z)(function*(){if(null===W._heartbeatsCache&&(yield W._heartbeatsCachePromise),null===W._heartbeatsCache||0===W._heartbeatsCache.heartbeats.length)return"";const q=tn(),{heartbeatsToSend:xe,unsentEntries:ze}=function zr(j,W=1024){const q=[];let xe=j.slice();for(const ze of j){const gt=q.find(hn=>hn.agent===ze.agent);if(gt){if(gt.dates.push(ze.date),Y(q)>W){gt.dates.pop();break}}else if(q.push({agent:ze.agent,dates:[ze.date]}),Y(q)>W){q.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:q,unsentEntries:xe}}(W._heartbeatsCache.heartbeats),gt=(0,ae.L)(JSON.stringify({version:2,heartbeats:xe}));return W._heartbeatsCache.lastSentHeartbeatDate=q,ze.length>0?(W._heartbeatsCache.heartbeats=ze,yield W._storage.overwrite(W._heartbeatsCache)):(W._heartbeatsCache.heartbeats=[],W._storage.overwrite(W._heartbeatsCache)),gt})()}}function tn(){return(new Date).toISOString().substring(0,10)}class Gt{constructor(W){this.app=W,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var W=this;return(0,_.Z)(function*(){return(yield W._canUseIndexedDBPromise)&&(yield function yt(j){return It.apply(this,arguments)}(W.app))||{heartbeats:[]}})()}overwrite(W){var q=this;return(0,_.Z)(function*(){var xe;if(yield q._canUseIndexedDBPromise){const gt=yield q.read();return mi(q.app,{lastSentHeartbeatDate:null!==(xe=W.lastSentHeartbeatDate)&&void 0!==xe?xe:gt.lastSentHeartbeatDate,heartbeats:W.heartbeats})}})()}add(W){var q=this;return(0,_.Z)(function*(){var xe;if(yield q._canUseIndexedDBPromise){const gt=yield q.read();return mi(q.app,{lastSentHeartbeatDate:null!==(xe=W.lastSentHeartbeatDate)&&void 0!==xe?xe:gt.lastSentHeartbeatDate,heartbeats:[...gt.heartbeats,...W.heartbeats]})}})()}}function Y(j){return(0,ae.L)(JSON.stringify({version:2,heartbeats:j})).length}!function $(j){_t(new ee.wA("platform-logger",W=>new ie(W),"PRIVATE")),_t(new ee.wA("heartbeat",W=>new Po(W),"PRIVATE")),pt(pe,"0.7.29",j),pt(pe,"0.7.29","esm2017"),pt("fire-js","")}("")},4859:(ft,Te,L)=>{L.d(Te,{H0:()=>pe,wA:()=>O,zt:()=>ne});var _=L(5861),ee=L(2090);class O{constructor(z,G,Q){this.name=z,this.instanceFactory=G,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ae="[DEFAULT]";class ne{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const Q=new ee.BH;if(this.instancesDeferred.set(G,Q),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:G});Ge&&Q.resolve(Ge)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const Q=this.normalizeInstanceIdentifier(z?.identifier),Ge=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Se){if(Ge)return null;throw Se}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function me(fe){return"EAGER"===fe.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[G,Q]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(G);try{const Se=this.getOrInitializeService({instanceIdentifier:Ge});Q.resolve(Se)}catch{}}}}clearInstance(z=ae){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,_.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...G.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ae){return this.instances.has(z)}getOptions(z=ae){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,Q=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:Q,options:G});for(const[Se,We]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Se)&&We.resolve(Ge);return Ge}onInit(z,G){var Q;const Ge=this.normalizeInstanceIdentifier(G),Se=null!==(Q=this.onInitCallbacks.get(Ge))&&void 0!==Q?Q:new Set;Se.add(z),this.onInitCallbacks.set(Ge,Se);const We=this.instances.get(Ge);return We&&z(We,Ge),()=>{Se.delete(z)}}invokeOnInitCallbacks(z,G){const Q=this.onInitCallbacks.get(G);if(Q)for(const Ge of Q)try{Ge(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let Q=this.instances.get(z);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=z,fe===ae?void 0:fe),options:G}),this.instances.set(z,Q),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(Q,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,Q)}catch{}var fe;return Q||null}normalizeInstanceIdentifier(z=ae){return this.component?this.component.multipleInstances?z:ae:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new ne(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ft,Te,L)=>{L.d(Te,{Am:()=>fe,Ub:()=>pe,Yd:()=>me,in:()=>ee});const _=[];var ee=(()=>{return(z=ee||(ee={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",ee;var z})();const O={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ae=ee.INFO,ne={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ie=(z,G,...Q)=>{if(G<z.logLevel)return;const Ge=(new Date).toISOString(),Se=ne[G];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Se](`[${Ge}]  ${z.name}:`,...Q)};class me{constructor(G){this.name=G,this._logLevel=ae,this._logHandler=ie,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ee))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...G),this._logHandler(this,ee.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...G),this._logHandler(this,ee.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...G),this._logHandler(this,ee.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...G),this._logHandler(this,ee.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...G),this._logHandler(this,ee.ERROR,...G)}}function pe(z){_.forEach(G=>{G.setLogLevel(z)})}function fe(z,G){for(const Q of _){let Ge=null;G&&G.level&&(Ge=O[G.level]),Q.userLogHandler=null===z?null:(Se,We,...rt)=>{const _e=rt.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");We>=(Ge??Se.logLevel)&&z({level:ee[We].toLowerCase(),message:_e,args:rt,type:Se.name})}}}},8766:(ft,Te,L)=>{L.d(Te,{Lj:()=>De,X3:()=>Be});var _=L(5861);const ee=(H,we)=>we.some(He=>H instanceof He);let O,ae;const me=new WeakMap,pe=new WeakMap,fe=new WeakMap,z=new WeakMap,G=new WeakMap;let Se={get(H,we,He){if(H instanceof IDBTransaction){if("done"===we)return pe.get(H);if("objectStoreNames"===we)return H.objectStoreNames||fe.get(H);if("store"===we)return He.objectStoreNames[1]?void 0:He.objectStore(He.objectStoreNames[0])}return Me(H[we])},set:(H,we,He)=>(H[we]=He,!0),has:(H,we)=>H instanceof IDBTransaction&&("done"===we||"store"===we)||we in H};function _e(H){return"function"==typeof H?function rt(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...we){return H.apply(Ae(this),we),Me(me.get(this))}:function(...we){return Me(H.apply(Ae(this),we))}:function(we,...He){const Qe=H.call(Ae(this),we,...He);return fe.set(Qe,we.sort?we.sort():[we]),Me(Qe)}}(H):(H instanceof IDBTransaction&&function Ge(H){if(pe.has(H))return;const we=new Promise((He,Qe)=>{const ht=()=>{H.removeEventListener("complete",Xe),H.removeEventListener("error",mn),H.removeEventListener("abort",mn)},Xe=()=>{He(),ht()},mn=()=>{Qe(H.error||new DOMException("AbortError","AbortError")),ht()};H.addEventListener("complete",Xe),H.addEventListener("error",mn),H.addEventListener("abort",mn)});pe.set(H,we)}(H),ee(H,function ne(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,Se):H)}function Me(H){if(H instanceof IDBRequest)return function Q(H){const we=new Promise((He,Qe)=>{const ht=()=>{H.removeEventListener("success",Xe),H.removeEventListener("error",mn)},Xe=()=>{He(Me(H.result)),ht()},mn=()=>{Qe(H.error),ht()};H.addEventListener("success",Xe),H.addEventListener("error",mn)});return we.then(He=>{He instanceof IDBCursor&&me.set(He,H)}).catch(()=>{}),G.set(we,H),we}(H);if(z.has(H))return z.get(H);const we=_e(H);return we!==H&&(z.set(H,we),G.set(we,H)),we}const Ae=H=>G.get(H);function Be(H,we,{blocked:He,upgrade:Qe,blocking:ht,terminated:Xe}={}){const mn=indexedDB.open(H,we),Xn=Me(mn);return Qe&&mn.addEventListener("upgradeneeded",jn=>{Qe(Me(mn.result),jn.oldVersion,jn.newVersion,Me(mn.transaction))}),He&&mn.addEventListener("blocked",()=>He()),Xn.then(jn=>{Xe&&jn.addEventListener("close",()=>Xe()),ht&&jn.addEventListener("versionchange",()=>ht())}).catch(()=>{}),Xn}function De(H,{blocked:we}={}){const He=indexedDB.deleteDatabase(H);return we&&He.addEventListener("blocked",()=>we()),Me(He).then(()=>{})}const be=["get","getKey","getAll","getAllKeys","count"],Pe=["put","add","delete","clear"],$e=new Map;function Fe(H,we){if(!(H instanceof IDBDatabase)||we in H||"string"!=typeof we)return;if($e.get(we))return $e.get(we);const He=we.replace(/FromIndex$/,""),Qe=we!==He,ht=Pe.includes(He);if(!(He in(Qe?IDBIndex:IDBObjectStore).prototype)||!ht&&!be.includes(He))return;const Xe=function(){var mn=(0,_.Z)(function*(Xn,...jn){const pi=this.transaction(Xn,ht?"readwrite":"readonly");let re=pi.store;return Qe&&(re=re.index(jn.shift())),(yield Promise.all([re[He](...jn),ht&&pi.done]))[0]});return function(jn){return mn.apply(this,arguments)}}();return $e.set(we,Xe),Xe}!function We(H){Se=H(Se)}(H=>({...H,get:(we,He,Qe)=>Fe(we,He)||H.get(we,He,Qe),has:(we,He)=>!!Fe(we,He)||H.has(we,He)}))},5861:(ft,Te,L)=>{function _(O,ae,ne,ie,me,pe,fe){try{var z=O[pe](fe),G=z.value}catch(Q){return void ne(Q)}z.done?ae(G):Promise.resolve(G).then(ie,me)}function ee(O){return function(){var ae=this,ne=arguments;return new Promise(function(ie,me){var pe=O.apply(ae,ne);function fe(G){_(pe,ie,me,fe,z,"next",G)}function z(G){_(pe,ie,me,fe,z,"throw",G)}fe(void 0)})}}L.d(Te,{Z:()=>ee})},7582:(ft,Te,L)=>{function ae(re,de){var le={};for(var te in re)Object.prototype.hasOwnProperty.call(re,te)&&de.indexOf(te)<0&&(le[te]=re[te]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var je=0;for(te=Object.getOwnPropertySymbols(re);je<te.length;je++)de.indexOf(te[je])<0&&Object.prototype.propertyIsEnumerable.call(re,te[je])&&(le[te[je]]=re[te[je]])}return le}function Q(re,de,le,te){return new(le||(le=Promise))(function(Ue,_t){function Ze(Vt){try{wt(te.next(Vt))}catch(Qt){_t(Qt)}}function Ut(Vt){try{wt(te.throw(Vt))}catch(Qt){_t(Qt)}}function wt(Vt){Vt.done?Ue(Vt.value):function je(Ue){return Ue instanceof le?Ue:new le(function(_t){_t(Ue)})}(Vt.value).then(Ze,Ut)}wt((te=te.apply(re,de||[])).next())})}function De(re){return this instanceof De?(this.v=re,this):new De(re)}function be(re,de,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var je,te=le.apply(re,de||[]),Ue=[];return je={},_t("next"),_t("throw"),_t("return"),je[Symbol.asyncIterator]=function(){return this},je;function _t(qt){te[qt]&&(je[qt]=function(qn){return new Promise(function(Jn,wn){Ue.push([qt,qn,Jn,wn])>1||Ze(qt,qn)})})}function Ze(qt,qn){try{!function Ut(qt){qt.value instanceof De?Promise.resolve(qt.value.v).then(wt,Vt):Qt(Ue[0][2],qt)}(te[qt](qn))}catch(Jn){Qt(Ue[0][3],Jn)}}function wt(qt){Ze("next",qt)}function Vt(qt){Ze("throw",qt)}function Qt(qt,qn){qt(qn),Ue.shift(),Ue.length&&Ze(Ue[0][0],Ue[0][1])}}function $e(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,de=re[Symbol.asyncIterator];return de?de.call(re):(re=function rt(re){var de="function"==typeof Symbol&&Symbol.iterator,le=de&&re[de],te=0;if(le)return le.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&te>=re.length&&(re=void 0),{value:re&&re[te++],done:!re}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),le={},te("next"),te("throw"),te("return"),le[Symbol.asyncIterator]=function(){return this},le);function te(Ue){le[Ue]=re[Ue]&&function(_t){return new Promise(function(Ze,Ut){!function je(Ue,_t,Ze,Ut){Promise.resolve(Ut).then(function(wt){Ue({value:wt,done:Ze})},_t)}(Ze,Ut,(_t=re[Ue](_t)).done,_t.value)})}}}L.d(Te,{FC:()=>be,KL:()=>$e,_T:()=>ae,mG:()=>Q,qq:()=>De}),"function"==typeof SuppressedError&&SuppressedError}},ft=>{ft(ft.s=8448)}]);