"use strict";(self.webpackChunkcsherf_website=self.webpackChunkcsherf_website||[]).push([[179],{2011:(pt,Te,L)=>{L.d(Te,{Dh:()=>ye,GT:()=>ie,cc:()=>Re,hO:()=>We,on:()=>W,pX:()=>se,xv:()=>_e});var p=L(4650),te=L(127),F=L(5813);pt=L.hmd(pt);const ce=["ngOnDestroy"],se=(Pe,xe,$e,Ae={})=>new Proxy(Pe,{get:(De,Oe)=>$e.runOutsideAngular(()=>{var ze;if(Pe[Oe])return!(null===(ze=Ae?.spy)||void 0===ze)&&ze.get&&Ae.spy.get(Oe,Pe[Oe]),Pe[Oe];if(ce.indexOf(Oe)>-1)return()=>{};const Ve=xe.toPromise().then(z=>{const be=z&&z[Oe];return"function"==typeof be?be.bind(z):be&&be.then?be.then(Ge=>$e.run(()=>Ge)):$e.run(()=>be)});return new Proxy(()=>{},{get:(z,be)=>Ve[be],apply:(z,be,Ge)=>Ve.then(Je=>{var gt;const et=Je&&Je(...Ge);return!(null===(gt=Ae?.spy)||void 0===gt)&&gt.apply&&Ae.spy.apply(Oe,Ge,et),et})})})}),ie=(Pe,xe)=>{xe.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(Ae=>{Object.defineProperty(Pe.prototype,Ae,Object.getOwnPropertyDescriptor($e.prototype||$e,Ae))})})};class Ee{constructor(xe){return xe}}const ye=new p.OlP("angularfire2.app.options"),_e=new p.OlP("angularfire2.app.name");function W(Pe,xe,$e){const De="object"==typeof $e&&$e||{};De.name=De.name||"string"==typeof $e&&$e||"[DEFAULT]";const ze=te.Z.apps.filter(Ve=>Ve&&Ve.name===De.name)[0]||xe.runOutsideAngular(()=>te.Z.initializeApp(Pe,De));try{JSON.stringify(Pe)!==JSON.stringify(ze.options)&&G("error",`${ze.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(ze)}const G=(Pe,...xe)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Pe](...xe)},J={provide:Ee,useFactory:W,deps:[ye,p.R0b,[new p.FiY,_e]]};let We=(()=>{class Pe{constructor($e){te.Z.registerVersion("angularfire",F.q4.full,"core"),te.Z.registerVersion("angularfire",F.q4.full,"app-compat"),te.Z.registerVersion("angular",p.q4F.full,$e.toString())}static initializeApp($e,Ae){return{ngModule:Pe,providers:[{provide:ye,useValue:$e},{provide:_e,useValue:Ae}]}}}return Pe.\u0275fac=function($e){return new($e||Pe)(p.LFG(p.Lbi))},Pe.\u0275mod=p.oAB({type:Pe}),Pe.\u0275inj=p.cJS({providers:[J]}),Pe})();function Re(Pe,xe,$e,Ae,De){const[,Oe,ze]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===Pe)||[];if(Oe)return function Ke(Pe,xe){try{return Pe.toString()===xe.toString()}catch{return Pe===xe}}(De,ze)||(ve("error",`${xe} was already initialized on the ${$e} Firebase App with different settings.${lt?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:De,was:ze})),Oe;{const Ve=Ae();return globalThis.\u0275AngularfireInstanceCache.push([Pe,Ve,De]),Ve}}const lt=!!pt.hot,ve=(Pe,...xe)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Pe](...xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(pt,Te,L)=>{L.d(Te,{q4:()=>zl,iC:()=>Ai,fc:()=>wt,HU:()=>ua,vb:()=>Qa,JM:()=>Lr});var p=L(4650),te=L(5867),F=L(5861),ce=L(9681),se=L(2090),ie=L(4859),Ee=L(1877),ye=L(8766);const _e="@firebase/installations",W="0.5.12",G=1e4,J=`w:${W}`,We="FIS_v2",Re="https://firebaseinstallations.googleapis.com/v1",Ke=36e5,xe=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e(D){return D instanceof se.ZR&&D.code.includes("request-failed")}function Ae({projectId:D}){return`${Re}/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:Je(D.expiresIn),creationTime:Date.now()}}function Oe(D,T){return ze.apply(this,arguments)}function ze(){return(ze=(0,F.Z)(function*(D,T){const V=(yield T.json()).error;return xe.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Ve({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function be(D){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,F.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function Je(D){return Number(D.replace("s","000"))}function wn(){return(wn=(0,F.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:M}){const V=Ae(D),ee=Ve(D),ae=T.getImmediate({optional:!0});if(ae){const Dt=yield ae.getHeartbeatsHeader();Dt&&ee.append("x-firebase-client",Dt)}const Xe={method:"POST",headers:ee,body:JSON.stringify({fid:M,authVersion:We,appId:D.appId,sdkVersion:J})},Ze=yield be(()=>fetch(V,Xe));if(Ze.ok){const Dt=yield Ze.json();return{fid:Dt.fid||M,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:De(Dt.authToken)}}throw yield Oe("Create Installation",Ze)})).apply(this,arguments)}function tr(D){return new Promise(T=>{setTimeout(T,D)})}const wi=/^[cdef][\w-]{21}$/,oe="";function pe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function he(D){return function zn(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return wi.test(M)?M:oe}catch{return oe}}function re(D){return`${D.appName}!${D.appId}`}const He=new Map;function Be(D,T){const M=re(D);Bt(M,T),function It(D,T){const M=function Jt(){return!jt&&"BroadcastChannel"in self&&(jt=new BroadcastChannel("[Firebase] FID Change"),jt.onmessage=D=>{Bt(D.data.key,D.data.fid)}),jt}();M&&M.postMessage({key:D,fid:T}),function Zt(){0===He.size&&jt&&(jt.close(),jt=null)}()}(M,T)}function Bt(D,T){const M=He.get(D);if(M)for(const V of M)V(T)}let jt=null;const Yn="firebase-installations-database",nr=1,Dn="firebase-installations-store";let On=null;function Kr(){return On||(On=(0,ye.X3)(Yn,nr,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Dn)}})),On}function Tn(D,T){return _t.apply(this,arguments)}function _t(){return(_t=(0,F.Z)(function*(D,T){const M=re(D),ee=(yield Kr()).transaction(Dn,"readwrite"),ae=ee.objectStore(Dn),Me=yield ae.get(M);return yield ae.put(T,M),yield ee.done,(!Me||Me.fid!==T.fid)&&Be(D,T.fid),T})).apply(this,arguments)}function Ei(D){return ns.apply(this,arguments)}function ns(){return(ns=(0,F.Z)(function*(D){const T=re(D),V=(yield Kr()).transaction(Dn,"readwrite");yield V.objectStore(Dn).delete(T),yield V.done})).apply(this,arguments)}function An(D,T){return vr.apply(this,arguments)}function vr(){return(vr=(0,F.Z)(function*(D,T){const M=re(D),ee=(yield Kr()).transaction(Dn,"readwrite"),ae=ee.objectStore(Dn),Me=yield ae.get(M),Xe=T(Me);return void 0===Xe?yield ae.delete(M):yield ae.put(Xe,M),yield ee.done,Xe&&(!Me||Me.fid!==Xe.fid)&&Be(D,Xe.fid),Xe})).apply(this,arguments)}function ci(D){return dn.apply(this,arguments)}function dn(){return dn=(0,F.Z)(function*(D){let T;const M=yield An(D.appConfig,V=>{const ee=function fn(D){return cr(D||{fid:pe(),registrationStatus:0})}(V),ae=function Et(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(xe.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function Ct(D,T){return Ii.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Vn(D)}:{installationEntry:T}}(D,ee);return T=ae.registrationPromise,ae.installationEntry});return M.fid===oe?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}}),dn.apply(this,arguments)}function Ii(){return Ii=(0,F.Z)(function*(D,T){try{const M=yield function et(D,T){return wn.apply(this,arguments)}(D,T);return Tn(D.appConfig,M)}catch(M){throw $e(M)&&409===M.customData.serverCode?yield Ei(D.appConfig):yield Tn(D.appConfig,{fid:T.fid,registrationStatus:0}),M}}),Ii.apply(this,arguments)}function Vn(D){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,F.Z)(function*(D){let T=yield rs(D.appConfig);for(;1===T.registrationStatus;)yield tr(100),T=yield rs(D.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:V}=yield ci(D);return V||M}return T})).apply(this,arguments)}function rs(D){return An(D,T=>{if(!T)throw xe.create("installation-not-found");return cr(T)})}function cr(D){return function Vo(D){return 1===D.registrationStatus&&D.registrationTime+G<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Zr(){return(Zr=(0,F.Z)(function*({appConfig:D,heartbeatServiceProvider:T},M){const V=function Wt(D,{fid:T}){return`${Ae(D)}/${T}/authTokens:generate`}(D,M),ee=function z(D,{refreshToken:T}){const M=Ve(D);return M.append("Authorization",function gt(D){return`${We} ${D}`}(T)),M}(D,M),ae=T.getImmediate({optional:!0});if(ae){const Dt=yield ae.getHeartbeatsHeader();Dt&&ee.append("x-firebase-client",Dt)}const Xe={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:J,appId:D.appId}})},Ze=yield be(()=>fetch(V,Xe));if(Ze.ok)return De(yield Ze.json());throw yield Oe("Generate Auth Token",Ze)})).apply(this,arguments)}function X(D){return H.apply(this,arguments)}function H(){return H=(0,F.Z)(function*(D,T=!1){let M;const V=yield An(D.appConfig,ae=>{if(!yt(ae))throw xe.create("not-registered");const Me=ae.authToken;if(!T&&function pn(D){return 2===D.requestStatus&&!function sn(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+Ke}(D)}(Me))return ae;if(1===Me.requestStatus)return M=function $(D,T){return K.apply(this,arguments)}(D,T),ae;{if(!navigator.onLine)throw xe.create("app-offline");const Xe=function gn(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}(ae);return M=function ke(D,T){return qe.apply(this,arguments)}(D,Xe),Xe}});return M?yield M:V.authToken}),H.apply(this,arguments)}function K(){return(K=(0,F.Z)(function*(D,T){let M=yield Y(D.appConfig);for(;1===M.authToken.requestStatus;)yield tr(100),M=yield Y(D.appConfig);const V=M.authToken;return 0===V.requestStatus?X(D,T):V})).apply(this,arguments)}function Y(D){return An(D,T=>{if(!yt(T))throw xe.create("not-registered");return function xt(D){return 1===D.requestStatus&&D.requestTime+G<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function qe(){return qe=(0,F.Z)(function*(D,T){try{const M=yield function rn(D,T){return Zr.apply(this,arguments)}(D,T),V=Object.assign(Object.assign({},T),{authToken:M});return yield Tn(D.appConfig,V),M}catch(M){if(!$e(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Tn(D.appConfig,V)}else yield Ei(D.appConfig);throw M}}),qe.apply(this,arguments)}function yt(D){return void 0!==D&&2===D.registrationStatus}function rr(){return(rr=(0,F.Z)(function*(D){const T=D,{installationEntry:M,registrationPromise:V}=yield ci(T);return V?V.catch(console.error):X(T).catch(console.error),M.fid})).apply(this,arguments)}function xs(){return xs=(0,F.Z)(function*(D,T=!1){const M=D;return yield function _l(D){return $i.apply(this,arguments)}(M),(yield X(M,T)).token}),xs.apply(this,arguments)}function $i(){return($i=(0,F.Z)(function*(D){const{registrationPromise:T}=yield ci(D);T&&(yield T)})).apply(this,arguments)}function $o(D){return xe.create("missing-app-config-values",{valueName:D})}const _d="installations",Ln=D=>{const T=D.getProvider("app").getImmediate(),M=function Rc(D){if(!D||!D.options)throw $o("App Configuration");if(!D.name)throw $o("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!D.options[M])throw $o(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ce._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},xc=D=>{const T=D.getProvider("app").getImmediate(),M=(0,ce._getProvider)(T,_d).getImmediate();return{getId:()=>function Bn(D){return rr.apply(this,arguments)}(M),getToken:ee=>function qt(D){return xs.apply(this,arguments)}(M,ee)}};(function nn(){(0,ce._registerComponent)(new ie.wA(_d,Ln,"PUBLIC")),(0,ce._registerComponent)(new ie.wA("installations-internal",xc,"PRIVATE"))})(),(0,ce.registerVersion)(_e,W),(0,ce.registerVersion)(_e,W,"esm2017");const Gn="@firebase/remote-config",Er=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class so{constructor(T,M,V,ee){this.client=T,this.storage=M,this.storageCache=V,this.logger=ee}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-M,ee=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${ee}.`),ee}fetch(T){var M=this;return(0,F.Z)(function*(){const[V,ee]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(ee&&M.isCachedDataFresh(T.cacheMaxAgeMillis,V))return ee;T.eTag=ee&&ee.eTag;const ae=yield M.client.fetch(T),Me=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&Me.push(M.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(Me),ae})()}}function Ci(D=navigator){return D.languages&&D.languages[0]||D.language}class ks{constructor(T,M,V,ee,ae,Me){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=V,this.projectId=ee,this.apiKey=ae,this.appId=Me}fetch(T){var M=this;return(0,F.Z)(function*(){var V,ee,ae;const[Me,Xe]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,At={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ct={sdk_version:M.sdkVersion,app_instance_id:Me,app_instance_id_token:Xe,app_id:M.appId,language_code:Ci()},ue={method:"POST",headers:At,body:JSON.stringify(ct)},ln=fetch(Dt,ue),N=new Promise((Vs,ha)=>{T.signal.addEventListener(()=>{const ql=new Error("The operation was aborted.");ql.name="AbortError",ha(ql)})});let Dr;try{yield Promise.race([ln,N]),Dr=yield ln}catch(Vs){let ha="fetch-client-network";throw"AbortError"===(null===(V=Vs)||void 0===V?void 0:V.name)&&(ha="fetch-timeout"),Er.create(ha,{originalErrorMessage:null===(ee=Vs)||void 0===ee?void 0:ee.message})}let Us=Dr.status;const jd=Dr.headers.get("ETag")||void 0;let da,Ri;if(200===Dr.status){let Vs;try{Vs=yield Dr.json()}catch(ha){throw Er.create("fetch-client-parse",{originalErrorMessage:null===(ae=ha)||void 0===ae?void 0:ae.message})}da=Vs.entries,Ri=Vs.state}if("INSTANCE_STATE_UNSPECIFIED"===Ri?Us=500:"NO_CHANGE"===Ri?Us=304:("NO_TEMPLATE"===Ri||"EMPTY_CONFIG"===Ri)&&(da={}),304!==Us&&200!==Us)throw Er.create("fetch-status",{httpStatus:Us});return{status:Us,eTag:jd,config:da}})()}}class zi{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,F.Z)(function*(){const V=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:V}){var ee=this;return(0,F.Z)(function*(){yield function os(D,T){return new Promise((M,V)=>{const ee=Math.max(T-Date.now(),0),ae=setTimeout(M,ee);D.addEventListener(()=>{clearTimeout(ae),V(Er.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const ae=yield ee.client.fetch(T);return yield ee.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function hn(D){if(!(D instanceof se.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ae))throw ae;const Me={throttleEndTimeMillis:Date.now()+(0,se.$s)(V),backoffCount:V+1};return yield ee.storage.setThrottleMetadata(Me),ee.attemptFetch(T,Me)}})()}}class Wo{constructor(T,M,V,ee,ae){this.app=T,this._client=M,this._storageCache=V,this._storage=ee,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function oo(D,T){var M;const V=D.target.error||void 0;return Er.create(T,{originalErrorMessage:V&&(null===(M=V)||void 0===M?void 0:M.message)})}const Pr="app_namespace_store";class Di{constructor(T,M,V,ee=function Qr(){return new Promise((D,T)=>{var M;try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=ee=>{T(oo(ee,"storage-open"))},V.onsuccess=ee=>{D(ee.target.result)},V.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(Pr,{keyPath:"compositeKey"})}}catch(V){T(Er.create("storage-open",{originalErrorMessage:null===(M=V)||void 0===M?void 0:M.message}))}})}()){this.appId=T,this.appName=M,this.namespace=V,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,F.Z)(function*(){const V=yield M.openDbPromise;return new Promise((ee,ae)=>{var Me;const Ze=V.transaction([Pr],"readonly").objectStore(Pr),Dt=M.createCompositeKey(T);try{const At=Ze.get(Dt);At.onerror=ct=>{ae(oo(ct,"storage-get"))},At.onsuccess=ct=>{const ue=ct.target.result;ee(ue?ue.value:void 0)}}catch(At){ae(Er.create("storage-get",{originalErrorMessage:null===(Me=At)||void 0===Me?void 0:Me.message}))}})})()}set(T,M){var V=this;return(0,F.Z)(function*(){const ee=yield V.openDbPromise;return new Promise((ae,Me)=>{var Xe;const Dt=ee.transaction([Pr],"readwrite").objectStore(Pr),At=V.createCompositeKey(T);try{const ct=Dt.put({compositeKey:At,value:M});ct.onerror=ue=>{Me(oo(ue,"storage-set"))},ct.onsuccess=()=>{ae()}}catch(ct){Me(Er.create("storage-set",{originalErrorMessage:null===(Xe=ct)||void 0===Xe?void 0:Xe.message}))}})})()}delete(T){var M=this;return(0,F.Z)(function*(){const V=yield M.openDbPromise;return new Promise((ee,ae)=>{var Me;const Ze=V.transaction([Pr],"readwrite").objectStore(Pr),Dt=M.createCompositeKey(T);try{const At=Ze.delete(Dt);At.onerror=ct=>{ae(oo(ct,"storage-delete"))},At.onsuccess=()=>{ee()}}catch(At){ae(Er.create("storage-delete",{originalErrorMessage:null===(Me=At)||void 0===Me?void 0:Me.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Sa{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,F.Z)(function*(){const M=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),ee=T.storage.getActiveConfig(),ae=yield M;ae&&(T.lastFetchStatus=ae);const Me=yield V;Me&&(T.lastSuccessfulFetchTimestampMillis=Me);const Xe=yield ee;Xe&&(T.activeConfig=Xe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Aa(){return pf.apply(this,arguments)}function pf(){return(pf=(0,F.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Ti(){(0,ce._registerComponent)(new ie.wA("remote-config",function D(T,{instanceIdentifier:M}){const V=T.getProvider("app").getImmediate(),ee=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Er.create("registration-window");if(!(0,se.hl)())throw Er.create("indexed-db-unavailable");const{projectId:ae,apiKey:Me,appId:Xe}=V.options;if(!ae)throw Er.create("registration-project-id");if(!Me)throw Er.create("registration-api-key");if(!Xe)throw Er.create("registration-app-id");const Ze=new Di(Xe,V.name,M=M||"firebase"),Dt=new Sa(Ze),At=new Ee.Yd(Gn);At.logLevel=Ee.in.ERROR;const ct=new ks(ee,ce.SDK_VERSION,M,ae,Me,Xe),ue=new zi(ct,Ze),ln=new so(ue,Ze,Dt,At),N=new Wo(V,ln,Dt,Ze,At);return function Rn(D){const T=(0,se.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(N),N},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Gn,"0.3.11"),(0,ce.registerVersion)(Gn,"0.3.11","esm2017")}();const Oc="/firebase-messaging-sw.js",as="/firebase-cloud-messaging-push-scope",qo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ra="https://fcmregistrations.googleapis.com/v1",Nc="google.c.a.c_id",gf="google.c.a.c_l",mf="google.c.a.ts",jg="google.c.a.e";var ao=(()=>{return(D=ao||(ao={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",ao;var D})();function Gi(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $g(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(M),ee=new Uint8Array(V.length);for(let ae=0;ae<V.length;++ae)ee[ae]=V.charCodeAt(ae);return ee}const Lc="fcm_token_details_db",Fc=5,Or="fcm_token_object_Store";function Ed(){return Ed=(0,F.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(Lc))return null;let T=null;return(yield(0,ye.X3)(Lc,Fc,{upgrade:(V=(0,F.Z)(function*(ee,ae,Me,Xe){var Ze;if(ae<2||!ee.objectStoreNames.contains(Or))return;const Dt=Xe.objectStore(Or),At=yield Dt.index("fcmSenderId").get(D);if(yield Dt.clear(),At)if(2===ae){const ct=At;if(!ct.auth||!ct.p256dh||!ct.endpoint)return;T={token:ct.fcmToken,createTime:null!==(Ze=ct.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:ct.auth,p256dh:ct.p256dh,endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:"string"==typeof ct.vapidKey?ct.vapidKey:Gi(ct.vapidKey)}}}else if(3===ae){const ct=At;T={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:Gi(ct.auth),p256dh:Gi(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:Gi(ct.vapidKey)}}}else if(4===ae){const ct=At;T={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:Gi(ct.auth),p256dh:Gi(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:Gi(ct.vapidKey)}}}}),function(ae,Me,Xe,Ze){return V.apply(this,arguments)})})).close(),yield(0,ye.Lj)(Lc),yield(0,ye.Lj)("fcm_vapid_details_db"),yield(0,ye.Lj)("undefined"),function Id(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var V}),Ed.apply(this,arguments)}const yl="firebase-messaging-database",lo=1,co="firebase-messaging-store";let vl=null;function Zo(){return vl||(vl=(0,ye.X3)(yl,lo,{upgrade:(D,T)=>{0===T&&D.createObjectStore(co)}})),vl}function wl(D){return Yo.apply(this,arguments)}function Yo(){return Yo=(0,F.Z)(function*(D){const T=Xo(D),V=yield(yield Zo()).transaction(co).objectStore(co).get(T);if(V)return V;{const ee=yield function Uc(D){return Ed.apply(this,arguments)}(D.appConfig.senderId);if(ee)return yield uo(D,ee),ee}}),Yo.apply(this,arguments)}function uo(D,T){return xa.apply(this,arguments)}function xa(){return(xa=(0,F.Z)(function*(D,T){const M=Xo(D),ee=(yield Zo()).transaction(co,"readwrite");return yield ee.objectStore(co).put(T,M),yield ee.done,T})).apply(this,arguments)}function Qo(){return(Qo=(0,F.Z)(function*(D){const T=Xo(D),V=(yield Zo()).transaction(co,"readwrite");yield V.objectStore(co).delete(T),yield V.done})).apply(this,arguments)}function Xo({appConfig:D}){return D.appId}const Fn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function El(D,T){return jn.apply(this,arguments)}function jn(){return(jn=(0,F.Z)(function*(D,T){var M;const V=yield fo(D),ee=Ma(T),ae={method:"POST",headers:V,body:JSON.stringify(ee)};let Me;try{Me=yield(yield fetch(ea(D.appConfig),ae)).json()}catch(Xe){throw Fn.create("token-subscribe-failed",{errorInfo:null===(M=Xe)||void 0===M?void 0:M.toString()})}if(Me.error)throw Fn.create("token-subscribe-failed",{errorInfo:Me.error.message});if(!Me.token)throw Fn.create("token-subscribe-no-token");return Me.token})).apply(this,arguments)}function ho(){return(ho=(0,F.Z)(function*(D,T){var M;const V=yield fo(D),ee=Ma(T.subscriptionOptions),ae={method:"PATCH",headers:V,body:JSON.stringify(ee)};let Me;try{Me=yield(yield fetch(`${ea(D.appConfig)}/${T.token}`,ae)).json()}catch(Xe){throw Fn.create("token-update-failed",{errorInfo:null===(M=Xe)||void 0===M?void 0:M.toString()})}if(Me.error)throw Fn.create("token-update-failed",{errorInfo:Me.error.message});if(!Me.token)throw Fn.create("token-update-no-token");return Me.token})).apply(this,arguments)}function qn(D,T){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,F.Z)(function*(D,T){var M;const ee={method:"DELETE",headers:yield fo(D)};try{const Me=yield(yield fetch(`${ea(D.appConfig)}/${T}`,ee)).json();if(Me.error)throw Fn.create("token-unsubscribe-failed",{errorInfo:Me.error.message})}catch(ae){throw Fn.create("token-unsubscribe-failed",{errorInfo:null===(M=ae)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function ea({projectId:D}){return`${Ra}/projects/${D}/registrations`}function fo(D){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,F.Z)(function*({appConfig:D,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Ma({p256dh:D,auth:T,endpoint:M,vapidKey:V}){const ee={web:{endpoint:M,auth:T,p256dh:D}};return V!==qo&&(ee.web.applicationPubKey=V),ee}const ta=6048e5;function ls(){return ls=(0,F.Z)(function*(D){const T=yield function Bc(D,T){return jc.apply(this,arguments)}(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Gi(T.getKey("auth")),p256dh:Gi(T.getKey("p256dh"))},V=yield wl(D.firebaseDependencies);if(V){if(function Dl(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}(V.subscriptionOptions,M))return Date.now()>=V.createTime+ta?function Rt(D,T){return bl.apply(this,arguments)}(D,{token:V.token,createTime:Date.now(),subscriptionOptions:M}):V.token;try{yield qn(D.firebaseDependencies,V.token)}catch(ee){console.warn(ee)}return Cd(D.firebaseDependencies,M)}return Cd(D.firebaseDependencies,M)}),ls.apply(this,arguments)}function Pa(){return Pa=(0,F.Z)(function*(D){const T=yield wl(D.firebaseDependencies);T&&(yield qn(D.firebaseDependencies,T.token),yield function bd(D){return Qo.apply(this,arguments)}(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),Pa.apply(this,arguments)}function bl(){return bl=(0,F.Z)(function*(D,T){try{const M=yield function Jo(D,T){return ho.apply(this,arguments)}(D.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield uo(D.firebaseDependencies,V),M}catch(M){throw yield function ka(D){return Pa.apply(this,arguments)}(D),M}}),bl.apply(this,arguments)}function Cd(D,T){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,F.Z)(function*(D,T){const V={token:yield El(D,T),createTime:Date.now(),subscriptionOptions:T};return yield uo(D,V),V.token})).apply(this,arguments)}function jc(){return(jc=(0,F.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$g(T)})})).apply(this,arguments)}function _f(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function $c(D,T){if(!T.notification)return;D.notification={};const M=T.notification.title;M&&(D.notification.title=M);const V=T.notification.body;V&&(D.notification.body=V);const ee=T.notification.image;ee&&(D.notification.image=ee)}(T,D),function we(D,T){T.data&&(D.data=T.data)}(T,D),function Qt(D,T){var M,V,ee,ae,Me;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;D.fcmOptions={};const Xe=null!==(ee=null===(V=T.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==ee?ee:null===(ae=T.notification)||void 0===ae?void 0:ae.click_action;Xe&&(D.fcmOptions.link=Xe);const Ze=null===(Me=T.fcmOptions)||void 0===Me?void 0:Me.analytics_label;Ze&&(D.fcmOptions.analyticsLabel=Ze)}(T,D),T}function Dd(D,T){const M=[];for(let V=0;V<D.length;V++)M.push(D.charAt(V)),V<T.length&&M.push(T.charAt(V));return M.join("")}function Oa(D){return Fn.create("missing-app-config-values",{valueName:D})}Dd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Dd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Tl{constructor(T,M,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function dr(D){if(!D||!D.options)throw Oa("App Configuration Object");if(!D.name)throw Oa("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const V of T)if(!M[V])throw Oa(V);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:ee,installations:M,analyticsProvider:V}}_delete(){return Promise.resolve()}}function ei(D){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,F.Z)(function*(D){var T;try{D.swRegistration=yield navigator.serviceWorker.register(Oc,{scope:as}),D.swRegistration.update().catch(()=>{})}catch(M){throw Fn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=M)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function Td(){return(Td=(0,F.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield ei(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Fn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function Rl(){return(Rl=(0,F.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=qo)})).apply(this,arguments)}function ti(){return ti=(0,F.Z)(function*(D,T){if(!navigator)throw Fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Fn.create("permission-blocked");return yield function zc(D,T){return Rl.apply(this,arguments)}(D,T?.vapidKey),yield function Al(D,T){return Td.apply(this,arguments)}(D,T?.serviceWorkerRegistration),function Il(D){return ls.apply(this,arguments)}(D)}),ti.apply(this,arguments)}function po(){return(po=(0,F.Z)(function*(D,T,M){const V=function Wi(D){switch(D){case ao.NOTIFICATION_CLICKED:return"notification_open";case ao.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:M[Nc],message_name:M[gf],message_time:M[mf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Na(){return Na=(0,F.Z)(function*(D,T){const M=T.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===ao.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(_f(M)):D.onMessageHandler.next(_f(M)));const V=M.data;(function Hc(D){return"object"==typeof D&&!!D&&Nc in D})(V)&&"1"===V[jg]&&(yield function Ps(D,T,M){return po.apply(this,arguments)}(D,M.messageType,V))}),Na.apply(this,arguments)}const Ad="@firebase/messaging",Wc=D=>{const T=new Tl(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Sd(D,T){return Na.apply(this,arguments)}(T,M)),T},cs=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:V=>function Xn(D,T){return ti.apply(this,arguments)}(T,V)}};function qc(){return xd.apply(this,arguments)}function xd(){return(xd=(0,F.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Rd(){(0,ce._registerComponent)(new ie.wA("messaging",Wc,"PUBLIC")),(0,ce._registerComponent)(new ie.wA("messaging-internal",cs,"PRIVATE")),(0,ce.registerVersion)(Ad,"0.9.16"),(0,ce.registerVersion)(Ad,"0.9.16","esm2017")}();const kd="analytics",Nr="firebase_id",na="origin",In=6e4,ra="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Kc="https://www.googletagmanager.com/gtag/js",hr=new Ee.Yd("@firebase/analytics");function wf(D){return Promise.all(D.map(T=>T.catch(M=>M)))}function go(){return(go=(0,F.Z)(function*(D,T,M,V,ee,ae){const Me=V[ee];try{if(Me)yield T[Me];else{const Ze=(yield wf(M)).find(Dt=>Dt.measurementId===ee);Ze&&(yield T[Ze.appId])}}catch(Xe){hr.error(Xe)}D("config",ee,ae)})).apply(this,arguments)}function Os(){return(Os=(0,F.Z)(function*(D,T,M,V,ee){try{let ae=[];if(ee&&ee.send_to){let Me=ee.send_to;Array.isArray(Me)||(Me=[Me]);const Xe=yield wf(M);for(const Ze of Me){const Dt=Xe.find(ct=>ct.measurementId===Ze),At=Dt&&T[Dt.appId];if(!At){ae=[];break}ae.push(At)}}0===ae.length&&(ae=Object.values(T)),yield Promise.all(ae),D("event",V,ee||{})}catch(ae){hr.error(ae)}})).apply(this,arguments)}const hi=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ml=30,Od=new class mo{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ef(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Va(){return(Va=(0,F.Z)(function*(D){var T;const{appId:M,apiKey:V}=D,ee={method:"GET",headers:Ef(V)},ae=ra.replace("{app-id}",M),Me=yield fetch(ae,ee);if(200!==Me.status&&304!==Me.status){let Xe="";try{const Ze=yield Me.json();null!==(T=Ze.error)&&void 0!==T&&T.message&&(Xe=Ze.error.message)}catch{}throw hi.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:Xe})}return Me.json()})).apply(this,arguments)}function Ba(){return(Ba=(0,F.Z)(function*(D,T=Od,M){const{appId:V,apiKey:ee,measurementId:ae}=D.options;if(!V)throw hi.create("no-app-id");if(!ee){if(ae)return{measurementId:ae,appId:V};throw hi.create("no-api-key")}const Me=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new ja;return setTimeout((0,F.Z)(function*(){Xe.abort()}),void 0!==M?M:In),us({appId:V,apiKey:ee,measurementId:ae},Me,Xe,T)})).apply(this,arguments)}function us(D,T,M){return ds.apply(this,arguments)}function ds(){return ds=(0,F.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:M},V,ee=Od){var ae,Me;const{appId:Xe,measurementId:Ze}=D;try{yield function sa(D,T){return new Promise((M,V)=>{const ee=Math.max(T-Date.now(),0),ae=setTimeout(M,ee);D.addEventListener(()=>{clearTimeout(ae),V(hi.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(V,T)}catch(Dt){if(Ze)return hr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${null===(ae=Dt)||void 0===ae?void 0:ae.message}]`),{appId:Xe,measurementId:Ze};throw Dt}try{const Dt=yield function _o(D){return Va.apply(this,arguments)}(D);return ee.deleteThrottleMetadata(Xe),Dt}catch(Dt){const At=Dt;if(!function Yc(D){if(!(D instanceof se.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(At)){if(ee.deleteThrottleMetadata(Xe),Ze)return hr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${At?.message}]`),{appId:Xe,measurementId:Ze};throw Dt}const ct=503===Number(null===(Me=At?.customData)||void 0===Me?void 0:Me.httpStatus)?(0,se.$s)(M,ee.intervalMillis,Ml):(0,se.$s)(M,ee.intervalMillis),ue={throttleEndTimeMillis:Date.now()+ct,backoffCount:M+1};return ee.setThrottleMetadata(Xe,ue),hr.debug(`Calling attemptFetch again in ${ct} millis`),us(D,ue,V,ee)}}),ds.apply(this,arguments)}class ja{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let kl,Fs;function Ls(){return(Ls=(0,F.Z)(function*(D,T,M,V,ee){if(ee&&ee.global)D("event",M,V);else{const ae=yield T;D("event",M,Object.assign(Object.assign({},V),{send_to:ae}))}})).apply(this,arguments)}function Qc(){return(Qc=(0,F.Z)(function*(){var D;if(!(0,se.hl)())return hr.warn(hi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(T){return hr.warn(hi.create("indexeddb-unavailable",{errorInfo:null===(D=T)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function qa(){return qa=(0,F.Z)(function*(D,T,M,V,ee,ae,Me){var Xe;const Ze=function xn(D){return Ba.apply(this,arguments)}(D);Ze.then(ln=>{M[ln.measurementId]=ln.appId,D.options.measurementId&&ln.measurementId!==D.options.measurementId&&hr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${ln.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ln=>hr.error(ln)),T.push(Ze);const Dt=function Wa(){return Qc.apply(this,arguments)}().then(ln=>{if(ln)return V.getId()}),[At,ct]=yield Promise.all([Ze,Dt]);(function ia(){const D=window.document.getElementsByTagName("script");for(const T of Object.values(D))if(T.src&&T.src.includes(Kc))return T;return null})()||function zg(D,T){const M=document.createElement("script");M.src=`${Kc}?l=${D}&id=${T}`,M.async=!0,document.head.appendChild(M)}(ae,At.measurementId),Fs&&(ee("consent","default",Fs),function Ga(D){Fs=D}(void 0)),ee("js",new Date);const ue=null!==(Xe=Me?.config)&&void 0!==Xe?Xe:{};return ue[na]="firebase",ue.update=!0,null!=ct&&(ue[Nr]=ct),ee("config",At.measurementId,ue),kl&&(ee("set",kl),function Nl(D){kl=D}(void 0)),At.measurementId}),qa.apply(this,arguments)}class Nd{constructor(T){this.app=T}_delete(){return delete qi[this.app.options.appId],Promise.resolve()}}let qi={},Ll=[];const vo={};let Fl,hs,Ki="dataLayer",Ld="gtag",Si=!1;function Ul(D,T,M){!function Fd(){const D=[];if((0,se.ru)()&&D.push("This is a browser extension environment."),(0,se.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((V,ee)=>`(${ee+1}) ${V}`).join(" "),M=hi.create("invalid-analytics-context",{errorInfo:T});hr.warn(M.message)}}();const V=D.options.appId;if(!V)throw hi.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw hi.create("no-api-key");hr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=qi[V])throw hi.create("already-exists",{id:V});if(!Si){!function Gg(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(Ki);const{wrappedGtag:ae,gtagCore:Me}=function Ua(D,T,M,V,ee){let ae=function(...Me){window[V].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(ae=window[ee]),window[ee]=function Fa(D,T,M,V){function ae(){return ae=(0,F.Z)(function*(Me,Xe,Ze){try{"event"===Me?yield function Zc(D,T,M,V,ee){return Os.apply(this,arguments)}(D,T,M,Xe,Ze):"config"===Me?yield function La(D,T,M,V,ee,ae){return go.apply(this,arguments)}(D,T,M,V,Xe,Ze):"consent"===Me?D("consent","update",Ze):D("set",Xe)}catch(Dt){hr.error(Dt)}}),ae.apply(this,arguments)}return function ee(Me,Xe,Ze){return ae.apply(this,arguments)}}(ae,D,T,M),{gtagCore:ae,wrappedGtag:window[ee]}}(qi,Ll,vo,Ki,Ld);hs=ae,Fl=Me,Si=!0}return qi[V]=function yo(D,T,M,V,ee,ae,Me){return qa.apply(this,arguments)}(D,Ll,vo,T,Fl,Ki,M),new Nd(D)}function Vl(){return fs.apply(this,arguments)}function fs(){return(fs=(0,F.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Yt="@firebase/analytics";!function qg(){(0,ce._registerComponent)(new ie.wA(kd,(T,{options:M})=>Ul(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ce._registerComponent)(new ie.wA("analytics-internal",function D(T){try{const M=T.getProvider(kd).getImmediate();return{logEvent:(V,ee,ae)=>function bf(D,T,M,V){D=(0,se.m9)(D),function Pl(D,T,M,V,ee){return Ls.apply(this,arguments)}(hs,qi[D.app.options.appId],T,M,V).catch(ee=>hr.error(ee))}(M,V,ee,ae)}}catch(M){throw hi.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ce.registerVersion)(Yt,"0.8.0"),(0,ce.registerVersion)(Yt,"0.8.0","esm2017")}();var jl=L(4408),Df=L(7565);const Tf=new class Bd extends Df.v{}(class Cf extends jl.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,M,V):(T.flush(this),0)}});var Sf=L(4986),tu=L(8505),mn=L(5363),Hl=L(9468);const zl=new p.GfV("7.6.1"),nu="__angularfire_symbol__analyticsIsSupportedValue",ni="__angularfire_symbol__analyticsIsSupported",Zi="__angularfire_symbol__remoteConfigIsSupportedValue",Gl="__angularfire_symbol__remoteConfigIsSupported",Ya="__angularfire_symbol__messagingIsSupportedValue",ca="__angularfire_symbol__messagingIsSupported";function Lr(D,T,M){if(T){if(1===T.length)return T[0];const ae=T.filter(Me=>Me.app===M);if(1===ae.length)return ae[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[ni]||(globalThis[ni]=Vl().then(D=>globalThis[nu]=D).catch(()=>globalThis[nu]=!1)),globalThis[ca]||(globalThis[ca]=qc().then(D=>globalThis[Ya]=D).catch(()=>globalThis[Ya]=!1)),globalThis[Gl]||(globalThis[Gl]=Aa().then(D=>globalThis[Zi]=D).catch(()=>globalThis[Zi]=!1));const Qa=(D,T)=>{const M=T?[T]:(0,te.C6)(),V=[];return M.forEach(ee=>{ee.container.getProvider(D).instances.forEach(Me=>{V.includes(Me)||V.push(Me)})}),V};function on(){}class Yi{constructor(T,M=Tf){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,V){const ee=this.zone;return this.delegate.schedule(function(Me){ee.runGuarded(()=>{T.apply(this,[Me])})},M,V)}}class fr{constructor(T){this.zone=T,this.task=null}call(T,M){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",on,{},on,on)),M.pipe((0,tu.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ua=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Yi(Zone.current)),this.insideAngular=M.run(()=>new Yi(Zone.current,Sf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(p.LFG(p.R0b))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Gt(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function wt(D){return D.pipe((0,mn.Q)(Gt().outsideAngular))}function Ai(D){return Gt(),function bn(D){return function(M){return(M=M.lift(new fr(D.ngZone))).pipe((0,Hl.R)(D.outsideAngular),(0,mn.Q)(D.insideAngular))}}(Gt())(D)}},2090:(pt,Te,L)=>{L.d(Te,{$s:()=>Vo,BH:()=>We,DV:()=>Qe,Dv:()=>An,G6:()=>Ve,GJ:()=>Be,L:()=>ye,LL:()=>wn,Mn:()=>Oe,Pz:()=>oe,Sg:()=>Re,UG:()=>ve,UI:()=>It,US:()=>ie,Wj:()=>dn,Yr:()=>ze,ZB:()=>G,ZR:()=>et,b$:()=>$e,cI:()=>wi,d:()=>Ae,dS:()=>Et,eu:()=>be,g5:()=>F,gK:()=>vr,gQ:()=>On,h$:()=>Ee,hl:()=>z,hu:()=>te,jU:()=>Pe,lb:()=>fn,m9:()=>Wt,ne:()=>Kr,p$:()=>W,pd:()=>Dn,r3:()=>vt,ru:()=>xe,tV:()=>_e,uI:()=>lt,ug:()=>Ct,vZ:()=>jt,w1:()=>De,w9:()=>He,xO:()=>Yn,xb:()=>Bt,z$:()=>Ke,zI:()=>Ge,zd:()=>nr});const p={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},te=function(X,H){if(!X)throw F(H)},F=function(X){return new Error("Firebase Database ("+p.SDK_VERSION+") INTERNAL ASSERT FAILED: "+X)},ce=function(X){const H=[];let $=0;for(let K=0;K<X.length;K++){let Y=X.charCodeAt(K);Y<128?H[$++]=Y:Y<2048?(H[$++]=Y>>6|192,H[$++]=63&Y|128):55296==(64512&Y)&&K+1<X.length&&56320==(64512&X.charCodeAt(K+1))?(Y=65536+((1023&Y)<<10)+(1023&X.charCodeAt(++K)),H[$++]=Y>>18|240,H[$++]=Y>>12&63|128,H[$++]=Y>>6&63|128,H[$++]=63&Y|128):(H[$++]=Y>>12|224,H[$++]=Y>>6&63|128,H[$++]=63&Y|128)}return H},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,H){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let Y=0;Y<X.length;Y+=3){const ke=X[Y],qe=Y+1<X.length,yt=qe?X[Y+1]:0,pn=Y+2<X.length,sn=pn?X[Y+2]:0;let Bn=(15&yt)<<2|sn>>6,rr=63&sn;pn||(rr=64,qe||(Bn=64)),K.push($[ke>>2],$[(3&ke)<<4|yt>>4],$[Bn],$[rr])}return K.join("")},encodeString(X,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(X):this.encodeByteArray(ce(X),H)},decodeString(X,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(X):function(X){const H=[];let $=0,K=0;for(;$<X.length;){const Y=X[$++];if(Y<128)H[K++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const ke=X[$++];H[K++]=String.fromCharCode((31&Y)<<6|63&ke)}else if(Y>239&&Y<365){const pn=((7&Y)<<18|(63&X[$++])<<12|(63&X[$++])<<6|63&X[$++])-65536;H[K++]=String.fromCharCode(55296+(pn>>10)),H[K++]=String.fromCharCode(56320+(1023&pn))}else{const ke=X[$++],qe=X[$++];H[K++]=String.fromCharCode((15&Y)<<12|(63&ke)<<6|63&qe)}}return H.join("")}(this.decodeStringToByteArray(X,H))},decodeStringToByteArray(X,H){this.init_();const $=H?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let Y=0;Y<X.length;){const ke=$[X.charAt(Y++)],yt=Y<X.length?$[X.charAt(Y)]:0;++Y;const sn=Y<X.length?$[X.charAt(Y)]:64;++Y;const xt=Y<X.length?$[X.charAt(Y)]:64;if(++Y,null==ke||null==yt||null==sn||null==xt)throw Error();K.push(ke<<2|yt>>4),64!==sn&&(K.push(yt<<4&240|sn>>2),64!==xt&&K.push(sn<<6&192|xt))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}},Ee=function(X){const H=ce(X);return ie.encodeByteArray(H,!0)},ye=function(X){return Ee(X).replace(/\./g,"")},_e=function(X){try{return ie.decodeString(X,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function W(X){return G(void 0,X)}function G(X,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return H}for(const $ in H)!H.hasOwnProperty($)||!J($)||(X[$]=G(X[$],H[$]));return X}function J(X){return"__proto__"!==X}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,$)=>{this.resolve=H,this.reject=$})}wrapCallback(H){return($,K)=>{$?this.reject($):this.resolve(K),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H($):H($,K))}}}function Re(X,H){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=H||"demo-project",Y=X.iat||0,ke=X.sub||X.user_id;if(!ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const qe=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:Y,exp:Y+3600,auth_time:Y,sub:ke,user_id:ke,firebase:{sign_in_provider:"custom",identities:{}}},X);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(qe)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function lt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Pe(){return"object"==typeof self&&self.self===self}function xe(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function $e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return Ke().indexOf("Electron/")>=0}function De(){const X=Ke();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function Oe(){return Ke().indexOf("MSAppHost/")>=0}function ze(){return!0===p.NODE_CLIENT||!0===p.NODE_ADMIN}function Ve(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return"object"==typeof indexedDB}function be(){return new Promise((X,H)=>{try{let $=!0;const K="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(K);Y.onsuccess=()=>{Y.result.close(),$||self.indexedDB.deleteDatabase(K),X(!0)},Y.onupgradeneeded=()=>{$=!1},Y.onerror=()=>{var ke;H((null===(ke=Y.error)||void 0===ke?void 0:ke.message)||"")}}catch($){H($)}})}function Ge(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class et extends Error{constructor(H,$,K){super($),this.code=H,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}}class wn{constructor(H,$,K){this.service=H,this.serviceName=$,this.errors=K}create(H,...$){const K=$[0]||{},Y=`${this.service}/${H}`,ke=this.errors[H],qe=ke?function tr(X,H){return X.replace(zn,($,K)=>{const Y=H[K];return null!=Y?String(Y):`<${K}?>`})}(ke,K):"Error";return new et(Y,`${this.serviceName}: ${qe} (${Y}).`,K)}}const zn=/\{\$([^}]+)}/g;function wi(X){return JSON.parse(X)}function oe(X){return JSON.stringify(X)}const pe=function(X){let H={},$={},K={},Y="";try{const ke=X.split(".");H=wi(_e(ke[0])||""),$=wi(_e(ke[1])||""),Y=ke[2],K=$.d||{},delete $.d}catch{}return{header:H,claims:$,data:K,signature:Y}},He=function(X){const $=pe(X).claims;return!!$&&"object"==typeof $&&$.hasOwnProperty("iat")},Be=function(X){const H=pe(X).claims;return"object"==typeof H&&!0===H.admin};function vt(X,H){return Object.prototype.hasOwnProperty.call(X,H)}function Qe(X,H){if(Object.prototype.hasOwnProperty.call(X,H))return X[H]}function Bt(X){for(const H in X)if(Object.prototype.hasOwnProperty.call(X,H))return!1;return!0}function It(X,H,$){const K={};for(const Y in X)Object.prototype.hasOwnProperty.call(X,Y)&&(K[Y]=H.call($,X[Y],Y,X));return K}function jt(X,H){if(X===H)return!0;const $=Object.keys(X),K=Object.keys(H);for(const Y of $){if(!K.includes(Y))return!1;const ke=X[Y],qe=H[Y];if(Jt(ke)&&Jt(qe)){if(!jt(ke,qe))return!1}else if(ke!==qe)return!1}for(const Y of K)if(!$.includes(Y))return!1;return!0}function Jt(X){return null!==X&&"object"==typeof X}function Yn(X){const H=[];for(const[$,K]of Object.entries(X))Array.isArray(K)?K.forEach(Y=>{H.push(encodeURIComponent($)+"="+encodeURIComponent(Y))}):H.push(encodeURIComponent($)+"="+encodeURIComponent(K));return H.length?"&"+H.join("&"):""}function nr(X){const H={};return X.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[Y,ke]=K.split("=");H[decodeURIComponent(Y)]=decodeURIComponent(ke)}}),H}function Dn(X){const H=X.indexOf("?");if(!H)return"";const $=X.indexOf("#",H);return X.substring(H,$>0?$:void 0)}class On{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,$){$||($=0);const K=this.W_;if("string"==typeof H)for(let xt=0;xt<16;xt++)K[xt]=H.charCodeAt($)<<24|H.charCodeAt($+1)<<16|H.charCodeAt($+2)<<8|H.charCodeAt($+3),$+=4;else for(let xt=0;xt<16;xt++)K[xt]=H[$]<<24|H[$+1]<<16|H[$+2]<<8|H[$+3],$+=4;for(let xt=16;xt<80;xt++){const Bn=K[xt-3]^K[xt-8]^K[xt-14]^K[xt-16];K[xt]=4294967295&(Bn<<1|Bn>>>31)}let sn,gn,Y=this.chain_[0],ke=this.chain_[1],qe=this.chain_[2],yt=this.chain_[3],pn=this.chain_[4];for(let xt=0;xt<80;xt++){xt<40?xt<20?(sn=yt^ke&(qe^yt),gn=1518500249):(sn=ke^qe^yt,gn=1859775393):xt<60?(sn=ke&qe|yt&(ke|qe),gn=2400959708):(sn=ke^qe^yt,gn=3395469782);const Bn=(Y<<5|Y>>>27)+sn+pn+gn+K[xt]&4294967295;pn=yt,yt=qe,qe=4294967295&(ke<<30|ke>>>2),ke=Y,Y=Bn}this.chain_[0]=this.chain_[0]+Y&4294967295,this.chain_[1]=this.chain_[1]+ke&4294967295,this.chain_[2]=this.chain_[2]+qe&4294967295,this.chain_[3]=this.chain_[3]+yt&4294967295,this.chain_[4]=this.chain_[4]+pn&4294967295}update(H,$){if(null==H)return;void 0===$&&($=H.length);const K=$-this.blockSize;let Y=0;const ke=this.buf_;let qe=this.inbuf_;for(;Y<$;){if(0===qe)for(;Y<=K;)this.compress_(H,Y),Y+=this.blockSize;if("string"==typeof H){for(;Y<$;)if(ke[qe]=H.charCodeAt(Y),++qe,++Y,qe===this.blockSize){this.compress_(ke),qe=0;break}}else for(;Y<$;)if(ke[qe]=H[Y],++qe,++Y,qe===this.blockSize){this.compress_(ke),qe=0;break}}this.inbuf_=qe,this.total_+=$}digest(){const H=[];let $=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Y=this.blockSize-1;Y>=56;Y--)this.buf_[Y]=255&$,$/=256;this.compress_(this.buf_);let K=0;for(let Y=0;Y<5;Y++)for(let ke=24;ke>=0;ke-=8)H[K]=this.chain_[Y]>>ke&255,++K;return H}}function Kr(X,H){const $=new Tn(X,H);return $.subscribe.bind($)}class Tn{constructor(H,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{H(this)}).catch(K=>{this.error(K)})}next(H){this.forEachObserver($=>{$.next(H)})}error(H){this.forEachObserver($=>{$.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,$,K){let Y;if(void 0===H&&void 0===$&&void 0===K)throw new Error("Missing Observer.");Y=function Ei(X,H){if("object"!=typeof X||null===X)return!1;for(const $ of H)if($ in X&&"function"==typeof X[$])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:$,complete:K},void 0===Y.next&&(Y.next=ns),void 0===Y.error&&(Y.error=ns),void 0===Y.complete&&(Y.complete=ns);const ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),ke}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,H)}sendOne(H,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{$(this.observers[H])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ns(){}const An=function(X,H,$,K){let Y;if(K<H?Y="at least "+H:K>$&&(Y=0===$?"none":"no more than "+$),Y)throw new Error(X+" failed: Was called with "+K+(1===K?" argument.":" arguments.")+" Expects "+Y+".")};function vr(X,H){return`${X} failed: ${H} argument `}function dn(X,H,$,K){if((!K||$)&&"function"!=typeof $)throw new Error(vr(X,H)+"must be a valid function.")}function fn(X,H,$,K){if((!K||$)&&("object"!=typeof $||null===$))throw new Error(vr(X,H)+"must be a valid context object.")}const Et=function(X){const H=[];let $=0;for(let K=0;K<X.length;K++){let Y=X.charCodeAt(K);if(Y>=55296&&Y<=56319){const ke=Y-55296;K++,te(K<X.length,"Surrogate pair missing trail surrogate."),Y=65536+(ke<<10)+(X.charCodeAt(K)-56320)}Y<128?H[$++]=Y:Y<2048?(H[$++]=Y>>6|192,H[$++]=63&Y|128):Y<65536?(H[$++]=Y>>12|224,H[$++]=Y>>6&63|128,H[$++]=63&Y|128):(H[$++]=Y>>18|240,H[$++]=Y>>12&63|128,H[$++]=Y>>6&63|128,H[$++]=63&Y|128)}return H},Ct=function(X){let H=0;for(let $=0;$<X.length;$++){const K=X.charCodeAt($);K<128?H++:K<2048?H+=2:K>=55296&&K<=56319?(H+=4,$++):H+=3}return H},Vn=1e3,Nn=2,rs=144e5,cr=.5;function Vo(X,H=Vn,$=Nn){const K=H*Math.pow($,X),Y=Math.round(cr*K*(Math.random()-.5)*2);return Math.min(rs,K+Y)}function Wt(X){return X&&X._delegate?X._delegate:X}},1093:(pt,Te,L)=>{var p=L(4650);let te=null;function F(){return te}class se{}const ie=new p.OlP("DocumentToken");let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ye(){return(0,p.LFG)(W)}()},providedIn:"platform"}),n})();const _e=new p.OlP("Location Initialized");let W=(()=>{class n extends Ee{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){G()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){G()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function J(){return new W((0,p.LFG)(ie))}()},providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function We(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ke(n){return n&&"?"!==n[0]?"?"+n:n}let lt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Pe)},providedIn:"root"}),n})();const ve=new p.OlP("appBaseHref");let Pe=(()=>{class n extends lt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return We(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ke(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+Ke(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+Ke(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ee),p.LFG(ve,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xe=(()=>{class n extends lt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=We(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+Ke(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+Ke(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ee),p.LFG(ve,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ze(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Re(Oe(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ke(r))}normalize(t){return n.stripTrailingSlash(function De(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Oe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ke,n.joinWithSlash=We,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(p.LFG(lt))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ae(){return new $e((0,p.LFG)(lt))}()},providedIn:"root"}),n})();function Oe(n){return n.replace(/\/index.html$/,"")}class Wn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yr=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Wn(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const d=r.get(a);r.move(d,c),Rn(d,i)}});for(let i=0,a=r.length;i<a;i++){const d=r.get(i).context;d.index=i,d.count=a,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Rn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Rn(n,e){n.context.$implicit=e.item}let io=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ot,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Mc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Mc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ot{constructor(){this.$implicit=null,this.ngIf=null}}function Mc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Lc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const Fc="browser",Or="server";function yl(n){return n===Or}let Zo=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new wl((0,p.LFG)(ie),window)}),n})();class wl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function uo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Yo(this.window.history)||Yo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Yo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Os extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Fa extends Os{static makeCurrent(){!function ce(n){te||(te=n)}(new Fa)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ia(){return Ua=Ua||document.querySelector("base"),Ua?Ua.getAttribute("href"):null}();return null==t?null:function hi(n){Ns=Ns||document.createElement("a"),Ns.setAttribute("href",n);const e=Ns.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ua=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ho(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ns,Ua=null;const Ml=new p.OlP("TRANSITION_ID"),mo=[{provide:p.ip1,useFactory:function Pd(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Ml,ie,p.zs3],multi:!0}];let Ef=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const _o=new p.OlP("EventManagerPlugins");let Va=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_o),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class xn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ba=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let a=i.get(t)??0;return a+=r,a>0?i.set(t,a):i.delete(t),a}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),us=(()=>{class n extends Ba{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(a=>a.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const a=this.styleRef.get(r);a?a.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ds={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sa=/%COMP%/g,oa=new p.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ha(n,e){return e.flat(100).map(t=>t.replace(sa,n))}function Ol(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Cr=(()=>{class n{constructor(t,r,i,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.rendererByCompId=new Map,this.defaultRenderer=new za(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Qc?i.applyToHost(t):i instanceof Wa&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.eventManager,d=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(r.encapsulation){case p.ifc.Emulated:a=new Qc(c,d,r,this.appId,_);break;case p.ifc.ShadowDom:return new Nl(c,d,t,r);default:a=new Wa(c,d,r,_)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Va),p.LFG(us),p.LFG(p.AFp),p.LFG(oa))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class za{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ds[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ga(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ga(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ds[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ds[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ol(r)):this.eventManager.addEventListener(e,t,Ol(r))}}function Ga(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Nl extends za{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ha(i.id,i.styles);for(const c of a){const d=document.createElement("style");d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Wa extends za{constructor(e,t,r,i,a=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Ha(a,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Qc extends Wa{constructor(e,t,r,i,a){const c=i+"-"+r.id;super(e,t,r,a,c),this.contentAttr=function aa(n){return"_ngcontent-%COMP%".replace(sa,n)}(c),this.hostAttr=function $a(n){return"_nghost-%COMP%".replace(sa,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let yo=(()=>{class n extends xn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const qa=["alt","control","meta","shift"],Nd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ll=(()=>{class n extends xn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),c="code."),qa.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),c+=w+".")}),c+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let i=Nd[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),qa.forEach(c=>{c!==i&&(0,qi[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ud=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:Fc},{provide:p.g9A,useValue:function Si(){Fa.makeCurrent()},multi:!0},{provide:ie,useFactory:function Fd(){return(0,p.RDi)(document),document},deps:[]}]),Xc=new p.OlP(""),Vl=[{provide:p.rWj,useClass:class Od{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const d=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],fs=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Wg(){return new p.qLn},deps:[]},{provide:_o,useClass:yo,multi:!0,deps:[ie,p.R0b,p.Lbi]},{provide:_o,useClass:Ll,multi:!0,deps:[ie]},{provide:Cr,useClass:Cr,deps:[Va,us,p.AFp,oa]},{provide:p.FYo,useExisting:Cr},{provide:Ba,useExisting:us},{provide:us,useClass:us,deps:[ie]},{provide:Va,useClass:Va,deps:[_o,p.R0b]},{provide:class bd{},useClass:Ef,deps:[]},[]];let Ka=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Ml,useExisting:p.AFp},mo]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Xc,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...fs,...Vl],imports:[Lc,p.hGG]}),n})(),bf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Za(){return new bf((0,p.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const Qa_firebase={apiKey:"AIzaSyCmiudPxJ0ijNkrf0VGcCtB5w0KkovSHuQ",authDomain:"moonrakers-697aa.firebaseapp.com",databaseURL:"https://moonrakers-697aa-default-rtdb.firebaseio.com",projectId:"moonrakers-697aa",storageBucket:"moonrakers-697aa.appspot.com",messagingSenderId:"280709970766",appId:"1:280709970766:web:50f13a7f31a267538b7c1f",measurementId:"G-66HPG5VCSC"};var on=L(2011),Yi=L(4986),fr=L(9751),ua=L(3269),Gt=L(8996);function at(...n){const e=(0,ua.yG)(n);return(0,Gt.D)(n,e)}var ri=L(6451),wt=L(4004),ru=L(3099),Ai=L(8421),bn=L(4482),Cn=L(5403);function _n(n,e){return(0,bn.e)((t,r)=>{let i=null,a=0,c=!1;const d=()=>c&&!i&&r.complete();t.subscribe((0,Cn.x)(r,_=>{i?.unsubscribe();let w=0;const b=a++;(0,Ai.Xf)(n(_,b)).subscribe(i=(0,Cn.x)(r,S=>r.next(e?e(_,S,b,w++):S),()=>{i=null,d()}))},()=>{c=!0,d()}))})}function T(n,e){return(0,bn.e)(function D(n,e,t,r,i){return(a,c)=>{let d=t,_=e,w=0;a.subscribe((0,Cn.x)(c,b=>{const S=w++;_=d?n(_,b,S):(d=!0,b),r&&c.next(_)},i&&(()=>{d&&c.next(_),c.complete()})))}}(n,e,arguments.length>=2,!0))}var M=L(4671);function V(n,e=M.y){return n=n??ee,(0,bn.e)((t,r)=>{let i,a=!0;t.subscribe((0,Cn.x)(r,c=>{const d=e(c);(a||!n(i,d))&&(a=!1,i=d,r.next(c))}))})}function ee(n,e){return n===e}var ae=L(5032),Ze=L(5813),At=(L(1451),L(3942)),ct=L(4859),ue=L(5861),ln=L(9681),N=L(2090),Dr=L(1877);const Us="@firebase/database";let da="";function Ri(n){da=n}class Vs{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ha{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ql=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Vs(e)}}catch{}return new ha},fa=ql("localStorage"),$d=ql("sessionStorage"),iu=new Dr.Yd("@firebase/database"),Rf=function(){let n=1;return function(){return n++}}(),Kg=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const r=t.digest();return N.US.encodeByteArray(r)},Bs=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Bs.apply(null,r):e+="object"==typeof r?(0,N.Pz)(r):r,e+=" "}return e};let Kl=null,By=!0;const Hd=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(iu.logLevel=Dr.in.VERBOSE,Kl=iu.log.bind(iu),e&&$d.set("logging_enabled",!0)):"function"==typeof n?Kl=n:(Kl=null,$d.remove("logging_enabled"))},Tr=function(...n){if(!0===By&&(By=!1,null===Kl&&!0===$d.get("logging_enabled")&&Hd(!0)),Kl){const e=Bs.apply(null,n);Kl(e)}},zd=function(n){return function(...e){Tr(n,...e)}},Zg=function(...n){const e="FIREBASE INTERNAL ERROR: "+Bs(...n);iu.error(e)},wo=function(...n){const e=`FIREBASE FATAL ERROR: ${Bs(...n)}`;throw iu.error(e),new Error(e)},ii=function(...n){const e="FIREBASE WARNING: "+Bs(...n);iu.warn(e)},su=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},js="[MIN_NAME]",ps="[MAX_NAME]",pa=function(n,e){if(n===e)return 0;if(n===js||e===ps)return-1;if(e===js||n===ps)return 1;{const t=Sr(n),r=Sr(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},gs=function(n,e){return n===e?0:n<e?-1:1},ou=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Pz)(e))},kf=function(n){if("object"!=typeof n||null===n)return(0,N.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,N.Pz)(e[r]),t+=":",t+=kf(n[e[r]]);return t+="}",t},Yg=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function sr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Zl=function(n){(0,N.hu)(!su(n),"Invalid JSON number");const r=1023;let i,a,c,d,_;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const b=w.join("");let S="";for(_=0;_<64;_+=8){let O=parseInt(b.substr(_,8),2).toString(16);1===O.length&&(O="0"+O),S+=O}return S.toLowerCase()},Of=new RegExp("^-?(0*)\\d{1,10}$"),Qg=-2147483648,au=2147483647,Sr=function(n){if(Of.test(n)){const e=Number(n);if(e>=Qg&&e<=au)return e}return null},Eo=function(n){try{n()}catch(e){setTimeout(()=>{throw ii("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Nf=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Xa=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Fr{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ii(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class lu{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Tr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ii(e)}}let cu=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Wd=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qd="websocket",Kd="long_polling";class du{constructor(e,t,r,i,a=!1,c="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fa.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function em(n,e,t){let r;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===qd)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Kd)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function hu(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return sr(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class Hy{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const fu={},pu={};function gu(n){const e=n.toString();return fu[e]||(fu[e]=new Hy),fu[e]}class Vf{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Eo(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class fi{constructor(e,t,r,i,a,c,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zd(e),this.stats_=gu(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),em(t,Kd,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Vf(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yd((...a)=>{const[c,d,_,w,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Wd.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fi.forceAllow_=!0}static forceDisallow(){fi.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!fi.forceAllow_&&(fi.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,N.h$)(t),i=Yg(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Yd{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Rf(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Yd.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Tr("frame writing exception"),d.stack&&Tr(d.stack),Tr(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Tr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Tr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Qd=null;typeof MozWebSocket<"u"?Qd=MozWebSocket:typeof WebSocket<"u"&&(Qd=WebSocket);let _s=(()=>{class n{constructor(t,r,i,a,c,d,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zd(this.connId),this.stats_=gu(r),this.connURL=n.connectionURL_(r,d,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const d={v:"5"};return!(0,N.Yr)()&&typeof location<"u"&&location.hostname&&Wd.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),c&&(d.p=c),em(t,qd,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fa.set("previous_websocket_failure",!0);try{let i;if((0,N.Yr)()){i={headers:{"User-Agent":`Firebase/5/${da}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new Qd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Qd&&!n.forceDisallow_}static previouslyFailed(){return fa.isInMemoryStorage||!0===fa.get("previous_websocket_failure")}markConnectionHealthy(){fa.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,N.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,N.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Yg(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Xd=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[fi,_s]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=_s&&_s.isAvailable();let i=r&&!_s.previouslyFailed();if(t.webSocketOnly&&(r||ii("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[_s];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Kf{constructor(e,t,r,i,a,c,d,_,w,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zd("c:"+this.id+":"),this.transportManager_=new Xd(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Xa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ou("t",e),r=ou("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ou("t",e),r=ou("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ou("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Zg("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Zg("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ii("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Xa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Xa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class cm{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class um{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Eu extends um{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Eu}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const th=32,pr=768;class en{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function $t(){return new en("")}function Ht(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Vr(n){return n.pieces_.length-n.pieceNum_}function cn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new en(n.pieces_,e)}function nh(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Iu(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function bu(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new en(e,0)}function yn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof en)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new en(t,0)}function Ut(n){return n.pieceNum_>=n.pieces_.length}function Br(n,e){const t=Ht(n),r=Ht(e);if(null===t)return e;if(t===r)return Br(cn(n),cn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function dm(n,e){const t=Iu(n,0),r=Iu(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=pa(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function y(n,e){if(Vr(n)!==Vr(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function f(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Vr(n)>Vr(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class m{constructor(e,t){this.errorPrefix_=t,this.parts_=Iu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,N.ug)(this.parts_[r]);P(this)}}function P(n){if(n.byteLength_>pr)throw new Error(n.errorPrefix_+"has a key path longer than "+pr+" bytes ("+n.byteLength_+").");if(n.parts_.length>th)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+th+") or object contains a cycle "+Q(n))}function Q(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class le extends um{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new le}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ue=1e3;let Du,Co=(()=>{class n extends cm{constructor(t,r,i,a,c,d,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=zd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ue,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");le.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Eu.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,N.Pz)(c)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new N.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:d=>{const _=d.d;"ok"===d.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const w=_.d,b=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const i=(0,N.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ii(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,N.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,d=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const d={p:r,d:i};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Zg("Unrecognized action received from server: "+(0,N.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ue,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ue,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ue),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ue.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let _=!1,w=null;const b=function(){w?w.close():(_=!0,a())};t.realtime_={close:b,sendRequest:function(B){(0,N.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(B)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,q]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);_?Tr("getToken() completed but was canceled"):(Tr("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=q&&q.token,w=new Kf(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,fe=>{ii(fe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(B){t.log_("Failed to get token: "+B),_||(t.repoInfo_.nodeAdmin&&ii(B),b())}}})()}interrupt(t){Tr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Tr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ue,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>kf(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new en(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Tr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Tr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,N.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+da.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Eu.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Vt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Vt(e,t)}}class Cu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Vt(js,e),i=new Vt(js,t);return 0!==this.compare(r,i)}minPost(){return Vt.MIN}}class sh extends Cu{static get __EMPTY_NODE(){return Du}static set __EMPTY_NODE(e){Du=e}compare(e,t){return pa(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Vt.MIN}maxPost(){return new Vt(ps,Du)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Vt(e,Du)}toString(){return".key"}}const xi=new sh;class Mi{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let CE,Ar=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??si.EMPTY_NODE,this.right=c??si.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return si.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return si.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class si{constructor(e,t=si.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new si(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ar.BLACK,null,null))}remove(e){return new si(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ar.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Mi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Mi(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Mi(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Mi(this.root_,null,this.comparator_,!0,e)}}function oh(n,e){return pa(n.name,e.name)}function hm(n,e){return pa(n,e)}si.EMPTY_NODE=new class Zf{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ar(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const fm=function(n){return"number"==typeof n?"number:"+Zl(n):"string:"+n},pm=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===CE||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===CE||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let lT,Ky,DE,Yf=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),pm(this.priorityNode_)}static set __childrenNodeConstructor(t){lT=t}static get __childrenNodeConstructor(){return lT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ut(t)?this:".priority"===Ht(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ht(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,N.hu)(".priority"!==i||1===Vr(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(cn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+fm(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Zl(this.value_):this.value_,this.lazyHash_=Kg(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,N.hu)(a>=0,"Unknown leaf type: "+r),(0,N.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Sn=new class dT extends Cu{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?pa(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Vt.MIN}maxPost(){return new Vt(ps,new Yf("[PRIORITY-POST]",DE))}makePost(e,t){const r=Ky(e);return new Vt(t,new Yf("[PRIORITY-POST]",r))}toString(){return".priority"}},gm=Math.log(2);class hT{constructor(e){this.count=parseInt(Math.log(e+1)/gm,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ah=function(n,e,t,r){n.sort(e);const i=function(_,w){const b=w-_;let S,O;if(0===b)return null;if(1===b)return S=n[_],O=t?t(S):S,new Ar(O,S.node,Ar.BLACK,null,null);{const B=parseInt(b/2,10)+_,q=i(_,B),fe=i(B+1,w);return S=n[B],O=t?t(S):S,new Ar(O,S.node,Ar.BLACK,q,fe)}},d=function(_){let w=null,b=null,S=n.length;const O=function(q,fe){const me=S-q,mt=S;S-=q;const dt=i(me+1,mt),st=n[me],ot=t?t(st):st;B(new Ar(ot,st.node,fe,null,dt))},B=function(q){w?(w.left=q,w=q):(b=q,w=q)};for(let q=0;q<_.count;++q){const fe=_.nextBitIsOne(),me=Math.pow(2,_.count-(q+1));fe?O(me,Ar.BLACK):(O(me,Ar.BLACK),O(me,Ar.RED))}return b}(new hT(n.length));return new si(r||e,d)};let Zy;const Un={};class el{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(Un&&Sn,"ChildrenNode.ts has not been loaded"),Zy=Zy||new el({".priority":Un},{".priority":Sn}),Zy}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof si?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==xi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Vt.Wrap);let d,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();d=i?ah(r,e.getCompare()):Un;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const b=Object.assign({},this.indexes_);return b[_]=d,new el(b,w)}addToIndexes(e,t){const r=(0,N.UI)(this.indexes_,(i,a)=>{const c=(0,N.DV)(this.indexSet_,a);if((0,N.hu)(c,"Missing index implementation for "+a),i===Un){if(c.isDefinedOn(e.node)){const d=[],_=t.getIterator(Vt.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&d.push(w),w=_.getNext();return d.push(e),ah(d,c.getCompare())}return Un}{const d=t.get(e.name);let _=i;return d&&(_=_.remove(new Vt(e.name,d))),_.insert(e,e.node)}});return new el(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,N.UI)(this.indexes_,i=>{if(i===Un)return i;{const a=t.get(e.name);return a?i.remove(new Vt(e.name,a)):i}});return new el(r,this.indexSet_)}}let Qf,Ft=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&pm(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Qf||(Qf=new n(new si(hm),null,el.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Qf:r}}getChild(t){const r=Ht(t);return null===r?this:this.getImmediateChild(r).getChild(cn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,N.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Vt(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?Qf:this.priorityNode_;return new n(a,d,c)}}updateChild(t,r){const i=Ht(t);if(null===i)return r;{(0,N.hu)(".priority"!==Ht(t)||1===Vr(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(cn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Sn,(d,_)=>{r[d]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):c=!1}),!t&&c&&a<2*i){const d=[];for(const _ in r)d[_]=r[_];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+fm(this.getPriority().val())+":"),this.forEachChild(Sn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":Kg(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new Vt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Vt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Vt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Vt.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Vt.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xf?-1:0}withIndex(t){if(t===xi||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===xi||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Sn),a=r.getIterator(Sn);let c=i.getNext(),d=a.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=i.getNext(),d=a.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(t){return t===xi?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Xf=new class TE extends Ft{constructor(){super(new si(hm),Ft.EMPTY_NODE,el.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ft.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Vt,{MIN:{value:new Vt(js,Ft.EMPTY_NODE)},MAX:{value:new Vt(ps,Xf)}}),sh.__EMPTY_NODE=Ft.EMPTY_NODE,Yf.__childrenNodeConstructor=Ft,function jM(n){CE=n}(Xf),function uT(n){DE=n}(Xf);const fT=!0;function Kn(n,e=null){if(null===n)return Ft.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Yf(n,Kn(e));if(n instanceof Array||!fT){let t=Ft.EMPTY_NODE;return sr(n,(r,i)=>{if((0,N.r3)(n,r)&&"."!==r.substring(0,1)){const a=Kn(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Kn(e))}{const t=[];let r=!1;if(sr(n,(c,d)=>{if("."!==c.substring(0,1)){const _=Kn(d);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Vt(c,_)))}}),0===t.length)return Ft.EMPTY_NODE;const a=ah(t,oh,c=>c.name,hm);if(r){const c=ah(t,Sn.getCompare());return new Ft(a,Kn(e),new el({".priority":c},{".priority":Sn}))}return new Ft(a,Kn(e),el.Default)}}!function cT(n){Ky=n}(Kn);class Yy extends Cu{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!Ut(e)&&".priority"!==Ht(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?pa(e.name,t.name):a}makePost(e,t){const r=Kn(e),i=Ft.EMPTY_NODE.updateChild(this.indexPath_,r);return new Vt(t,i)}maxPost(){const e=Ft.EMPTY_NODE.updateChild(this.indexPath_,Xf);return new Vt(ps,e)}toString(){return Iu(this.indexPath_,0).join("/")}}const AE=new class SE extends Cu{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?pa(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Vt.MIN}maxPost(){return Vt.MAX}makePost(e,t){const r=Kn(e);return new Vt(t,r)}toString(){return".value"}},Jf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",RE=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Jf.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Jf.charAt(e[i]);return(0,N.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),Xy=function(n){if(n===""+au)return"-";const e=Sr(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return ps;const a=Jf.charAt(Jf.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},pT=function(n){if(n===""+Qg)return js;const e=Sr(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+au:(delete t[t.length-1],t.join("")):(t[t.length-1]=Jf.charAt(Jf.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function xE(n){return{type:"value",snapshotNode:n}}function Su(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function lh(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Au(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class ep{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(lh(t,d)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Su(t,r)):c.trackChildChange(Au(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Sn,(i,a)=>{t.hasChild(i)||r.trackChildChange(lh(i,a))}),t.isLeafNode()||t.forEachChild(Sn,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(Au(i,a,c))}else r.trackChildChange(Su(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ft.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class tp{constructor(e){this.indexedFilter_=new ep(e.getIndex()),this.index_=e.getIndex(),this.startPost_=tp.getStartPost_(e),this.endPost_=tp.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,c){return this.matches(new Vt(t,r))||(r=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ft.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ft.EMPTY_NODE);const a=this;return t.forEachChild(Sn,(c,d)=>{a.matches(new Vt(c,d))||(i=i.updateImmediateChild(c,Ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Jy{constructor(e){this.rangedFilter_=new tp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new Vt(t,r))||(r=Ft.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Ft.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const d=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(d.name,d.node),c++}}else{let a,c,d,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Ft.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();d=(O,B)=>S(B,O)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let w=0,b=!1;for(;_.hasNext();){const S=_.getNext();!b&&d(a,S)<=0&&(b=!0),b&&w<this.limit_&&d(S,c)<=0?w++:i=i.updateImmediateChild(S.name,Ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(O,B)=>S(B,O)}else c=this.index_.getCompare();const d=e;(0,N.hu)(d.numChildren()===this.limit_,"");const _=new Vt(t,r),w=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(_);if(d.hasChild(t)){const S=d.getImmediateChild(t);let O=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=O&&(O.name===t||d.hasChild(O.name));)O=i.getChildAfterChild(this.index_,O,this.reverse_);const B=null==O?1:c(O,_);if(b&&!r.isEmpty()&&B>=0)return a?.trackChildChange(Au(t,r,S)),d.updateImmediateChild(t,r);{a?.trackChildChange(lh(t,S));const fe=d.updateImmediateChild(t,Ft.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(a?.trackChildChange(Su(O.name,O.node)),fe.updateImmediateChild(O.name,O.node)):fe}}return r.isEmpty()?e:b&&c(w,_)>=0?(null!=a&&(a.trackChildChange(lh(w.name,w.node)),a.trackChildChange(Su(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(w.name,Ft.EMPTY_NODE)):e}}class np{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:js}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ps}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sn}copy(){const e=new np;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function rp(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function ev(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function xu(n,e){const t=n.copy();return t.index_=e,t}function Ql(n){const e={};if(n.isDefault())return e;let t;return n.index_===Sn?t="$priority":n.index_===AE?t="$value":n.index_===xi?t="$key":((0,N.hu)(n.index_ instanceof Yy,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Pz)(t),n.startSet_&&(e.startAt=(0,N.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,N.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,N.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,N.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function nv(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Sn&&(e.i=n.index_.toString()),e}class ch extends cm{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=ch.getListenId_(e,r),d={};this.listens_[c]=d;const _=Ql(e._queryParams);this.restRequest_(a+".json",_,(w,b)=>{let S=b;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,N.DV)(this.listens_,c)===d){let O;O=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(O,null)}})}unlisten(e,t){const r=ch.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Ql(e._queryParams),r=e._path.toString(),i=new N.BH;return this.restRequest_(r+".json",t,(a,c)=>{let d=c;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let _=null;if(d.status>=200&&d.status<300){try{_=(0,N.cI)(d.responseText)}catch{ii("Failed to parse JSON response for "+c+": "+d.responseText)}r(null,_)}else 401!==d.status&&404!==d.status&&ii("Got unsuccessful REST response for "+c+" Status: "+d.status),r(d.status);r=null}},d.open("GET",c,!0),d.send()})}}class mT{constructor(){this.rootNode_=Ft.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ym(){return{value:null,children:new Map}}function Mu(n,e,t){if(Ut(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ht(e);n.children.has(r)||n.children.set(r,ym()),Mu(n.children.get(r),e=cn(e),t)}}function Xl(n,e){if(Ut(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Sn,(r,i)=>{Mu(n,new en(r),i)}),Xl(n,e)}}if(n.children.size>0){const t=Ht(e);return e=cn(e),n.children.has(t)&&Xl(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function rv(n,e,t){null!==n.value?t(e,n.value):function _T(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{rv(i,new en(e.toString()+"/"+r),t)})}class yT{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&sr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class wT{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new yT(e);const r=1e4+2e4*Math.random();Xa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;sr(e,(i,a)=>{a>0&&(0,N.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Xa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ys=(()=>{return(n=ys||(ys={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ys;var n})();function ku(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class wm{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ys.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ut(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new en(e));return new wm($t(),t,this.revert)}}return(0,N.hu)(Ht(this.path)===e,"operationForChild called for unrelated child."),new wm(cn(this.path),this.affectedTree,this.revert)}}class ma{constructor(e,t){this.source=e,this.path=t,this.type=ys.LISTEN_COMPLETE}operationForChild(e){return Ut(this.path)?new ma(this.source,$t()):new ma(this.source,cn(this.path))}}class Do{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ys.OVERWRITE}operationForChild(e){return Ut(this.path)?new Do(this.source,$t(),this.snap.getImmediateChild(e)):new Do(this.source,cn(this.path),this.snap)}}class uh{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ys.MERGE}operationForChild(e){if(Ut(this.path)){const t=this.children.subtree(new en(e));return t.isEmpty()?null:t.value?new Do(this.source,$t(),t.value):new uh(this.source,$t(),t)}return(0,N.hu)(Ht(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new uh(this.source,cn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class tl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ut(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ht(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ET{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ip(n,e,t,r,i,a){const c=r.filter(d=>d.type===t);c.sort((d,_)=>function NE(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const r=new Vt(e.childName,e.snapshotNode),i=new Vt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,_)),c.forEach(d=>{const _=function OE(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(w=>{w.respondsTo(d.type)&&e.push(w.createEvent(_,n.query_))})})}function dh(n,e){return{eventCache:n,serverCache:e}}function Pu(n,e,t,r){return dh(new tl(e,t,r),n.serverCache)}function LE(n,e,t,r){return dh(n.eventCache,new tl(e,t,r))}function hh(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function To(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let sv;class Mn{constructor(e,t=(()=>(sv||(sv=new si(gs)),sv))()){this.value=e,this.children=t}static fromObject(e){let t=new Mn(null);return sr(e,(r,i)=>{t=t.set(new en(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:$t(),value:this.value};if(Ut(e))return null;{const r=Ht(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(cn(e),t);return null!=a?{path:yn(new en(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ut(e))return this;{const t=Ht(e),r=this.children.get(t);return null!==r?r.subtree(cn(e)):new Mn(null)}}set(e,t){if(Ut(e))return new Mn(t,this.children);{const r=Ht(e),a=(this.children.get(r)||new Mn(null)).set(cn(e),t),c=this.children.insert(r,a);return new Mn(this.value,c)}}remove(e){if(Ut(e))return this.children.isEmpty()?new Mn(null):new Mn(null,this.children);{const t=Ht(e),r=this.children.get(t);if(r){const i=r.remove(cn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Mn(null):new Mn(this.value,a)}return this}}get(e){if(Ut(e))return this.value;{const t=Ht(e),r=this.children.get(t);return r?r.get(cn(e)):null}}setTree(e,t){if(Ut(e))return t;{const r=Ht(e),a=(this.children.get(r)||new Mn(null)).setTree(cn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Mn(this.value,c)}}fold(e){return this.fold_($t(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(yn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,$t(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Ut(e))return null;{const a=Ht(e),c=this.children.get(a);return c?c.findOnPath_(cn(e),yn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,$t(),t)}foreachOnPath_(e,t,r){if(Ut(e))return this;{this.value&&r(t,this.value);const i=Ht(e),a=this.children.get(i);return a?a.foreachOnPath_(cn(e),yn(t,i),r):new Mn(null)}}foreach(e){this.foreach_($t(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(yn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class So{constructor(e){this.writeTree_=e}static empty(){return new So(new Mn(null))}}function sp(n,e,t){if(Ut(e))return new So(new Mn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Br(i,e);return a=a.updateChild(c,t),new So(n.writeTree_.set(i,a))}{const i=new Mn(t),a=n.writeTree_.setTree(e,i);return new So(a)}}}function ov(n,e,t){let r=n;return sr(t,(i,a)=>{r=sp(r,yn(e,i),a)}),r}function FE(n,e){if(Ut(e))return So.empty();{const t=n.writeTree_.setTree(e,new Mn(null));return new So(t)}}function Jl(n,e){return null!=ki(n,e)}function ki(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Br(t.path,e)):null}function UE(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Sn,(r,i)=>{e.push(new Vt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Vt(r,i.value))}),e}function ec(n,e){if(Ut(e))return n;{const t=ki(n,e);return new So(null!=t?new Mn(t):n.writeTree_.subtree(e))}}function VE(n){return n.writeTree_.isEmpty()}function op(n,e){return av($t(),n.writeTree_,e)}function av(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,N.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=av(yn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(yn(n,".priority"),r)),t}}function lv(n,e){return qE(e,n)}function DT(n,e){if(n.snap)return f(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&f(yn(n.path,t),e))return!0;return!1}function Ao(n){return n.visible}function HE(n,e,t){let r=So.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let d;if(a.snap)f(t,c)?(d=Br(t,c),r=sp(r,d,a.snap)):f(c,t)&&(d=Br(c,t),r=sp(r,$t(),a.snap.getChild(d)));else{if(!a.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(f(t,c))d=Br(t,c),r=ov(r,d,a.children);else if(f(c,t))if(d=Br(c,t),Ut(d))r=ov(r,$t(),a.children);else{const _=(0,N.DV)(a.children,Ht(d));if(_){const w=_.getChild(cn(d));r=sp(r,$t(),w)}}}}}return r}function cv(n,e,t,r,i){if(r||i){const a=ec(n.visibleWrites,e);return!i&&VE(a)?t:i||null!=t||Jl(a,$t())?op(HE(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(f(w.path,e)||f(e,w.path))},e),t||Ft.EMPTY_NODE):null}{const a=ki(n.visibleWrites,e);if(null!=a)return a;{const c=ec(n.visibleWrites,e);return VE(c)?t:null!=t||Jl(c,$t())?op(c,t||Ft.EMPTY_NODE):null}}}function Em(n,e,t,r){return cv(n.writeTree,n.treePath,e,t,r)}function uv(n,e){return function ST(n,e,t){let r=Ft.EMPTY_NODE;const i=ki(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Sn,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=ec(n.visibleWrites,e);return t.forEachChild(Sn,(c,d)=>{const _=op(ec(a,new en(c)),d);r=r.updateImmediateChild(c,_)}),UE(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return UE(ec(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function Nt(n,e,t,r){return function AT(n,e,t,r,i){(0,N.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=yn(e,t);if(Jl(n.visibleWrites,a))return null;{const c=ec(n.visibleWrites,a);return VE(c)?i.getChild(t):op(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function ap(n,e){return function xT(n,e){return ki(n.visibleWrites,e)}(n.writeTree,yn(n.treePath,e))}function Im(n,e,t){return function RT(n,e,t,r){const i=yn(e,t),a=ki(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?op(ec(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function WE(n,e){return qE(yn(n.treePath,e),n.writeTree)}function qE(n,e){return{treePath:n,writeTree:e}}class KE{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Au(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,lh(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Su(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Au(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const dv=new class kT{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class hv{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new tl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Im(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:To(this.viewCache_),a=function GE(n,e,t,r,i,a){return function zE(n,e,t,r,i,a,c){let d;const _=ec(n.visibleWrites,e),w=ki(_,$t());if(null!=w)d=w;else{if(null==t)return[];d=op(_,t)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const b=[],S=c.getCompare(),O=a?d.getReverseIteratorFrom(r,c):d.getIteratorFrom(r,c);let B=O.getNext();for(;B&&b.length<i;)0!==S(B,r)&&b.push(B),B=O.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function tc(n,e,t,r,i,a){const c=e.eventCache;if(null!=ap(r,t))return e;{let d,_;if(Ut(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=To(e),S=uv(r,w instanceof Ft?w:Ft.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=Em(r,To(e));d=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Ht(t);if(".priority"===w){(0,N.hu)(1===Vr(t),"Can't have a priority with additional path components");const b=c.getNode();_=e.serverCache.getNode();const S=Nt(r,t,b,_);d=null!=S?n.filter.updatePriority(b,S):c.getNode()}else{const b=cn(t);let S;if(c.isCompleteForChild(w)){_=e.serverCache.getNode();const O=Nt(r,t,c.getNode(),_);S=null!=O?c.getNode().getImmediateChild(w).updateChild(b,O):c.getNode().getImmediateChild(w)}else S=Im(r,w,e.serverCache);d=null!=S?n.filter.updateChild(c.getNode(),w,S,b,i,a):c.getNode()}}return Pu(e,d,c.isFullyInitialized()||Ut(t),n.filter.filtersNodes())}}function bm(n,e,t,r,i,a,c,d){const _=e.serverCache;let w;const b=c?n.filter:n.filter.getIndexedFilter();if(Ut(t))w=b.updateFullNode(_.getNode(),r,null);else if(b.filtersNodes()&&!_.isFiltered()){const B=_.getNode().updateChild(t,r);w=b.updateFullNode(_.getNode(),B,null)}else{const B=Ht(t);if(!_.isCompleteForPath(t)&&Vr(t)>1)return e;const q=cn(t),me=_.getNode().getImmediateChild(B).updateChild(q,r);w=".priority"===B?b.updatePriority(_.getNode(),me):b.updateChild(_.getNode(),B,me,q,dv,null)}const S=LE(e,w,_.isFullyInitialized()||Ut(t),b.filtersNodes());return tc(n,S,t,i,new hv(i,S,a),d)}function lp(n,e,t,r,i,a,c){const d=e.eventCache;let _,w;const b=new hv(i,e,a);if(Ut(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=Pu(e,w,!0,n.filter.filtersNodes());else{const S=Ht(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=Pu(e,w,d.isFullyInitialized(),d.isFiltered());else{const O=cn(t),B=d.getNode().getImmediateChild(S);let q;if(Ut(O))q=r;else{const fe=b.getCompleteChild(S);q=null!=fe?".priority"===nh(O)&&fe.getChild(bu(O)).isEmpty()?fe:fe.updateChild(O,r):Ft.EMPTY_NODE}_=B.equals(q)?e:Pu(e,n.filter.updateChild(d.getNode(),S,q,O,b,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return _}function Cm(n,e){return n.eventCache.isCompleteForChild(e)}function NT(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function QE(n,e,t,r,i,a,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=Ut(t)?r:new Mn(null).setTree(t,r);const b=e.serverCache.getNode();return w.children.inorderTraversal((S,O)=>{if(b.hasChild(S)){const q=NT(0,e.serverCache.getNode().getImmediateChild(S),O);_=bm(n,_,new en(S),q,i,a,c,d)}}),w.children.inorderTraversal((S,O)=>{const B=!e.serverCache.isCompleteForChild(S)&&void 0===O.value;if(!b.hasChild(S)&&!B){const fe=NT(0,e.serverCache.getNode().getImmediateChild(S),O);_=bm(n,_,new en(S),fe,i,a,c,d)}}),_}class GM{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new ep(r.getIndex()),a=function ME(n){return n.loadsAllData()?new ep(n.getIndex()):n.hasLimit()?new Jy(n):new tp(n)}(r);this.processor_=function PT(n){return{filter:n}}(a);const c=t.serverCache,d=t.eventCache,_=i.updateFullNode(Ft.EMPTY_NODE,c.getNode(),null),w=a.updateFullNode(Ft.EMPTY_NODE,d.getNode(),null),b=new tl(_,c.isFullyInitialized(),i.filtersNodes()),S=new tl(w,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=dh(S,b),this.eventGenerator_=new ET(this.query_)}get query(){return this.query_}}function UT(n,e){const t=To(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ut(e)&&!t.getImmediateChild(Ht(e)).isEmpty())?t.getChild(e):null}function fv(n){return 0===n.eventRegistrations_.length}function JE(n,e,t){const r=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function pv(n,e,t,r){e.type===ys.MERGE&&null!==e.source.queryId&&((0,N.hu)(To(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(hh(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function ZE(n,e,t,r,i){const a=new KE;let c,d;if(t.type===ys.OVERWRITE){const w=t;w.source.fromUser?c=lp(n,e,w.path,w.snap,r,i,a):((0,N.hu)(w.source.fromServer,"Unknown source."),d=w.source.tagged||e.serverCache.isFiltered()&&!Ut(w.path),c=bm(n,e,w.path,w.snap,r,i,d,a))}else if(t.type===ys.MERGE){const w=t;w.source.fromUser?c=function OT(n,e,t,r,i,a,c){let d=e;return r.foreach((_,w)=>{const b=yn(t,_);Cm(e,Ht(b))&&(d=lp(n,d,b,w,i,a,c))}),r.foreach((_,w)=>{const b=yn(t,_);Cm(e,Ht(b))||(d=lp(n,d,b,w,i,a,c))}),d}(n,e,w.path,w.children,r,i,a):((0,N.hu)(w.source.fromServer,"Unknown source."),d=w.source.tagged||e.serverCache.isFiltered(),c=QE(n,e,w.path,w.children,r,i,d,a))}else if(t.type===ys.ACK_USER_WRITE){const w=t;c=w.revert?function XE(n,e,t,r,i,a){let c;if(null!=ap(r,t))return e;{const d=new hv(r,e,i),_=e.eventCache.getNode();let w;if(Ut(t)||".priority"===Ht(t)){let b;if(e.serverCache.isFullyInitialized())b=Em(r,To(e));else{const S=e.serverCache.getNode();(0,N.hu)(S instanceof Ft,"serverChildren would be complete if leaf node"),b=uv(r,S)}w=n.filter.updateFullNode(_,b,a)}else{const b=Ht(t);let S=Im(r,b,e.serverCache);null==S&&e.serverCache.isCompleteForChild(b)&&(S=_.getImmediateChild(b)),w=null!=S?n.filter.updateChild(_,b,S,cn(t),d,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(_,b,Ft.EMPTY_NODE,cn(t),d,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Em(r,To(e)),c.isLeafNode()&&(w=n.filter.updateFullNode(w,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=ap(r,$t()),Pu(e,w,c,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function zM(n,e,t,r,i,a,c){if(null!=ap(i,t))return e;const d=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Ut(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return bm(n,e,t,_.getNode().getChild(t),i,a,d,c);if(Ut(t)){let w=new Mn(null);return _.getNode().forEachChild(xi,(b,S)=>{w=w.set(new en(b),S)}),QE(n,e,t,w,i,a,d,c)}return e}{let w=new Mn(null);return r.foreach((b,S)=>{const O=yn(t,b);_.isCompleteForPath(O)&&(w=w.set(b,_.getNode().getChild(O)))}),QE(n,e,t,w,i,a,d,c)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==ys.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);c=function LT(n,e,t,r,i){const a=e.serverCache;return tc(n,LE(e,a.getNode(),a.isFullyInitialized()||Ut(t),a.isFiltered()),t,r,dv,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function YE(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=hh(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(xE(hh(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function HM(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,N.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,eI(n,a.changes,a.viewCache.eventCache.getNode(),null)}function eI(n,e,t,r){return function IT(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function $M(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),ip(n,i,"child_removed",e,r,t),ip(n,i,"child_added",e,r,t),ip(n,i,"child_moved",a,r,t),ip(n,i,"child_changed",e,r,t),ip(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Tm,cp;class tI{constructor(){this.views=new Map}}function Sm(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,N.hu)(null!=a,"SyncTree gave us an op for an invalid query."),pv(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(pv(c,e,t,r));return a}}function Am(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let d=Em(t,i?r:null),_=!1;d?_=!0:r instanceof Ft?(d=uv(t,r),_=!1):(d=Ft.EMPTY_NODE,_=!1);const w=dh(new tl(d,_,!1),new tl(r,i,!1));return new GM(e,w)}return c}function Rm(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function nc(n,e){let t=null;for(const r of n.views.values())t=t||UT(r,e);return t}function $T(n,e){return e._queryParams.loadsAllData()?xm(n):n.views.get(e._queryIdentifier)}function Ou(n,e){return null!=$T(n,e)}function nl(n){return null!=xm(n)}function xm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Mm=1;class Nu{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mn(null),this.pendingWriteTree_=function MT(){return{visibleWrites:So.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function up(n,e,t,r,i){return function BE(n,e,t,r,i){(0,N.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=sp(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Lu(n,new Do({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function _a(n,e,t=!1){const r=function CT(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function $E(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&DT(d,r.path)?i=!1:f(r.path,d.path)&&(a=!0)),c--}return!!i&&(a?(function TT(n){n.visibleWrites=HE(n.allWrites,Ao,$t()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=FE(n.visibleWrites,r.path):sr(r.children,_=>{n.visibleWrites=FE(n.visibleWrites,yn(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Mn(null);return null!=r.snap?a=a.set($t(),!0):sr(r.children,c=>{a=a.set(new en(c),!0)}),Lu(n,new wm(r.path,a,t))}return[]}function rc(n,e,t){return Lu(n,new Do({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function ph(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let c=[];if(a&&("default"===e._queryIdentifier||Ou(a,e))){const d=function WM(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const d=nl(n);if("default"===i)for(const[_,w]of n.views.entries())c=c.concat(JE(w,t,r)),fv(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(c=c.concat(JE(_,t,r)),fv(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return d&&!nl(n)&&a.push(new(function nI(){return(0,N.hu)(Tm,"Reference.ts has not been loaded"),Tm}())(e._repo,e._path)),{removed:a,events:c}}(a,e,t,r);(function jT(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=d.removed;c=d.events;const w=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),b=n.syncPointTree_.findOnPath(i,(S,O)=>nl(O));if(w&&!b){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const O=function WT(n){return n.fold((e,t,r)=>{if(t&&nl(t))return[xm(t)];{let i=[];return t&&(i=Rm(t)),sr(r,(a,c)=>{i=i.concat(c)}),i}})}(S);for(let B=0;B<O.length;++B){const q=O[B],fe=q.query,me=Qi(n,q);n.listenProvider_.startListening(pp(fe),hp(n,fe),me.hashFn,me.onComplete)}}}!b&&_.length>0&&!r&&(w?n.listenProvider_.stopListening(pp(e),null):_.forEach(S=>{const O=n.queryToTagMap.get(Om(S));n.listenProvider_.stopListening(pp(S),O)})),function qT(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Om(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return c}function km(n,e,t,r){const i=cI(n,r);if(null!=i){const a=fp(i),c=a.path,d=a.queryId,_=Br(c,e);return Nm(n,c,new Do(ku(d),_,t))}return[]}function sI(n,e){const t=n._path;let r=null,i=!1;e.syncPointTree_.foreachOnPath(t,(w,b)=>{const S=Br(w,t);r=r||nc(b,S),i=i||nl(b)});let c,a=e.syncPointTree_.get(t);a?(i=i||nl(a),r=r||nc(a,$t())):(a=new tI,e.syncPointTree_=e.syncPointTree_.set(t,a)),null!=r?c=!0:(c=!1,r=Ft.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((b,S)=>{const O=nc(S,$t());O&&(r=r.updateImmediateChild(b,O))}));const d=Ou(a,n);if(!d&&!n._queryParams.loadsAllData()){const w=Om(n);(0,N.hu)(!e.queryToTagMap.has(w),"View does not exist, but we have a tag");const b=function uI(){return Mm++}();e.queryToTagMap.set(w,b),e.tagToQueryMap.set(b,w)}return{syncPoint:a,writesCache:lv(e.pendingWriteTree_,t),serverCache:r,serverCacheComplete:c,foundAncestorDefaultView:i,viewAlreadyExists:d}}function yv(n,e,t){const{syncPoint:r,serverCache:i,writesCache:a,serverCacheComplete:c,viewAlreadyExists:d,foundAncestorDefaultView:_}=sI(e,n);let w=function gv(n,e,t,r,i,a){const c=Am(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function Dm(n,e){n.eventRegistrations_.push(e)}(c,t),function VT(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Sn,(a,c)=>{r.push(Su(a,c))}),t.isFullyInitialized()&&r.push(xE(t.getNode())),eI(n,r,t.getNode(),e)}(c,t)}(r,e,t,a,i,c);if(!d&&!_){const b=$T(r,e);w=w.concat(function KT(n,e,t){const r=e._path,i=hp(n,e),a=Qi(n,t),c=n.listenProvider_.startListening(pp(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,N.hu)(!nl(d.value),"If we're adding a query, it shouldn't be shadowed");else{const _=d.fold((w,b,S)=>{if(!Ut(w)&&b&&nl(b))return[xm(b).query];{let O=[];return b&&(O=O.concat(Rm(b).map(B=>B.query))),sr(S,(B,q)=>{O=O.concat(q)}),O}});for(let w=0;w<_.length;++w){const b=_[w];n.listenProvider_.stopListening(pp(b),hp(n,b))}}return c}(n,e,b))}return w}function Pm(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,d)=>{const w=nc(d,Br(c,e));if(w)return w});return cv(i,e,a,t,!0)}function Lu(n,e){return aI(e,n.syncPointTree_,null,lv(n.pendingWriteTree_,$t()))}function aI(n,e,t,r){if(Ut(n.path))return lI(n,e,t,r);{const i=e.get($t());null==t&&null!=i&&(t=nc(i,$t()));let a=[];const c=Ht(n.path),d=n.operationForChild(c),_=e.children.get(c);if(_&&d){const w=t?t.getImmediateChild(c):null,b=WE(r,c);a=a.concat(aI(d,_,w,b))}return i&&(a=a.concat(Sm(i,n,r,t))),a}}function lI(n,e,t,r){const i=e.get($t());null==t&&null!=i&&(t=nc(i,$t()));let a=[];return e.children.inorderTraversal((c,d)=>{const _=t?t.getImmediateChild(c):null,w=WE(r,c),b=n.operationForChild(c);b&&(a=a.concat(lI(b,d,_,w)))}),i&&(a=a.concat(Sm(i,n,r,t))),a}function Qi(n,e){const t=e.query,r=hp(n,t);return{hashFn:()=>(function FT(n){return n.viewCache_.serverCache.getNode()}(e)||Ft.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function _v(n,e,t){const r=cI(n,t);if(r){const i=fp(r),a=i.path,c=i.queryId,d=Br(a,e);return Nm(n,a,new ma(ku(c),d))}return[]}(n,t._path,r):function mv(n,e){return Lu(n,new ma({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function $y(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return ph(n,t,null,a)}}}}function hp(n,e){const t=Om(e);return n.queryToTagMap.get(t)}function Om(n){return n._path.toString()+"$"+n._queryIdentifier}function cI(n,e){return n.tagToQueryMap.get(e)}function fp(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new en(n.substr(0,e))}}function Nm(n,e,t){const r=n.syncPointTree_.get(e);return(0,N.hu)(r,"Missing sync point for query tag that we're tracking"),Sm(r,t,lv(n.pendingWriteTree_,e),null)}function pp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function zT(){return(0,N.hu)(cp,"Reference.ts has not been loaded"),cp}())(n._repo,n._path):n}class vv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new vv(t)}node(){return this.node_}}class gp{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=yn(this.path_,e);return new gp(this.syncTree_,t)}node(){return Pm(this.syncTree_,this.path_)}}const ZT=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},dI=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?YT(n[".sv"],e,t):"object"==typeof n[".sv"]?QT(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},YT=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},QT=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,N.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,N.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},hI=function(n,e,t,r){return mp(e,new gp(t,n),r)},Hs=function(n,e,t){return mp(n,new vv(e),t)};function mp(n,e,t){const r=n.getPriority().val(),i=dI(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,d=dI(c.getValue(),e,t);return d!==c.getValue()||i!==c.getPriority().val()?new Yf(d,Kn(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new Yf(i))),c.forEachChild(Sn,(d,_)=>{const w=mp(_,e.getImmediateChild(d),t);w!==_&&(a=a.updateImmediateChild(d,w))}),a}}class wv{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Lm(n,e){let t=e instanceof en?e:new en(e),r=n,i=Ht(t);for(;null!==i;){const a=(0,N.DV)(r.node.children,i)||{children:{},childCount:0};r=new wv(i,r,a),t=cn(t),i=Ht(t)}return r}function ic(n){return n.node.value}function Ev(n,e){n.node.value=e,mh(n)}function fI(n){return n.node.childCount>0}function gh(n,e){sr(n.node.children,(t,r)=>{e(new wv(t,n,r))})}function pI(n,e,t,r){t&&!r&&e(n),gh(n,i=>{pI(i,e,!0,r)}),t&&r&&e(n)}function sc(n){return new en(null===n.parent?n.name:sc(n.parent)+"/"+n.name)}function mh(n){null!==n.parent&&function Fm(n,e,t){const r=function XT(n){return void 0===ic(n)&&!fI(n)}(t),i=(0,N.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,mh(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,mh(n))}(n.parent,n.name,n)}const qM=/[\[\].#$\/\u0000-\u001F\u007F]/,Iv=/[\[\].#$\u0000-\u001F\u007F]/,gI=10485760,_p=function(n){return"string"==typeof n&&0!==n.length&&!qM.test(n)},bv=function(n){return"string"==typeof n&&0!==n.length&&!Iv.test(n)},_h=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!su(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},zs=function(n,e,t,r){r&&void 0===e||vs((0,N.gK)(n,"value"),e,t)},vs=function(n,e,t){const r=t instanceof en?new m(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Q(r));if("function"==typeof e)throw new Error(n+"contains a function "+Q(r)+" with contents = "+e.toString());if(su(e))throw new Error(n+"contains "+e.toString()+" "+Q(r));if("string"==typeof e&&e.length>gI/3&&(0,N.ug)(e)>gI)throw new Error(n+"contains a string greater than "+gI+" utf8 bytes "+Q(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(sr(e,(c,d)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!_p(c)))throw new Error(n+" contains an invalid key ("+c+") "+Q(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function E(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),P(n)})(r,c),vs(n,d,r),function x(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Q(r)+" in addition to actual children.")}},yp=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];sr(e,(c,d)=>{const _=new en(c);if(vs(i,d,yn(t,_)),".priority"===nh(_)&&!_h(d))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Iu(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!_p(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(dm);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&f(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Fu=function(n,e,t){if(!t||void 0!==e){if(su(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!_h(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},vp=function(n,e,t,r){if(!(r&&void 0===t||_p(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yh=function(n,e,t,r){if(!(r&&void 0===t||bv(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_I=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yh(n,e,t,r)},Gs=function(n,e){if(".info"===Ht(e))throw new Error(n+" failed = Can't modify data under /.info/")},yI=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!_p(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),bv(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class wp{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vm(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!y(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function eS(n,e,t){Vm(n,t),vI(n,r=>y(r,e))}function Ws(n,e,t){Vm(n,t),vI(n,r=>f(r,e)||f(e,r))}function vI(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(tS(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function tS(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Kl&&Tr("event: "+t.toString()),Eo(r)}}}const wI="repo_interrupt",nS=25;class rS{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ym(),this.transactionQueueTree_=new wv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Cv(n){const t=n.infoData_.getNode(new en(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function vh(n){return ZT({timestamp:Cv(n)})}function EI(n,e,t,r,i){n.dataUpdateCount++;const a=new en(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,N.UI)(t,w=>Kn(w));c=function GT(n,e,t,r){const i=cI(n,r);if(i){const a=fp(i),c=a.path,d=a.queryId,_=Br(c,e),w=Mn.fromObject(t);return Nm(n,c,new uh(ku(d),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Kn(t);c=km(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,N.UI)(t,w=>Kn(w));c=function rI(n,e,t){const r=Mn.fromObject(t);return Lu(n,new uh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Kn(t);c=rc(n.serverSyncTree_,a,_)}let d=a;c.length>0&&(d=Ks(n,a)),Ws(n.eventQueue_,d,c)}function Bm(n,e){Dv(n,"connected",e),!1===e&&function lS(n){Uu(n,"onDisconnectEvents");const e=vh(n),t=ym();rv(n.onDisconnect_,$t(),(i,a)=>{const c=hI(i,a,n.serverSyncTree_,e);Mu(t,i,c)});let r=[];rv(t,$t(),(i,a)=>{r=r.concat(rc(n.serverSyncTree_,i,a));const c=ac(n,i);Ks(n,c)}),n.onDisconnect_=ym(),Ws(n.eventQueue_,$t(),r)}(n)}function Dv(n,e,t){const r=new en("/.info/"+e),i=Kn(t);n.infoData_.updateSnapshot(r,i);const a=rc(n.infoSyncTree_,r,i);Ws(n.eventQueue_,r,a)}function jm(n){return n.nextWriteId_++}function oS(n,e){const t=function oI(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,b)=>{const S=Br(w,t);r=r||nc(b,S)});let i=n.syncPointTree_.get(t);i?r=r||nc(i,$t()):(i=new tI,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new tl(r,!0,!1):null;return function fh(n){return hh(n.viewCache_)}(Am(i,e,lv(n.pendingWriteTree_,e._path),a?c.getNode():Ft.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Kn(r).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())rc(n.serverSyncTree_,e._path,i);else{const c=function iI(n,e){const{syncPoint:t,serverCache:r,writesCache:i,serverCacheComplete:a}=sI(e,n),c=Am(t,e,i,r,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),e._queryParams.loadsAllData()?null:hp(n,e)}(n.serverSyncTree_,e);km(n.serverSyncTree_,e._path,i,c)}return ph(n.serverSyncTree_,e,null).length>0&&Uu(n,"unexpected cancel events in repoGetValue"),i},r=>(Uu(n,"get for query "+(0,N.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}function Tv(n,e,t,r,i){Uu(n,"set",{path:e.toString(),value:t,priority:r});const a=vh(n),c=Kn(t,r),d=Pm(n.serverSyncTree_,e),_=Hs(c,d,a),w=jm(n),b=up(n.serverSyncTree_,e,_,w,!0);Vm(n.eventQueue_,b),n.server_.put(e.toString(),c.val(!0),(O,B)=>{const q="ok"===O;q||ii("set at "+e+" failed: "+O);const fe=_a(n.serverSyncTree_,w,!q);Ws(n.eventQueue_,e,fe),ya(0,i,O,B)});const S=ac(n,e);Ks(n,S),Ws(n.eventQueue_,S,[])}function II(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Xl(n.onDisconnect_,e),ya(0,t,r,i)})}function Sv(n,e,t,r){const i=Kn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&Mu(n.onDisconnect_,e,i),ya(0,r,a,c)})}function CI(n,e,t){let r;r=".info"===Ht(e._path)?ph(n.infoSyncTree_,e,t):ph(n.serverSyncTree_,e,t),eS(n.eventQueue_,e._path,r)}function Ep(n){n.persistentConnection_&&n.persistentConnection_.interrupt(wI)}function Uu(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Tr(t,...e)}function ya(n,e,t,r){e&&Eo(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function qs(n,e,t){return Pm(n.serverSyncTree_,e,t)||Ft.EMPTY_NODE}function oc(n,e=n.transactionQueueTree_){if(e||rl(n,e),ic(e)){const t=Hm(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function pi(n,e,t){const r=t.map(w=>w.currentWriteId),i=qs(n,e,r);let a=i;const c=i.hash();for(let w=0;w<t.length;w++){const b=t[w];(0,N.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const S=Br(e,b.path);a=a.updateChild(S,b.currentOutputSnapshotRaw)}const d=a.val(!0),_=e;n.server_.put(_.toString(),d,w=>{Uu(n,"transaction put response",{path:_.toString(),status:w});let b=[];if("ok"===w){const S=[];for(let O=0;O<t.length;O++)t[O].status=2,b=b.concat(_a(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&S.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();rl(n,Lm(n.transactionQueueTree_,e)),oc(n,n.transactionQueueTree_),Ws(n.eventQueue_,e,b);for(let O=0;O<S.length;O++)Eo(S[O])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ii("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}Ks(n,e)}},c)}(n,sc(e),t)}else fI(e)&&gh(e,t=>{oc(n,t)})}function Ks(n,e){const t=ws(n,e),r=sc(t);return function $m(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const _=e[d],w=Br(t,_.path);let S,b=!1;if((0,N.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)b=!0,S=_.abortReason,i=i.concat(_a(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=nS)b=!0,S="maxretry",i=i.concat(_a(n.serverSyncTree_,_.currentWriteId,!0));else{const O=qs(n,_.path,c);_.currentInputSnapshot=O;const B=e[d].update(O.val());if(void 0!==B){vs("transaction failed: Data returned ",B,_.path);let q=Kn(B);"object"==typeof B&&null!=B&&(0,N.r3)(B,".priority")||(q=q.updatePriority(O.getPriority()));const me=_.currentWriteId,mt=vh(n),dt=Hs(q,O,mt);_.currentOutputSnapshotRaw=q,_.currentOutputSnapshotResolved=dt,_.currentWriteId=jm(n),c.splice(c.indexOf(me),1),i=i.concat(up(n.serverSyncTree_,_.path,dt,_.currentWriteId,_.applyLocally)),i=i.concat(_a(n.serverSyncTree_,me,!0))}else b=!0,S="nodata",i=i.concat(_a(n.serverSyncTree_,_.currentWriteId,!0))}Ws(n.eventQueue_,t,i),i=[],b&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===S?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(S),!1,null)))}rl(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Eo(r[d]);oc(n,n.transactionQueueTree_)}(n,Hm(n,t),r),r}function ws(n,e){let t,r=n.transactionQueueTree_;for(t=Ht(e);null!==t&&void 0===ic(r);)r=Lm(r,t),t=Ht(e=cn(e));return r}function Hm(n,e){const t=[];return Vu(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Vu(n,e,t){const r=ic(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);gh(e,i=>{Vu(n,i,t)})}function rl(n,e){const t=ic(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Ev(e,t.length>0?t:void 0)}gh(e,r=>{rl(n,r)})}function ac(n,e){const t=sc(ws(n,e)),r=Lm(n.transactionQueueTree_,e);return function JT(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{lc(n,i)}),lc(n,r),pI(r,i=>{lc(n,i)}),t}function lc(n,e){const t=ic(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,N.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,N.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(_a(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Ev(e,void 0):t.length=a+1,Ws(n.eventQueue_,sc(e),i);for(let c=0;c<r.length;c++)Eo(r[c])}}const cc=function(n,e){const t=Ih(n),r=t.namespace;return"firebase.com"===t.domain&&wo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&wo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ii("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new du(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new en(t.pathString)}},Ih=function(n){let e="",t="",r="",i="",a="",c=!0,d="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(d=n.substring(0,w-1),n=n.substring(w+2));let b=n.indexOf("/");-1===b&&(b=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(b,S)),b<S&&(i=function wh(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,S)));const O=function Eh(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ii(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(c="https"===d||"wss"===d,_=parseInt(e.substring(w+1),10)):w=e.length;const B=e.slice(0,w);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),a=r}"ns"in O&&(a=O.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:d,pathString:i,namespace:a}};class Bu{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Pz)(this.snapshot.exportVal())}}class Av{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Rv{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class xv{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return II(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Gs("OnDisconnect.remove",this._path);const e=new N.BH;return Sv(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Gs("OnDisconnect.set",this._path),zs("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return Sv(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Gs("OnDisconnect.setWithPriority",this._path),zs("OnDisconnect.setWithPriority",e,this._path,!1),Fu("OnDisconnect.setWithPriority",t,!1);const r=new N.BH;return function cS(n,e,t,r,i){const a=Kn(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,d)=>{"ok"===c&&Mu(n.onDisconnect_,e,a),ya(0,i,c,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Gs("OnDisconnect.update",this._path),yp("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function KM(n,e,t,r){if((0,N.xb)(t))return Tr("onDisconnect().update() called with empty data.  Don't do anything."),void ya(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&sr(t,(c,d)=>{const _=Kn(d);Mu(n.onDisconnect_,yn(e,c),_)}),ya(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Pi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ut(this._path)?null:nh(this._path)}get ref(){return new Es(this._repo,this._path)}get _queryIdentifier(){const e=nv(this._queryParams),t=kf(e);return"{}"===t?"default":t}get _queryObject(){return nv(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof Pi))return!1;const t=this._repo===e._repo,r=y(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function rh(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Ip(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function il(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===xi){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==js)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ps)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Sn){if(null!=e&&!_h(e)||null!=t&&!_h(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof Yy||n.getIndex()===AE,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function bp(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Es extends Pi{constructor(e,t){super(e,t,new np,!1)}get parent(){const e=bu(this._path);return null===e?null:new Es(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class uc{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new en(e),r=dc(this.ref,e);return new uc(this._node.getChild(t),r,Sn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new uc(i,dc(this.ref,r),Sn)))}hasChild(e){const t=new en(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function DI(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?dc(n._root,e):n._root}function TI(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=cc(e,n._repo.repoInfo_.nodeAdmin);yI("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&wo("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),DI(n,t.path.toString())}function dc(n,e){return null===Ht((n=(0,N.m9)(n))._path)?_I("child","path",e,!1):yh("child","path",e,!1),new Es(n._repo,yn(n._path,e))}function Cp(n,e){n=(0,N.m9)(n),Gs("set",n._path),zs("set",e,n._path,!1);const t=new N.BH;return Tv(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Gm(n,e){yp("update",e,n._path,!1);const t=new N.BH;return function aS(n,e,t,r){Uu(n,"update",{path:e.toString(),value:t});let i=!0;const a=vh(n),c={};if(sr(t,(d,_)=>{i=!1,c[d]=hI(yn(e,d),Kn(_),n.serverSyncTree_,a)}),i)Tr("update() called with empty data.  Don't do anything."),ya(0,r,"ok",void 0);else{const d=jm(n),_=function dp(n,e,t,r){!function jE(n,e,t,r){(0,N.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=ov(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Mn.fromObject(t);return Lu(n,new uh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,d);Vm(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,b)=>{const S="ok"===w;S||ii("update at "+e+" failed: "+w);const O=_a(n.serverSyncTree_,d,!S),B=O.length>0?Ks(n,e):e;Ws(n.eventQueue_,B,O),ya(0,r,w,b)}),sr(t,w=>{const b=ac(n,yn(e,w));Ks(n,b)}),Ws(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class Wm{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Bu("value",this,new uc(e.snapshotNode,new Es(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Av(this,e,t):null}matches(e){return e instanceof Wm&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class bh{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Av(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const r=dc(new Es(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Bu(e.type,this,new uc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof bh&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ju(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(b,S)=>{CI(n._repo,n,d),_(b,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const c=new Rv(t,a||void 0),d="value"===e?new Wm(c):new bh(e,c);return function bI(n,e,t){let r;r=".info"===Ht(e._path)?yv(n.infoSyncTree_,e,t):yv(n.serverSyncTree_,e,t),eS(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>CI(n._repo,n,d)}function qm(n,e,t,r){return ju(n,"value",e,t,r)}function Pv(n,e,t,r){return ju(n,"child_added",e,t,r)}function Km(n,e,t,r){return ju(n,"child_changed",e,t,r)}function Ov(n,e,t,r){return ju(n,"child_moved",e,t,r)}function Nv(n,e,t,r){return ju(n,"child_removed",e,t,r)}function Zm(n,e,t){let r=null;const i=t?new Rv(t):null;"value"===e?r=new Wm(i):e&&(r=new bh(e,i)),CI(n._repo,n,r)}class Zs{}class SI extends Zs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){zs("endAt",this._value,e._path,!0);const t=ev(e._queryParams,this._value,this._key);if(bp(t),il(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Pi(e._repo,e._path,t,e._orderByCalled)}}class RI extends Zs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){zs("endBefore",this._value,e._path,!1);const t=function tv(n,e,t){let r,i;return n.index_===xi?("string"==typeof e&&(e=pT(e)),i=ev(n,e,t)):(r=null==t?js:pT(t),i=ev(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(bp(t),il(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Pi(e._repo,e._path,t,e._orderByCalled)}}class Lv extends Zs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){zs("startAt",this._value,e._path,!0);const t=rp(e._queryParams,this._value,this._key);if(bp(t),il(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Pi(e._repo,e._path,t,e._orderByCalled)}}class gS extends Zs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){zs("startAfter",this._value,e._path,!1);const t=function _m(n,e,t){let r;if(n.index_===xi)"string"==typeof e&&(e=Xy(e)),r=rp(n,e,t);else{let i;i=null==t?ps:Xy(t),r=rp(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(bp(t),il(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Pi(e._repo,e._path,t,e._orderByCalled)}}class MI extends Zs{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Pi(e._repo,e._path,function Ru(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class kI extends Zs{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Pi(e._repo,e._path,function gT(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class OI extends Zs{constructor(e){super(),this._path=e}_apply(e){Ip(e,"orderByChild");const t=new en(this._path);if(Ut(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Yy(t),i=xu(e._queryParams,r);return il(i),new Pi(e._repo,e._path,i,!0)}}class LI extends Zs{_apply(e){Ip(e,"orderByKey");const t=xu(e._queryParams,xi);return il(t),new Pi(e._repo,e._path,t,!0)}}class UI extends Zs{_apply(e){Ip(e,"orderByPriority");const t=xu(e._queryParams,Sn);return il(t),new Pi(e._repo,e._path,t,!0)}}class Qm extends Zs{_apply(e){Ip(e,"orderByValue");const t=xu(e._queryParams,AE);return il(t),new Pi(e._repo,e._path,t,!0)}}class _S extends Zs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(zs("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new SI(this._value,this._key)._apply(new Lv(this._value,this._key)._apply(e))}}function Is(n,...e){let t=(0,N.m9)(n);for(const r of e)t=r._apply(t);return t}(function BT(n){(0,N.hu)(!Tm,"__referenceConstructor has already been defined"),Tm=n})(Es),function HT(n){(0,N.hu)(!cp,"__referenceConstructor has already been defined"),cp=n}(Es);const $u="FIREBASE_DATABASE_EMULATOR_HOST",Dp={};let BI=!1;function vS(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||wo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,c=cc(a,i),d=c.repoInfo;typeof process<"u"&&process.env&&(w=process.env[$u]),w?(_=!0,a=`http://${w}?ns=${d.namespace}`,c=cc(a,i),d=c.repoInfo):_=!c.repoInfo.secure;const b=i&&_?new cu(cu.OWNER):new lu(n.name,n.options,e);yI("Invalid Firebase Database URL",c),Ut(c.path)||wo("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function wS(n,e,t,r){let i=Dp[e.name];i||(i={},Dp[e.name]=i);let a=i[n.toURLString()];return a&&wo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new rS(n,BI,t,r),i[n.toURLString()]=a,a}(d,n,b,new Fr(n.name,t));return new jI(S,n)}class jI{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function iS(n,e,t){if(n.stats_=gu(n.repoInfo_),n.forceRestClient_||Nf())n.server_=new ch(n.repoInfo_,(r,i,a,c)=>{EI(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Bm(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Co(n.repoInfo_,e,(r,i,a,c)=>{EI(n,r,i,a,c)},r=>{Bm(n,r)},r=>{!function sS(n,e){sr(e,(t,r)=>{Dv(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function ga(n,e){const t=n.toString();return pu[t]||(pu[t]=e()),pu[t]}(n.repoInfo_,()=>new wT(n.stats_,n.server_)),n.infoData_=new mT,n.infoSyncTree_=new Nu({startListening:(r,i,a,c)=>{let d=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(d=rc(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),Dv(n,"connected",!1),n.serverSyncTree_=new Nu({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(d,_)=>{const w=c(d,_);Ws(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Es(this._repo,$t())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function YM(n,e){const t=Dp[e];(!t||t[n.key]!==n)&&wo(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Ep(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&wo("Cannot call "+e+" on a deleted database.")}}function $I(){Xd.IS_TRANSPORT_INITIALIZED&&ii("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Rr(){$I(),fi.forceDisallow()}function HI(){$I(),_s.forceDisallow(),fi.forceAllow()}function GI(n,e){Hd(n,e)}const Ch={".sv":"timestamp"};class qI{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Co.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Co.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function WI(n){Ri(ln.SDK_VERSION),(0,ln._registerComponent)(new ct.wA("database",(e,{instanceIdentifier:t})=>vS(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ln.registerVersion)(Us,"0.13.3",n),(0,ln.registerVersion)(Us,"0.13.3","esm2017")}();const va=new Dr.Yd("@firebase/database-compat"),ZI=function(n){va.warn("FIREBASE WARNING: "+n)};class Ro{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,ZI("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class xo{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class sl{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),yh("DataSnapshot.child","path",e,!1),new sl(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),yh("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new sl(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new bs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class jr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const c=jr.getCancelAndContextArgs_("Query.on",r,i),d=(w,b)=>{t.call(c.context,new sl(this.database,w),b)};d.userCallback=t,d.context=c.context;const _=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return qm(this._delegate,d,_),t;case"child_added":return Pv(this._delegate,d,_),t;case"child_removed":return Nv(this._delegate,d,_),t;case"child_changed":return Km(this._delegate,d,_),t;case"child_moved":return Ov(this._delegate,d,_),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Zm(this._delegate,e,i)}else Zm(this._delegate,e)}get(){return function kv(n){return oS((n=(0,N.m9)(n))._repo,n).then(e=>new uc(e,new Es(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new sl(this.database,e))}once(e,t,r,i){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const a=jr.getCancelAndContextArgs_("Query.once",r,i),c=new N.BH,d=(w,b)=>{const S=new sl(this.database,w);t&&t.call(a.context,S,b),c.resolve(S)};d.userCallback=t,d.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),c.reject(w)};switch(e){case"value":qm(this._delegate,d,_,{onlyOnce:!0});break;case"child_added":Pv(this._delegate,d,_,{onlyOnce:!0});break;case"child_removed":Nv(this._delegate,d,_,{onlyOnce:!0});break;case"child_changed":Km(this._delegate,d,_,{onlyOnce:!0});break;case"child_moved":Ov(this._delegate,d,_,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new jr(this.database,Is(this._delegate,function Ym(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new MI(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new jr(this.database,Is(this._delegate,function PI(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kI(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new jr(this.database,Is(this._delegate,function NI(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return yh("orderByChild","path",n,!1),new OI(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new jr(this.database,Is(this._delegate,function FI(){return new LI}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new jr(this.database,Is(this._delegate,function VI(){return new UI}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new jr(this.database,Is(this._delegate,function hc(){return new Qm}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new jr(this.database,Is(this._delegate,function pS(n=null,e){return vp("startAt","key",e,!0),new Lv(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new jr(this.database,Is(this._delegate,function mS(n,e){return vp("startAfter","key",e,!0),new gS(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new jr(this.database,Is(this._delegate,function AI(n,e){return vp("endAt","key",e,!0),new SI(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new jr(this.database,Is(this._delegate,function xI(n,e){return vp("endBefore","key",e,!0),new RI(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new jr(this.database,Is(this._delegate,function yS(n,e){return vp("equalTo","key",e,!0),new _S(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof jr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,N.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,N.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new bs(this.database,new Es(this._delegate._repo,this._delegate._path))}}class bs extends jr{constructor(e,t){super(e,new Pi(t._repo,t._path,new np,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new bs(this.database,dc(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new bs(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new bs(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const r=Cp(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,ZI("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Gs("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const r=Gm(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function zm(n,e,t){if(Gs("setWithPriority",n._path),zs("setWithPriority",e,n._path,!1),Fu("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new N.BH;return Tv(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function Mv(n){return Gs("remove",n._path),Cp(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function TS(n,e,t){var r;if(n=(0,N.m9)(n),Gs("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new N.BH,d=qm(n,()=>{});return function dS(n,e,t,r,i,a){Uu(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:Rf(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=qs(n,e,void 0);c.currentInputSnapshot=d;const _=c.update(d.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{vs("transaction failed: Data returned ",_,c.path),c.status=0;const w=Lm(n.transactionQueueTree_,e),b=ic(w)||[];let S;b.push(c),Ev(w,b),"object"==typeof _&&null!==_&&(0,N.r3)(_,".priority")?(S=(0,N.DV)(_,".priority"),(0,N.hu)(_h(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Pm(n.serverSyncTree_,e)||Ft.EMPTY_NODE).getPriority().val();const O=vh(n),B=Kn(_,S),q=Hs(B,d,O);c.currentOutputSnapshotRaw=B,c.currentOutputSnapshotResolved=q,c.currentWriteId=jm(n);const fe=up(n.serverSyncTree_,e,q,c.currentWriteId,c.applyLocally);Ws(n.eventQueue_,e,fe),oc(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,b)=>{let S=null;_?a.reject(_):(S=new uc(b,new Es(n._repo,n._path),Sn),a.resolve(new qI(w,S)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new xo(a.committed,new sl(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const r=function fS(n,e){n=(0,N.m9)(n),Gs("setPriority",n._path),Fu("setPriority",e,!1);const t=new N.BH;return Tv(n._repo,yn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const r=function hS(n,e){n=(0,N.m9)(n),Gs("push",n._path),zs("push",e,n._path,!0);const t=Cv(n._repo),r=RE(t),i=dc(n,r),a=dc(n,r);let c;return c=null!=e?Cp(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new bs(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new bs(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Gs("Reference.onDisconnect",this._delegate._path),new Ro(new xv(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Tp{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Rr,forceLongPolling:HI}}useEmulator(e,t,r={}){!function IS(n,e,t,r={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&wo("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&wo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new cu(cu.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,N.Sg)(r.mockUserToken,n.app.options.projectId);a=new cu(c)}!function Fv(n,e,t,r){n.repoInfo_=new du(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof bs){const t=TI(this._delegate,e.toString());return new bs(this,t)}{const t=DI(this._delegate,e);return new bs(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const r=TI(this._delegate,e);return new bs(this,r)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function zI(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),Ep(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function bS(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function uS(n){n.persistentConnection_&&n.persistentConnection_.resume(wI)}(n._repo)}(this._delegate)}}Tp.ServerValue={TIMESTAMP:function CS(){return Ch}(),increment:n=>function DS(n){return{".sv":{increment:n}}}(n)};var xS=Object.freeze({__proto__:null,initStandalone:function RS({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Ri(t);const c=new ct.zt("auth-internal",new ct.H0("database-standalone"));return c.setComponent(new ct.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Tp(vS(n,c,void 0,e,a),n),namespace:i}}});const Vv=Tp.ServerValue;!function Sp(n){n.INTERNAL.registerComponent(new ct.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Tp(i,r)},"PUBLIC").setServiceProps({Reference:bs,Query:jr,Database:Tp,DataSnapshot:sl,enableLogging:GI,INTERNAL:xS,ServerValue:Vv}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.3")}(At.Z);var vn=L(7579),Ap=L(5363),MS=L(6063);class kS extends vn.x{constructor(e=1/0,t=1/0,r=MS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let d=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)d=_;d&&r.splice(0,d+1)}}}function Bv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,ru.B)({connector:()=>new kS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Hu=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ys(n,e){return(0,bn.e)((t,r)=>{let i=0;t.subscribe((0,Cn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var ol=L(515);function al(n){return n<=0?()=>ol.E:(0,bn.e)((e,t)=>{let r=0;e.subscribe((0,Cn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Dh(n){return(0,bn.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Rp(n=QI){return(0,bn.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function QI(){return new Hu}function Ea(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ys((i,a)=>n(i,a,r)):M.y,al(1),t?Dh(e):Rp(()=>new Hu))}var Mo=L(576);function jv(n,e){return(0,Mo.m)(e)?_n(()=>n,e):_n(()=>n)}var Xm=L(9468);L(5867);const JI=new Map,LS={activated:!1,tokenObservers:[]},FS={initialized:!1,enabled:!1};function xr(n){return JI.get(n)||LS}function Qs(n,e){JI.set(n,e)}function Mp(){return FS}const Jm="https://content-firebaseappcheck.googleapis.com/v1",nb="exchangeDebugToken",zv={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ib{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ue.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function sb(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Oi=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ab(n,e){return t_.apply(this,arguments)}function t_(){return(t_=(0,ue.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const B=yield c.getHeartbeatsHeader();B&&(a["X-Firebase-Client"]=B)}const d={method:"POST",body:JSON.stringify(e),headers:a};let _,w;try{_=yield fetch(n,d)}catch(B){throw Oi.create("fetch-network-error",{originalErrorMessage:null===(r=B)||void 0===r?void 0:r.message})}if(200!==_.status)throw Oi.create("fetch-status-error",{httpStatus:_.status});try{w=yield _.json()}catch(B){throw Oi.create("fetch-parse-error",{originalErrorMessage:null===(i=B)||void 0===i?void 0:i.message})}const b=w.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw Oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const S=1e3*Number(b[1]),O=Date.now();return{token:w.token,expireTimeMillis:O+S,issuedAtTimeMillis:O}})).apply(this,arguments)}const US="firebase-app-check-database",VS=1,kp="firebase-app-check-store";let n_=null;function Gv(n,e){return Wv.apply(this,arguments)}function Wv(){return(Wv=(0,ue.Z)(function*(n,e){const r=(yield function Pp(){return n_||(n_=new Promise((n,e)=>{var t;try{const r=indexedDB.open(US,VS);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(Oi.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(kp,{keyPath:"compositeKey"})}}catch(r){e(Oi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),n_)}()).transaction(kp,"readwrite"),a=r.objectStore(kp).put({compositeKey:n,value:e});return new Promise((c,d)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var w;d(Oi.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Sh=new Dr.Yd("@firebase/app-check");function ub(n,e){return(0,N.hl)()?function Jn(n,e){return Gv(function Kv(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Sh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hb(){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,ue.Z)(function*(){const n=Mp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const pb={error:"UNKNOWN_ERROR"};function gb(n){return N.US.encodeString(JSON.stringify(n),!1)}function s_(n){return qu.apply(this,arguments)}function qu(){return(qu=(0,ue.Z)(function*(n,e=!1){const t=n.app;!function Gu(n){if(!xr(n).activated)throw Oi.create("use-before-activation",{appName:n.name})}(t);const r=xr(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Np(_)&&(i=_)}if(!e&&i&&Np(i))return{token:i.token};let d,c=!1;if(function db(){return Mp().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ab(function St(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Jm}/projects/${t}/apps/${r}:${nb}?key=${i}`,body:{debug_token:e}}}(t,yield hb()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),c=!0);const _=yield r.exchangeTokenPromise;return yield ub(t,_),Qs(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Sh.warn(_.message):Sh.error(_),a=_}return i?(d={token:i.token},Qs(t,Object.assign(Object.assign({},r),{token:i})),yield ub(t,i)):d=function _b(n){return{token:gb(pb),error:n}}(a),c&&function Xv(n,e){const t=xr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,d),d})).apply(this,arguments)}function Qv(n,e){const t=xr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Qs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function mb(n){const{app:e}=n,t=xr(e);let r=t.tokenRefresher;r||(r=function jS(n){const{app:e}=n;return new ib((0,ue.Z)(function*(){let r;if(r=xr(e).token?yield s_(n,!0):yield s_(n),r.error)throw r.error}),()=>!0,()=>{const t=xr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},zv.RETRIAL_MIN_WAIT,zv.RETRIAL_MAX_WAIT)}(n),Qs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Np(n){return n.expireTimeMillis-Date.now()>0}class $S{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=xr(this.app);for(const t of e)Qv(this.app,t.next);return Promise.resolve()}}const Tb="app-check-internal";!function Sb(){(0,ln._registerComponent)(new ct.wA("app-check",n=>function yb(n,e){return new $S(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Tb).initialize()})),(0,ln._registerComponent)(new ct.wA(Tb,n=>function HS(n){return{getToken:e=>s_(n,e),addTokenListener:e=>function Ku(n,e,t,r){const{app:i}=n,a=xr(i),c={next:t,error:r,type:e};if(Qs(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&Np(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),mb(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>mb(n))}(n,"INTERNAL",e),removeTokenListener:e=>Qv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ln.registerVersion)("@firebase/app-check","0.5.12")}();class Up{constructor(){return(0,Ze.vb)("app-check")}}typeof window<"u"&&window;var tw=L(127);const u_=new p.OlP("angularfire2.auth.use-emulator"),nw=new p.OlP("angularfire2.auth.settings"),rw=new p.OlP("angularfire2.auth.tenant-id"),d_=new p.OlP("angularfire2.auth.langugage-code"),iw=new p.OlP("angularfire2.auth.use-device-language"),sw=new p.OlP("angularfire.auth.persistence"),ow=(n,e,t,r,i,a,c,d)=>(0,on.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[w,b]of Object.entries(c))_.settings[w]=b;return d&&_.setPersistence(d),_},[t,r,i,a,c,d]);let Vp=(()=>{class n{constructor(t,r,i,a,c,d,_,w,b,S,O,B){const q=new vn.x,fe=at(void 0).pipe((0,Ap.Q)(c.outsideAngular),_n(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,1451)))),(0,wt.U)(()=>(0,on.on)(t,a,r)),(0,wt.U)(me=>ow(me,a,d,w,b,S,_,O)),Bv({bufferSize:1,refCount:!1}));if(yl(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{fe.pipe(Ea()).subscribe();const mt=fe.pipe(_n(ot=>ot.getRedirectResult().then(kt=>kt,()=>null)),Ze.iC,Bv({bufferSize:1,refCount:!1})),dt=fe.pipe(_n(ot=>new fr.y(kt=>({unsubscribe:a.runOutsideAngular(()=>ot.onAuthStateChanged(tn=>kt.next(tn),tn=>kt.error(tn),()=>kt.complete()))})))),st=fe.pipe(_n(ot=>new fr.y(kt=>({unsubscribe:a.runOutsideAngular(()=>ot.onIdTokenChanged(tn=>kt.next(tn),tn=>kt.error(tn),()=>kt.complete()))}))));this.authState=mt.pipe(jv(dt),(0,Xm.R)(c.outsideAngular),(0,Ap.Q)(c.insideAngular)),this.user=mt.pipe(jv(st),(0,Xm.R)(c.outsideAngular),(0,Ap.Q)(c.insideAngular)),this.idToken=this.user.pipe(_n(ot=>ot?(0,Gt.D)(ot.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(_n(ot=>ot?(0,Gt.D)(ot.getIdTokenResult()):at(null))),this.credential=(0,ri.T)(mt,q,this.authState.pipe(Ys(ot=>!ot))).pipe((0,wt.U)(ot=>ot?.user?ot:null),(0,Xm.R)(c.outsideAngular),(0,Ap.Q)(c.insideAngular))}return(0,on.pX)(this,fe,a,{spy:{apply:(me,mt,dt)=>{(me.startsWith("signIn")||me.startsWith("createUser"))&&dt.then(st=>q.next(st))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(on.Dh),p.LFG(on.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ze.HU),p.LFG(u_,8),p.LFG(nw,8),p.LFG(rw,8),p.LFG(d_,8),p.LFG(iw,8),p.LFG(sw,8),p.LFG(Up,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function kb(n){return null==n}function Pb(n){return"function"==typeof n.set}function h_(n,e){return Pb(e)?e:n.ref(e)}function Ob(n,e){if(function Mb(n){return"string"==typeof n}(n))return e.stringCase();if(Pb(n))return e.firebaseCase();if(function aw(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Rh(n,e,t="on",r=Yi.z){return new fr.y(i=>{let a=null;return a=n[t](e,(c,d)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,wt.U)(i=>{const{snapshot:a,prevKey:c}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:c,key:d}}),(0,ru.B)())}function lw(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Tk(n,e){const{payload:t,prevKey:r,key:i}=e,a=lw(n,i),c=function eA(n,e){if(kb(e))return 0;{const t=lw(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:d,key:_.key};return d=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function cw(n){return(kb(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function f_(n,e,t){return function xh(n,e,t){return Rh(n,"value","once",t).pipe(_n(r=>{const i=[at(r)];return e.forEach(a=>i.push(Rh(n,a,"on",t))),(0,ri.T)(...i).pipe(T(Tk,[]))}),V())}(n,e=cw(e),t)}function Nb(n,e,t){const r=(e=cw(e)).map(i=>Rh(n,i,"on",t));return(0,ri.T)(...r)}function p_(n,e){return function(r,i){return Ob(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Fb(n){return function(t){return t?Ob(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function dw(n,e){return function(){return Rh(n,"value","on",e)}}const nA=new p.OlP("angularfire2.realtimeDatabaseURL"),rA=new p.OlP("angularfire2.database.use-emulator");let hw=(()=>{class n{constructor(t,r,i,a,c,d,_,w,b,S,O,B,q,fe,me){this.schedulers=d;const mt=_,dt=(0,on.on)(t,c,r);w&&ow(dt,c,b,O,B,q,S,fe),this.database=(0,on.cc)(`${dt.name}.database.${i}`,"AngularFireDatabase",dt.name,()=>{const st=c.runOutsideAngular(()=>dt.database(i||void 0));return mt&&st.useEmulator(...mt),st},[mt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>h_(this.database,t));let a=i;return r&&(a=r(i)),function Ub(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:p_(r,"update"),set:p_(r,"set"),push:i=>r.push(i),remove:Fb(r),snapshotChanges:i=>f_(n,i,t).pipe(Ze.iC),stateChanges:i=>Nb(n,i,t).pipe(Ze.iC),auditTrail:i=>function uw(n,e,t){return function Lb(n,e,t){return function tA(n,e){return Rh(n,"value","on",e).pipe((0,wt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Me(...n){const e=(0,ua.jO)(n);return(0,bn.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),d=!1;for(let _=0;_<i;_++)(0,Ai.Xf)(n[_]).subscribe((0,Cn.x)(r,w=>{a[_]=w,!d&&!c[_]&&(c[_]=!0,(d=c.every(M.y))&&(c=null))},ae.Z));t.subscribe((0,Cn.x)(r,_=>{if(d){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,wt.U)(([i,a])=>{const c=i.lastKeyToLoad,d=a.map(_=>_.key);return{actions:a,lastKeyToLoad:c,loadedKeys:d}}),function Xe(n){return(0,bn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Cn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,wt.U)(i=>i.actions))}(n,Nb(n,e).pipe(T((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Ze.iC),valueChanges:(i,a)=>f_(n,i,t).pipe((0,wt.U)(d=>d.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),Ze.iC)}}(a,this)}object(t){return function Vb(n,e){return{query:n,snapshotChanges:()=>dw(n,e.schedulers.outsideAngular)().pipe(Ze.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>dw(n,e.schedulers.outsideAngular)().pipe(Ze.iC,(0,wt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>h_(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(on.Dh),p.LFG(on.xv,8),p.LFG(nA,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ze.HU),p.LFG(rA,8),p.LFG(Vp,8),p.LFG(u_,8),p.LFG(nw,8),p.LFG(rw,8),p.LFG(d_,8),p.LFG(iw,8),p.LFG(sw,8),p.LFG(Up,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iA=(()=>{class n{constructor(){tw.Z.registerVersion("angularfire",Ze.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[hw]}),n})();var Mh=L(8189);function g_(...n){return function Sk(){return(0,Mh.J)(1)}()((0,Gt.D)(n,(0,ua.yG)(n)))}function Yu(...n){const e=(0,ua.yG)(n);return(0,bn.e)((t,r)=>{(e?g_(n,t,e):g_(n,t)).subscribe(r)})}function fw(){return(0,bn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Cn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var ut,Ak=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ll={},pw=pw||{},Lt=Ak||self;function Bp(){}function gw(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function jp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var mw="closure_uid_"+(1e9*Math.random()>>>0),oA=0;function aA(n,e,t){return n.call.apply(n.bind,arguments)}function lA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function or(n,e,t){return(or=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aA:lA).apply(null,arguments)}function $p(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function $r(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return e.prototype[i].apply(r,c)}}function cl(){this.s=this.s,this.o=this.o}var jb={};cl.prototype.s=!1,cl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function sA(n){return Object.prototype.hasOwnProperty.call(n,mw)&&n[mw]||(n[mw]=++oA)}(this);delete jb[n]}},cl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $b=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Hb=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function zb(n){return Array.prototype.concat.apply([],arguments)}function _w(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function m_(n){return/^[\s\xa0]*$/.test(n)}var Li,Gb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ni(n,e){return-1!=n.indexOf(e)}function Qu(n,e){return n<e?-1:n>e?1:0}e:{var __=Lt.navigator;if(__){var ko=__.userAgent;if(ko){Li=ko;break e}}Li=""}function yw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function y_(n){const e={};for(const t in n)e[t]=n[t];return e}var kh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<kh.length;a++)t=kh[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function vw(n){return vw[" "](n),n}vw[" "]=Bp;var Hp,n,v_=Ni(Li,"Opera"),ul=Ni(Li,"Trident")||Ni(Li,"MSIE"),qb=Ni(Li,"Edge"),ww=qb||ul,Ew=Ni(Li,"Gecko")&&!(Ni(Li.toLowerCase(),"webkit")&&!Ni(Li,"Edge"))&&!(Ni(Li,"Trident")||Ni(Li,"MSIE"))&&!Ni(Li,"Edge"),Kb=Ni(Li.toLowerCase(),"webkit")&&!Ni(Li,"Edge");function w_(){var n=Lt.document;return n?n.documentMode:void 0}e:{var zp="",Gp=(n=Li,Ew?/rv:([^\);]+)(\)|;)/.exec(n):qb?/Edge\/([\d\.]+)/.exec(n):ul?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Kb?/WebKit\/(\S+)/.exec(n):v_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Gp&&(zp=Gp?Gp[1]:""),ul){var E_=w_();if(null!=E_&&E_>parseFloat(zp)){Hp=String(E_);break e}}Hp=zp}var Iw={};var uA=Lt.document&&ul&&(w_()||parseInt(Hp,10))||void 0,dA=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Lt.addEventListener("test",Bp,e),Lt.removeEventListener("test",Bp,e)}catch{}return n}();function oi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Xu(n,e){if(oi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ew){e:{try{vw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Yb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xu.Z.h.call(this)}}oi.prototype.h=function(){this.defaultPrevented=!0},$r(Xu,oi);var Yb={2:"touch",3:"pen",4:"mouse"};Xu.prototype.h=function(){Xu.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Wp="closure_listenable_"+(1e6*Math.random()|0),Qb=0;function Xb(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Qb,this.ca=this.fa=!1}function I_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function qp(n){this.src=n,this.g={},this.h=0}function b_(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=$b(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(I_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Dw(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}qp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=Dw(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new Xb(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var C_="closure_lm_"+(1e6*Math.random()|0),Tw={};function gi(n,e,t,r,i){if(r&&r.once)return Jb(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)gi(n,e[a],t,r,i);return null}return t=Kp(t),n&&n[Wp]?n.N(e,t,jp(r)?!!r.capture:!!r,i):Ju(n,e,t,!1,r,i)}function Ju(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=jp(i)?!!i.capture:!!i,d=ed(n);if(d||(n[C_]=d=new qp(n)),(t=d.add(e,t,r,c,a)).proxy)return t;if(r=function hA(){var e=Aw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)dA||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Sw(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Jb(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Jb(n,e[a],t,r,i);return null}return t=Kp(t),n&&n[Wp]?n.O(e,t,jp(r)?!!r.capture:!!r,i):Ju(n,e,t,!0,r,i)}function fA(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)fA(n,e[a],t,r,i);else r=jp(r)?!!r.capture:!!r,t=Kp(t),n&&n[Wp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Dw(a=n.g[e],t,r,i))&&(I_(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=ed(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Dw(e,t,r,i)),(t=-1<n?e[n]:null)&&eC(t))}function eC(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Wp])b_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Sw(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ed(e))?(b_(t,n),0==t.h&&(t.src=null,e[C_]=null)):I_(n)}}}function Sw(n){return n in Tw?Tw[n]:Tw[n]="on"+n}function Aw(n,e){if(n.ca)n=!0;else{e=new Xu(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&eC(n),n=t.call(r,e)}return n}function ed(n){return(n=n[C_])instanceof qp?n:null}var Rw="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kp(n){return"function"==typeof n?n:(n[Rw]||(n[Rw]=function(e){return n.handleEvent(e)}),n[Rw])}function Hr(){cl.call(this),this.i=new qp(this),this.P=this,this.I=null}function zr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new oi(e,n);else if(e instanceof oi)e.target=e.target||n;else{var i=e;Wb(e=new oi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=D_(c,r,!0,e)&&i}if(i=D_(c=e.g=n,r,!0,e)&&i,i=D_(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=D_(c=e.g=t[a],r,!1,e)&&i}function D_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var d=c.listener,_=c.ia||c.src;c.fa&&b_(n.i,c),i=!1!==d.call(_,r)&&i}}return i&&!r.defaultPrevented}$r(Hr,cl),Hr.prototype[Wp]=!0,Hr.prototype.removeEventListener=function(n,e,t,r){fA(this,n,e,t,r)},Hr.prototype.M=function(){if(Hr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)I_(t[r]);delete n.g[e],n.h--}}this.I=null},Hr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Hr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var xw=Lt.JSON.stringify;function pA(){var n=Ow;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var nC,kw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new tC,n=>n.reset());class tC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function T_(n){Lt.setTimeout(()=>{throw n},0)}function Zp(n,e){nC||function rC(){var n=Lt.Promise.resolve(void 0);nC=function(){n.then(Ph)}}(),Pw||(nC(),Pw=!0),Ow.add(n,e)}var Pw=!1,Ow=new class Mw{constructor(){this.h=this.g=null}add(e,t){const r=kw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Ph(){for(var n;n=pA();){try{n.h.call(n.g)}catch(t){T_(t)}var e=kw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Pw=!1}function S_(n,e){Hr.call(this),this.h=n||1,this.g=e||Lt,this.j=or(this.kb,this),this.l=Date.now()}function A_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Yp(n,e,t){if("function"==typeof n)t&&(n=or(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=or(n.handleEvent,n)}return 2147483647<Number(e)?-1:Lt.setTimeout(n,e||0)}function gA(n){n.g=Yp(()=>{n.g=null,n.i&&(n.i=!1,gA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}$r(S_,Hr),(ut=S_.prototype).da=!1,ut.S=null,ut.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),zr(this,"tick"),this.da&&(A_(this),this.start()))}},ut.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){S_.Z.M.call(this),A_(this),delete this.g};class mA extends cl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gA(this)}M(){super.M(),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function R_(n){cl.call(this),this.h=n,this.g={}}$r(R_,cl);var iC=[];function sC(n,e,t,r){Array.isArray(t)||(t&&(iC[0]=t.toString()),t=iC);for(var i=0;i<t.length;i++){var a=gi(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function oC(n){yw(n.g,function(e,t){this.g.hasOwnProperty(t)&&eC(e)},n),n.g={}}function Qp(){this.g=!0}function td(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function yA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return xw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}R_.prototype.M=function(){R_.Z.M.call(this),oC(this)},R_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qp.prototype.Aa=function(){this.g=!1},Qp.prototype.info=function(){};var nd={},Nw=null;function x_(){return Nw=Nw||new Hr}function Lw(n){oi.call(this,nd.Ma,n)}function Oh(n){const e=x_();zr(e,new Lw(e,n))}function Fw(n,e){oi.call(this,nd.STAT_EVENT,n),this.stat=e}function mi(n){const e=x_();zr(e,new Fw(e,n))}function cC(n,e){oi.call(this,nd.Na,n),this.size=e}function Xp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Lt.setTimeout(function(){n()},e)}nd.Ma="serverreachability",$r(Lw,oi),nd.STAT_EVENT="statevent",$r(Fw,oi),nd.Na="timingevent",$r(cC,oi);var Uw={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Vw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function uC(){}function wA(){}uC.prototype.h=null;var fC,M_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function dC(){oi.call(this,"d")}function hC(){oi.call(this,"c")}function Bw(){}function fc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new R_(this),this.P=pC,this.W=new S_(n=ww?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new EA}function EA(){this.i=null,this.g="",this.h=!1}$r(dC,oi),$r(hC,oi),$r(Bw,uC),Bw.prototype.g=function(){return new XMLHttpRequest},Bw.prototype.i=function(){return{}},fC=new Bw;var pC=45e3,Nh={},Jp={};function k_(n,e,t){n.K=1,n.v=L_(ba(e)),n.s=t,n.U=!0,IA(n,null)}function IA(n,e){n.F=Date.now(),O_(n),n.A=ba(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),IC(t.h,"t",r),n.C=0,t=n.l.H,n.h=new EA,n.g=LC(n.l,t?e:null,!n.s),0<n.O&&(n.L=new mA(or(n.Ia,n,n.g),n.O)),sC(n.V,n.g,"readystatechange",n.gb),e=n.H?y_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Oh(1),function aC(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",d=a.split("&"),_=0;_<d.length;_++){var w=d[_].split("=");if(1<w.length){var b=w[0];w=w[1];var S=b.split("_");c=2<=S.length&&"type"==S[1]?c+(b+"=")+w+"&":c+(b+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function P_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function jw(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=bA(n,t),i==Jp){4==e&&(n.o=4,mi(14),r=!1),td(n.j,n.m,null,"[Incomplete Response]");break}if(i==Nh){n.o=4,mi(15),td(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}td(n.j,n.m,i,null),$w(n,i)}P_(n)&&i!=Jp&&i!=Nh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,mi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),lg(e),e.L=!0,mi(11))):(td(n.j,n.m,t,"[Invalid Chunked Response]"),Ia(n),eg(n))}function bA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Jp:(t=Number(e.substring(t,r)),isNaN(t)?Nh:(r+=1)+t>e.length?Jp:(e=e.substr(r,t),n.C=r+t,e))}function O_(n){n.Y=Date.now()+n.P,CA(n,n.P)}function CA(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xp(or(n.eb,n),e)}function N_(n){n.B&&(Lt.clearTimeout(n.B),n.B=null)}function eg(n){0==n.l.G||n.I||PA(n.l,n)}function Ia(n){N_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,A_(n.W),oC(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function $w(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||CC(t.i,n)))if(t.I=n.N,!n.J&&CC(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;od(t),B_(t)}t0(t),mi(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Xp(or(t.ab,t),6e3));if(1>=bC(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else jh(t,11)}else if((n.J||t.g==n)&&od(t),!m_(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const b=w[3];null!=b&&(t.ma=b,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const O=w[5];null!=O&&"number"==typeof O&&0<O&&(t.K=r=1.5*O,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const q=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var a=r.i;!a.g&&(Ni(q,"spdy")||Ni(q,"quic")||Ni(q,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Yw(a,a.h),a.h=null))}if(r.D){const fe=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;fe&&(r.sa=fe,kn(r.F,r.D,fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=n0(r,r.H?r.la:null,r.W),c.J){DC(r.i,c);var d=c,_=r.K;_&&d.setTimeout(_),d.B&&(N_(d),O_(d)),r.g=c}else H_(r);0<t.l.length&&j_(t)}else"stop"!=w[0]&&"close"!=w[0]||jh(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?jh(t,7):OC(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}Oh(4)}catch{}}function gC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(gw(n)||"string"==typeof n)Hb(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(gw(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function xk(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(gw(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function tg(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof tg)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Hw(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];rd(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)rd(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function rd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ut=fc.prototype).setTimeout=function(n){this.P=n},ut.gb=function(n){n=n.target;const e=this.L;e&&3==fl(n)?e.l():this.Ia(n)},ut.Ia=function(n){try{if(n==this.g)e:{const b=fl(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>b)&&(3!=b||ww||this.g&&(this.h.h||this.g.ga()||kC(this.g)))){this.I||4!=b||7==e||Oh(8==e||0>=S?3:2),N_(this);var t=this.g.ba();this.N=t;t:if(P_(this)){var r=kC(this.g);n="";var i=r.length,a=4==fl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ia(this),eg(this);var c="";break t}this.h.i=new Lt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function _A(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,b,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,_=this.g;if((d=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m_(d)){var w=d;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,mi(12),Ia(this),eg(this);break e}td(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$w(this,t)}this.U?(jw(this,b,c),ww&&this.i&&3==b&&(sC(this.V,this.W,"tick",this.fb),this.W.start())):(td(this.j,this.m,c,null),$w(this,c)),4==b&&Ia(this),this.i&&!this.I&&(4==b?PA(this.l,this):(this.i=!1,O_(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,mi(12)):(this.o=0,mi(13)),Ia(this),eg(this)}}}catch{}},ut.fb=function(){if(this.g){var n=fl(this.g),e=this.g.ga();this.C<e.length&&(N_(this),jw(this,n,e),this.i&&4!=n&&O_(this))}},ut.cancel=function(){this.I=!0,Ia(this)},ut.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function lC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Oh(3),mi(17)),Ia(this),this.o=2,eg(this)):CA(this,this.Y-n)},(ut=tg.prototype).R=function(){Hw(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ut.T=function(){return Hw(this),this.g.concat()},ut.get=function(n,e){return rd(this.h,n)?this.h[n]:e},ut.set=function(n,e){rd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ut.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var mC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function id(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof id){this.g=void 0!==e?e:n.g,ng(this,n.j),this.s=n.s,zw(this,n.i),Xi(this,n.m),this.l=n.l,e=n.h;var t=new Lh;t.i=e.i,e.g&&(t.g=new tg(e.g),t.h=e.h),_C(this,t),this.o=n.o}else n&&(t=String(n).match(mC))?(this.g=!!e,ng(this,t[1]||"",!0),this.s=rg(t[2]||""),zw(this,t[3]||"",!0),Xi(this,t[4]),this.l=rg(t[5]||"",!0),_C(this,t[6]||"",!0),this.o=rg(t[7]||"")):(this.g=!!e,this.h=new Lh(null,this.g))}function ba(n){return new id(n)}function ng(n,e,t){n.j=t?rg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zw(n,e,t){n.i=t?rg(e,!0):e}function Xi(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function _C(n,e,t){e instanceof Lh?(n.h=e,function hl(n,e){e&&!n.j&&(dl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(EC(this,r),IC(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=sd(e,wC)),n.h=new Lh(e,n.g))}function kn(n,e,t){n.h.set(e,t)}function L_(n){return kn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function sd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,DA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function DA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}id.prototype.toString=function(){var n=[],e=this.j;e&&n.push(sd(e,yC,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(sd(e,yC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(sd(t,"/"==t.charAt(0)?vC:Gw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",sd(t,TA)),n.join("")};var yC=/[#\/\?@]/g,Gw=/[#\?:]/g,vC=/[#\?]/g,wC=/[#\?@]/g,TA=/#/g;function Lh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function dl(n){n.g||(n.g=new tg,n.h=0,n.i&&function Mk(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function EC(n,e){dl(n),e=pc(n,e),rd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,rd((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Hw(n)))}function Ww(n,e){return dl(n),e=pc(n,e),rd(n.g.h,e)}function IC(n,e,t){EC(n,e),0<t.length&&(n.i=null,n.g.set(pc(n,e),_w(t)),n.h+=t.length)}function pc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}(ut=Lh.prototype).add=function(n,e){dl(this),this.i=null,n=pc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){dl(this),this.g.forEach(function(t,r){Hb(t,function(i){n.call(e,i,r,this)},this)},this)},ut.T=function(){dl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},ut.R=function(n){dl(this);var e=[];if("string"==typeof n)Ww(this,n)&&(e=zb(e,this.g.get(pc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=zb(e,n[t])}return e},ut.set=function(n,e){return dl(this),this.i=null,Ww(this,n=pc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var gc=class{constructor(n,e){this.h=n,this.g=e}};function qw(n){this.l=n||Kw,n=Lt.PerformanceNavigationTiming?0<(n=Lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Lt.g&&Lt.g.Ea&&Lt.g.Ea()&&Lt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Kw=10;function Zw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function bC(n){return n.h?1:n.g?n.g.size:0}function CC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Yw(n,e){n.g?n.g.add(e):n.h=e}function DC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function TC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return _w(n.i)}function Qw(){}function SC(){this.g=new Qw}function Pk(n,e,t){const r=t||"";try{gC(n,function(i,a){let c=i;jp(i)&&(c=xw(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function F_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Fh(n){this.l=n.$b||null,this.j=n.ib||!1}function Xw(n,e){Hr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ig,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qw.prototype.cancel=function(){if(this.i=TC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Qw.prototype.stringify=function(n){return Lt.JSON.stringify(n,void 0)},Qw.prototype.parse=function(n){return Lt.JSON.parse(n,void 0)},$r(Fh,uC),Fh.prototype.g=function(){return new Xw(this.l,this.j)},Fh.prototype.i=function(n){return function(){return n}}({}),$r(Xw,Hr);var ig=0;function Jw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Uh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Vh(n)}function Vh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=Xw.prototype).open=function(n,e){if(this.readyState!=ig)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Vh(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Lt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Uh(this)),this.readyState=ig},ut.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Vh(this)),this.g&&(this.readyState=3,Vh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Lt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Jw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ut.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Uh(this):Vh(this),3==this.readyState&&Jw(this)}},ut.Ua=function(n){this.g&&(this.response=this.responseText=n,Uh(this))},ut.Ta=function(n){this.g&&(this.response=n,Uh(this))},ut.ha=function(){this.g&&Uh(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Xw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var RC=Lt.JSON.parse;function ar(n){Hr.call(this),this.headers=new tg,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sg,this.K=this.L=!1}$r(ar,Hr);var sg="",U_=/^https?$/i,xC=["POST","PUT"];function AA(n){return"content-type"==n.toLowerCase()}function RA(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,xA(n),og(n)}function xA(n){n.D||(n.D=!0,zr(n,"complete"),zr(n,"error"))}function MA(n){if(n.h&&typeof pw<"u"&&(!n.C[1]||4!=fl(n)||2!=n.ba()))if(n.v&&4==fl(n))Yp(n.Fa,0,n);else if(zr(n,"readystatechange"),4==fl(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(mC)[1]||null;if(!i&&Lt.self&&Lt.self.location){var a=Lt.self.location.protocol;i=a.substr(0,a.length-1)}r=!U_.test(i?i.toLowerCase():"")}t=r}if(t)zr(n,"complete"),zr(n,"success");else{n.m=6;try{var c=2<fl(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",xA(n)}}finally{og(n)}}}function og(n,e){if(n.g){MC(n);const t=n.g,r=n.C[0]?Bp:null;n.g=null,n.C=null,e||zr(n,"ready");try{t.onreadystatechange=r}catch{}}}function MC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Lt.clearTimeout(n.A),n.A=null)}function fl(n){return n.g?n.g.readyState:0}function kC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case sg:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function PC(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Ok(n){let e="";return yw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):kn(n,e,t))}function V_(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function kA(n){this.za=0,this.l=[],this.h=new Qp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=V_("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=V_("baseRetryDelayMs",5e3,n),this.$a=V_("retryDelaySeedMs",1e4,n),this.Ya=V_("forwardChannelMaxRetries",2,n),this.ra=V_("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new qw(n&&n.concurrentRequestLimit),this.Ca=new SC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function OC(n){if(ag(n),3==n.G){var e=n.V++,t=ba(n.F);kn(t,"SID",n.J),kn(t,"RID",e),kn(t,"TYPE","terminate"),Bh(n,t),(e=new fc(n,n.h,e,void 0)).K=2,e.v=L_(ba(t)),t=!1,Lt.navigator&&Lt.navigator.sendBeacon&&(t=Lt.navigator.sendBeacon(e.v.toString(),"")),!t&&Lt.Image&&((new Image).src=e.v,t=!0),t||(e.g=LC(e.l,null),e.g.ea(e.v)),e.F=Date.now(),O_(e)}NA(n)}function B_(n){n.g&&(lg(n),n.g.cancel(),n.g=null)}function ag(n){B_(n),n.u&&(Lt.clearTimeout(n.u),n.u=null),od(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Lt.clearTimeout(n.m),n.m=null)}function e0(n,e){n.l.push(new gc(n.Za++,e)),3==n.G&&j_(n)}function j_(n){Zw(n.i)||n.m||(n.m=!0,Zp(n.Ha,n),n.C=0)}function mc(n,e){var t;t=e?e.m:n.V++;const r=ba(n.F);kn(r,"SID",n.J),kn(r,"RID",t),kn(r,"AID",n.U),Bh(n,r),n.o&&n.s&&PC(r,n.o,n.s),t=new fc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=$_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Yw(n.i,t),k_(t,r,e)}function Bh(n,e){n.j&&gC({},function(t,r){kn(e,r,t)})}function $_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?or(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let d=!0;for(let _=0;_<t;_++){let w=i[_].h;const b=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),d=!1;else try{Pk(b,c,"req"+w+"_")}catch{r&&r(b)}}if(d){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function H_(n){n.g||n.u||(n.Y=1,Zp(n.Ga,n),n.A=0)}function t0(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Xp(or(n.Ga,n),OA(n,n.A)),n.A++,0))}function lg(n){null!=n.B&&(Lt.clearTimeout(n.B),n.B=null)}function z_(n){n.g=new fc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ba(n.oa);kn(e,"RID","rpc"),kn(e,"SID",n.J),kn(e,"CI",n.N?"0":"1"),kn(e,"AID",n.U),Bh(n,e),kn(e,"TYPE","xmlhttp"),n.o&&n.s&&PC(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=L_(ba(e)),t.s=null,t.U=!0,IA(t,n)}function od(n){null!=n.v&&(Lt.clearTimeout(n.v),n.v=null)}function PA(n,e){var t=null;if(n.g==e){od(n),lg(n),n.g=null;var r=2}else{if(!CC(n.i,e))return;t=e.D,DC(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;zr(r=x_(),new cC(r,t,e,i)),j_(n)}else H_(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function NC(n,e){return!(bC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Xp(or(n.Ha,n,e),OA(n,n.C)),n.C++,0)))}(n,e)||2==r&&t0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:jh(n,5);break;case 4:jh(n,10);break;case 3:jh(n,6);break;default:jh(n,2)}}function OA(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function jh(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=or(n.jb,n);t||(t=new id("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||ng(t,"https"),L_(t)),function AC(n,e){const t=new Qp;if(Lt.Image){const r=new Image;r.onload=$p(F_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=$p(F_,t,r,"TestLoadImage: error",!1,e),r.onabort=$p(F_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=$p(F_,t,r,"TestLoadImage: timeout",!1,e),Lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else mi(2);n.G=0,n.j&&n.j.va(e),NA(n),ag(n)}function NA(n){n.G=0,n.I=-1,n.j&&((0!=TC(n.i).length||0!=n.l.length)&&(n.i.i.length=0,_w(n.l),n.l.length=0),n.j.ua())}function n0(n,e,t){let r=function kk(n){return n instanceof id?ba(n):new id(n,void 0)}(t);if(""!=r.i)e&&zw(r,e+"."+r.i),Xi(r,r.m);else{const i=Lt.location;r=function Xs(n,e,t,r){var i=new id(null,void 0);return n&&ng(i,n),e&&zw(i,e),t&&Xi(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&yw(n.aa,function(i,a){kn(r,a,i)}),t=n.sa,(e=n.D)&&t&&kn(r,e,t),kn(r,"VER",n.ma),Bh(n,r),r}function LC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Ba&&!n.qa?new Fh({ib:!0}):n.qa)).L=n.H,e}function FC(){}function G_(){if(ul&&!(10<=Number(uA)))throw Error("Environmental error: no available transport.")}function Cs(n,e){Hr.call(this),this.g=new kA(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!m_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!m_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ad(this)}function r0(n){dC.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function s0(){hC.call(this),this.status=1}function ad(n){this.g=n}(ut=ar.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fC.g(),this.C=function vA(n){return n.h||(n.h=n.i())}(this.u?this.u:fC),this.g.onreadystatechange=or(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void RA(this,a)}n=t||"";const i=new tg(this.headers);r&&gC(r,function(a,c){i.set(c,a)}),r=function Rk(n){e:{var e=AA;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Lt.FormData&&n instanceof Lt.FormData,!(0<=$b(xC,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{MC(this),0<this.B&&((this.K=function SA(n){return ul&&function bw(){return function cA(n){var e=Iw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Gb(String(Hp)).split("."),t=Gb("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Qu(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Qu(0==i[2].length,0==a[2].length)||Qu(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=or(this.pa,this)):this.A=Yp(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){RA(this,a)}},ut.pa=function(){typeof pw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zr(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,zr(this,"complete"),zr(this,"abort"),og(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),og(this,!0)),ar.Z.M.call(this)},ut.Fa=function(){this.s||(this.F||this.v||this.l?MA(this):this.cb())},ut.cb=function(){MA(this)},ut.ba=function(){try{return 2<fl(this)?this.g.status:-1}catch{return-1}},ut.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),RC(e)}},ut.Da=function(){return this.m},ut.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=kA.prototype).ma=8,ut.G=1,ut.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ut.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new fc(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=y_(a),Wb(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$_(this,i,e),kn(t=ba(this.F),"RID",n),kn(t,"CVER",22),this.D&&kn(t,"X-HTTP-Session-Id",this.D),Bh(this,t),this.o&&a&&PC(t,this.o,a),Yw(this.i,i),this.Ra&&kn(t,"TYPE","init"),this.ja?(kn(t,"$req",e),kn(t,"SID","null"),i.$=!0,k_(i,t,null)):k_(i,t,e),this.G=2}}else 3==this.G&&(n?mc(this,n):0==this.l.length||Zw(this.i)||mc(this))},ut.Ga=function(){if(this.u=null,z_(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Xp(or(this.bb,this),n)}},ut.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,mi(10),B_(this),z_(this))},ut.ab=function(){null!=this.v&&(this.v=null,B_(this),t0(this),mi(19))},ut.jb=function(n){n?(this.h.info("Successfully pinged google.com"),mi(2)):(this.h.info("Failed to ping google.com"),mi(1))},(ut=FC.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Oa=function(){},G_.prototype.g=function(n,e){return new Cs(n,e)},$r(Cs,Hr),Cs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Zp(or(n.hb,n,e))),mi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=n0(n,null,n.W),j_(n)},Cs.prototype.close=function(){OC(this.g)},Cs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,e0(this.g,e)}else this.v?((e={}).__data__=xw(n),e0(this.g,e)):e0(this.g,n)},Cs.prototype.M=function(){this.g.j=null,delete this.j,OC(this.g),delete this.g,Cs.Z.M.call(this)},$r(r0,dC),$r(s0,hC),$r(ad,FC),ad.prototype.xa=function(){zr(this.g,"a")},ad.prototype.wa=function(n){zr(this.g,new r0(n))},ad.prototype.va=function(n){zr(this.g,new s0(n))},ad.prototype.ua=function(){zr(this.g,"b")},G_.prototype.createWebChannel=G_.prototype.g,Cs.prototype.send=Cs.prototype.u,Cs.prototype.open=Cs.prototype.m,Cs.prototype.close=Cs.prototype.close,Uw.NO_ERROR=0,Uw.TIMEOUT=8,Uw.HTTP_ERROR=6,Vw.COMPLETE="complete",wA.EventType=M_,M_.OPEN="a",M_.CLOSE="b",M_.ERROR="c",M_.MESSAGE="d",Hr.prototype.listen=Hr.prototype.N,ar.prototype.listenOnce=ar.prototype.O,ar.prototype.getLastError=ar.prototype.La,ar.prototype.getLastErrorCode=ar.prototype.Da,ar.prototype.getStatus=ar.prototype.ba,ar.prototype.getResponseJson=ar.prototype.Qa,ar.prototype.getResponseText=ar.prototype.ga,ar.prototype.send=ar.prototype.ea;var LA=ll.createWebChannelTransport=function(){return new G_},FA=ll.getStatEventTarget=function(){return x_()},W_=ll.ErrorCode=Uw,o0=ll.EventType=Vw,Nk=ll.Event=nd,a0=ll.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},l0=ll.FetchXmlHttpFactory=Fh,q_=ll.WebChannel=wA,UA=ll.XhrIo=ar;const VA="@firebase/firestore";class ai{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ai.UNAUTHENTICATED=new ai(null),ai.GOOGLE_CREDENTIALS=new ai("google-credentials-uid"),ai.FIRST_PARTY=new ai("first-party-uid"),ai.MOCK_USER=new ai("mock-user");let $h="9.9.1";const _c=new Dr.Yd("@firebase/firestore");function c0(){return _c.logLevel}function je(n,...e){if(_c.logLevel<=Dr.in.DEBUG){const t=e.map(u0);_c.debug(`Firestore (${$h}): ${n}`,...t)}}function Mr(n,...e){if(_c.logLevel<=Dr.in.ERROR){const t=e.map(u0);_c.error(`Firestore (${$h}): ${n}`,...t)}}function K_(n,...e){if(_c.logLevel<=Dr.in.WARN){const t=e.map(u0);_c.warn(`Firestore (${$h}): ${n}`,...t)}}function u0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${$h}) INTERNAL ASSERTION FAILED: `+n;throw Mr(e),new Error(e)}function Mt(n,e){n||ft()}function nt(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends N.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class s{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class o{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ai.UNAUTHENTICATED))}shutdown(){}}class u{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class h{constructor(e){this.t=e,this.currentUser=ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new s;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new s,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const w=c;e.enqueueRetryable((0,ue.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new s)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt("string"==typeof r.accessToken),new o(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mt(null===e||"string"==typeof e),new ai(e)}}class g{constructor(e,t,r){this.type="FirstParty",this.user=ai.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class v{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new g(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ai.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mt("string"==typeof t.token),this.p=t.token,new I(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function k(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class U{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=k(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function j(n,e){return n<e?-1:n>e?1:0}function ne(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Ie(n){return n+"\0"}class Se{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Se(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?j(this.nanoseconds,e.nanoseconds):j(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Se(0,0))}static max(){return new Ce(new Se(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class it{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===it.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof it?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ye extends it{construct(e,t,r){return new Ye(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ye(t)}static emptyPath(){return new Ye([])}}const Le=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends it{construct(e,t,r){return new ht(e,t,r)}static isValidIdentifier(e){return Le.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ht(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Ne(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===d?(c=!c,i++):"."!==d||c?(r+=d,i++):(a(),i++)}if(a(),c)throw new Ne(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(t)}static emptyPath(){return new ht([])}}class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Ye.fromString(e))}static fromName(e){return new Fe(Ye.fromString(e).popFirst(5))}static empty(){return new Fe(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ye.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Ye(e.slice()))}}class $n{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function UC(n){return n.fields.find(e=>2===e.kind)}function cg(n){return n.fields.filter(e=>2!==e.kind)}$n.UNKNOWN_ID=-1;class VC{constructor(e,t){this.fieldPath=e,this.kind=t}}class d0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new d0(0,Po.min())}}function Uk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(1e9===r?new Se(t+1,0):new Se(t,r));return new Po(i,Fe.empty(),e)}function Vk(n){return new Po(n.readTime,n.key,-1)}class Po{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Po(Ce.min(),Fe.empty(),-1)}static max(){return new Po(Ce.max(),Fe.empty(),-1)}}function BA(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Fe.comparator(n.documentKey,e.documentKey),0!==t?t:j(n.largestBatchId,e.largestBatchId))}const Bk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Hh(n){return jA.apply(this,arguments)}function jA(){return jA=(0,ue.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==Bk)throw n;je("LocalStore","Unexpectedly lost primary lease")}),jA.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,a=0,c=!1;e.forEach(d=>{++i,d.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const a=e.length,c=new Array(a);let d=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(b=>{c[w]=b,++d,d===a&&r(c)},b=>i(b))}})}static doWhile(e,t){return new de((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class BC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new s,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new h0(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=$A(r.target.error);this.T.reject(new h0(e,i))}}static open(e,t,r,i){try{return new BC(t,e.transaction(i,r))}catch(a){throw new h0(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new BF(t)}}class pl{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===pl.v((0,N.z$)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),ug(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,N.hl)())return!1;if(pl.S())return!0;const e=(0,N.z$)(),t=pl.v(e),r=0<t&&t<10,i=pl.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,ue.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new h0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const d=c.target.error;i("VersionError"===d.name?new Ne(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ne(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new h0(e,d))},a.onupgradeneeded=c=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.P.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ue.Z)(function*(){const c="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.k(e);const _=BC.open(a.db,e,c?"readonly":"readwrite",r),w=i(_).next(b=>(_.R(),b)).catch(b=>(_.abort(b),de.reject(b))).toPromise();return w.catch(()=>{}),yield _.A,w}catch(_){const w=_,b="FirebaseError"!==w.name&&d<3;if(je("SimpleDb","Transaction failed with error:",w.message,"Retrying:",b),a.close(),!b)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class VF{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return ug(this.$.delete())}}class h0 extends Ne{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zh(n){return"IndexedDbTransactionError"===n.name}class BF{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ug(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),ug(this.store.add(e))}get(e){return ug(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),ug(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),ug(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(c,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new de((a,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,c,d)=>d.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=a=>{const c=$A(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}G(e,t){const r=[];return new de((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void i();const _=new VF(d),w=t(d.primaryKey,d.value,_);if(w instanceof de){const b=w.catch(S=>(_.done(),de.reject(S)));r.push(b)}_.isDone?i():null===_.U?d.continue():d.continue(_.U)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ug(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=$A(r.target.error);t(i)}})}let $k=!1;function $A(n){const e=pl.v((0,N.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $k||($k=!0,setTimeout(()=>{throw r},0)),r}}return n}class jF{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;je("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ue.Z)(function*(){t.task=null;try{je("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){zh(r)?je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Hh(r)}yield t.Z(1)}))}}class $F{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,ue.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return de.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return je("IndexBackiller",`Processing collection: ${c}`),this.nt(e,c,i).next(d=>{i-=d,r.add(c)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.st(i,a)).next(d=>(je("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=Vk(a);BA(c,r)>0&&(r=c)}),new Po(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Js{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Hk(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function dg(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Js.ot=-1;class mr{constructor(e,t){this.comparator=e,this.root=t||Fi.EMPTY}insert(e,t){return new mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fi.BLACK,null,null))}remove(e){return new mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jC(this.root,e,this.comparator,!1)}getReverseIterator(){return new jC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jC(this.root,e,this.comparator,!0)}}class jC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Fi.RED,this.left=i??Fi.EMPTY,this.right=a??Fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Fi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Fi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}Fi.EMPTY=null,Fi.RED=!0,Fi.BLACK=!1,Fi.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Fi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gk(this.data.getIterator())}getIteratorFrom(e){return new Gk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class Gk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Z_(n){return n.hasNext()?n.getNext():void 0}class Oo{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new Oo([])}unionWith(e){let t=new Pn(ht.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ne(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new li(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new li(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return j(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}li.EMPTY_BYTE_STRING=new li("");const zF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gh(n){if(Mt(!!n),"string"==typeof n){let e=0;const t=zF.exec(n);if(Mt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_r(n.seconds),nanos:_r(n.nanos)}}function _r(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function hg(n){return"string"==typeof n?li.fromBase64String(n):li.fromUint8Array(n)}function HA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Wk(n){const e=n.mapValue.fields.__previous_value__;return HA(e)?Wk(e):e}function f0(n){const e=Gh(n.mapValue.fields.__local_write_time__.timestampValue);return new Se(e.seconds,e.nanos)}class GF{constructor(e,t,r,i,a,c,d,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=_}}class ld{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ld("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ld&&e.projectId===this.projectId&&e.database===this.database}}function p0(n){return null==n}function g0(n){return 0===n&&1/n==-1/0}function qk(n){return"number"==typeof n&&Number.isInteger(n)&&!g0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Wh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$C={nullValue:"NULL_VALUE"};function fg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?HA(n)?4:Qk(n)?9007199254740991:10:ft()}function yc(n,e){if(n===e)return!0;const t=fg(n);if(t!==fg(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return f0(n).isEqual(f0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Gh(r.timestampValue),c=Gh(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,hg(n.bytesValue).isEqual(hg(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return _r(r.geoPointValue.latitude)===_r(i.geoPointValue.latitude)&&_r(r.geoPointValue.longitude)===_r(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return _r(r.integerValue)===_r(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=_r(r.doubleValue),c=_r(i.doubleValue);return a===c?g0(a)===g0(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return ne(n.arrayValue.values||[],e.arrayValue.values||[],yc);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Hk(a)!==Hk(c))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===c[d]||!yc(a[d],c[d])))return!1;return!0}(n,e);default:return ft()}var i}function m0(n,e){return void 0!==(n.values||[]).find(t=>yc(t,e))}function qh(n,e){if(n===e)return 0;const t=fg(n),r=fg(e);if(t!==r)return j(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return j(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=_r(i.integerValue||i.doubleValue),d=_r(a.integerValue||a.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return Kk(n.timestampValue,e.timestampValue);case 4:return Kk(f0(n),f0(e));case 5:return j(n.stringValue,e.stringValue);case 6:return function(i,a){const c=hg(i),d=hg(a);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),d=a.split("/");for(let _=0;_<c.length&&_<d.length;_++){const w=j(c[_],d[_]);if(0!==w)return w}return j(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=j(_r(i.latitude),_r(a.latitude));return 0!==c?c:j(_r(i.longitude),_r(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],d=a.values||[];for(let _=0;_<c.length&&_<d.length;++_){const w=qh(c[_],d[_]);if(w)return w}return j(c.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Wh.mapValue&&a===Wh.mapValue)return 0;if(i===Wh.mapValue)return 1;if(a===Wh.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),_=a.fields||{},w=Object.keys(_);d.sort(),w.sort();for(let b=0;b<d.length&&b<w.length;++b){const S=j(d[b],w[b]);if(0!==S)return S;const O=qh(c[d[b]],_[w[b]]);if(0!==O)return O}return j(d.length,w.length)}(n.mapValue,e.mapValue);default:throw ft()}}function Kk(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return j(n,e);const t=Gh(n),r=Gh(e),i=j(t.seconds,r.seconds);return 0!==i?i:j(t.nanos,r.nanos)}function Y_(n){return zA(n)}function zA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Gh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?hg(n.bytesValue).toBase64():"referenceValue"in n?Fe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=zA(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const d of i)c?c=!1:a+=",",a+=`${d}:${zA(r.fields[d])}`;return a+"}"}(n.mapValue):ft();var e}function pg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function GA(n){return!!n&&"integerValue"in n}function _0(n){return!!n&&"arrayValue"in n}function Zk(n){return!!n&&"nullValue"in n}function Yk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function HC(n){return!!n&&"mapValue"in n}function y0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return dg(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=y0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=y0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Qk(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function WF(n){return"nullValue"in n?$C:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?pg(ld.empty(),Fe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function qF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?pg(ld.empty(),Fe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Wh:ft()}function Xk(n,e){const t=qh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Jk(n,e){const t=qh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ui{constructor(e){this.value=e}static empty(){return new Ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!HC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=y0(t)}setAll(e){let t=ht.emptyPath(),r={},i=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=y0(c):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());HC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];HC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){dg(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ui(y0(this.value))}}function eP(n){const e=[];return dg(n.fields,(t,r)=>{const i=new ht([t]);if(HC(r)){const a=eP(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Oo(e)}class Hn{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Hn(e,0,Ce.min(),Ce.min(),Ui.empty(),0)}static newFoundDocument(e,t,r){return new Hn(e,1,t,Ce.min(),r,0)}static newNoDocument(e,t){return new Hn(e,2,t,Ce.min(),Ui.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,Ce.min(),Ui.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class KF{constructor(e,t=null,r=[],i=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=d,this.ut=null}}function tP(n,e=null,t=[],r=[],i=null,a=null,c=null){return new KF(n,e,t,r,i,a,c)}function gg(n){const e=nt(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Y_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),p0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Y_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Y_(r)).join(",")),e.ut=t}return e.ut}function v0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!rU(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!yc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oP(n.startAt,e.startAt)&&oP(n.endAt,e.endAt)}function zC(n){return Fe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function GC(n,e){return n.filters.filter(t=>t instanceof Vi&&t.field.isEqual(e))}function nP(n,e,t){let r=$C,i=!0;for(const a of GC(n,e)){let c=$C,d=!0;switch(a.op){case"<":case"<=":c=WF(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,d=!1;break;case"!=":case"not-in":c=$C}Xk({value:r,inclusive:i},{value:c,inclusive:d})<0&&(r=c,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];Xk({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function rP(n,e,t){let r=Wh,i=!0;for(const a of GC(n,e)){let c=Wh,d=!0;switch(a.op){case">=":case">":c=qF(a.value),d=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,d=!1;break;case"!=":case"not-in":c=Wh}Jk({value:r,inclusive:i},{value:c,inclusive:d})>0&&(r=c,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];Jk({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Vi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new YF(e,t,r):"array-contains"===t?new JF(e,r):"in"===t?new eU(e,r):"not-in"===t?new tU(e,r):"array-contains-any"===t?new nU(e,r):new Vi(e,t,r)}static ct(e,t,r){return"in"===t?new QF(e,r):new XF(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(qh(t,this.value)):null!==t&&fg(this.value)===fg(t)&&this.at(qh(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class YF extends Vi{constructor(e,t,r){super(e,t,r),this.key=Fe.fromName(r.referenceValue)}matches(e){const t=Fe.comparator(e.key,this.key);return this.at(t)}}class QF extends Vi{constructor(e,t){super(e,"in",t),this.keys=iP(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class XF extends Vi{constructor(e,t){super(e,"not-in",t),this.keys=iP(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iP(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Fe.fromName(r.referenceValue))}class JF extends Vi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _0(t)&&m0(t.arrayValue,this.value)}}class eU extends Vi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&m0(this.value.arrayValue,t)}}class tU extends Vi{constructor(e,t){super(e,"not-in",t)}matches(e){if(m0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!m0(this.value.arrayValue,t)}}class nU extends Vi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>m0(this.value.arrayValue,r))}}class Kh{constructor(e,t){this.position=e,this.inclusive=t}}class Q_{constructor(e,t="asc"){this.field=e,this.dir=t}}function rU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function sP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Fe.comparator(Fe.fromName(c.referenceValue),t.key):qh(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function oP(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yc(n.position[t],e.position[t]))return!1;return!0}class cd{constructor(e,t=null,r=[],i=[],a=null,c="F",d=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=_,this.lt=null,this.ft=null}}function aP(n,e,t,r,i,a,c,d){return new cd(n,e,t,r,i,a,c,d)}function X_(n){return new cd(n)}function WA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function qA(n){for(const e of n.filters)if(e.ht())return e.field;return null}function KA(n){return null!==n.collectionGroup}function J_(n){const e=nt(n);if(null===e.lt){e.lt=[];const t=qA(e),r=WA(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Q_(t)),e.lt.push(new Q_(ht.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Q_(ht.keyField(),a))}}}return e.lt}function Ca(n){const e=nt(n);if(!e.ft)if("F"===e.limitType)e.ft=tP(e.path,e.collectionGroup,J_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of J_(e))t.push(new Q_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Kh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Kh(e.startAt.position,e.startAt.inclusive):null;e.ft=tP(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function lP(n,e,t){return new cd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function w0(n,e){return v0(Ca(n),Ca(e))&&n.limitType===e.limitType}function cP(n){return`${gg(Ca(n))}|lt:${n.limitType}`}function ZA(n){return`Query(target=${function ZF(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Y_(r.value)}`;var r}).join(", ")}]`),p0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Y_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Y_(t)).join(",")),`Target(${e})`}(Ca(n))}; limitType=${n.limitType})`}function YA(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Fe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const d=sP(i,a,c);return i.inclusive?d<=0:d<0}(t.startAt,J_(t),r)||t.endAt&&!function(i,a,c){const d=sP(i,a,c);return i.inclusive?d>=0:d>0}(t.endAt,J_(t),r)));var t,r}function uP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dP(n){return(e,t)=>{let r=!1;for(const i of J_(n)){const a=sU(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function sU(n,e,t){const r=n.field.isKeyField()?Fe.comparator(e.key,t.key):function(i,a,c){const d=a.data.field(i),_=c.data.field(i);return null!==d&&null!==_?qh(d,_):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}function hP(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:g0(e)?"-0":e}}function fP(n){return{integerValue:""+n}}function pP(n,e){return qk(e)?fP(e):hP(n,e)}class WC{constructor(){this._=void 0}}function oU(n,e,t){return n instanceof ey?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof mg?mP(n,e):n instanceof _g?_P(n,e):function(r,i){const a=gP(r,i),c=yP(a)+yP(r._t);return GA(a)&&GA(r._t)?fP(c):hP(r.wt,c)}(n,e)}function aU(n,e,t){return n instanceof mg?mP(n,e):n instanceof _g?_P(n,e):t}function gP(n,e){return n instanceof ty?GA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ey extends WC{}class mg extends WC{constructor(e){super(),this.elements=e}}function mP(n,e){const t=vP(e);for(const r of n.elements)t.some(i=>yc(i,r))||t.push(r);return{arrayValue:{values:t}}}class _g extends WC{constructor(e){super(),this.elements=e}}function _P(n,e){let t=vP(e);for(const r of n.elements)t=t.filter(i=>!yc(i,r));return{arrayValue:{values:t}}}class ty extends WC{constructor(e,t){super(),this.wt=e,this._t=t}}function yP(n){return _r(n.integerValue||n.doubleValue)}function vP(n){return _0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class E0{constructor(e,t){this.field=e,this.transform=t}}class cU{constructor(e,t){this.version=e,this.transformResults=t}}class lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class KC{}function wP(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ry(n.key,lr.none()):new ny(n.key,n.data,lr.none());{const t=n.data,r=Ui.empty();let i=new Pn(ht.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new ud(n.key,r,new Oo(i.toArray()),lr.none())}}function uU(n,e,t){n instanceof ny?function(r,i,a){const c=r.value.clone(),d=bP(r.fieldTransforms,i,a.transformResults);c.setAll(d),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ud?function(r,i,a){if(!qC(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=bP(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(IP(r)),d.setAll(c),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function I0(n,e,t,r){return n instanceof ny?function(i,a,c,d){if(!qC(i.precondition,a))return c;const _=i.value.clone(),w=CP(i.fieldTransforms,d,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof ud?function(i,a,c,d){if(!qC(i.precondition,a))return c;const _=CP(i.fieldTransforms,d,a),w=a.data;return w.setAll(IP(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(c=t,qC(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function dU(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=gP(r.transform,i||null);null!=a&&(null===t&&(t=Ui.empty()),t.set(r.field,a))}return t||null}function EP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ne(t,r,(i,a)=>function lU(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof mg&&r instanceof mg||t instanceof _g&&r instanceof _g?ne(t.elements,r.elements,yc):t instanceof ty&&r instanceof ty?yc(t._t,r._t):t instanceof ey&&r instanceof ey);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ny extends KC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ud extends KC{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function IP(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function bP(n,e,t){const r=new Map;Mt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,d=e.data.field(a.field);r.set(a.field,aU(c,d,t[i]))}return r}function CP(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,oU(a,c,e))}return r}class ry extends KC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QA extends KC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hU{constructor(e){this.count=e}}var Gr,un;function DP(n){switch(n){default:return ft();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function TP(n){if(void 0===n)return Mr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Gr.OK:return ge.OK;case Gr.CANCELLED:return ge.CANCELLED;case Gr.UNKNOWN:return ge.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return ge.INTERNAL;case Gr.UNAVAILABLE:return ge.UNAVAILABLE;case Gr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Gr.NOT_FOUND:return ge.NOT_FOUND;case Gr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Gr.ABORTED:return ge.ABORTED;case Gr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Gr.DATA_LOSS:return ge.DATA_LOSS;default:return ft()}}(un=Gr||(Gr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class Zh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){dg(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return zk(this.inner)}size(){return this.innerSize}}const fU=new mr(Fe.comparator);function eo(){return fU}const SP=new mr(Fe.comparator);function b0(...n){let e=SP;for(const t of n)e=e.insert(t.key,t);return e}function AP(n){let e=SP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vc(){return C0()}function RP(){return C0()}function C0(){return new Zh(n=>n.toString(),(n,e)=>n.isEqual(e))}const pU=new mr(Fe.comparator),gU=new Pn(Fe.comparator);function Kt(...n){let e=gU;for(const t of n)e=e.add(t);return e}const mU=new Pn(j);function ZC(){return mU}class D0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,T0.createSynthesizedTargetChangeForCurrentChange(e,t)),new D0(Ce.min(),r,ZC(),eo(),Kt())}}class T0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new T0(li.EMPTY_BYTE_STRING,t,Kt(),Kt(),Kt())}}class YC{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class xP{constructor(e,t){this.targetId=e,this.It=t}}class MP{constructor(e,t,r=li.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class kP{constructor(){this.Tt=0,this.Et=OP(),this.At=li.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Kt(),t=Kt(),r=Kt();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new T0(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=OP()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class _U{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=eo(),this.Bt=PP(),this.Lt=new Pn(j)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(zC(a))if(0===r){const c=new Fe(a.path);this.Kt(t,c,Hn.newNoDocument(c,Ce.min()))}else Mt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,c)=>{const d=this.Ht(c);if(d){if(a.current&&zC(d.target)){const _=new Fe(d.target.path);null!==this.$t.get(_)||this.Xt(c,_)||this.Kt(c,_,Hn.newNoDocument(_,e))}a.vt&&(t.set(c,a.St()),a.Dt())}});let r=Kt();this.Bt.forEach((a,c)=>{let d=!0;c.forEachWhile(_=>{const w=this.Ht(_);return!w||2===w.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.$t.forEach((a,c)=>c.setReadTime(e));const i=new D0(e,t,this.Lt,this.$t,r);return this.$t=eo(),this.Bt=PP(),this.Lt=new Pn(j),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new kP,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Pn(j),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new kP),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function PP(){return new mr(Fe.comparator)}function OP(){return new mr(Fe.comparator)}const yU={asc:"ASCENDING",desc:"DESCENDING"},vU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class wU{constructor(e,t){this.databaseId=e,this.dt=t}}function S0(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NP(n,e){return n.dt?e.toBase64():e.toUint8Array()}function EU(n,e){return S0(n,e.toTimestamp())}function _i(n){return Mt(!!n),Ce.fromTimestamp(function(e){const t=Gh(e);return new Se(t.seconds,t.nanos)}(n))}function XA(n,e){return(t=n,new Ye(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function LP(n){const e=Ye.fromString(n);return Mt(GP(e)),e}function A0(n,e){return XA(n.databaseId,e.path)}function wc(n,e){const t=LP(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Fe(UP(t))}function JA(n,e){return XA(n.databaseId,e)}function FP(n){const e=LP(n);return 4===e.length?Ye.emptyPath():UP(e)}function R0(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UP(n){return Mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function VP(n,e,t){return{name:A0(n,e),fields:t.value.mapValue.fields}}function BP(n,e,t){const r=wc(n,e.name),i=_i(e.updateTime),a=new Ui({mapValue:{fields:e.fields}}),c=Hn.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function x0(n,e){let t;if(e instanceof ny)t={update:VP(n,e.key,e.value)};else if(e instanceof ry)t={delete:A0(n,e.key)};else if(e instanceof ud)t={update:VP(n,e.key,e.data),updateMask:xU(e.fieldMask)};else{if(!(e instanceof QA))return ft();t={verify:A0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof ey)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof mg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _g)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ty)return{fieldPath:a.field.canonicalString(),increment:c._t};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:EU(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function eR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?lr.updateTime(_i(i.updateTime)):void 0!==i.exists?lr.exists(i.exists):lr.none():lr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let d=null;"setToServerValue"in c?(Mt("REQUEST_TIME"===c.setToServerValue),d=new ey):"appendMissingElements"in c?d=new mg(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new _g(c.removeAllFromArray.values||[]):"increment"in c?d=new ty(a,c.increment):ft();const _=ht.fromServerFormat(c.fieldPath);return new E0(_,d)}(n,i)):[];var i;if(e.update){const i=wc(n,e.update.name),a=new Ui({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Oo((e.updateMask.fieldPaths||[]).map(w=>ht.fromServerFormat(w)));return new ud(i,a,c,t,r)}return new ny(i,a,t,r)}if(e.delete){const i=wc(n,e.delete);return new ry(i,t)}if(e.verify){const i=wc(n,e.verify);return new QA(i,t)}return ft()}function jP(n,e){return{documents:[JA(n,e.path)]}}function $P(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=JA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=JA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(b=>function(S){if("=="===S.op){if(Yk(S.value))return{unaryFilter:{field:iy(S.field),op:"IS_NAN"}};if(Zk(S.value))return{unaryFilter:{field:iy(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(Yk(S.value))return{unaryFilter:{field:iy(S.field),op:"IS_NOT_NAN"}};if(Zk(S.value))return{unaryFilter:{field:iy(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:iy(S.field),op:SU(S.op),value:S.value}}}(b));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:iy((b=w).field),direction:TU(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(w=e.limit,n.dt||p0(w)?w:{value:w});var w,d,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function HP(n){let e=FP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Mt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=zP(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(b=>{return new Q_(sy((S=b).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let d=null;t.limit&&(d=function(b){let S;return S="object"==typeof b?b.value:b,p0(S)?null:S}(t.limit));let _=null;var b;t.startAt&&(_=new Kh((b=t.startAt).values||[],!!b.before));let w=null;return t.endAt&&(w=function(b){return new Kh(b.values||[],!b.before)}(t.endAt)),aP(e,i,c,a,d,"F",_,w)}function zP(n){return n?void 0!==n.unaryFilter?[RU(n)]:void 0!==n.fieldFilter?[AU(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>zP(e)).reduce((e,t)=>e.concat(t)):ft():[]}function TU(n){return yU[n]}function SU(n){return vU[n]}function iy(n){return{fieldPath:n.canonicalString()}}function sy(n){return ht.fromServerFormat(n.fieldPath)}function AU(n){return Vi.create(sy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function RU(n){switch(n.unaryFilter.op){case"IS_NAN":const e=sy(n.unaryFilter.field);return Vi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=sy(n.unaryFilter.field);return Vi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=sy(n.unaryFilter.field);return Vi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=sy(n.unaryFilter.field);return Vi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function xU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function GP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ds(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=WP(e)),e=MU(n.get(t),e);return WP(e)}function MU(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function WP(n){return n+"\x01\x01"}function Ec(n){const e=n.length;if(Mt(e>=2),2===e)return Mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ye.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&ft(),n.charAt(c+1)){case"\x01":const d=n.substring(a,c);let _;0===i.length?_=d:(i+=d,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:ft()}a=c+2}return new Ye(r)}const qP=["userId","batchId"];function QC(n,e){return[n,Ds(e)]}function KP(n,e,t){return[n,Ds(e),t]}const kU={},PU=["prefixPath","collectionGroup","readTime","documentId"],OU=["prefixPath","collectionGroup","documentId"],NU=["collectionGroup","readTime","prefixPath","documentId"],LU=["canonicalId","targetId"],FU=["targetId","path"],UU=["path","targetId"],VU=["collectionId","parent"],BU=["indexId","uid"],jU=["uid","sequenceNumber"],$U=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HU=["indexId","uid","orderedDocumentKey"],zU=["userId","collectionPath","documentId"],GU=["userId","collectionPath","largestBatchId"],WU=["userId","collectionGroup","largestBatchId"],ZP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qU=[...ZP,"documentOverlays"],YP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QP=YP,KU=[...QP,"indexConfiguration","indexState","indexEntries"];class tR extends jk{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function yi(n,e){const t=nt(n);return pl.N(t.ee,e)}class nR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&uU(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=I0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=I0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=RP();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(i.key)?null:d;const _=wP(c,d);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&ne(this.mutations,e.mutations,(t,r)=>EP(t,r))&&ne(this.baseMutations,e.baseMutations,(t,r)=>EP(t,r))}}class rR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Mt(e.mutations.length===r.length);let i=pU;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new rR(e,t,r,i)}}class iR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yh{constructor(e,t,r,i,a=Ce.min(),c=Ce.min(),d=li.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(e){return new Yh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class XP{constructor(e){this.ne=e}}function JP(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:XC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:A0(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:S0(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:yg(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:yg(e.version)}}var i,a;return r}function XC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function yg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vg(n){const e=new Se(n.seconds,n.nanoseconds);return Ce.fromTimestamp(e)}function wg(n,e){const t=(e.baseMutations||[]).map(a=>eR(n.ne,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>eR(n.ne,a)),i=Se.fromMillis(e.localWriteTimeMs);return new nR(e.batchId,i,t,r)}function M0(n){const e=vg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?vg(n.lastLimboFreeSnapshotVersion):Ce.min();let r;var i;return void 0!==n.query.documents?(Mt(1===(i=n.query).documents.length),r=Ca(X_(FP(i.documents[0])))):r=Ca(HP(n.query)),new Yh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,li.fromBase64String(n.resumeToken))}function eO(n,e){const t=yg(e.snapshotVersion),r=yg(e.lastLimboFreeSnapshotVersion);let i;i=zC(e.target)?jP(n.ne,e.target):$P(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:gg(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sR(n){const e=HP({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lP(e,e.limit,"L"):e}function oR(n,e){return new iR(e.largestBatchId,eR(n.ne,e.overlayMutation))}function tO(n,e){const t=e.path.lastSegment();return[n,Ds(e.path.popLast()),t]}function nO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:yg(r.readTime),documentKey:Ds(r.documentKey.path),largestBatchId:r.largestBatchId}}class YU{getBundleMetadata(e,t){return rO(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:vg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return rO(e).put({bundleId:(r=t).id,createTime:yg(_i(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return iO(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:sR(i.bundledQuery),readTime:vg(i.readTime)};var i})}saveNamedQuery(e,t){return iO(e).put({name:(r=t).name,readTime:yg(_i(r.readTime)),bundledQuery:r.bundledQuery});var r}}function rO(n){return yi(n,"bundles")}function iO(n){return yi(n,"namedQueries")}class JC{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new JC(e,t.uid||"")}getOverlay(e,t){return k0(e).get(tO(this.userId,t)).next(r=>r?oR(this.wt,r):null)}getOverlays(e,t){const r=vc();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const d=new iR(t,c);i.push(this.ie(e,d))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ds(c.getCollectionPath())));const a=[];return i.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(k0(e).W("collectionPathOverlayIndex",d))}),de.waitFor(a)}getOverlaysForCollection(e,t,r){const i=vc(),a=Ds(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return k0(e).K("collectionPathOverlayIndex",c).next(d=>{for(const _ of d){const w=oR(this.wt,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=vc();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return k0(e).J({index:"collectionGroupOverlayIndex",range:d},(_,w,b)=>{const S=oR(this.wt,w);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):b.done()}).next(()=>a)}ie(e,t){return k0(e).put(function(r,i,a){const[c,d,_]=tO(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:x0(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function k0(n){return yi(n,"documentOverlays")}class Eg{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(_r(e.integerValue));else if("doubleValue"in e){const r=_r(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),g0(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(hg(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?Qk(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):ft()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),Fe.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function QU(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function sO(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=QU(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Eg.ye=new Eg;class XU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=sO(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=sO(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class JU{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class eV{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class P0{constructor(){this.Me=new XU,this.Fe=new JU(this.Me),this.$e=new eV(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Ig{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ig(this.indexId,this.documentKey,this.arrayValue,r)}}function bg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=oO(n.arrayValue,e.arrayValue),0!==t?t:(t=oO(n.directionalValue,e.directionalValue),0!==t?t:Fe.comparator(n.documentKey,e.documentKey)))}function oO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class tV{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=UC(e);if(void 0!==t&&!this.Qe(t))return!1;const r=cg(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[a++],c))return!1;++i}for(;i<r.length;++i)if(a>=this.Ue.length||!this.We(this.Ue[a++],r[i]))return!1;return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class nV{constructor(){this.ze=new aR}addToCollectionParentIndex(e,t){return this.ze.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Po.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(Po.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class aR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(Ye.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(Ye.comparator)).toArray()}}const eD=new Uint8Array(0);class rV{constructor(e,t){this.user=e,this.databaseId=t,this.He=new aR,this.Je=new Zh(r=>gg(r),(r,i)=>v0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:Ds(i)};return aO(e).put(a)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Ie(t),""],!1,!0);return aO(e).K(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Ec(c.parent))}return r})}addFieldIndex(e,t){const r=tD(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=N0(e);return a.next(d=>{c.put(nO(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=tD(e),i=N0(e),a=O0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=O0(e);let i=!0;const a=new Map;return de.forEach(this.Ye(t),c=>this.Xe(e,c).next(d=>{i&&(i=!!d),a.set(c,d)})).next(()=>{if(i){let c=Kt();const d=[];return de.forEach(a,(_,w)=>{var b;je("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(st=>`${st.fieldPath}:${st.kind}`).join(",")}`} to execute ${gg(t)}`);const S=function(st,ot){const kt=UC(ot);if(void 0===kt)return null;for(const tn of GC(st,kt.fieldPath))switch(tn.op){case"array-contains-any":return tn.value.arrayValue.values||[];case"array-contains":return[tn.value]}return null}(w,_),O=function(st,ot){const kt=new Map;for(const tn of cg(ot))for(const qr of GC(st,tn.fieldPath))switch(qr.op){case"==":case"in":kt.set(tn.fieldPath.canonicalString(),qr.value);break;case"not-in":case"!=":return kt.set(tn.fieldPath.canonicalString(),qr.value),Array.from(kt.values())}return null}(w,_),B=function(st,ot){const kt=[];let tn=!0;for(const qr of cg(ot)){const ml=0===qr.kind?nP(st,qr.fieldPath,st.startAt):rP(st,qr.fieldPath,st.startAt);kt.push(ml.value),tn&&(tn=ml.inclusive)}return new Kh(kt,tn)}(w,_),q=function(st,ot){const kt=[];let tn=!0;for(const qr of cg(ot)){const ml=0===qr.kind?rP(st,qr.fieldPath,st.endAt):nP(st,qr.fieldPath,st.endAt);kt.push(ml.value),tn&&(tn=ml.inclusive)}return new Kh(kt,tn)}(w,_),fe=this.Ze(_,w,B),me=this.Ze(_,w,q),mt=this.tn(_,w,O),dt=this.en(_.indexId,S,fe,B.inclusive,me,q.inclusive,mt);return de.forEach(dt,st=>r.j(st,t.limit).next(ot=>{ot.forEach(kt=>{const tn=Fe.fromSegments(kt.documentKey);c.has(tn)||(c=c.add(tn),d.push(tn))})}))}).next(()=>d)}return de.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,c,d){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),b=[];for(let S=0;S<_;++S){const O=t?this.nn(t[S/w]):eD,B=this.sn(e,O,r[S%w],i),q=this.rn(e,O,a[S%w],c),fe=d.map(me=>this.sn(e,O,me,!0));b.push(...this.createRange(B,q,fe))}return b}sn(e,t,r,i){const a=new Ig(e,Fe.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new Ig(e,Fe.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new tV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const d of a)r.Ge(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;return de.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(c){let d=new Pn(ht.comparator),_=!1;for(const w of c.filters){const b=w;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?_=!0:d=d.add(b.field))}for(const w of c.orderBy)w.field.isKeyField()||(d=d.add(w.field));return d.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new P0;for(const i of cg(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Be(i.kind);Eg.ye.re(a,c)}return r.Oe()}nn(e){const t=new P0;return Eg.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new P0;return Eg.ye.re(pg(this.databaseId,t),r.Be(function(i){const a=cg(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new P0);let a=0;for(const c of cg(e)){const d=r[a++];for(const _ of i)if(this.cn(t,c.fieldPath)&&_0(d))i=this.an(i,c,d);else{const w=_.Be(c.kind);Eg.ye.re(d,w)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const d of i){const _=new P0;_.seed(d.Oe()),Eg.ye.re(c,_.Be(t.kind)),a.push(_)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof Vi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=tD(e),i=N0(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const c=[];return de.forEach(a,d=>i.get([d.indexId,this.uid]).next(_=>{c.push(function(w,b){const S=b?new d0(b.sequenceNumber,new Po(vg(b.readTime),new Fe(Ec(b.documentKey)),b.largestBatchId)):d0.empty(),O=w.fields.map(([B,q])=>new VC(ht.fromServerFormat(B),q));return new $n(w.indexId,w.collectionGroup,O,S)}(d,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:j(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=tD(e),a=N0(e);return this.ln(e).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>de.forEach(d,_=>a.put(nO(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?de.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),de.forEach(d,_=>this.fn(e,i,_).next(w=>{const b=this.dn(a,_);return w.isEqual(b)?de.resolve():this._n(e,a,_,w,b)}))))})}wn(e,t,r,i){return O0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return O0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=O0(e);let a=new Pn(bg);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(c,d)=>{a=a.add(new Ig(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}dn(e,t){let r=new Pn(bg);const i=this.on(t,e);if(null==i)return r;const a=UC(t);if(null!=a){const c=e.data.field(a.fieldPath);if(_0(c))for(const d of c.arrayValue.values||[])r=r.add(new Ig(t.indexId,e.key,this.nn(d),i))}else r=r.add(new Ig(t.indexId,e.key,eD,i));return r}_n(e,t,r,i,a){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(d,_,w,b,S){const O=d.getIterator(),B=_.getIterator();let q=Z_(O),fe=Z_(B);for(;q||fe;){let me=!1,mt=!1;if(q&&fe){const dt=w(q,fe);dt<0?mt=!0:dt>0&&(me=!0)}else null!=q?mt=!0:me=!0;me?(b(fe),fe=Z_(B)):mt?(S(q),q=Z_(O)):(q=Z_(O),fe=Z_(B))}}(i,a,bg,d=>{c.push(this.wn(e,t,r,d))},d=>{c.push(this.mn(e,t,r,d))}),de.waitFor(c)}ln(e){let t=1;return N0(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>bg(c,d)).filter((c,d,_)=>!d||0!==bg(c,_[d-1]));const i=[];i.push(e);for(const c of r){const d=bg(c,e),_=bg(c,t);if(0===d)i[0]=e.Le();else if(d>0&&_<0)i.push(c),i.push(c.Le());else if(_>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2)a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,eD,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,eD,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lO)}getMinOffset(e,t){return de.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||ft())).next(lO)}}function aO(n){return yi(n,"collectionParents")}function O0(n){return yi(n,"indexEntries")}function tD(n){return yi(n,"indexConfiguration")}function N0(n){return yi(n,"indexState")}function lO(n){Mt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;BA(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Po(e.readTime,e.documentKey,t)}const cO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class to{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new to(e,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let d=0;const _=r.J({range:c},(b,S,O)=>(d++,O.delete()));a.push(_.next(()=>{Mt(1===d)}));const w=[];for(const b of t.mutations){const S=KP(e,b.key.path,t.batchId);a.push(i.delete(S)),w.push(b.key)}return de.waitFor(a).next(()=>w)}function nD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}to.DEFAULT_COLLECTION_PERCENTILE=10,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,to.DEFAULT=new to(41943040,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),to.DISABLED=new to(-1,0,0);class rD{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){Mt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new rD(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qh(e).J({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=oy(e),c=Qh(e);return c.add({}).next(d=>{Mt("number"==typeof d);const _=new nR(d,t,r,i),w=function(O,B,q){const fe=q.baseMutations.map(mt=>x0(O.ne,mt)),me=q.mutations.map(mt=>x0(O.ne,mt));return{userId:B,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:fe,mutations:me}}(this.wt,this.userId,_),b=[];let S=new Pn((O,B)=>j(O.canonicalString(),B.canonicalString()));for(const O of i){const B=KP(this.userId,O.key.path,d);S=S.add(O.key.path.popLast()),b.push(c.put(w)),b.push(a.put(B,kU))}return S.forEach(O=>{b.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.gn[d]=_.keys()}),de.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return Qh(e).get(t).next(r=>r?(Mt(r.userId===this.userId),wg(this.wt,r)):null)}yn(e,t){return this.gn[t]?de.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Qh(e).J({index:"userMutationsIndex",range:i},(c,d,_)=>{d.userId===this.userId&&(Mt(d.batchId>=r),a=wg(this.wt,d)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Qh(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qh(e).K("userMutationsIndex",t).next(r=>r.map(i=>wg(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=QC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return oy(e).J({range:i},(c,d,_)=>{const[w,b,S]=c,O=Ec(b);if(w===this.userId&&t.path.isEqual(O))return Qh(e).get(S).next(B=>{if(!B)throw ft();Mt(B.userId===this.userId),a.push(wg(this.wt,B))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(j);const i=[];return t.forEach(a=>{const c=QC(this.userId,a.path),d=IDBKeyRange.lowerBound(c),_=oy(e).J({range:d},(w,b,S)=>{const[O,B,q]=w,fe=Ec(B);O===this.userId&&a.path.isEqual(fe)?r=r.add(q):S.done()});i.push(_)}),de.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=QC(this.userId,r),c=IDBKeyRange.lowerBound(a);let d=new Pn(j);return oy(e).J({range:c},(_,w,b)=>{const[S,O,B]=_,q=Ec(O);S===this.userId&&r.isPrefixOf(q)?q.length===i&&(d=d.add(B)):b.done()}).next(()=>this.pn(e,d))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Qh(e).get(a).next(c=>{if(null===c)throw ft();Mt(c.userId===this.userId),r.push(wg(this.wt,c))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return uO(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return oy(e).J({range:r},(a,c,d)=>{if(a[0]===this.userId){const _=Ec(a[1]);i.push(_)}else d.done()}).next(()=>{Mt(0===i.length)})})}containsKey(e,t){return dO(e,this.userId,t)}Tn(e){return hO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dO(n,e,t){const r=QC(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return oy(n).J({range:a,H:!0},(d,_,w)=>{const[b,S,O]=d;b===e&&S===i&&(c=!0),w.done()}).next(()=>c)}function Qh(n){return yi(n,"mutations")}function oy(n){return yi(n,"documentMutations")}function hO(n){return yi(n,"mutationQueues")}class Cg{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Cg(0)}static Rn(){return new Cg(-1)}}class iV{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Cg(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Ce.fromTimestamp(new Se(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ay(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Mt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ay(e).J((c,d)=>{const _=M0(d);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>de.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ay(e).J((r,i)=>{const a=M0(i);t(a)})}bn(e){return fO(e).get("targetGlobalKey").next(t=>(Mt(null!==t),t))}Pn(e,t){return fO(e).put("targetGlobalKey",t)}vn(e,t){return ay(e).put(eO(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=gg(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ay(e).J({range:i,index:"queryTargetsIndex"},(c,d,_)=>{const w=M0(d);v0(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Xh(e);return t.forEach(c=>{const d=Ds(c.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,c))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=Xh(e);return de.forEach(t,a=>{const c=Ds(a.path);return de.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Xh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Xh(e);let a=Kt();return i.J({range:r,H:!0},(c,d,_)=>{const w=Ec(c[1]),b=new Fe(w);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Ds(t.path),i=IDBKeyRange.bound([r],[Ie(r)],!1,!0);let a=0;return Xh(e).J({index:"documentTargetsIndex",H:!0,range:i},([c,d],_,w)=>{0!==c&&(a++,w.done())}).next(()=>a>0)}te(e,t){return ay(e).get(t).next(r=>r?M0(r):null)}}function ay(n){return yi(n,"targets")}function fO(n){return yi(n,"targetGlobal")}function Xh(n){return yi(n,"targetDocuments")}function pO([n,e],[t,r]){const i=j(n,t);return 0===i?j(e,r):i}class sV{constructor(e){this.Sn=e,this.buffer=new Pn(pO),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();pO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ue.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){zh(r)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Hh(r)}yield t.kn(3e5)}))}}class aV{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Js.ot);const r=new sV(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(cO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cO):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,a,c,d,_,w;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,d=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),c0()<=Dr.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${i} in `+(d-c)+`ms\n\tRemoved ${a} targets in `+(_-d)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-b}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class lV{constructor(e,t){this.db=e,this.garbageCollector=new aV(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return iD(e,r)}removeReference(e,t,r){return iD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return iD(e,t)}Un(e,t){return function(r,i){let a=!1;return hO(r).Y(c=>dO(r,c,i).next(d=>(d&&(a=!0),de.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(c,d)=>{if(d<=t){const _=this.Un(e,c).next(w=>{if(!w)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ce.min()),Xh(e).delete([0,Ds(c.path)])))});i.push(_)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return iD(e,t)}Ln(e,t){const r=Xh(e);let i,a=Js.ot;return r.J({index:"documentTargetsIndex"},([c,d],{path:_,sequenceNumber:w})=>{0===c?(a!==Js.ot&&t(new Fe(Ec(i)),a),a=w,i=_):a=Js.ot}).next(()=>{a!==Js.ot&&t(new Fe(Ec(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iD(n,e){return Xh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ds(e.path),sequenceNumber:r}));var r}class gO{constructor(){this.changes=new Zh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cV{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Dg(e).put(r)}removeEntry(e,t,r){return Dg(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],XC(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return Dg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(L0(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return Dg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(L0(t))},(i,a)=>{r={document:this.Kn(t,a),size:nD(a)}}).next(()=>r)}getEntries(e,t){let r=eo();return this.Qn(e,t,(i,a)=>{const c=this.Kn(i,a);r=r.insert(i,c)}).next(()=>r)}jn(e,t){let r=eo(),i=new mr(Fe.comparator);return this.Qn(e,t,(a,c)=>{const d=this.Kn(a,c);r=r.insert(a,d),i=i.insert(a,nD(c))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return de.resolve();let i=new Pn(vO);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(L0(i.first()),L0(i.last())),c=i.getIterator();let d=c.getNext();return Dg(e).J({index:"documentKeyIndex",range:a},(_,w,b)=>{const S=Fe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;d&&vO(d,S)<0;)r(d,null),d=c.getNext();d&&d.isEqual(S)&&(r(d,w),d=c.hasNext()?c.getNext():null),d?b.q(L0(d)):b.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),XC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dg(e).K(IDBKeyRange.bound(i,a,!0)).next(c=>{let d=eo();for(const _ of c){const w=this.Kn(Fe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);d=d.insert(w.key,w)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=eo();const c=yO(t,r),d=yO(t,Po.max());return Dg(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(_,w,b)=>{const S=this.Kn(Fe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new uV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _O(e).get("remoteDocumentGlobalKey").next(t=>(Mt(!!t),t))}qn(e,t){return _O(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function ZU(n,e){let t;if(e.document)t=BP(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Fe.fromSegments(e.noDocument.path),i=vg(e.noDocument.readTime);t=Hn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=Fe.fromSegments(e.unknownDocument.path),i=vg(e.unknownDocument.version);t=Hn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Se(r[0],r[1]);return Ce.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Ce.min()))return r}return Hn.newInvalidDocument(e)}}function mO(n){return new cV(n)}class uV extends gO{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Zh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pn((a,c)=>j(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const d=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,d.readTime)),c.isValidDocument()){const _=JP(this.zn.wt,c);i=i.add(a.path.popLast());const w=nD(_);r+=w-d.size,t.push(this.zn.addEntry(e,a,_))}else if(r-=d.size,this.trackRemovals){const _=JP(this.zn.wt,c.convertToNoDocument(Ce.min()));t.push(this.zn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,c)=>{this.Hn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function _O(n){return yi(n,"remoteDocumentGlobal")}function Dg(n){return yi(n,"remoteDocumentsV14")}function L0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yO(n,e){const t=e.documentKey.path.toArray();return[n,XC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=j(t[a],r[a]),i)return i;return i=j(t.length,r.length),i||(i=j(t[t.length-2],r[r.length-2]),i||j(t[t.length-1],r[r.length-1]))}class dV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&I0(r.mutation,i,Oo.empty(),Se.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Kt()){const i=vc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=b0();return a.forEach((d,_)=>{c=c.insert(d,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=vc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,i){let a=eo();const c=C0(),d=C0();return t.forEach((_,w)=>{const b=r.get(w.key);i.has(w.key)&&(void 0===b||b.mutation instanceof ud)?a=a.insert(w.key,w):void 0!==b&&(c.set(w.key,b.mutation.getFieldMask()),I0(b.mutation,w,b.mutation.getFieldMask(),Se.now()))}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,b)=>c.set(w,b)),t.forEach((w,b)=>{var S;return d.set(w,new dV(b,null!==(S=c.get(w))&&void 0!==S?S:null))}),d))}recalculateAndSaveOverlays(e,t){const r=C0();let i=new mr((c,d)=>c-d),a=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let b=r.get(_)||Oo.empty();b=d.applyToLocalView(w,b),r.set(_,b);const S=(i.get(d.batchId)||Kt()).add(_);i=i.insert(d.batchId,S)})}).next(()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const _=d.getNext(),w=_.key,b=_.value,S=RP();b.forEach(O=>{if(!a.has(O)){const B=wP(t.get(O),r.get(O));null!==B&&S.set(O,B),a=a.add(O)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,S))}return de.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Fe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):KA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve(vc());let d=-1,_=a;return c.next(w=>de.forEach(w,(b,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),a.get(b)?de.resolve():this.getBaseDocument(e,b,S).next(O=>{_=_.insert(b,O)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,Kt())).next(b=>({batchId:d,changes:AP(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fe(t)).next(r=>{let i=b0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=b0();return this.indexManager.getCollectionParents(e,i).next(c=>de.forEach(c,d=>{const _=(w=t,b=d.child(i),new cd(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((b,S)=>{a=a.insert(b,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((d,_)=>{const w=_.getKey();null===i.get(w)&&(i=i.insert(w,Hn.newInvalidDocument(w)))});let c=b0();return i.forEach((d,_)=>{const w=a.get(d);void 0!==w&&I0(w.mutation,_,Oo.empty(),Se.now()),YA(t,_)&&(c=c.insert(d,_))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(Hn.newInvalidDocument(t))}}class hV{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return de.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:_i(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:sR(r.bundledQuery),readTime:_i(r.readTime)}),de.resolve();var r}}class fV{constructor(){this.overlays=new mr(Fe.comparator),this.Xn=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=vc();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=vc(),a=t.length+1,c=new Fe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const _=d.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new mr((w,b)=>w-b);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let b=a.get(w.largestBatchId);null===b&&(b=vc(),a=a.insert(w.largestBatchId,b)),b.set(w.getKey(),w)}}const d=vc(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,b)=>d.set(w,b)),!(d.size()>=i)););return de.resolve(d)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new iR(t,r));let a=this.Xn.get(t);void 0===a&&(a=Kt(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class lR{constructor(){this.Zn=new Pn(vi.ts),this.es=new Pn(vi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new vi(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new vi(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Fe(new Ye([])),r=new vi(t,e),i=new vi(t,e+1),a=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),a.push(c.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Fe(new Ye([])),r=new vi(t,e),i=new vi(t,e+1);let a=Kt();return this.es.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new vi(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vi{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Fe.comparator(e.key,t.key)||j(e.ls,t.ls)}static ns(e,t){return j(e.ls,t.ls)||Fe.comparator(e.key,t.key)}}class pV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Pn(vi.ts)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const c=new nR(a,t,r,i);this.mutationQueue.push(c);for(const d of i)this.ds=this.ds.add(new vi(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,t){return de.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vi(t,0),i=new vi(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],c=>{const d=this._s(c.ls);a.push(d)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(j);return t.forEach(i=>{const a=new vi(i,0),c=new vi(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,c],d=>{r=r.add(d.ls)})}),de.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Fe.isDocumentKey(a)||(a=a.child(""));const c=new vi(new Fe(a),0);let d=new Pn(j);return this.ds.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(d=d.add(_.ls)),!0)},c),de.resolve(this.gs(d))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Mt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return de.forEach(t.mutations,i=>{const a=new vi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new vi(t,0),i=this.ds.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gV{constructor(e){this.ps=e,this.docs=new mr(Fe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=eo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Hn.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=eo();const a=new Fe(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:_}}=c.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||BA(Vk(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ft()}Is(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mV(this)}getSize(e){return de.resolve(this.size)}}class mV extends gO{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class _V{constructor(e){this.persistence=e,this.Ts=new Zh(t=>gg(t),v0),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Es=0,this.As=new lR,this.targetCount=0,this.Rs=Cg.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),de.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Cg(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.vn(t),de.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((c,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Ts.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),de.waitFor(a).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.As.containsKey(t))}}class EO{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Js(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new _V(this),this.indexManager=new nV,this.remoteDocumentCache=new gV(r=>this.referenceDelegate.Ss(r)),this.wt=new XP(t),this.Ds=new hV(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new pV(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new yV(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return de.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class yV extends jk{constructor(e){super(),this.currentSequenceNumber=e}}class sD{constructor(e){this.persistence=e,this.ks=new lR,this.Os=null}static Ms(e){return new sD(e)}get Fs(){if(this.Os)return this.Os;throw ft()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),de.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Fs,r=>{const i=Fe.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,Ce.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return de.or([()=>de.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class vV{constructor(e){this.wt=e}O(e,t,r,i){const a=new BC("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qP,{unique:!0}),d.createObjectStore("documentMutations"),IO(e),function(d){d.createObjectStore("remoteDocuments")}(e));let c=de.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),IO(e)),c=c.next(()=>function(d){const _=d.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(d,_){return _.store("mutations").K().next(w=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qP,{unique:!0});const b=_.store("mutations"),S=w.map(O=>b.put(O));return de.waitFor(S)})}(e,a))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(a))),r<6&&i>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(c=c.next(()=>this.Us(a))),r<8&&i>=8&&(c=c.next(()=>this.qs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(a))),r<11&&i>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(d){const _=d.createObjectStore("documentOverlays",{keyPath:zU});_.createIndex("collectionPathOverlayIndex",GU,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",WU,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(d){const _=d.createObjectStore("remoteDocumentsV14",{keyPath:PU});_.createIndex("documentKeyIndex",OU),_.createIndex("collectionGroupIndex",NU)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(e,a))),r<15&&i>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:BU}).createIndex("sequenceNumberIndex",jU,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:$U}).createIndex("documentKeyIndex",HU,{unique:!1})}(e))),c}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=nD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>de.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(d=>de.forEach(d,_=>{Mt(_.userId===a.userId);const w=wg(this.wt,_);return uO(e,a.userId,w).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((c,d)=>{const _=new Ye(c),w=[0,Ds(_)];a.push(t.get(w).next(b=>b?de.resolve():t.put({targetId:0,path:Ds(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:VU});const r=t.store("collectionParents"),i=new aR,a=c=>{if(i.add(c)){const d=c.lastSegment(),_=c.popLast();return r.put({collectionId:d,parent:Ds(_)})}};return t.store("remoteDocuments").J({H:!0},(c,d)=>{const _=new Ye(c);return a(_.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,d,_],w)=>{const b=Ec(d);return a(b.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=M0(i),c=eO(this.wt,a);return t.put(c)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,c)=>{const d=t.store("remoteDocumentsV14"),_=(w=c,w.document?new Fe(Ye.fromString(w.document.name).popFirst(5)):w.noDocument?Fe.fromSegments(w.noDocument.path):w.unknownDocument?Fe.fromSegments(w.unknownDocument.path):ft()).path.toArray();var w;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(d.put(b))}).next(()=>de.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=mO(this.wt),a=new EO(sD.Ms,this.wt.ne);return r.K().next(c=>{const d=new Map;return c.forEach(_=>{var w;let b=null!==(w=d.get(_.userId))&&void 0!==w?w:Kt();wg(this.wt,_).keys().forEach(S=>b=b.add(S)),d.set(_.userId,b)}),de.forEach(d,(_,w)=>{const b=new ai(w),S=JC.se(this.wt,b),O=a.getIndexManager(b),B=rD.se(b,this.wt,O,a.referenceDelegate);return new wO(i,B,S,O).recalculateAndSaveOverlaysForDocumentKeys(new tR(t,Js.ot),_).next()})})}}function IO(n){n.createObjectStore("targetDocuments",{keyPath:FU}).createIndex("documentTargetsIndex",UU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",LU,{unique:!0}),n.createObjectStore("targetGlobal")}const cR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uR{constructor(e,t,r,i,a,c,d,_,w,b,S=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=c,this.document=d,this.Ws=w,this.zs=b,this.Hs=S,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=O=>Promise.resolve(),!uR.V())throw new Ne(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lV(this,i),this.ei=t+"main",this.wt=new XP(_),this.ni=new pl(this.ei,this.Hs,new vV(this.wt)),this.Vs=new iV(this.referenceDelegate,this.wt),this.remoteDocumentCache=mO(this.wt),this.Ds=new YU,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===b&&Mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ge.FAILED_PRECONDITION,cR);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Js(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,ue.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,ue.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,ue.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>oD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(zh(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return F0(e).get("owner").next(t=>de.resolve(this.di(t)))}_i(e){return oD(e).delete(this.clientId)}wi(){var e=this;return(0,ue.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=yi(r,"clientMetadata");return i.K().next(a=>{const c=e.gi(a,18e5),d=a.filter(_=>-1===c.indexOf(_));return de.forEach(d,_=>i.delete(_.clientId)).next(()=>d)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?de.resolve(!0):F0(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ne(ge.FAILED_PRECONDITION,cR);return!1}}return!(!this.networkEnabled||!this.inForeground)||oD(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ue.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new tR(t,Js.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>oD(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return rD.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rV(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return JC.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.Hs)?KU:14===c?QP:13===c?YP:12===c?qU:11===c?ZP:void ft();var c;let d;return this.ni.runTransaction(e,i,a,_=>(d=new tR(_,this.Ps?this.Ps.next():Js.ot),"readwrite-primary"===t?this.ai(d).next(w=>!!w||this.hi(d)).next(w=>{if(!w)throw Mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ne(ge.FAILED_PRECONDITION,Bk);return r(d)}).next(w=>this.fi(d).next(()=>w)):this.bi(d).next(()=>r(d)))).then(_=>(d.raiseOnCommittedEvent(),_))}bi(e){return F0(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ge.FAILED_PRECONDITION,cR)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return F0(e).put("owner",t)}static V(){return pl.V()}li(e){const t=F0(e);return t.get("owner").next(r=>this.di(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,N.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Mr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function F0(n){return yi(n,"owner")}function oD(n){return yi(n,"clientMetadata")}function dR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Kt(),i=Kt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new hR(e,t.fromCache,r,i)}}class bO{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){return de.resolve(null)}xi(e,t,r,i){return function iU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Ce.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const c=this.ki(t,a);return this.Oi(t,c,r,i)?this.Ni(e,t):(c0()<=Dr.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ZA(t)),this.Mi(e,c,t,Uk(i,-1)))})}ki(e,t){let r=new Pn(dP(e));return t.forEach((i,a)=>{YA(e,a)&&(r=r.add(a))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return c0()<=Dr.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",ZA(t)),this.Di.getDocumentsMatchingQuery(e,t,Po.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class wV{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new mr(j),this.Bi=new Zh(a=>gg(a),v0),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wO(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function CO(n,e,t,r){return new wV(n,e,t,r)}function DO(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,ue.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],d=[];let _=Kt();for(const w of i){c.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}for(const w of a){d.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(w=>({Ki:w,removedBatchIds:c,addedBatchIds:d}))})})}),fR.apply(this,arguments)}function TO(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function SO(n,e,t){let r=Kt(),i=Kt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=eo();return t.forEach((d,_)=>{const w=a.get(d);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(d)),_.isNoDocument()&&_.version.isEqual(Ce.min())?(e.removeEntry(d,_.readTime),c=c.insert(d,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),c=c.insert(d,_)):je("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",_.version)}),{Gi:c,Qi:i}})}function bV(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ly(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,de.resolve(i)):t.Vs.allocateTargetId(r).next(c=>(i=new Yh(e,c,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function cy(n,e,t){return pR.apply(this,arguments)}function pR(){return pR=(0,ue.Z)(function*(n,e,t){const r=nt(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!zh(c))throw c;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),pR.apply(this,arguments)}function aD(n,e,t){const r=nt(n);let i=Ce.min(),a=Kt();return r.persistence.runTransaction("Execute query","readonly",c=>function(d,_,w){const b=nt(d),S=b.Bi.get(w);return void 0!==S?de.resolve(b.$i.get(S)):b.Vs.getTargetData(_,w)}(r,c,Ca(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,d.targetId).next(_=>{a=_})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,e,t?i:Ce.min(),t?a:Kt())).next(d=>(xO(r,uP(e),d),{documents:d,ji:a})))}function AO(n,e){const t=nt(n),r=nt(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(c=>c?c.target:null))}function RO(n,e){const t=nt(n),r=t.Li.get(e)||Ce.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,Uk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(xO(t,e,i),i))}function xO(n,e,t){let r=Ce.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function gR(){return gR=(0,ue.Z)(function*(n,e,t,r){const i=nt(n);let a=Kt(),c=eo();for(const w of t){const b=e.Wi(w.metadata.name);w.document&&(a=a.add(b));const S=e.zi(w);S.setReadTime(e.Hi(w.metadata.readTime)),c=c.insert(b,S)}const d=i.Ui.newChangeBuffer({trackRemovals:!0}),_=yield ly(i,(w=r,Ca(X_(Ye.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>SO(w,d,c).next(b=>(d.apply(w),b)).next(b=>i.Vs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Vs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,b.Gi,b.Qi)).next(()=>b.Gi)))}),gR.apply(this,arguments)}function DV(n,e){return mR.apply(this,arguments)}function mR(){return mR=(0,ue.Z)(function*(n,e,t=Kt()){const r=yield ly(n,Ca(sR(e.bundledQuery))),i=nt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=_i(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(a,e);const d=r.withResumeToken(li.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(d.targetId,d),i.Vs.updateTargetData(a,d).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),mR.apply(this,arguments)}function MO(n,e){return`firestore_clients_${n}_${e}`}function kO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _R(n,e){return`firestore_targets_${n}_${e}`}class lD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Ne(i.error.code,i.error.message))),c?new lD(e,t,i.state,a):(Mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class U0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new U0(e,r.state,i):(Mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=ZC();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=qk(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new cD(e,a):(Mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yR{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yR(t.clientId,t.onlineState):(Mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vR{constructor(){this.activeTargetIds=ZC()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wR{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new mr(j),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=MO(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new vR),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ue.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(MO(e.persistenceKey,i));if(a){const c=cD.Ji(i,a);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_R(this.persistenceKey,e));if(r){const i=U0.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_R(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,ue.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let c=Js.ot;if(null!=a)try{const d=JSON.parse(a);Mt("number"==typeof d),c=d}catch(d){Mr("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(r.newValue);i!==Js.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new lD(this.currentUser,e,t,r),a=kO(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=kO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=_R(this.persistenceKey,e),a=new U0(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return cD.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return lD.Ji(new ai(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return U0.Ji(i,t)}wr(e){return yR.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,ue.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),c=[],d=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||d.push(_)}),this.syncEngine.Mr(c,d).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=ZC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class PO{constructor(){this.Fr=new vR,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new vR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class TV{Br(e){}shutdown(){}}class OO{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const SV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class AV{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class RV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const c=this.oo(e,t);je("RestConnection","Sending: ",c,r);const d={};return this.uo(d,i,a),this.co(e,c,d,r).then(_=>(je("RestConnection","Received: ",_),_),_=>{throw K_("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}ao(e,t,r,i,a,c){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+$h,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${SV[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,c)=>{const d=new UA;d.listenOnce(o0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case W_.NO_ERROR:const w=d.getResponseJson();je("Connection","XHR received:",JSON.stringify(w)),a(w);break;case W_.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),c(new Ne(ge.DEADLINE_EXCEEDED,"Request time out"));break;case W_.HTTP_ERROR:const b=d.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',b,"response text:",d.getResponseText()),b>0){const S=d.getResponseJson().error;if(S&&S.status&&S.message){const O=function(B){const q=B.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(q)>=0?q:ge.UNKNOWN}(S.status);c(new Ne(O,S.message))}else c(new Ne(ge.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ne(ge.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);d.send(t,"POST",_,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=LA(),c=FA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new l0({})),this.uo(d.initMessageHeaders,t,r),(0,N.uI)()||(0,N.b$)()||(0,N.d)()||(0,N.w1)()||(0,N.Mn)()||(0,N.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");je("Connection","Creating WebChannel: "+_,d);const w=a.createWebChannel(_,d);let b=!1,S=!1;const O=new AV({jr:q=>{S?je("Connection","Not sending because WebChannel is closed:",q):(b||(je("Connection","Opening WebChannel transport."),w.open(),b=!0),je("Connection","WebChannel sending:",q),w.send(q))},Wr:()=>w.close()}),B=(q,fe,me)=>{q.listen(fe,mt=>{try{me(mt)}catch(dt){setTimeout(()=>{throw dt},0)}})};return B(w,q_.EventType.OPEN,()=>{S||je("Connection","WebChannel transport opened.")}),B(w,q_.EventType.CLOSE,()=>{S||(S=!0,je("Connection","WebChannel transport closed"),O.eo())}),B(w,q_.EventType.ERROR,q=>{S||(S=!0,K_("Connection","WebChannel transport errored:",q),O.eo(new Ne(ge.UNAVAILABLE,"The operation could not be completed")))}),B(w,q_.EventType.MESSAGE,q=>{var fe;if(!S){const me=q.data[0];Mt(!!me);const dt=me.error||(null===(fe=me[0])||void 0===fe?void 0:fe.error);if(dt){je("Connection","WebChannel received error:",dt);const st=dt.status;let ot=function(tn){const qr=Gr[tn];if(void 0!==qr)return TP(qr)}(st),kt=dt.message;void 0===ot&&(ot=ge.INTERNAL,kt="Unknown error status: "+st+" with message "+dt.message),S=!0,O.eo(new Ne(ot,kt)),w.close()}else je("Connection","WebChannel received:",me),O.no(me)}}),B(c,Nk.STAT_EVENT,q=>{q.stat===a0.PROXY?je("Connection","Detected buffering proxy"):q.stat===a0.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.Zr()},0),O}}function NO(){return typeof window<"u"?window:null}function uD(){return typeof document<"u"?document:null}function V0(n){return new wU(n,!0)}class ER{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class LO{constructor(e,t,r,i,a,c,d,_){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=_,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new ER(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ue.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,ue.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,ue.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Mr(t.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Ne(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ue.Z)(function*(){e.state=0,e.start()}))}qo(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xV extends LO{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function bU(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ft(),i=e.targetChange.targetIds||[],a=function(_,w){return _.dt?(Mt(void 0===w||"string"==typeof w),li.fromBase64String(w||"")):(Mt(void 0===w||w instanceof Uint8Array),li.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(_){const w=void 0===_.code?ge.UNKNOWN:TP(_.code);return new Ne(w,_.message||"")}(c);t=new MP(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=wc(n,r.document.name),a=_i(r.document.updateTime),c=new Ui({mapValue:{fields:r.document.fields}}),d=Hn.newFoundDocument(i,a,c);t=new YC(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=wc(n,r.document),a=r.readTime?_i(r.readTime):Ce.min(),c=Hn.newNoDocument(i,a);t=new YC([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=wc(n,r.document);t=new YC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,a=new hU(r.count||0);t=new xP(r.targetId,a)}}var _;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Ce.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ce.min():a.readTime?_i(a.readTime):Ce.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=R0(this.wt),t.addTarget=function(i,a){let c;const d=a.target;return c=zC(d)?{documents:jP(i,d)}:{query:$P(i,d)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=NP(i,a.resumeToken):a.snapshotVersion.compareTo(Ce.min())>0&&(c.readTime=S0(i,a.snapshotVersion.toTimestamp())),c}(this.wt,e);const r=function DU(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=R0(this.wt),t.removeTarget=e,this.Mo(t)}}class MV extends LO{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function CU(n,e){return n&&n.length>0?(Mt(void 0!==e),n.map(t=>function(r,i){let a=_i(r.updateTime?r.updateTime:i);return a.isEqual(Ce.min())&&(a=_i(i)),new cU(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=_i(e.commitTime);return this.listener.Jo(r,t)}return Mt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=R0(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>x0(this.wt,r))};this.Mo(t)}}class kV extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Ne(ge.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(ge.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.bo.ao(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(ge.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class PV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Mr(t),this.su=!1):je("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class OV{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(d=>{r.enqueueAndForget((0,ue.Z)(function*(){var _;Jh(c)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ue.Z)(function*(w){const b=nt(w);b.lu.add(4),yield uy(b),b._u.set("Unknown"),b.lu.delete(4),yield B0(b)}),function(w){return _.apply(this,arguments)})(c))}))}),this._u=new PV(r,i)}}function B0(n){return IR.apply(this,arguments)}function IR(){return IR=(0,ue.Z)(function*(n){if(Jh(n))for(const e of n.fu)yield e(!0)}),IR.apply(this,arguments)}function uy(n){return bR.apply(this,arguments)}function bR(){return bR=(0,ue.Z)(function*(n){for(const e of n.fu)yield e(!1)}),bR.apply(this,arguments)}function dD(n,e){const t=nt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),TR(t)?DR(t):hy(t).Co()&&CR(t,e))}function j0(n,e){const t=nt(n),r=hy(t);t.hu.delete(e),r.Co()&&FO(t,e),0===t.hu.size&&(r.Co()?r.ko():Jh(t)&&t._u.set("Unknown"))}function CR(n,e){n.wu.Nt(e.targetId),hy(n).Qo(e)}function FO(n,e){n.wu.Nt(e),hy(n).jo(e)}function DR(n){n.wu=new _U({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),hy(n).start(),n._u.iu()}function TR(n){return Jh(n)&&!hy(n).Do()&&n.hu.size>0}function Jh(n){return 0===nt(n).lu.size}function UO(n){n.wu=void 0}function NV(n){return SR.apply(this,arguments)}function SR(){return SR=(0,ue.Z)(function*(n){n.hu.forEach((e,t)=>{CR(n,e)})}),SR.apply(this,arguments)}function LV(n,e){return AR.apply(this,arguments)}function AR(){return AR=(0,ue.Z)(function*(n,e){UO(n),TR(n)?(n._u.uu(e),DR(n)):n._u.set("Unknown")}),AR.apply(this,arguments)}function FV(n,e,t){return RR.apply(this,arguments)}function RR(){return RR=(0,ue.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof MP&&2===e.state&&e.cause)try{yield(r=(0,ue.Z)(function*(i,a){const c=a.cause;for(const d of a.targetIds)i.hu.has(d)&&(yield i.remoteSyncer.rejectListen(d,c),i.hu.delete(d),i.wu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hD(n,r)}else if(e instanceof YC?n.wu.Ut(e):e instanceof xP?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Ce.min()))try{const r=yield TO(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.wu.Yt(a);return c.targetChanges.forEach((d,_)=>{if(d.resumeToken.approximateByteSize()>0){const w=i.hu.get(_);w&&i.hu.set(_,w.withResumeToken(d.resumeToken,a))}}),c.targetMismatches.forEach(d=>{const _=i.hu.get(d);if(!_)return;i.hu.set(d,_.withResumeToken(li.EMPTY_BYTE_STRING,_.snapshotVersion)),FO(i,d);const w=new Yh(_.target,d,1,_.sequenceNumber);CR(i,w)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield hD(n,r)}var r}),RR.apply(this,arguments)}function hD(n,e,t){return xR.apply(this,arguments)}function xR(){return xR=(0,ue.Z)(function*(n,e,t){if(!zh(e))throw e;n.lu.add(1),yield uy(n),n._u.set("Offline"),t||(t=()=>TO(n.localStore)),n.asyncQueue.enqueueRetryable((0,ue.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield B0(n)}))}),xR.apply(this,arguments)}function VO(n,e){return e().catch(t=>hD(n,t,e))}function dy(n){return MR.apply(this,arguments)}function MR(){return MR=(0,ue.Z)(function*(n){const e=nt(n),t=ef(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;UV(e);)try{const i=yield bV(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,VV(e,i)}catch(i){yield hD(e,i)}BO(e)&&jO(e)}),MR.apply(this,arguments)}function UV(n){return Jh(n)&&n.au.length<10}function VV(n,e){n.au.push(e);const t=ef(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function BO(n){return Jh(n)&&!ef(n).Do()&&n.au.length>0}function jO(n){ef(n).start()}function BV(n){return kR.apply(this,arguments)}function kR(){return kR=(0,ue.Z)(function*(n){ef(n).Xo()}),kR.apply(this,arguments)}function jV(n){return PR.apply(this,arguments)}function PR(){return PR=(0,ue.Z)(function*(n){const e=ef(n);for(const t of n.au)e.Ho(t.mutations)}),PR.apply(this,arguments)}function $V(n,e,t){return OR.apply(this,arguments)}function OR(){return OR=(0,ue.Z)(function*(n,e,t){const r=n.au.shift(),i=rR.from(r,e,t);yield VO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dy(n)}),OR.apply(this,arguments)}function HV(n,e){return NR.apply(this,arguments)}function NR(){return NR=(0,ue.Z)(function*(n,e){var t;e&&ef(n).zo&&(yield(t=(0,ue.Z)(function*(r,i){if(DP(a=i.code)&&a!==ge.ABORTED){const c=r.au.shift();ef(r).No(),yield VO(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield dy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),BO(n)&&jO(n)}),NR.apply(this,arguments)}function $O(n,e){return LR.apply(this,arguments)}function LR(){return LR=(0,ue.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=Jh(t);t.lu.add(3),yield uy(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield B0(t)}),LR.apply(this,arguments)}function FR(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,ue.Z)(function*(n,e){const t=nt(n);e?(t.lu.delete(2),yield B0(t)):e||(t.lu.add(2),yield uy(t),t._u.set("Unknown"))}),UR.apply(this,arguments)}function hy(n){return n.mu||(n.mu=function(e,t,r){const i=nt(e);return i.tu(),new xV(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:NV.bind(null,n),Jr:LV.bind(null,n),Go:FV.bind(null,n)}),n.fu.push(function(){var e=(0,ue.Z)(function*(t){t?(n.mu.No(),TR(n)?DR(n):n._u.set("Unknown")):(yield n.mu.stop(),UO(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function ef(n){return n.gu||(n.gu=function(e,t,r){const i=nt(e);return i.tu(),new MV(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:BV.bind(null,n),Jr:HV.bind(null,n),Yo:jV.bind(null,n),Jo:$V.bind(null,n)}),n.fu.push(function(){var e=(0,ue.Z)(function*(t){t?(n.gu.No(),yield dy(n)):(yield n.gu.stop(),n.au.length>0&&(je("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class VR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,d=new VR(e,t,c,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(n,e){if(Mr("AsyncQueue",`${e}: ${n}`),zh(n))return new Ne(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class py{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Fe.comparator(t.key,r.key):(t,r)=>Fe.comparator(t.key,r.key),this.keyedMap=b0(),this.sortedSet=new mr(this.comparator)}static emptySet(e){return new py(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof py)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new py;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class HO{constructor(){this.yu=new mr(Fe.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ft():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class gy{constructor(e,t,r,i,a,c,d,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new gy(e,t,py.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&w0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class zV{constructor(){this.Iu=void 0,this.listeners=[]}}class GV{constructor(){this.queries=new Zh(e=>cP(e),w0),this.onlineState="Unknown",this.Tu=new Set}}function BR(n,e){return jR.apply(this,arguments)}function jR(){return jR=(0,ue.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new zV),i)try{a.Iu=yield t.onListen(r)}catch(c){const d=fy(c,`Initialization of query '${ZA(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&zR(t)}),jR.apply(this,arguments)}function $R(n,e){return HR.apply(this,arguments)}function HR(){return HR=(0,ue.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),HR.apply(this,arguments)}function WV(n,e){const t=nt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const d of c.listeners)d.Au(i)&&(r=!0);c.Iu=i}}r&&zR(t)}function qV(n,e,t){const r=nt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function zR(n){n.Tu.forEach(e=>{e.next()})}class GR{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new gy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=gy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class KV{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class zO{constructor(e){this.wt=e}Wi(e){return wc(this.wt,e)}zi(e){return e.metadata.exists?BP(this.wt,e.document,!1):Hn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return _i(e)}}class ZV{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GO(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Ye.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new zO(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const d=(t.get(c)||Kt()).add(a);t.set(c,d)}}return t}complete(){var e=this;return(0,ue.Z)(function*(){const t=yield function CV(n,e,t,r){return gR.apply(this,arguments)}(e.localStore,new zO(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield DV(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function GO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class WO{constructor(e){this.key=e}}class qO{constructor(e){this.key=e}}class KO{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Kt(),this.mutatedKeys=Kt(),this.Lu=dP(e),this.Uu=new py(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new HO,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,S)=>{const O=i.get(b),B=YA(this.query,S)?S:null,q=!!O&&this.mutatedKeys.has(O.key),fe=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let me=!1;O&&B?O.data.isEqual(B.data)?q!==fe&&(r.track({type:3,doc:B}),me=!0):this.Qu(O,B)||(r.track({type:2,doc:B}),me=!0,(_&&this.Lu(B,_)>0||w&&this.Lu(B,w)<0)&&(d=!0)):!O&&B?(r.track({type:0,doc:B}),me=!0):O&&!B&&(r.track({type:1,doc:O}),me=!0,(_||w)&&(d=!0)),me&&(B?(c=c.add(B),a=fe?a.add(b):a.delete(b)):(c=c.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{Uu:c,Gu:r,Oi:d,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((w,b)=>function(S,O){const B=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return B(S)-B(O)}(w.type,b.type)||this.Lu(w.doc,b.doc)),this.ju(r);const c=t?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,_=d!==this.$u;return this.$u=d,0!==a.length||_?{snapshot:new gy(this.query,e.Uu,i,a,e.mutatedKeys,0===d,_,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new HO,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Kt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new qO(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new WO(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Kt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return gy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class YV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class QV{constructor(e){this.key=e,this.Xu=!1}}class XV{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new Zh(d=>cP(d),w0),this.ec=new Map,this.nc=new Set,this.sc=new mr(Fe.comparator),this.ic=new Map,this.rc=new lR,this.oc={},this.uc=new Map,this.cc=Cg.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function JV(n,e){return WR.apply(this,arguments)}function WR(){return WR=(0,ue.Z)(function*(n,e){const t=gx(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const c=yield ly(t.localStore,Ca(e));t.isPrimaryClient&&dD(t.remoteStore,c);const d=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield qR(t,e,r,"current"===d)}return i}),WR.apply(this,arguments)}function qR(n,e,t,r){return KR.apply(this,arguments)}function KR(){return KR=(0,ue.Z)(function*(n,e,t,r){n.hc=(b,S,O)=>{return(B=(0,ue.Z)(function*(q,fe,me,mt){let dt=fe.view.Ku(me);dt.Oi&&(dt=yield aD(q.localStore,fe.query,!1).then(({documents:kt})=>fe.view.Ku(kt,dt)));const st=mt&&mt.targetChanges.get(fe.targetId),ot=fe.view.applyChanges(dt,q.isPrimaryClient,st);return ix(q,fe.targetId,ot.zu),ot.snapshot}),function(q,fe,me,mt){return B.apply(this,arguments)})(n,b,S,O);var B};const i=yield aD(n.localStore,e,!0),a=new KO(e,i.ji),c=a.Ku(i.documents),d=T0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(c,n.isPrimaryClient,d);ix(n,t,_.zu);const w=new YV(e,t,a);return n.tc.set(e,w),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),_.snapshot}),KR.apply(this,arguments)}function eB(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,ue.Z)(function*(n,e){const t=nt(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!w0(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield cy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),j0(t.remoteStore,r.targetId),my(t,r.targetId)}).catch(Hh))):(my(t,r.targetId),yield cy(t.localStore,r.targetId,!0))}),ZR.apply(this,arguments)}function YR(){return YR=(0,ue.Z)(function*(n,e,t){const r=mx(n);try{const i=yield function(a,c){const d=nt(a),_=Se.now(),w=c.reduce((O,B)=>O.add(B.key),Kt());let b,S;return d.persistence.runTransaction("Locally write mutations","readwrite",O=>{let B=eo(),q=Kt();return d.Ui.getEntries(O,w).next(fe=>{B=fe,B.forEach((me,mt)=>{mt.isValidDocument()||(q=q.add(me))})}).next(()=>d.localDocuments.getOverlayedDocuments(O,B)).next(fe=>{b=fe;const me=[];for(const mt of c){const dt=dU(mt,b.get(mt.key).overlayedDocument);null!=dt&&me.push(new ud(mt.key,dt,eP(dt.value.mapValue),lr.exists(!0)))}return d.mutationQueue.addMutationBatch(O,_,me,c)}).next(fe=>{S=fe;const me=fe.applyToLocalDocumentSet(b,q);return d.documentOverlayCache.saveOverlays(O,fe.batchId,me)})}).then(()=>({batchId:S.batchId,changes:AP(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,d){let _=a.oc[a.currentUser.toKey()];_||(_=new mr(j)),_=_.insert(c,d),a.oc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield dd(r,i.changes),yield dy(r.remoteStore)}catch(i){const a=fy(i,"Failed to persist write");t.reject(a)}}),YR.apply(this,arguments)}function ZO(n,e){return QR.apply(this,arguments)}function QR(){return QR=(0,ue.Z)(function*(n,e){const t=nt(n);try{const r=yield function IV(n,e){const t=nt(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const d=[];e.targetChanges.forEach((b,S)=>{const O=i.get(S);if(!O)return;d.push(t.Vs.removeMatchingKeys(a,b.removedDocuments,S).next(()=>t.Vs.addMatchingKeys(a,b.addedDocuments,S)));let B=O.withSequenceNumber(a.currentSequenceNumber);var q,fe,me;e.targetMismatches.has(S)?B=B.withResumeToken(li.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):b.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(b.resumeToken,r)),i=i.insert(S,B),fe=B,me=b,(0===(q=O).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0)&&d.push(t.Vs.updateTargetData(a,B))});let _=eo(),w=Kt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),d.push(SO(a,c,e.documentUpdates).next(b=>{_=b.Gi,w=b.Qi})),!r.isEqual(Ce.min())){const b=t.Vs.getLastRemoteSnapshotVersion(a).next(S=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(b)}return de.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.$i=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.ic.get(a);c&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Mt(c.Xu):i.removedDocuments.size>0&&(Mt(c.Xu),c.Xu=!1))}),yield dd(t,r,e)}catch(r){yield Hh(r)}}),QR.apply(this,arguments)}function YO(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,c)=>{const d=c.view.Eu(e);d.snapshot&&i.push(d.snapshot)}),function(a,c){const d=nt(a);d.onlineState=c;let _=!1;d.queries.forEach((w,b)=>{for(const S of b.listeners)S.Eu(c)&&(_=!0)}),_&&zR(d)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nB(n,e,t){return XR.apply(this,arguments)}function XR(){return XR=(0,ue.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let c=new mr(Fe.comparator);c=c.insert(a,Hn.newNoDocument(a,Ce.min()));const d=Kt().add(a),_=new D0(Ce.min(),new Map,new Pn(j),c,d);yield ZO(r,_),r.sc=r.sc.remove(a),r.ic.delete(e),sx(r)}else yield cy(r.localStore,e,!1).then(()=>my(r,e,t)).catch(Hh)}),XR.apply(this,arguments)}function rB(n,e){return JR.apply(this,arguments)}function JR(){return JR=(0,ue.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const i=yield function EV(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(c,d,_,w){const b=_.batch,S=b.keys();let O=de.resolve();return S.forEach(B=>{O=O.next(()=>w.getEntry(d,B)).next(q=>{const fe=_.docVersions.get(B);Mt(null!==fe),q.version.compareTo(fe)<0&&(b.applyToRemoteDocument(q,_),q.isValidDocument()&&(q.setReadTime(_.commitVersion),w.addEntry(q)))})}),O.next(()=>c.mutationQueue.removeMutationBatch(d,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=Kt();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(d=d.add(c.batch.mutations[_].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);rx(t,r,null),nx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dd(t,i)}catch(i){yield Hh(i)}}),JR.apply(this,arguments)}function iB(n,e,t){return ex.apply(this,arguments)}function ex(){return ex=(0,ue.Z)(function*(n,e,t){const r=nt(n);try{const i=yield function(a,c){const d=nt(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return d.mutationQueue.lookupMutationBatch(_,c).next(b=>(Mt(null!==b),w=b.keys(),d.mutationQueue.removeMutationBatch(_,b))).next(()=>d.mutationQueue.performConsistencyCheck(_)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(_,w,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>d.localDocuments.getDocuments(_,w))})}(r.localStore,e);rx(r,e,t),nx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dd(r,i)}catch(i){yield Hh(i)}}),ex.apply(this,arguments)}function tx(){return tx=(0,ue.Z)(function*(n,e){const t=nt(n);Jh(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=nt(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=fy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),tx.apply(this,arguments)}function nx(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function rx(n,e,t){const r=nt(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function my(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||QO(n,r)})}function QO(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(j0(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),sx(n))}function ix(n,e,t){for(const r of t)r instanceof WO?(n.rc.addReference(r.key,e),oB(n,r)):r instanceof qO?(je("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||QO(n,r.key)):ft()}function oB(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(je("SyncEngine","New document in limbo: "+t),n.nc.add(r),sx(n))}function sx(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Fe(Ye.fromString(e)),r=n.cc.next();n.ic.set(r,new QV(t)),n.sc=n.sc.insert(t,r),dD(n.remoteStore,new Yh(Ca(X_(t.path)),r,2,Js.ot))}}function dd(n,e,t){return ox.apply(this,arguments)}function ox(){return ox=(0,ue.Z)(function*(n,e,t){const r=nt(n),i=[],a=[],c=[];var d;r.tc.isEmpty()||(r.tc.forEach((d,_)=>{c.push(r.hc(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const b=hR.Vi(_.targetId,w);a.push(b)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(d=(0,ue.Z)(function*(_,w){const b=nt(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>de.forEach(w,O=>de.forEach(O.Pi,B=>b.persistence.referenceDelegate.addReference(S,O.targetId,B)).next(()=>de.forEach(O.vi,B=>b.persistence.referenceDelegate.removeReference(S,O.targetId,B)))))}catch(S){if(!zh(S))throw S;je("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const O=S.targetId;if(!S.fromCache){const B=b.$i.get(O),fe=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);b.$i=b.$i.insert(O,fe)}}}),function(_,w){return d.apply(this,arguments)})(r.localStore,a))}),ox.apply(this,arguments)}function aB(n,e){return ax.apply(this,arguments)}function ax(){return ax=(0,ue.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield DO(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(c=>{c.forEach(d=>{d.reject(new Ne(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dd(t,r.Ki)}var i}),ax.apply(this,arguments)}function lB(n,e){const t=nt(n),r=t.ic.get(e);if(r&&r.Xu)return Kt().add(r.key);{let i=Kt();const a=t.ec.get(e);if(!a)return i;for(const c of a){const d=t.tc.get(c);i=i.unionWith(d.view.qu)}return i}}function cB(n,e){return lx.apply(this,arguments)}function lx(){return lx=(0,ue.Z)(function*(n,e){const t=nt(n),r=yield aD(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&ix(t,e.targetId,i.zu),i}),lx.apply(this,arguments)}function uB(n,e){return cx.apply(this,arguments)}function cx(){return cx=(0,ue.Z)(function*(n,e){const t=nt(n);return RO(t.localStore,e).then(r=>dd(t,r))}),cx.apply(this,arguments)}function dB(n,e,t,r){return ux.apply(this,arguments)}function ux(){return ux=(0,ue.Z)(function*(n,e,t,r){const i=nt(n),a=yield function(c,d){const _=nt(c),w=nt(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>w.yn(b,d).next(S=>S?_.localDocuments.getDocuments(b,S):de.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield dy(i.remoteStore):"acknowledged"===t||"rejected"===t?(rx(i,e,r||null),nx(i,e),d=e,nt(nt(i.localStore).mutationQueue).In(d)):ft(),yield dd(i,a)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),ux.apply(this,arguments)}function dx(){return dx=(0,ue.Z)(function*(n,e){const t=nt(n);if(gx(t),mx(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield XO(t,r.toArray());t.ac=!0,yield FR(t.remoteStore,!0);for(const a of i)dD(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(my(t,c),cy(t.localStore,c,!0))),j0(t.remoteStore,c)}),yield i,yield XO(t,r),function(a){const c=nt(a);c.ic.forEach((d,_)=>{j0(c.remoteStore,_)}),c.rc.cs(),c.ic=new Map,c.sc=new mr(Fe.comparator)}(t),t.ac=!1,yield FR(t.remoteStore,!1)}}),dx.apply(this,arguments)}function XO(n,e,t){return hx.apply(this,arguments)}function hx(){return hx=(0,ue.Z)(function*(n,e,t){const r=nt(n),i=[],a=[];for(const c of e){let d;const _=r.ec.get(c);if(_&&0!==_.length){d=yield ly(r.localStore,Ca(_[0]));for(const w of _){const b=r.tc.get(w),S=yield cB(r,b);S.snapshot&&a.push(S.snapshot)}}else{const w=yield AO(r.localStore,c);d=yield ly(r.localStore,w),yield qR(r,JO(w),c,!1)}i.push(d)}return r.Zu.Go(a),i}),hx.apply(this,arguments)}function JO(n){return aP(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function fB(n){const e=nt(n);return nt(nt(e.localStore).persistence).Ri()}function pB(n,e,t,r){return fx.apply(this,arguments)}function fx(){return fx=(0,ue.Z)(function*(n,e,t,r){const i=nt(n);if(i.ac)return void je("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield RO(i.localStore,uP(a[0])),d=D0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield dd(i,c,d);break}case"rejected":yield cy(i.localStore,e,!0),my(i,e,r);break;default:ft()}}),fx.apply(this,arguments)}function gB(n,e,t){return px.apply(this,arguments)}function px(){return px=(0,ue.Z)(function*(n,e,t){const r=gx(n);if(r.ac){for(const i of e){if(r.ec.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const a=yield AO(r.localStore,i),c=yield ly(r.localStore,a);yield qR(r,JO(a),c.targetId,!1),dD(r.remoteStore,c)}for(const i of t)r.ec.has(i)&&(yield cy(r.localStore,i,!1).then(()=>{j0(r.remoteStore,i),my(r,i)}).catch(Hh))}}),px.apply(this,arguments)}function gx(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nB.bind(null,e),e.Zu.Go=WV.bind(null,e.eventManager),e.Zu.lc=qV.bind(null,e.eventManager),e}function mx(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iB.bind(null,e),e}class eN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ue.Z)(function*(){t.wt=V0(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return CO(this.persistence,new bO,e.initialUser,this.wt)}_c(e){return new EO(sD.Ms,this.wt)}dc(e){return new PO}terminate(){var e=this;return(0,ue.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class tN extends eN{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ue.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield mx(r.yc.syncEngine),yield dy(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return CO(this.persistence,new bO,e.initialUser,this.wt)}mc(e,t){return new oV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new $F(t,this.persistence);return new jF(e.asyncQueue,r)}_c(e){const t=dR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?to.withCacheSize(this.cacheSizeBytes):to.DEFAULT;return new uR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,NO(),uD(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new PO}}class _B extends tN{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ue.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof wR&&(r.sharedClientState.syncEngine={kr:dB.bind(null,i),Or:pB.bind(null,i),Mr:gB.bind(null,i),Ri:fB.bind(null,i),Nr:uB.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,ue.Z)(function*(c){yield function hB(n,e){return dx.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}dc(e){const t=NO();if(!wR.V(t))throw new Ne(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class _x{initialize(e,t){var r=this;return(0,ue.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>YO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=aB.bind(null,r.syncEngine),yield FR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new GV}createDatastore(e){const t=V0(e.databaseInfo.databaseId),r=new RV(e.databaseInfo);return new kV(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>YO(this.syncEngine,d,0),c=OO.V()?new OO:new TV,new OV(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,d,_,w){const b=new XV(r,i,a,c,d,_);return w&&(b.ac=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ue.Z)(function*(t){const r=nt(t);je("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield uy(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function nN(n,e=10240){let t=0;return{read:()=>(0,ue.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ue.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class fD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class yB{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new s,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,ue.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,ue.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,ue.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new KV(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,ue.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,ue.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class vB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ue.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ue.Z)(function*(a,c){const d=nt(a),_=R0(d.wt)+"/documents",w={documents:c.map(B=>A0(d.wt,B))},b=yield d.ao("BatchGetDocuments",_,w,c.length),S=new Map;b.forEach(B=>{const q=function IU(n,e){return"found"in e?function(t,r){Mt(!!r.found);const i=wc(t,r.found.name),a=_i(r.found.updateTime),c=new Ui({mapValue:{fields:r.found.fields}});return Hn.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){Mt(!!r.missing),Mt(!!r.readTime);const i=wc(t,r.missing),a=_i(r.readTime);return Hn.newNoDocument(i,a)}(n,e):ft()}(d.wt,B);S.set(q.key.toString(),q)});const O=[];return c.forEach(B=>{const q=S.get(B.toString());Mt(!!q),O.push(q)}),O}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ry(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ue.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Fe.fromPath(i);e.mutations.push(new QA(a,e.precondition(a)))}),yield(r=(0,ue.Z)(function*(i,a){const c=nt(i),d=R0(c.wt)+"/documents",_={writes:a.map(w=>x0(c.wt,w))};yield c.ro("Commit",d,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=Ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?lr.updateTime(t):lr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ce.min()))throw new Ne(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lr.updateTime(t)}return lr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class wB{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new ER(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,ue.Z)(function*(){const t=new vB(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!p0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!DP(t)}return!1}}class EB{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ai.UNAUTHENTICATED,this.clientId=U.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ue.Z)(function*(d){je("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(je("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ue.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=fy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function rN(n,e){return yx.apply(this,arguments)}function yx(){return yx=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ue.Z)(function*(a){r.isEqual(a)||(yield DO(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),yx.apply(this,arguments)}function iN(n,e){return vx.apply(this,arguments)}function vx(){return vx=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wx(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>$O(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>$O(e.remoteStore,a)),n.onlineComponents=e}),vx.apply(this,arguments)}function wx(n){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,ue.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield rN(n,new eN)),n.offlineComponents}),Ex.apply(this,arguments)}function pD(n){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,ue.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield iN(n,new _x)),n.onlineComponents}),Ix.apply(this,arguments)}function sN(n){return wx(n).then(e=>e.persistence)}function bx(n){return wx(n).then(e=>e.localStore)}function oN(n){return pD(n).then(e=>e.remoteStore)}function Cx(n){return pD(n).then(e=>e.syncEngine)}function _y(n){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,ue.Z)(function*(n){const e=yield pD(n),t=e.eventManager;return t.onListen=JV.bind(null,e.syncEngine),t.onUnlisten=eB.bind(null,e.syncEngine),t}),Dx.apply(this,arguments)}function aN(n,e,t={}){const r=new s;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(i,a,c,d,_){const w=new fD({next:S=>{a.enqueueAndForget(()=>$R(i,b));const O=S.docs.has(c);!O&&S.fromCache?_.reject(new Ne(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&d&&"server"===d.source?_.reject(new Ne(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new GR(X_(c.path),w,{includeMetadataChanges:!0,Du:!0});return BR(i,b)}(yield _y(n),n.asyncQueue,e,t,r)})),r.promise}function lN(n,e,t={}){const r=new s;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(i,a,c,d,_){const w=new fD({next:S=>{a.enqueueAndForget(()=>$R(i,b)),S.fromCache&&"server"===d.source?_.reject(new Ne(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new GR(c,w,{includeMetadataChanges:!0,Du:!0});return BR(i,b)}(yield _y(n),n.asyncQueue,e,t,r)})),r.promise}const cN=new Map;function Tx(n,e,t){if(!t)throw new Ne(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uN(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dN(n){if(!Fe.isDocumentKey(n))throw new Ne(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hN(n){if(Fe.isDocumentKey(n))throw new Ne(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function an(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gD(n);throw new Ne(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fN(n,e){if(e<=0)throw new Ne(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class pN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,uN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pN({}),this._settingsFrozen=!1,e instanceof ld?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ne(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ld(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new l;switch(t.type){case"gapi":const r=t.client;return Mt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new v(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=cN.get(e);t&&(je("ComponentProvider","Removing Datastore"),cN.delete(e),t.terminate())}(this),Promise.resolve()}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ic(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class Ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ji(this.firestore,e,this._query)}}class Ic extends Ji{constructor(e,t,r){super(e,t,X_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new Fe(e))}withConverter(e){return new Ic(this.firestore,e,this._path)}}function gN(n,e,...t){if(n=(0,N.m9)(n),Tx("collection","path",e),n instanceof $0){const r=Ye.fromString(e,...t);return hN(r),new Ic(n,null,r)}{if(!(n instanceof Zn||n instanceof Ic))throw new Ne(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ye.fromString(e,...t));return hN(r),new Ic(n.firestore,null,r)}}function mD(n,e,...t){if(n=(0,N.m9)(n),1===arguments.length&&(e=U.I()),Tx("doc","path",e),n instanceof $0){const r=Ye.fromString(e,...t);return dN(r),new Zn(n,null,new Fe(r))}{if(!(n instanceof Zn||n instanceof Ic))throw new Ne(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ye.fromString(e,...t));return dN(r),new Zn(n.firestore,n instanceof Ic?n.converter:null,new Fe(r))}}function mN(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),(n instanceof Zn||n instanceof Ic)&&(e instanceof Zn||e instanceof Ic)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _N(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),n instanceof Ji&&e instanceof Ji&&n.firestore===e.firestore&&w0(n._query,e._query)&&n.converter===e.converter}class kB{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new ER(this,"async_queue_retry"),this.Kc=()=>{const t=uD();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=uD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=uD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new s;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,ue.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!zh(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Mr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=VR.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&ft()}verifyOperationInProgress(){}zc(){var e=this;return(0,ue.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Sx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class PB{constructor(){this._progressObserver={},this._taskCompletionResolver=new s,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class er extends $0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new kB,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||yN(this),this._firestoreClient.terminate()}}function Wr(n){return n._firestoreClient||yN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new GF(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new EB(n._authCredentials,n._appCheckCredentials,n._queue,r)}function vN(n,e,t){const r=new s;return n.asyncQueue.enqueue((0,ue.Z)(function*(){try{yield rN(n,t),yield iN(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(c=a).name?c.code===ge.FAILED_PRECONDITION||c.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function wN(n){if(n._initialized||n._terminated)throw new Ne(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class hd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bc(li.fromBase64String(e))}catch(t){throw new Ne(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bc(li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tg{constructor(e){this._methodName=e}}class _D{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return j(this._lat,e._lat)||j(this._long,e._long)}}const HB=/^__.*__$/;class zB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ud(e,this.data,this.fieldMask,t,this.fieldTransforms):new ny(e,this.data,t,this.fieldTransforms)}}class EN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ud(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function IN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class yD{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new yD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return ED(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(IN(this.Zc)&&HB.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class GB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||V0(e)}aa(e,t,r,i=!1){return new yD({Zc:e,methodName:t,ca:r,path:ht.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Sg(n){const e=n._freezeSettings(),t=V0(n._databaseId);return new GB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vD(n,e,t,r,i,a={}){const c=n.aa(a.merge||a.mergeFields?2:0,e,t,i);Mx("Data must be an object, but it was:",c,r);const d=DN(r,c);let _,w;if(a.merge)_=new Oo(c.fieldMask),w=c.fieldTransforms;else if(a.mergeFields){const b=[];for(const S of a.mergeFields){const O=kx(e,S,t);if(!c.contains(O))throw new Ne(ge.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);SN(b,O)||b.push(O)}_=new Oo(b),w=c.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=c.fieldTransforms;return new zB(new Ui(d),_,w)}class H0 extends Tg{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof H0}}function bN(n,e,t){return new yD({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class Ax extends Tg{_toFieldTransform(e){return new E0(e.path,new ey)}isEqual(e){return e instanceof Ax}}class WB extends Tg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=bN(this,e,!0),r=this.ha.map(a=>Ag(a,t)),i=new mg(r);return new E0(e.path,i)}isEqual(e){return this===e}}class qB extends Tg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=bN(this,e,!0),r=this.ha.map(a=>Ag(a,t)),i=new _g(r);return new E0(e.path,i)}isEqual(e){return this===e}}class KB extends Tg{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new ty(e.wt,pP(e.wt,this.la));return new E0(e.path,t)}isEqual(e){return this===e}}function Rx(n,e,t,r){const i=n.aa(1,e,t);Mx("Data must be an object, but it was:",i,r);const a=[],c=Ui.empty();dg(r,(_,w)=>{const b=wD(e,_,t);w=(0,N.m9)(w);const S=i.ia(b);if(w instanceof H0)a.push(b);else{const O=Ag(w,S);null!=O&&(a.push(b),c.set(b,O))}});const d=new Oo(a);return new EN(c,d,i.fieldTransforms)}function xx(n,e,t,r,i,a){const c=n.aa(1,e,t),d=[kx(e,r,t)],_=[i];if(a.length%2!=0)throw new Ne(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<a.length;O+=2)d.push(kx(e,a[O])),_.push(a[O+1]);const w=[],b=Ui.empty();for(let O=d.length-1;O>=0;--O)if(!SN(w,d[O])){const B=d[O];let q=_[O];q=(0,N.m9)(q);const fe=c.ia(B);if(q instanceof H0)w.push(B);else{const me=Ag(q,fe);null!=me&&(w.push(B),b.set(B,me))}}const S=new Oo(w);return new EN(b,S,c.fieldTransforms)}function CN(n,e,t,r=!1){return Ag(t,n.aa(r?4:3,e))}function Ag(n,e){if(TN(n=(0,N.m9)(n)))return Mx("Unsupported field value:",e,n),DN(n,e);if(n instanceof Tg)return function(t,r){if(!IN(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let d=Ag(c,r.ra(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,N.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return pP(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Se.fromDate(t);return{timestampValue:S0(r.wt,i)}}if(t instanceof Se){const i=new Se(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:S0(r.wt,i)}}if(t instanceof _D)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bc)return{bytesValue:NP(r.wt,t._byteString)};if(t instanceof Zn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:XA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${gD(t)}`)}(n,e)}function DN(n,e){const t={};return zk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dg(n,(r,i)=>{const a=Ag(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function TN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Se||n instanceof _D||n instanceof bc||n instanceof Zn||n instanceof Tg)}function Mx(n,e,t){if(!TN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gD(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function kx(n,e,t){if((e=(0,N.m9)(e))instanceof hd)return e._internalPath;if("string"==typeof e)return wD(n,e);throw ED("Field path arguments must be of type string or ",n,!1,void 0,t)}const ZB=new RegExp("[~\\*/\\[\\]]");function wD(n,e,t){if(e.search(ZB)>=0)throw ED(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hd(...e.split("."))._internalPath}catch{throw ED(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ED(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Ne(ge.INVALID_ARGUMENT,d+n+_)}function SN(n,e){return n.some(t=>t.isEqual(e))}class z0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new YB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class YB extends z0{data(){return super.data()}}function ID(n,e){return"string"==typeof e?wD(n,e):e instanceof hd?e._internalPath:e._delegate._internalPath}class Rg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fd extends z0{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new G0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class G0 extends fd{data(e={}){return super.data(e)}}class tf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Rg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new G0(this._firestore,this._userDataWriter,r.key,r,new Rg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new G0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Rg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const d=new G0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Rg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),w=a.indexOf(c.doc.key)),{type:QB(c.type),doc:d,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function AN(n,e){return n instanceof fd&&e instanceof fd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof tf&&e instanceof tf&&n._firestore===e._firestore&&_N(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function RN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class W0{}function nf(n,...e){for(const t of e)n=t._apply(n);return n}class XB extends W0{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Sg(e.firestore),r=function(i,a,c,d,_,w,b){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ne(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){NN(b,w);const B=[];for(const q of b)B.push(ON(d,i,q));S={arrayValue:{values:B}}}else S=ON(d,i,b)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||NN(b,w),S=CN(c,"where",b,"in"===w||"not-in"===w);const O=Vi.create(_,w,S);return function(B,q){if(q.ht()){const me=qA(B);if(null!==me&&!me.isEqual(q.field))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${me.toString()}' and '${q.field.toString()}'`);const mt=WA(B);null!==mt&&LN(0,q.field,mt)}const fe=function(me,mt){for(const dt of me.filters)if(mt.indexOf(dt.op)>=0)return dt.op;return null}(B,function(me){switch(me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(q.op));if(null!==fe)throw new Ne(ge.INVALID_ARGUMENT,fe===q.op?`Invalid query. You cannot use more than one '${q.op.toString()}' filter.`:`Invalid query. You cannot use '${q.op.toString()}' filters with '${fe.toString()}' filters.`)}(i,O),O}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Ji(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new cd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class e2 extends W0{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Q_(i,a);return function(d,_){if(null===WA(d)){const w=qA(d);null!==w&&LN(0,w,_.field)}}(r,c),c}(e._query,this.fa,this.wa);return new Ji(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new cd(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class xN extends W0{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Ji(e.firestore,e.converter,lP(e._query,this.ma,this.ga))}}class MN extends W0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=PN(e,this.type,this.ya,this.pa);return new Ji(e.firestore,e.converter,(i=t,new cd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class kN extends W0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=PN(e,this.type,this.ya,this.pa);return new Ji(e.firestore,e.converter,(i=t,new cd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function PN(n,e,t,r){if(t[0]=(0,N.m9)(t[0]),t[0]instanceof z0)return function(i,a,c,d,_){if(!d)throw new Ne(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const b of J_(i))if(b.field.isKeyField())w.push(pg(a,d.key));else{const S=d.data.field(b.field);if(HA(S))throw new Ne(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const O=b.field.canonicalString();throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}w.push(S)}return new Kh(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Sg(n.firestore);return function(a,c,d,_,w,b){const S=a.explicitOrderBy;if(w.length>S.length)throw new Ne(ge.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let B=0;B<w.length;B++){const q=w[B];if(S[B].field.isKeyField()){if("string"!=typeof q)throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof q}`);if(!KA(a)&&-1!==q.indexOf("/"))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${q}' contains a slash.`);const fe=a.path.child(Ye.fromString(q));if(!Fe.isDocumentKey(fe))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${fe}' is not because it contains an odd number of segments.`);const me=new Fe(fe);O.push(pg(c,me))}else{const fe=CN(d,_,q);O.push(fe)}}return new Kh(O,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ON(n,e,t){if("string"==typeof(t=(0,N.m9)(t))){if(""===t)throw new Ne(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KA(e)&&-1!==t.indexOf("/"))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ye.fromString(t));if(!Fe.isDocumentKey(r))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pg(n,new Fe(r))}if(t instanceof Zn)return pg(n,t._key);throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gD(t)}.`)}function NN(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function LN(n,e,t){if(!t.isEqual(e))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const c2={maxAttempts:5};class Px{convertValue(e,t="none"){switch(fg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const r={};return dg(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new _D(_r(e.latitude),_r(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Wk(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(f0(e));default:return null}}convertTimestamp(e){const t=Gh(e);return new Se(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ye.fromString(e);Mt(GP(r));const i=new ld(r.get(1),r.get(3)),a=new Fe(r.popFirst(5));return i.isEqual(t)||Mr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function bD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class u2 extends Px{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class FN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Sg(e)}set(e,t,r){this._verifyNotCommitted();const i=rf(e,this._firestore),a=bD(i.converter,t,r),c=vD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,lr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=rf(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof hd?xx(this._dataReader,"WriteBatch.update",a._key,t,r,i):Rx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rf(e,this._firestore);return this._mutations=this._mutations.concat(new ry(t._key,lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rf(n,e){if((n=(0,N.m9)(n)).firestore!==e)throw new Ne(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class xg extends Px{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function UN(n,e,t){n=an(n,Zn);const r=an(n.firestore,er),i=bD(n.converter,e,t);return yy(r,[vD(Sg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,lr.none())])}function VN(n,e,t,...r){n=an(n,Zn);const i=an(n.firestore,er),a=Sg(i);let c;return c="string"==typeof(e=(0,N.m9)(e))||e instanceof hd?xx(a,"updateDoc",n._key,e,t,r):Rx(a,"updateDoc",n._key,e),yy(i,[c.toMutation(n._key,lr.exists(!0))])}function BN(n,...e){var t,r,i;n=(0,N.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Sx(e[c])||(a=e[c],c++);const d={includeMetadataChanges:a.includeMetadataChanges};if(Sx(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,b;if(n instanceof Zn)w=an(n.firestore,er),b=X_(n._key.path),_={next:S=>{e[c]&&e[c](Ox(w,n,S))},error:e[c+1],complete:e[c+2]};else{const S=an(n,Ji);w=an(S.firestore,er),b=S._query;const O=new xg(w);_={next:B=>{e[c]&&e[c](new tf(w,O,S,B))},error:e[c+1],complete:e[c+2]},RN(n._query)}return function(S,O,B,q){const fe=new fD(q),me=new GR(O,fe,B);return S.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return BR(yield _y(S),me)})),()=>{fe.Tc(),S.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return $R(yield _y(S),me)}))}}(Wr(w),b,d,_)}function yy(n,e){return function(t,r){const i=new s;return t.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function tB(n,e,t){return YR.apply(this,arguments)}(yield Cx(t),r,i)})),i.promise}(Wr(n),e)}function Ox(n,e,t){const r=t.docs.get(e._key),i=new xg(n);return new fd(n,i,e._key,r,new Rg(t.hasPendingWrites,t.fromCache),e.converter)}class w2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Sg(e)}get(e){const t=rf(e,this._firestore),r=new u2(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const a=i[0];if(a.isFoundDocument())return new z0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new z0(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=rf(e,this._firestore),a=bD(i.converter,t,r),c=vD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=rf(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof hd?xx(this._dataReader,"Transaction.update",a._key,t,r,i):Rx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=rf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rf(e,this._firestore),r=new xg(this._firestore);return super.get(e).then(i=>new fd(this._firestore,r,t._key,i._document,new Rg(!1,!1),t.converter))}}!function(n,e=!0){$h=ln.SDK_VERSION,(0,ln._registerComponent)(new ct.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new er(i,new h(t.getProvider("auth-internal")),new C(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,ln.registerVersion)(VA,"3.4.13",n),(0,ln.registerVersion)(VA,"3.4.13","esm2017")}();function Nx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $N(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function HN(){if(!function HF(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}class q0{constructor(e){this._delegate=e}static fromBase64String(e){return HN(),new q0(bc.fromBase64String(e))}static fromUint8Array(e){return $N(),new q0(bc.fromUint8Array(e))}toBase64(){return HN(),this._delegate.toBase64()}toUint8Array(){return $N(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Lx(n){return function R2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class x2{enableIndexedDbPersistence(e,t){return function NB(n,e){wN(n=an(n,er));const t=Wr(n),r=n._freezeSettings(),i=new _x;return vN(t,i,new tN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function LB(n){wN(n=an(n,er));const e=Wr(n),t=n._freezeSettings(),r=new _x;return vN(e,r,new _B(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function FB(n){if(n._initialized&&!n._terminated)throw new Ne(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new s;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{yield(t=(0,ue.Z)(function*(r){if(!pl.V())return Promise.resolve();const i=r+"main";yield pl.delete(i)}),function(r){return t.apply(this,arguments)})(dR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class zN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ld||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&K_("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function xB(n,e,t,r={}){var i;const a=(n=an(n,$0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&K_("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,d;if("string"==typeof r.mockUserToken)c=r.mockUserToken,d=ai.MOCK_USER;else{c=(0,N.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ne(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ai(_)}n._authCredentials=new u(new o(c,d))}}(this._delegate,e,t,r)}enableNetwork(){return function VB(n){return function IB(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield sN(n),t=yield oN(n);return e.setNetworkEnabled(!0),function(r){const i=nt(r);return i.lu.delete(0),B0(i)}(t)}))}(Wr(n=an(n,er)))}(this._delegate)}disableNetwork(){return function BB(n){return function bB(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield sN(n),t=yield oN(n);return e.setNetworkEnabled(!1),(r=(0,ue.Z)(function*(i){const a=nt(i);a.lu.add(0),yield uy(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Wr(n=an(n,er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,uN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function UB(n){return function(e){const t=new s;return e.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function sB(n,e){return tx.apply(this,arguments)}(yield Cx(e),t)})),t.promise}(Wr(n=an(n,er)))}(this._delegate)}onSnapshotsInSync(e){return function v2(n,e){return function TB(n,e){const t=new fD(e);return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return r=yield _y(n),i=t,nt(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return r=yield _y(n),i=t,void nt(r).Tu.delete(i);var r,i}))}}(Wr(n=an(n,er)),Sx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vy(this,gN(this._delegate,e))}catch(t){throw Ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new Da(this,mD(this._delegate,e))}catch(t){throw Ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function MB(n,e){if(n=an(n,$0),Tx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ji(n,null,(t=e,new cd(Ye.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function E2(n,e,t){n=an(n,er);const r=Object.assign(Object.assign({},c2),t);return function(i){if(i.maxAttempts<1)throw new Ne(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function SB(n,e,t){const r=new s;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){const i=yield(a=n,pD(a).then(c=>c.datastore));var a;new wB(n.asyncQueue,i,t,e,r).run()})),r.promise}(Wr(n),i=>e(new w2(n,i)),r)}(this._delegate,t=>e(new GN(this,t)))}batch(){return Wr(this._delegate),new WN(new FN(this._delegate,e=>yy(this._delegate,e)))}loadBundle(e){return function jB(n,e){const t=Wr(n=an(n,er)),r=new PB;return function AB(n,e,t,r){const i=function(a,c){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return nN(_,w);if(_ instanceof ArrayBuffer)return nN(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new yB(_,c);var _}(t,V0(e));n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){!function mB(n,e,t){const r=nt(n);var i;(i=(0,ue.Z)(function*(a,c,d){try{const _=yield c.getMetadata();if(yield function(O,B){const q=nt(O),fe=_i(B.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",me=>q.Ds.getBundleMetadata(me,B.id)).then(me=>!!me&&me.createTime.compareTo(fe)>=0)}(a.localStore,_))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(O=_).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);d._updateProgress(GO(_));const w=new ZV(_,a.localStore,c.wt);let b=yield c.fc();for(;b;){const O=yield w.Nu(b);O&&d._updateProgress(O),b=yield c.fc()}const S=yield w.complete();return yield dd(a,S.Mu,void 0),yield function(O,B){const q=nt(O);return q.persistence.runTransaction("Save bundle","readwrite",fe=>q.Ds.saveBundleMetadata(fe,B))}(a.localStore,_),d._completeWith(S.progress),Promise.resolve(S.Ou)}catch(_){return K_("SyncEngine",`Loading bundle failed with ${_}`),d._failWith(_),Promise.resolve(new Set)}var O}),function(a,c,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Cx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function $B(n,e){return function RB(n,e){return n.asyncQueue.enqueue((0,ue.Z)(function*(){return function(t,r){const i=nt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield bx(n),e)}))}(Wr(n=an(n,er)),e).then(t=>t?new Ji(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class CD extends Px{constructor(e){super(),this.firestore=e}convertBytes(e){return new q0(new bc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Da.forKey(t,this.firestore,null)}}class GN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}get(e){const t=kg(e);return this._delegate.get(t).then(r=>new K0(this._firestore,new fd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=kg(e);return r?(Nx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=kg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=kg(e);return this._delegate.delete(t),this}}class WN{constructor(e){this._delegate=e}set(e,t,r){const i=kg(e);return r?(Nx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=kg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=kg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new G0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Z0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Mg(e,new CD(e),t),i.set(t,a)),a}}Mg.INSTANCES=new WeakMap;class Da{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Da(t,new Zn(t._delegate,r,new Fe(e)))}static forKey(e,t,r){return new Da(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vy(this.firestore,gN(this._delegate,e))}catch(t){throw Ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.m9)(e))instanceof Zn&&mN(this._delegate,e)}set(e,t){t=Nx("DocumentReference.set",t);try{return t?UN(this._delegate,e,t):UN(this._delegate,e)}catch(r){throw Ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?VN(this._delegate,e):VN(this._delegate,e,t,...r)}catch(i){throw Ts(i,"updateDoc()","DocumentReference.update()")}}delete(){return function _2(n){return yy(an(n.firestore,er),[new ry(n._key,lr.none())])}(this._delegate)}onSnapshot(...e){const t=qN(e),r=KN(e,i=>new K0(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return BN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function h2(n){n=an(n,Zn);const e=an(n.firestore,er),t=Wr(e),r=new xg(e);return function CB(n,e){const t=new s;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(r=(0,ue.Z)(function*(i,a,c){try{const d=yield function(_,w){const b=nt(_);return b.persistence.runTransaction("read document","readonly",S=>b.localDocuments.getDocument(S,w))}(i,a);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Ne(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const _=fy(d,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield bx(n),e,t);var r})),t.promise}(t,n._key).then(i=>new fd(e,r,n._key,i,new Rg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function f2(n){n=an(n,Zn);const e=an(n.firestore,er);return aN(Wr(e),n._key,{source:"server"}).then(t=>Ox(e,n,t))}(this._delegate):function d2(n){n=an(n,Zn);const e=an(n.firestore,er);return aN(Wr(e),n._key).then(t=>Ox(e,n,t))}(this._delegate),t.then(r=>new K0(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Da(this.firestore,this._delegate.withConverter(e?Mg.getInstance(this.firestore,e):null))}}function Ts(n,e,t){return n.message=n.message.replace(e,t),n}function qN(n){for(const e of n)if("object"==typeof e&&!Lx(e))return e;return{}}function KN(n,e){var t,r;let i;return i=Lx(n[0])?n[0]:Lx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class K0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Da(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return AN(this._delegate,e._delegate)}}class Z0 extends K0{data(e){const t=this._delegate.data(e);return function Fk(n,e){n||ft()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}where(e,t,r){try{return new Ss(this.firestore,nf(this._delegate,function JB(n,e,t){const r=e,i=ID("where",n);return new XB(i,r,t)}(e,t,r)))}catch(i){throw Ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,nf(this._delegate,function t2(n,e="asc"){const t=e,r=ID("orderBy",n);return new e2(r,t)}(e,t)))}catch(r){throw Ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,nf(this._delegate,function n2(n){return fN("limit",n),new xN("limit",n,"F")}(e)))}catch(t){throw Ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,nf(this._delegate,function r2(n){return fN("limitToLast",n),new xN("limitToLast",n,"L")}(e)))}catch(t){throw Ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,nf(this._delegate,function s2(...n){return new MN("startAt",n,!0)}(...e)))}catch(t){throw Ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,nf(this._delegate,function o2(...n){return new MN("startAfter",n,!1)}(...e)))}catch(t){throw Ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,nf(this._delegate,function a2(...n){return new kN("endBefore",n,!1)}(...e)))}catch(t){throw Ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,nf(this._delegate,function l2(...n){return new kN("endAt",n,!0)}(...e)))}catch(t){throw Ts(t,"endAt()","Query.endAt()")}}isEqual(e){return _N(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function g2(n){n=an(n,Ji);const e=an(n.firestore,er),t=Wr(e),r=new xg(e);return function DB(n,e){const t=new s;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(r=(0,ue.Z)(function*(i,a,c){try{const d=yield aD(i,a,!0),_=new KO(a,d.ji),w=_.Ku(d.documents),b=_.applyChanges(w,!1);c.resolve(b.snapshot)}catch(d){const _=fy(d,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield bx(n),e,t);var r})),t.promise}(t,n._query).then(i=>new tf(e,r,n,i))}(this._delegate):"server"===e?.source?function m2(n){n=an(n,Ji);const e=an(n.firestore,er),t=Wr(e),r=new xg(e);return lN(t,n._query,{source:"server"}).then(i=>new tf(e,r,n,i))}(this._delegate):function p2(n){n=an(n,Ji);const e=an(n.firestore,er),t=Wr(e),r=new xg(e);return RN(n._query),lN(t,n._query).then(i=>new tf(e,r,n,i))}(this._delegate),t.then(r=>new Fx(this.firestore,new tf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=qN(e),r=KN(e,i=>new Fx(this.firestore,new tf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return BN(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?Mg.getInstance(this.firestore,e):null))}}class k2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Z0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Fx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Z0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new k2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Z0(this._firestore,r))})}isEqual(e){return AN(this._delegate,e._delegate)}}class vy extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Da(this.firestore,e):null}doc(e){try{return new Da(this.firestore,void 0===e?mD(this._delegate):mD(this._delegate,e))}catch(t){throw Ts(t,"doc()","CollectionReference.doc()")}}add(e){return function y2(n,e){const t=an(n.firestore,er),r=mD(n),i=bD(n.converter,e);return yy(t,[vD(Sg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,lr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Da(this.firestore,t))}isEqual(e){return mN(this._delegate,e._delegate)}withConverter(e){return new vy(this.firestore,this._delegate.withConverter(e?Mg.getInstance(this.firestore,e):null))}}function kg(n){return an(n,Zn)}class Ux{constructor(...e){this._delegate=new hd(...e)}static documentId(){return new Ux(ht.keyField().canonicalString())}isEqual(e){return(e=(0,N.m9)(e))instanceof hd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Pg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function b2(){return new Ax("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Pg(e)}static delete(){const e=function I2(){return new H0("deleteField")}();return e._methodName="FieldValue.delete",new Pg(e)}static arrayUnion(...e){const t=function C2(...n){return new WB("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Pg(t)}static arrayRemove(...e){const t=function D2(...n){return new qB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Pg(t)}static increment(e){const t=function T2(n){return new KB("increment",n)}(e);return t._methodName="FieldValue.increment",new Pg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const P2={Firestore:zN,GeoPoint:_D,Timestamp:Se,Blob:q0,Transaction:GN,WriteBatch:WN,DocumentReference:Da,DocumentSnapshot:K0,Query:Ss,QueryDocumentSnapshot:Z0,QuerySnapshot:Fx,CollectionReference:vy,FieldPath:Ux,FieldValue:Pg,setLogLevel:function M2(n){!function Lk(n){_c.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function ZN(n,e){return function L2(n,e=Yi.z){return new fr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Vx(n,e){return ZN(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function DD(n,e){return Vx(n,e).pipe(Yu(void 0),fw(),(0,wt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,d)=>{const _=i.find(b=>b.doc.ref.isEqual(c.ref)),w=t?.payload.docs.find(b=>b.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),a}))}function YN(n,e,t){return DD(n,t).pipe(T((r,i)=>function U2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function V2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Bx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Bx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Bx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),V(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Bx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function QN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function N2(n){(function O2(n,e){n.INTERNAL.registerComponent(new ct.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},P2)))})(n,(e,t)=>new zN(e,t,new x2)),n.registerVersion("@firebase/firestore-compat","0.1.22")}(At.Z);class XN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=DD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Yu(void 0),fw(),Ys(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),Ze.iC)}auditTrail(e){return this.stateChanges(e).pipe(T((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=QN(e);return YN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ze.iC)}valueChanges(e={}){return Vx(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ze.iC)}get(e){return(0,Gt.D)(this.query.get(e)).pipe(Ze.iC)}add(e){return this.ref.add(e)}doc(e){return new JN(this.ref.doc(e),this.afs)}}class JN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=n1(r,t);return new XN(i,a,this.afs)}snapshotChanges(){return function F2(n,e){return ZN(n,e).pipe(Yu(void 0),fw(),(0,wt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ze.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Gt.D)(this.ref.get(e)).pipe(Ze.iC)}}class B2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?DD(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ys(t=>t.length>0),Ze.iC):DD(this.query,this.afs.schedulers.outsideAngular).pipe(Ze.iC)}auditTrail(e){return this.stateChanges(e).pipe(T((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=QN(e);return YN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ze.iC)}valueChanges(e={}){return Vx(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Ze.iC)}get(e){return(0,Gt.D)(this.query.get(e)).pipe(Ze.iC)}}const e1=new p.OlP("angularfire2.enableFirestorePersistence"),t1=new p.OlP("angularfire2.firestore.persistenceSettings"),j2=new p.OlP("angularfire2.firestore.settings"),$2=new p.OlP("angularfire2.firestore.use-emulator");function n1(n,e=(t=>t)){return{query:e(n),ref:n}}let H2=(()=>{class n{constructor(t,r,i,a,c,d,_,w,b,S,O,B,q,fe,me,mt,dt){this.schedulers=_;const st=(0,on.on)(t,d,r),ot=b;S&&ow(st,d,O,q,fe,me,B,mt),[this.firestore,this.persistenceEnabled$]=(0,on.cc)(`${st.name}.firestore`,"AngularFirestore",st.name,()=>{const kt=d.runOutsideAngular(()=>st.firestore());if(a&&kt.settings(a),ot&&kt.useEmulator(...ot),i&&!yl(c)){const tn=()=>{try{return(0,Gt.D)(kt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(qr){return typeof console<"u"&&console.warn(qr),at(!1)}};return[kt,d.runOutsideAngular(tn)]}return[kt,at(!1)]},[a,ot,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=n1(i,r),d=this.schedulers.ngZone.run(()=>a);return new XN(d,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new B2(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new JN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(on.Dh),p.LFG(on.xv,8),p.LFG(e1,8),p.LFG(j2,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ze.HU),p.LFG(t1,8),p.LFG($2,8),p.LFG(Vp,8),p.LFG(u_,8),p.LFG(nw,8),p.LFG(rw,8),p.LFG(d_,8),p.LFG(iw,8),p.LFG(sw,8),p.LFG(Up,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),z2=(()=>{class n{constructor(){tw.Z.registerVersion("angularfire",Ze.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:e1,useValue:!0},{provide:t1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[H2]}),n})();const r1="firebasestorage.googleapis.com",s1="storageBucket";class yr extends N.ZR{constructor(e,t){super(jx(e),`Firebase Storage: ${t} (${jx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yr.prototype)}_codeEquals(e){return jx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function jx(n){return"storage/"+n}function $x(){return new yr("unknown","An unknown error occurred, please check the error payload for server response.")}function o1(){return new yr("canceled","User canceled the upload/download.")}function a1(){return new yr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function wy(n){return new yr("invalid-argument",n)}function l1(){return new yr("app-deleted","The Firebase app was deleted.")}function c1(n){return new yr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Y0(n,e){return new yr("invalid-format","String does not match format '"+n+"': "+e)}function Q0(n){throw new yr("internal-error","Internal error: "+n)}class es{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=es.makeFromUrl(e,t)}catch{return new es(e,"")}if(""===r.path)return r;throw function tj(n){return new yr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(ot){ot.path_=decodeURIComponent(ot.path)}const S=t.replace(/[.]/g,"\\."),st=[{regex:d,indices:{bucket:1,path:3},postModify:function a(ot){"/"===ot.path.charAt(ot.path.length-1)&&(ot.path_=ot.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===r1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let ot=0;ot<st.length;ot++){const kt=st[ot],tn=kt.regex.exec(e);if(tn){let ml=tn[kt.indices.path];ml||(ml=""),r=new es(tn[kt.indices.bucket],ml),kt.postModify(r);break}}if(null==r)throw function ej(n){return new yr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class sj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function TD(n){return"string"==typeof n||n instanceof String}function u1(n){return Hx()&&n instanceof Blob}function Hx(){return typeof Blob<"u"}function zx(n,e,t,r){if(r<e)throw wy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw wy(`Invalid value for '${n}'. Expected ${t} or less.`)}function pd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function d1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var sf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(sf||(sf={})),sf))();class dj{constructor(e,t,r,i,a,c,d,_,w,b,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=b,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,B)=>{this.resolve_=O,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(d,d.getResponse());!function lj(n){return void 0!==n}(_)?a():a(_)}catch(_){c(_)}else if(null!==d){const _=$x();_.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,_):_)}else c(i.canceled?this.appDelete_?l1():o1():function J2(){return new yr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new SD(!1,null,!0)):this.backoffId_=function oj(n,e,t){let r=1,i=null,a=null,c=!1,d=0;function _(){return 2===d}let w=!1;function b(...me){w||(w=!0,e.apply(null,me))}function S(me){i=setTimeout(()=>{i=null,n(B,_())},me)}function O(){a&&clearTimeout(a)}function B(me,...mt){if(w)return void O();if(me)return O(),void b.call(null,me,...mt);if(_()||c)return O(),void b.call(null,me,...mt);let st;r<64&&(r*=2),1===d?(d=2,st=0):st=1e3*(r+Math.random()),S(st)}let q=!1;function fe(me){q||(q=!0,O(),!w&&(null!==i?(me||(d=2),clearTimeout(i),S(0)):me||(d=1)))}return S(0),a=setTimeout(()=>{c=!0,fe(!0)},t),fe}((r,i)=>{if(i)return void r(!1,new SD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const d=a.getErrorCode()===sf.NO_ERROR,_=a.getStatus();if(!d||this.isRetryStatusCode_(_)){const b=a.getErrorCode()===sf.ABORT;return void r(!1,new SD(!1,null,b))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new SD(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function aj(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class SD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function yj(...n){const e=function _j(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Hx())return new Blob(n);throw new yr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const No={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gx{constructor(e,t){this.data=e,this.contentType=t||null}}function Wx(n,e){switch(n){case No.RAW:return new Gx(h1(e));case No.BASE64:case No.BASE64URL:return new Gx(f1(n,e));case No.DATA_URL:return new Gx(function Ij(n){const e=new p1(n);return e.base64?f1(No.BASE64,e.rest):function Ej(n){let e;try{e=decodeURIComponent(n)}catch{throw Y0(No.DATA_URL,"Malformed data URL.")}return h1(e)}(e.rest)}(e),function bj(n){return new p1(n).contentType}(e))}throw $x()}function h1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function f1(n,e){switch(n){case No.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Y0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case No.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Y0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function wj(n){return atob(n)}(e)}catch{throw Y0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class p1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Y0(No.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Cj(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Cc{constructor(e,t){let r=0,i="";u1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(u1(this.data_)){const i=function vj(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Cc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Cc(r,!0)}}static getBlob(...e){if(Hx()){const t=e.map(r=>r instanceof Cc?r.data_:r);return new Cc(yj.apply(null,t))}{const t=e.map(c=>TD(c)?Wx(No.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)i[a++]=c[d]}),new Cc(i,!0)}}uploadData(){return this.data_}}function qx(n){let e;try{e=JSON.parse(n)}catch{return null}return function uj(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function g1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Sj(n,e){return e}class As{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Sj}}let AD=null;function X0(){if(AD)return AD;const n=[];n.push(new As("bucket")),n.push(new As("generation")),n.push(new As("metageneration")),n.push(new As("name","fullPath",!0));const t=new As("name");t.xform=function e(a,c){return function Aj(n){return!TD(n)||n.length<2?n:g1(n)}(c)},n.push(t);const i=new As("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new As("timeCreated")),n.push(new As("updated")),n.push(new As("md5Hash",null,!0)),n.push(new As("cacheControl",null,!0)),n.push(new As("contentDisposition",null,!0)),n.push(new As("contentEncoding",null,!0)),n.push(new As("contentLanguage",null,!0)),n.push(new As("contentType",null,!0)),n.push(new As("metadata","customMetadata",!0)),AD=n,AD}function m1(n,e,t){const r=qx(e);return null===r?null:function xj(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function Rj(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new es(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Kx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const _1="prefixes",y1="items";class Dc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Tc(n){if(!n)throw $x()}function RD(n,e){return function t(r,i){const a=m1(n,i,e);return Tc(null!==a),a}}function Ey(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Q2(){return new yr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Y2(){return new yr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Z2(n){return new yr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function X2(n){return new yr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function J0(n){const e=Ey(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function K2(n){return new yr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function v1(n,e,t){const i=pd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Dc(i,"GET",RD(n,t),c);return d.errorHandler=J0(e),d}function Lj(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=pd(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,b=new Dc(d,"GET",function Oj(n,e){return function t(r,i){const a=function Pj(n,e,t){const r=qx(t);return null===r?null:function kj(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[_1])for(const i of t[_1]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new es(e,a));r.prefixes.push(c)}if(t[y1])for(const i of t[y1]){const a=n._makeStorageReference(new es(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Tc(null!==a),a}}(n,e.bucket),w);return b.urlParams=a,b.errorHandler=Ey(e),b}function E1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Bj(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class xD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Zx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Tc(!1)}return Tc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const zj={STATE_CHANGED:"state_changed"},Rs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Yx(n){switch(n){case"running":case"pausing":case"canceling":return Rs.RUNNING;case"paused":return Rs.PAUSED;case"success":return Rs.SUCCESS;case"canceled":return Rs.CANCELED;default:return Rs.ERROR}}class Gj{constructor(e,t,r){if(function cj(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Iy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let C1=null;class Wj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=sf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=sf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Q0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Q0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Q0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Q0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Q0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class qj extends Wj{initXhr(){this.xhr_.responseType="text"}}function gl(){return C1?C1():new qj}class D1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=X0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function jj(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=E1(e,r,i),d={name:c.fullPath},_=pd(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=Kx(c,t),q=new Dc(_,"POST",function B(fe){let me;Zx(fe);try{me=fe.getResponseHeader("X-Goog-Upload-URL")}catch{Tc(!1)}return Tc(TD(me)),me},n.maxUploadRetryTime);return q.urlParams=d,q.headers=b,q.body=S,q.errorHandler=Ey(e),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,gl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function $j(n,e,t,r){const _=new Dc(t,"POST",function a(w){const b=Zx(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Tc(!1)}S||Tc(!1);const O=Number(S);return Tc(!isNaN(O)),new xD(O,r.size(),"final"===b)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Ey(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,gl,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new xD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function Hj(n,e,t,r,i,a,c,d){const _=new xD(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function rj(){return new yr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let b=w;i>0&&(b=Math.min(b,i));const S=_.current,q={"X-Goog-Upload-Command":b===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},fe=r.slice(S,S+b);if(null===fe)throw a1();const st=new Dc(t,"POST",function me(ot,kt){const tn=Zx(ot,["active","final"]),qr=_.current+b,ml=r.size();let BM;return BM="final"===tn?RD(e,a)(ot,kt):null,new xD(qr,ml,"final"===tn,BM)},e.maxUploadRetryTime);return st.headers=q,st.body=fe.uploadData(),st.progressCallback=d||null,st.errorHandler=Ey(n),st}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const d=this._ref.storage._makeRequest(c,gl,i,a);this._request=d,d.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=v1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,gl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function I1(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function d(){let st="";for(let ot=0;ot<2;ot++)st+=Math.random().toString().slice(2);return st}();c["Content-Type"]="multipart/related; boundary="+_;const w=E1(e,r,i),b=Kx(w,t),B=Cc.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===B)throw a1();const q={name:w.fullPath},fe=pd(a,n.host,n._protocol),mt=n.maxUploadRetryTime,dt=new Dc(fe,"POST",RD(n,t),mt);return dt.urlParams=q,dt.headers=c,dt.body=B.uploadData(),dt.errorHandler=Ey(e),dt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,gl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=o1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Yx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new Gj(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Yx(this._state)){case Rs.SUCCESS:Iy(this._resolve.bind(null,this.snapshot))();break;case Rs.CANCELED:case Rs.ERROR:Iy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Yx(this._state)){case Rs.RUNNING:case Rs.PAUSED:e.next&&Iy(e.next.bind(e,this.snapshot))();break;case Rs.SUCCESS:e.complete&&Iy(e.complete.bind(e))();break;default:e.error&&Iy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Og{constructor(e,t){this._service=e,this._location=t instanceof es?t:es.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Og(e,t)}get root(){const e=new es(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return g1(this._location.path)}get storage(){return this._service}get parent(){const e=function Dj(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new es(this._location.bucket,e);return new Og(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw c1(e)}}function S1(n,e,t){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,ue.Z)(function*(n,e,t){const i=yield A1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield S1(n,e,i.nextPageToken))}),Qx.apply(this,arguments)}function A1(n,e){null!=e&&"number"==typeof e.maxResults&&zx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Lj(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,gl)}function s$(n){n._throwIfRoot("getDownloadURL");const e=function Fj(n,e,t){const i=pd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Dc(i,"GET",function Nj(n,e){return function t(r,i){const a=m1(n,i,e);return Tc(null!==a),function Mj(n,e,t,r){const i=qx(e);if(null===i||!TD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return pd("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+d1({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return d.errorHandler=J0(e),d}(n.storage,n._location,X0());return n.storage.makeRequestWithTokens(e,gl).then(t=>{if(null===t)throw function ij(){return new yr("no-download-url","The given file does not have any download URLs.")}();return t})}function R1(n,e){const t=function Tj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new es(n._location.bucket,t);return new Og(n.storage,r)}function x1(n,e){if(n instanceof Xx){const t=n;if(null==t._bucket)throw function nj(){return new yr("no-default-bucket","No default bucket found. Did you set the '"+s1+"' property when initializing the app?")}();const r=new Og(t,t._bucket);return null!=e?x1(r,e):r}return void 0!==e?R1(n,e):n}function c$(n,e){if(e&&function a$(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Xx)return function l$(n,e){return new Og(n,e)}(n,e);throw wy("To use ref(service, url), the first argument must be a Storage instance.")}return x1(n,e)}function M1(n,e){const t=e?.[s1];return null==t?null:es.makeFromBucketSpec(t,n)}class Xx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=r1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?es.makeFromBucketSpec(i,this._host):M1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?es.makeFromBucketSpec(this._url,e):M1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ue.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ue.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Og(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new sj(l1());{const a=function mj(n,e,t,r,i,a){const c=d1(n.urlParams),d=n.url+c,_=Object.assign({},n.headers);return function pj(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function hj(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function fj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(_,a),function gj(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new dj(d,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ue.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const k1="@firebase/storage";function N1(n,e){return c$(n=(0,N.m9)(n),e)}function w$(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Xx(t,r,i,e,ln.SDK_VERSION)}!function E$(){(0,ln._registerComponent)(new ct.wA("storage",w$,"PUBLIC").setMultipleInstances(!0)),(0,ln.registerVersion)(k1,"0.9.9",""),(0,ln.registerVersion)(k1,"0.9.9","esm2017")}();class MD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class L1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new MD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new MD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new MD(c,this,this._ref)):{next:t.next?c=>t.next(new MD(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class F1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new gd(e,this._service))}get items(){return this._delegate.items.map(e=>new gd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class gd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function y$(n,e){return R1(n,e)}(this._delegate,e);return new gd(t,this.storage)}get root(){return new gd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new gd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new L1(function d$(n,e,t){return function e$(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new D1(n,new Cc(e),t)}(n=(0,N.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=No.RAW,r){this._throwIfRoot("putString");const i=Wx(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new L1(new D1(this._delegate,new Cc(i.data,!0),a),this)}listAll(){return function g$(n){return function n$(n){const e={prefixes:[],items:[]};return S1(n,e).then(()=>e)}(n=(0,N.m9)(n))}(this._delegate).then(e=>new F1(e,this.storage))}list(e){return function p$(n,e){return A1(n=(0,N.m9)(n),e)}(this._delegate,e||void 0).then(t=>new F1(t,this.storage))}getMetadata(){return function h$(n){return function r$(n){n._throwIfRoot("getMetadata");const e=v1(n.storage,n._location,X0());return n.storage.makeRequestWithTokens(e,gl)}(n=(0,N.m9)(n))}(this._delegate)}updateMetadata(e){return function f$(n,e){return function i$(n,e){n._throwIfRoot("updateMetadata");const t=function Uj(n,e,t,r){const a=pd(e.fullServerUrl(),n.host,n._protocol),d=Kx(t,r),w=n.maxOperationRetryTime,b=new Dc(a,"PATCH",RD(n,r),w);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=d,b.errorHandler=J0(e),b}(n.storage,n._location,e,X0());return n.storage.makeRequestWithTokens(t,gl)}(n=(0,N.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function m$(n){return s$(n=(0,N.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function _$(n){return function o$(n){n._throwIfRoot("deleteObject");const e=function Vj(n,e){const r=pd(e.fullServerUrl(),n.host,n._protocol),d=new Dc(r,"DELETE",function c(_,w){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=J0(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,gl)}(n=(0,N.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw c1(e)}}class U1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(V1(e))throw wy("ref() expected a child path but got a URL, use refFromURL instead.");return new gd(N1(this._delegate,e),this)}refFromURL(e){if(!V1(e))throw wy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{es.makeFromUrl(e,this._delegate.host)}catch{throw wy("refFromUrl() expected a valid full URL but got an invalid one.")}return new gd(N1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function v$(n,e,t,r={}){!function u$(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,N.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function V1(n){return/^[A-Za-z]+:\/\//.test(n)}function D$(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new U1(t,r)}function B1(n){const e=function S$(n){return new fr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function G2(n,e=Yi.z){return(0,bn.e)((t,r)=>{let i=null,a=null,c=null;const d=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=c+n,b=e.now();if(b<w)return i=this.schedule(void 0,w-b),void r.add(i);d()}t.subscribe((0,Cn.x)(r,w=>{a=w,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,wt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function kD(n){return{getDownloadURL:()=>at(void 0).pipe(Ze.fc,_n(()=>n.getDownloadURL()),Ze.iC),getMetadata:()=>at(void 0).pipe(Ze.fc,_n(()=>n.getMetadata()),Ze.iC),delete:()=>(0,Gt.D)(n.delete()),child:e=>kD(n.child(e)),updateMetadata:e=>(0,Gt.D)(n.updateMetadata(e)),put:(e,t)=>B1(n.put(e,t)),putString:(e,t,r)=>B1(n.putString(e,t,r)),list:e=>(0,Gt.D)(n.list(e)),listAll:()=>(0,Gt.D)(n.listAll())}}!function T$(n){const e={TaskState:Rs,TaskEvent:zj,StringFormat:No,Storage:U1,Reference:gd};n.INTERNAL.registerComponent(new ct.wA("storage-compat",D$,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(At.Z);const A$=new p.OlP("angularfire2.storageBucket"),R$=new p.OlP("angularfire2.storage.maxUploadRetryTime"),x$=new p.OlP("angularfire2.storage.maxOperationRetryTime"),M$=new p.OlP("angularfire2.storage.use-emulator");let k$=(()=>{class n{constructor(t,r,i,a,c,d,_,w,b,S){const O=(0,on.on)(t,c,r);this.storage=(0,on.cc)(`${O.name}.storage.${i}`,"AngularFireStorage",O.name,()=>{const B=c.runOutsideAngular(()=>O.storage(i||void 0)),q=b;return q&&B.useEmulator(...q),_&&B.setMaxUploadRetryTime(_),w&&B.setMaxOperationRetryTime(w),B},[_,w])}ref(t){return kD(this.storage.ref(t))}refFromURL(t){return kD(this.storage.refFromURL(t))}upload(t,r,i){return kD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(on.Dh),p.LFG(on.xv,8),p.LFG(A$,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ze.HU),p.LFG(R$,8),p.LFG(x$,8),p.LFG(M$,8),p.LFG(Up,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),P$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),O$=(()=>{class n{constructor(){tw.Z.registerVersion("angularfire",Ze.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[k$],imports:[P$]}),n})();class Lo extends vn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:N$}=Array,{getPrototypeOf:L$,prototype:F$,keys:U$}=Object;const{isArray:j$}=Array;function j1(n){return(0,wt.U)(e=>function $$(n,e){return j$(e)?n(...e):n(e)}(n,e))}var z$=L(9672);function $1(...n){const e=(0,ua.yG)(n),t=(0,ua.jO)(n),{args:r,keys:i}=function V$(n){if(1===n.length){const e=n[0];if(N$(e))return{args:e,keys:null};if(function B$(n){return n&&"object"==typeof n&&L$(n)===F$}(e)){const t=U$(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Gt.D)([],e);const a=new fr.y(function G$(n,e,t=M.y){return r=>{H1(e,()=>{const{length:i}=n,a=new Array(i);let c=i,d=i;for(let _=0;_<i;_++)H1(e,()=>{const w=(0,Gt.D)(n[_],e);let b=!1;w.subscribe((0,Cn.x)(r,S=>{a[_]=S,b||(b=!0,d--),d||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function H$(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):M.y));return t?a.pipe(j1(t)):a}function H1(n,e,t){n?(0,z$.f)(t,n,e):e()}function z1(n){return new fr.y(e=>{(0,Ai.Xf)(n()).subscribe(e)})}var W$=L(9635);function eE(n,e){const t=(0,Mo.m)(n)?n:()=>n,r=i=>i.error(t());return new fr.y(e?i=>e.schedule(r,0,i):r)}var af=L(727);function Jx(){return(0,bn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Cn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class G1 extends fr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,bn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new af.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Cn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=af.w0.EMPTY)}return e}refCount(){return Jx()(this)}}var ts=L(5577);function Ng(n,e){return(0,Mo.m)(e)?(0,ts.z)(n,e,1):(0,ts.z)(n,1)}var Bi=L(8505);function lf(n){return(0,bn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Cn.x)(t,void 0,void 0,c=>{a=(0,Ai.Xf)(n(c,lf(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function eM(n){return n<=0?()=>ol.E:(0,bn.e)((e,t)=>{let r=[];e.subscribe((0,Cn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function W1(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ys((i,a)=>n(i,a,r)):M.y,eM(1),t?Dh(e):Rp(()=>new Hu))}function tM(n){return(0,bn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zt="primary",tE=Symbol("RouteTitle");class Z${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function by(n){return new Z$(n)}function Y$(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],d=n[a];if(c.startsWith(":"))i[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Sc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!q1(n[i],e[i]))return!1;return!0}function q1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function K1(n){return Array.prototype.concat.apply([],n)}function Z1(n){return n.length>0?n[n.length-1]:null}function ji(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function cf(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,Gt.D)(Promise.resolve(n)):at(n)}const PD=!1,X$={exact:function X1(n,e,t){if(!Lg(n.segments,e.segments)||!OD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!X1(n.children[r],e.children[r],t))return!1;return!0},subset:J1},Y1={exact:function J$(n,e){return Sc(n,e)},subset:function eH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>q1(n[t],e[t]))},ignored:()=>!0};function Q1(n,e,t){return X$[t.paths](n.root,e.root,t.matrixParams)&&Y1[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function J1(n,e,t){return eL(n,e,e.segments,t)}function eL(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Lg(i,t)||e.hasChildren()||!OD(i,t,r))}if(n.segments.length===t.length){if(!Lg(n.segments,t)||!OD(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!J1(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Lg(n.segments,i)&&OD(n.segments,i,r)&&n.children[zt])&&eL(n.children[zt],e,a,r)}}function OD(n,e,t){return e.every((r,i)=>Y1[t](n[i].parameters,r.parameters))}class uf{constructor(e=new Xt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=by(this.queryParams)),this._queryParamMap}toString(){return rH.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ji(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ND(this)}}class nE{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=by(this.parameters)),this._parameterMap}toString(){return rL(this)}}function Lg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let rE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new nM},providedIn:"root"}),n})();class nM{parse(e){const t=new hH(e);return new uf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${iE(e.root,!0)}`,r=function oH(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${LD(t)}=${LD(i)}`).join("&"):`${LD(t)}=${LD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function iH(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const rH=new nM;function ND(n){return n.segments.map(e=>rL(e)).join("/")}function iE(n,e){if(!n.hasChildren())return ND(n);if(e){const t=n.children[zt]?iE(n.children[zt],!1):"",r=[];return ji(n.children,(i,a)=>{a!==zt&&r.push(`${a}:${iE(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function nH(n,e){let t=[];return ji(n.children,(r,i)=>{i===zt&&(t=t.concat(e(r,i)))}),ji(n.children,(r,i)=>{i!==zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===zt?[iE(n.children[zt],!1)]:[`${i}:${iE(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${ND(n)}/${t[0]}`:`${ND(n)}/(${t.join("//")})`}}function tL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function LD(n){return tL(n).replace(/%3B/gi,";")}function rM(n){return tL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function FD(n){return decodeURIComponent(n)}function nL(n){return FD(n.replace(/\+/g,"%20"))}function rL(n){return`${rM(n.path)}${function sH(n){return Object.keys(n).map(e=>`;${rM(e)}=${rM(n[e])}`).join("")}(n.parameters)}`}const aH=/^[^\/()?;=#]+/;function UD(n){const e=n.match(aH);return e?e[0]:""}const lH=/^[^=?&#]+/,uH=/^[^&#]+/;class hH{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new Xt(e,t)),r}parseSegment(){const e=UD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,PD);return this.capture(e),new nE(FD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=UD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=UD(this.remaining);i&&(r=i,this.capture(r))}e[FD(t)]=FD(r)}parseQueryParam(e){const t=function cH(n){const e=n.match(lH);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function dH(n){const e=n.match(uH);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=nL(t),a=nL(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=UD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,PD);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=zt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[zt]:new Xt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,PD)}}function iM(n){return n.segments.length>0?new Xt([],{[zt]:n}):n}function VD(n){const e={};for(const r of Object.keys(n.children)){const a=VD(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function fH(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function Fg(n){return n instanceof uf}const sM=!1;function pH(n,e,t,r,i){if(0===t.length)return Cy(e.root,e.root,e.root,r,i);const a=function lL(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new aL(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return ji(a.outlets,(_,w)=>{d[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((d,_)=>{0==_&&"."===d||(0==_&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new aL(t,e,r)}(t);return a.toRoot()?Cy(e.root,e.root,new Xt([],{}),r,i):function c(_){const w=function mH(n,e,t,r){if(n.isAbsolute)return new Dy(e.root,!0,0);if(-1===r)return new Dy(t,t===e.root,0);return function cL(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new p.vHH(4005,sM&&"Invalid number of '../'");i=r.segments.length}return new Dy(r,!1,i-a)}(t,r+(sE(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),b=w.processChildren?Ty(w.segmentGroup,w.index,a.commands):oM(w.segmentGroup,w.index,a.commands);return Cy(e.root,w.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function sE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function oE(n){return"object"==typeof n&&null!=n&&n.outlets}function Cy(n,e,t,r,i){let c,a={};r&&ji(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(b=>`${b}`):`${_}`}),c=n===e?t:oL(n,e,t);const d=iM(VD(c));return new uf(d,a,i)}function oL(n,e,t){const r={};return ji(n.children,(i,a)=>{r[a]=i===e?t:oL(i,e,t)}),new Xt(n.segments,r)}class aL{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&sE(r[0]))throw new p.vHH(4003,sM&&"Root segment cannot have matrix parameters");const i=r.find(oE);if(i&&i!==Z1(r))throw new p.vHH(4004,sM&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Dy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function oM(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return Ty(n,e,t);const r=function yH(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],d=t[r];if(oE(d))break;const _=`${d}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!dL(_,w,c))return a;r+=2}else{if(!dL(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Xt(n.segments.slice(0,r.pathIndex),{});return a.children[zt]=new Xt(n.segments.slice(r.pathIndex),n.children),Ty(a,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?aM(n,e,t):r.match?Ty(n,0,i):aM(n,e,t)}function Ty(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function _H(n){return oE(n[0])?n[0].outlets:{[zt]:n}}(t),i={};if(!r[zt]&&n.children[zt]&&1===n.numberOfChildren&&0===n.children[zt].segments.length){const a=Ty(n.children[zt],e,t);return new Xt(n.segments,a.children)}return ji(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=oM(n.children[c],e,a))}),ji(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new Xt(n.segments,i)}}function aM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(oE(a)){const _=vH(a.outlets);return new Xt(r,_)}if(0===i&&sE(t[0])){r.push(new nE(n.segments[e].path,uL(t[0]))),i++;continue}const c=oE(a)?a.outlets[zt]:`${a}`,d=i<t.length-1?t[i+1]:null;c&&d&&sE(d)?(r.push(new nE(c,uL(d))),i+=2):(r.push(new nE(c,{})),i++)}return new Xt(r,{})}function vH(n){const e={};return ji(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=aM(new Xt([],{}),0,t))}),e}function uL(n){const e={};return ji(n,(t,r)=>e[r]=`${t}`),e}function dL(n,e,t){return n==t.path&&Sc(e,t.parameters)}const aE="imperative";class Ac{constructor(e,t){this.id=e,this.url=t}}class lM extends Ac{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ug extends Ac{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class BD extends Ac{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jD extends Ac{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class cM extends Ac{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wH extends Ac{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EH extends Ac{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IH extends Ac{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bH extends Ac{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CH extends Ac{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DH{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class TH{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class SH{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AH{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RH{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xH{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hL{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let PH=(()=>{class n{createUrlTree(t,r,i,a,c,d){return pH(t||r.root,i,a,c,d)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),NH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(e){return PH.\u0275fac(e)},providedIn:"root"}),n})();class fL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=uM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=uM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=dM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dM(e,this._root).map(t=>t.value)}}function uM(n,e){if(n===e.value)return e;for(const t of e.children){const r=uM(n,t);if(r)return r}return null}function dM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=dM(n,t);if(r.length)return r.unshift(e),r}return[]}class md{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Sy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class pL extends fL{constructor(e,t){super(e),this.snapshot=t,hM(this,e)}toString(){return this.snapshot.toString()}}function gL(n,e){const t=function LH(n,e){const c=new $D([],{},{},"",{},zt,e,null,n.root,-1,{});return new _L("",new md(c,[]))}(n,e),r=new Lo([new nE("",{})]),i=new Lo({}),a=new Lo({}),c=new Lo({}),d=new Lo(""),_=new Ay(r,i,c,d,a,zt,e,t.root);return _.snapshot=t.root,new pL(new md(_,[]),t)}class Ay{constructor(e,t,r,i,a,c,d,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=d,this.title=this.data?.pipe((0,wt.U)(w=>w[tE]))??at(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>by(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>by(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mL(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function FH(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class $D{get title(){return this.data?.[tE]}constructor(e,t,r,i,a,c,d,_,w,b,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=d,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=b,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=by(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=by(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _L extends fL{constructor(e,t){super(t),this.url=e,hM(this,t)}toString(){return yL(this._root)}}function hM(n,e){e.value._routerState=n,e.children.forEach(t=>hM(n,t))}function yL(n){const e=n.children.length>0?` { ${n.children.map(yL).join(", ")} } `:"";return`${n.value}${e}`}function fM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Sc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Sc(e.params,t.params)||n.params.next(t.params),function Q$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Sc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Sc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function pM(n,e){const t=Sc(n.params,e.params)&&function tH(n,e){return Lg(n,e)&&n.every((t,r)=>Sc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||pM(n.parent,e.parent))}function lE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function VH(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return lE(n,r,i);return lE(n,r)})}(n,e,t);return new md(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(d=>lE(n,d)),c}}const r=function BH(n){return new Ay(new Lo(n.url),new Lo(n.params),new Lo(n.queryParams),new Lo(n.fragment),new Lo(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>lE(n,a));return new md(r,i)}}const gM="ngNavigationCancelingError";function vL(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Fg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wL(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function wL(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[gM]=!0,r.cancellationCode=e,t&&(r.url=t),r}function EL(n){return IL(n)&&Fg(n.url)}function IL(n){return n&&n[gM]}class jH{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new cE,this.attachRef=null}}let cE=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new jH,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HD=!1;let mM=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=zt,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(cE),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,HD);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,HD);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,HD);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,HD);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,_=new $H(t,d,i.injector);if(r&&function HH(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(c);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(c,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]}),n})();class $H{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ay?this.route:e===cE?this.childContexts:this.parent.get(e,t)}}let _M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[mM],encapsulation:2}),n})();function bL(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function vM(n){const e=n.children&&n.children.map(vM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=_M),t}function Ta(n){return n.outlet||zt}function CL(n,e){const t=n.filter(r=>Ta(r)===e);return t.push(...n.filter(r=>Ta(r)!==e)),t}function uE(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class KH{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),fM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Sy(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),ji(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Sy(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Sy(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Sy(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new xH(a.value.snapshot))}),e.children.length&&this.forwardEvent(new AH(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(fM(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),fM(d.route.value),this.activateChildRoutes(e,null,c.children)}else{const d=uE(i.snapshot),_=d?.get(p._Vd)??null;c.attachRef=null,c.route=i,c.resolver=_,c.injector=d,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class DL{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zD{constructor(e,t){this.component=e,this.route=t}}function ZH(n,e,t){const r=n._root;return dE(r,e?e._root:null,t,[r.value])}function Ry(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function dE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Sy(e);return n.children.forEach(c=>{(function QH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function XH(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Lg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Lg(n.url,e.url)||!Sc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pM(n,e)||!Sc(n.queryParams,e.queryParams);default:return!pM(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new DL(r)):(a.data=c.data,a._resolvedData=c._resolvedData),dE(n,e,a.component?d?d.children:null:t,r,i),_&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new zD(d.outlet.component,c))}else c&&hE(e,d,i),i.canActivateChecks.push(new DL(r)),dE(n,null,a.component?d?d.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),ji(a,(c,d)=>hE(c,t.getContext(d),i)),i}function hE(n,e,t){const r=Sy(n),i=n.value;ji(r,(a,c)=>{hE(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new zD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function fE(n){return"function"==typeof n}function wM(n){return n instanceof Hu||"EmptyError"===n?.name}const GD=Symbol("INITIAL_VALUE");function xy(){return _n(n=>$1(n.map(e=>e.pipe(al(1),Yu(GD)))).pipe((0,wt.U)(e=>{for(const t of e)if(!0!==t){if(t===GD)return GD;if(!1===t||t instanceof uf)return t}return!0}),Ys(e=>e!==GD),al(1)))}function TL(n){return(0,W$.z)((0,Bi.b)(e=>{if(Fg(e))throw vL(0,e)}),(0,wt.U)(e=>!0===e))}const EM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SL(n,e,t,r,i){const a=IM(n,e,t);return a.matched?function gz(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?at(i.map(c=>{const d=Ry(c,n);return cf(function iz(n){return n&&fE(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(xy(),TL()):at(!0)}(r=bL(e,r),e,t).pipe((0,wt.U)(c=>!0===c?a:{...EM})):at(a)}function IM(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...EM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Y$)(t,n,e);if(!i)return{...EM};const a={};ji(i.posParams,(d,_)=>{a[_]=d.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function WD(n,e,t,r){if(t.length>0&&function yz(n,e,t){return t.some(r=>qD(n,e,r)&&Ta(r)!==zt)}(n,t,r)){const a=new Xt(e,function _z(n,e,t,r){const i={};i[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Ta(a)!==zt){const c=new Xt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ta(a)]=c}return i}(n,e,r,new Xt(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function vz(n,e,t){return t.some(r=>qD(n,e,r))}(n,t,r)){const a=new Xt(n.segments,function mz(n,e,t,r,i){const a={};for(const c of r)if(qD(n,t,c)&&!i[Ta(c)]){const d=new Xt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,a[Ta(c)]=d}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new Xt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function qD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function AL(n,e,t,r){return!!(Ta(n)===r||r!==zt&&qD(e,t,n))&&("**"===n.path||IM(e,n,t).matched)}function RL(n,e,t){return 0===e.length&&!n.children[t]}const KD=!1;class ZD{constructor(e){this.segmentGroup=e||null}}class xL{constructor(e){this.urlTree=e}}function pE(n){return eE(new ZD(n))}function ML(n){return eE(new xL(n))}function wz(n){return eE(new p.vHH(4e3,KD&&`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class bz{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=WD(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zt).pipe((0,wt.U)(a=>this.createUrlTree(VD(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(lf(a=>{if(a instanceof xL)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof ZD?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zt).pipe((0,wt.U)(i=>this.createUrlTree(VD(i),e.queryParams,e.fragment))).pipe(lf(i=>{throw i instanceof ZD?this.noMatchError(i):i}))}noMatchError(e){return new p.vHH(4002,KD&&`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=iM(e);return new uf(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(a=>new Xt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Gt.D)(i).pipe(Ng(a=>{const c=r.children[a],d=CL(t,a);return this.expandSegmentGroup(e,d,c,a).pipe((0,wt.U)(_=>({segment:_,outlet:a})))}),T((a,c)=>(a[c.outlet]=c.segment,a),{}),W1())}expandSegment(e,t,r,i,a,c){return(0,Gt.D)(r).pipe(Ng(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,c).pipe(lf(w=>{if(w instanceof ZD)return at(null);throw w}))),Ea(d=>!!d),lf((d,_)=>{if(wM(d))return RL(t,i,a)?at(new Xt([],{})):pE(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,c,d){return AL(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):pE(t):pE(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ML(a):this.lineralizeSegments(r,a).pipe((0,ts.z)(c=>{const d=new Xt(c,{});return this.expandSegment(e,d,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:d,consumedSegments:_,remainingSegments:w,positionalParamSegments:b}=IM(t,i,a);if(!d)return pE(t);const S=this.applyRedirectCommands(_,i.redirectTo,b);return i.redirectTo.startsWith("/")?ML(S):this.lineralizeSegments(i,S).pipe((0,ts.z)(O=>this.expandSegment(e,t,r,O.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=bL(r,e),r.loadChildren?(r._loadedRoutes?at({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,wt.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new Xt(i,{})))):at(new Xt(i,{}))):SL(t,r,i,e).pipe(_n(({matched:c,consumedSegments:d,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,ts.z)(b=>{const S=b.injector??e,O=b.routes,{segmentGroup:B,slicedSegments:q}=WD(t,d,_,O),fe=new Xt(B.segments,B.children);if(0===q.length&&fe.hasChildren())return this.expandChildren(S,O,fe).pipe((0,wt.U)(st=>new Xt(d,st)));if(0===O.length&&0===q.length)return at(new Xt(d,{}));const me=Ta(r)===a;return this.expandSegment(S,fe,O,q,me?zt:a,!0).pipe((0,wt.U)(dt=>new Xt(d.concat(dt.segments),dt.children)))})):pE(t)))}getChildConfig(e,t,r){return t.children?at({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?at({routes:t._loadedRoutes,injector:t._loadedInjector}):function pz(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?at(!0):at(i.map(c=>{const d=Ry(c,n);return cf(function ez(n){return n&&fE(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(xy(),TL())}(e,t,r).pipe((0,ts.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Bi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Ez(n){return eE(wL(KD&&`Cannot load children because the guard of the route "path: '${n.path}'" returned false`,3))}(t))):at({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return at(r);if(i.numberOfChildren>1||!i.children[zt])return wz(e.redirectTo);i=i.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new uf(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ji(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return ji(t.children,(d,_)=>{c[_]=this.createSegmentGroup(e,d,r,i)}),new Xt(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,KD&&`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Dz{}class Az{constructor(e,t,r,i,a,c,d){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=c,this.urlSerializer=d}recognize(){const e=WD(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zt).pipe((0,wt.U)(t=>{if(null===t)return null;const r=new $D([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new md(r,t),a=new _L(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=mL(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Gt.D)(Object.keys(r.children)).pipe(Ng(i=>{const a=r.children[i],c=CL(t,i);return this.processSegmentGroup(e,c,a,i)}),T((i,a)=>i&&a?(i.push(...a),i):null),function q$(n,e=!1){return(0,bn.e)((t,r)=>{let i=0;t.subscribe((0,Cn.x)(r,a=>{const c=n(a,i++);(c||e)&&r.next(a),!c&&r.complete()}))})}(i=>null!==i),Dh(null),W1(),(0,wt.U)(i=>{if(null===i)return null;const a=PL(i);return function Rz(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Gt.D)(t).pipe(Ng(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,a)),Ea(c=>!!c),lf(c=>{if(wM(c))return RL(r,i,a)?at([]):at(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!AL(t,r,i,a))return at(null);let c;if("**"===t.path){const d=i.length>0?Z1(i).parameters:{},_=NL(r)+i.length;c=at({snapshot:new $D(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,LL(t),Ta(t),t.component??t._loadedComponent??null,t,OL(r),_,FL(t)),consumedSegments:[],remainingSegments:[]})}else c=SL(r,t,i,e).pipe((0,wt.U)(({matched:d,consumedSegments:_,remainingSegments:w,parameters:b})=>{if(!d)return null;const S=NL(r)+_.length;return{snapshot:new $D(_,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,LL(t),Ta(t),t.component??t._loadedComponent??null,t,OL(r),S,FL(t)),consumedSegments:_,remainingSegments:w}}));return c.pipe(_n(d=>{if(null===d)return at(null);const{snapshot:_,consumedSegments:w,remainingSegments:b}=d;e=t._injector??e;const S=t._loadedInjector??e,O=function xz(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:B,slicedSegments:q}=WD(r,w,b,O.filter(me=>void 0===me.redirectTo));if(0===q.length&&B.hasChildren())return this.processChildren(S,O,B).pipe((0,wt.U)(me=>null===me?null:[new md(_,me)]));if(0===O.length&&0===q.length)return at([new md(_,[])]);const fe=Ta(t)===a;return this.processSegment(S,O,B,q,fe?zt:a).pipe((0,wt.U)(me=>null===me?null:[new md(_,me)]))}))}}function Mz(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function PL(n){const e=[],t=new Set;for(const r of n){if(!Mz(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=PL(r.children);e.push(new md(r.value,i))}return e.filter(r=>!t.has(r))}function OL(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function NL(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function LL(n){return n.data||{}}function FL(n){return n.resolve||{}}function UL(n){return"string"==typeof n.title||null===n.title}function bM(n){return _n(e=>{const t=n(e);return t?(0,Gt.D)(t).pipe((0,wt.U)(()=>e)):at(e)})}const My=new p.OlP("ROUTES");let CM=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.f3M)(p.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return at(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=cf(t.loadComponent()).pipe((0,wt.U)(BL),(0,Bi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),tM(()=>{this.componentLoaders.delete(t)})),i=new G1(r,()=>new vn.x).pipe(Jx());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,wt.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,b=!1;Array.isArray(d)?w=d:(_=d.create(t).injector,w=K1(_.get(My,[],p.XFs.Self|p.XFs.Optional)));return{routes:w.map(vM),injector:_}}),tM(()=>{this.childrenLoaders.delete(r)})),c=new G1(a,()=>new vn.x).pipe(Jx());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return cf(t()).pipe((0,wt.U)(BL),(0,ts.z)(r=>r instanceof p.YKP||Array.isArray(r)?at(r):(0,Gt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BL(n){return function Vz(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let QD=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new vn.x,this.configLoader=(0,p.f3M)(CM),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(rE),this.rootContexts=(0,p.f3M)(cE),this.navigationId=0,this.afterPreactivation=()=>at(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new TH(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new DH(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Lo({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:aE,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ys(r=>0!==r.id),(0,wt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),_n(r=>{let i=!1,a=!1;return at(r).pipe((0,Bi.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),_n(c=>{const d=t.browserUrlTree.toString(),_=!t.navigated||c.extractedUrl.toString()!==d||d!==t.currentUrlTree.toString();if(!_&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new jD(c.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),ol.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return jL(c.source)&&(t.browserUrlTree=c.extractedUrl),at(c).pipe(_n(b=>{const S=this.transitions?.getValue();return this.events.next(new lM(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),S!==this.transitions?.getValue()?ol.E:Promise.resolve(b)}),function Cz(n,e,t,r){return _n(i=>function Iz(n,e,t,r,i){return new bz(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,wt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Bi.b)(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},r.urlAfterRedirects=b.urlAfterRedirects}),function Pz(n,e,t,r,i){return(0,ts.z)(a=>function Sz(n,e,t,r,i,a,c="emptyOnly"){return new Az(n,e,t,r,i,c,a).recognize().pipe(_n(d=>null===d?function Tz(n){return new fr.y(e=>e.error(n))}(new Dz):at(d)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,wt.U)(c=>({...a,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Bi.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const O=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(O,b)}t.browserUrlTree=b.urlAfterRedirects}const S=new wH(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(S)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:S,source:O,restoredState:B,extras:q}=c,fe=new lM(b,this.urlSerializer.serialize(S),O,B);this.events.next(fe);const me=gL(S,this.rootComponentType).snapshot;return at(r={...c,targetSnapshot:me,urlAfterRedirects:S,extras:{...q,skipLocationChange:!1,replaceUrl:!1}})}{const b="";return this.events.next(new jD(c.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),ol.E}}),(0,Bi.b)(c=>{const d=new EH(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),(0,wt.U)(c=>r={...c,guards:ZH(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function oz(n,e){return(0,ts.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?at({...t,guardsResult:!0}):function az(n,e,t,r){return(0,Gt.D)(n).pipe((0,ts.z)(i=>function fz(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?at(a.map(d=>{const _=uE(e)??i,w=Ry(d,_);return cf(function rz(n){return n&&fE(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(Ea())})).pipe(xy()):at(!0)}(i.component,i.route,t,e,r)),Ea(i=>!0!==i,!0))}(c,r,i,n).pipe((0,ts.z)(d=>d&&function JH(n){return"boolean"==typeof n}(d)?function lz(n,e,t,r){return(0,Gt.D)(e).pipe(Ng(i=>g_(function uz(n,e){return null!==n&&e&&e(new SH(n)),at(!0)}(i.route.parent,r),function cz(n,e){return null!==n&&e&&e(new RH(n)),at(!0)}(i.route,r),function hz(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function YH(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>z1(()=>at(c.guards.map(_=>{const w=uE(c.node)??t,b=Ry(_,w);return cf(function nz(n){return n&&fE(n.canActivateChild)}(b)?b.canActivateChild(r,n):w.runInContext(()=>b(r,n))).pipe(Ea())})).pipe(xy())));return at(a).pipe(xy())}(n,i.path,t),function dz(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const i=r.map(a=>z1(()=>{const c=uE(e)??t,d=Ry(a,c);return cf(function tz(n){return n&&fE(n.canActivate)}(d)?d.canActivate(e,n):c.runInContext(()=>d(e,n))).pipe(Ea())}));return at(i).pipe(xy())}(n,i.route,t))),Ea(i=>!0!==i,!0))}(r,a,n,e):at(d)),(0,wt.U)(d=>({...t,guardsResult:d})))})}(this.environmentInjector,c=>this.events.next(c)),(0,Bi.b)(c=>{if(r.guardsResult=c.guardsResult,Fg(c.guardsResult))throw vL(0,c.guardsResult);const d=new IH(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),Ys(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),bM(c=>{if(c.guards.canActivateChecks.length)return at(c).pipe((0,Bi.b)(d=>{const _=new bH(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(_)}),_n(d=>{let _=!1;return at(d).pipe(function Oz(n,e){return(0,ts.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return at(t);let a=0;return(0,Gt.D)(i).pipe(Ng(c=>function Nz(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!UL(i)&&(a[tE]=i.title),function Lz(n,e,t,r){const i=function Fz(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return at({});const a={};return(0,Gt.D)(i).pipe((0,ts.z)(c=>function Uz(n,e,t,r){const i=uE(e)??r,a=Ry(n,i);return cf(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(Ea(),(0,Bi.b)(d=>{a[c]=d}))),eM(1),function K$(n){return(0,wt.U)(()=>n)}(a),lf(c=>wM(c)?ol.E:eE(c)))}(a,n,e,r).pipe((0,wt.U)(c=>(n._resolvedData=c,n.data=mL(n,t).resolve,i&&UL(i)&&(n.data[tE]=i.title),null)))}(c.route,r,n,e)),(0,Bi.b)(()=>a++),eM(1),(0,ts.z)(c=>a===i.length?at(t):ol.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Bi.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),(0,Bi.b)(d=>{const _=new CH(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(_)}))}),bM(c=>{const d=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,Bi.b)(b=>{_.component=b}),(0,wt.U)(()=>{})));for(const b of _.children)w.push(...d(b));return w};return $1(d(c.targetSnapshot.root)).pipe(Dh(),al(1))}),bM(()=>this.afterPreactivation()),(0,wt.U)(c=>{const d=function UH(n,e,t){const r=lE(n,e._root,t?t._root:void 0);return new pL(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:d}}),(0,Bi.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new KH(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),al(1),(0,Bi.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ug(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),tM(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),lf(c=>{if(a=!0,IL(c)){EL(c)||(t.navigated=!0,t.restoreHistory(r,!0));const d=new BD(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(d),EL(c)){const _=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||jL(r.source)};t.scheduleNavigation(_,aE,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const d=new cM(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(d);try{r.resolve(t.errorHandler(c))}catch(_){r.reject(_)}}return ol.E}))}))}cancelNavigationTransition(t,r,i){const a=new BD(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jL(n){return n!==aE}let $L=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===zt);return r}getResolvedTitleForRoute(t){return t.data[tE]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Bz)},providedIn:"root"}),n})(),Bz=(()=>{class n extends $L{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(bf))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Hz)},providedIn:"root"}),n})();class $z{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Hz=(()=>{class n extends $z{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XD=new p.OlP("",{providedIn:"root",factory:()=>({})});let Gz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Wz)},providedIn:"root"}),n})(),Wz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qz(n){throw n}function Kz(n,e,t){return e.parse("/")}const Zz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this.options=(0,p.f3M)(XD,{optional:!0})||{},this.errorHandler=this.options.errorHandler||qz,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Kz,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(Gz),this.routeReuseStrategy=(0,p.f3M)(jz),this.urlCreationStrategy=(0,p.f3M)(NH),this.titleStrategy=(0,p.f3M)($L),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=K1((0,p.f3M)(My,{optional:!0})??[]),this.navigationTransitions=(0,p.f3M)(QD),this.urlSerializer=(0,p.f3M)(rE),this.location=(0,p.f3M)($e),this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new uf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gL(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),aE,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const d=this.parseUrl(t);this.scheduleNavigation(d,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(vM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:d,preserveFragment:_}=r,w=_?this.currentUrlTree.fragment:c;let b=null;switch(d){case"merge":b={...this.currentUrlTree.queryParams,...a};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=a||null}return null!==b&&(b=this.removeEmptyProps(b)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,b,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Fg(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,aE,null,r)}navigate(t,r={skipLocationChange:!1}){return function Qz(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new p.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Zz}:!1===r?{...Yz}:r,Fg(t))return Q1(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Q1(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let d,_,w,b;return c?(d=c.resolve,_=c.reject,w=c.promise):w=new Promise((S,O)=>{d=S,_=O}),b="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:b,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:d,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gE=(()=>{class n{constructor(t,r,i,a,c,d){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new vn.x;const _=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof Ug&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,p.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,p.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,p.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,p.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Fo),p.Y36(Ay),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(lt))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&p.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&p.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),n})(),HL=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,a,c){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=c,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.vpe,this.routerEventsSubscription=t.events.subscribe(d=>{d instanceof Ug&&this.update()})}ngAfterContentInit(){at(this.links.changes,at(null)).pipe((0,Mh.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Gt.D)(t).pipe((0,Mh.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Xz(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Fo),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.sBO),p.Y36(gE,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&p.Suo(i,gE,5),2&t){let a;p.iGM(a=p.CRH())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[p.TTD]}),n})();class zL{}let Jz=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Ys(t=>t instanceof Ug),Ng(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,p.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,d=a._loadedInjector??c;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(c,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(d,a.children??a._loadedRoutes))}return(0,Gt.D)(i).pipe((0,Mh.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):at(null);const a=i.pipe((0,ts.z)(c=>null===c?at(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Gt.D)([a,c]).pipe((0,Mh.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Fo),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(zL),p.LFG(CM))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TM=new p.OlP("");let GL=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof lM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ug&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof hL&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hL(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();var Uo=(()=>((Uo=Uo||{})[Uo.COMPLETE=0]="COMPLETE",Uo[Uo.FAILED=1]="FAILED",Uo[Uo.REDIRECTING=2]="REDIRECTING",Uo))();const ky=!1;function df(n,e){return{\u0275kind:n,\u0275providers:e}}const SM=new p.OlP("",{providedIn:"root",factory:()=>!1});function qL(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(Fo),i=n.get(KL);1===n.get(AM)&&r.initialNavigation(),n.get(ZL,null,p.XFs.Optional)?.setUpPreloading(),n.get(TM,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const KL=new p.OlP(ky?"bootstrap done indicator":"",{factory:()=>new vn.x}),AM=new p.OlP(ky?"initial navigation":"",{providedIn:"root",factory:()=>1});function iG(){let n=[];return n=ky?[{provide:p.Xts,multi:!0,useFactory:()=>{const e=(0,p.f3M)(Fo);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function MH(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],df(1,n)}const ZL=new p.OlP(ky?"router preloader":"");function sG(n){return df(0,[{provide:ZL,useExisting:Jz},{provide:zL,useExisting:n}])}const mE=!1,YL=new p.OlP(mE?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),oG=[$e,{provide:rE,useClass:nM},Fo,cE,{provide:Ay,useFactory:function WL(n){return n.routerState.root},deps:[Fo]},CM,mE?{provide:SM,useValue:!0}:[]];function aG(){return new p.PXZ("Router",Fo)}let QL=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[oG,mE&&r?.enableTracing?iG().\u0275providers:[],{provide:My,multi:!0,useValue:t},{provide:YL,useFactory:dG,deps:[[Fo,new p.FiY,new p.tp0]]},{provide:XD,useValue:r||{}},r?.useHash?{provide:lt,useClass:xe}:{provide:lt,useClass:Pe},{provide:TM,useFactory:()=>{const n=(0,p.f3M)(Zo),e=(0,p.f3M)(p.R0b),t=(0,p.f3M)(XD),r=(0,p.f3M)(QD),i=(0,p.f3M)(rE);return t.scrollOffset&&n.setOffset(t.scrollOffset),new GL(i,r,n,e,t)}},r?.preloadingStrategy?sG(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:aG},r?.initialNavigation?hG(r):[],[{provide:XL,useFactory:qL},{provide:p.tb,multi:!0,useExisting:XL}]]}}static forChild(t){return{ngModule:n,providers:[{provide:My,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(YL,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[_M]}),n})();function dG(n){if(mE&&n)throw new p.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function hG(n){return["disabled"===n.initialNavigation?df(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(Fo);return()=>{e.setUpLocationChangeListener()}}},{provide:AM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?df(2,[{provide:AM,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(_e,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Fo),a=e.get(KL);(function eG(n,e){n.events.pipe(Ys(t=>t instanceof Ug||t instanceof BD||t instanceof cM||t instanceof jD),(0,wt.U)(t=>t instanceof Ug||t instanceof jD?Uo.COMPLETE:t instanceof BD&&(0===t.code||1===t.code)?Uo.REDIRECTING:Uo.FAILED),Ys(t=>t!==Uo.REDIRECTING),al(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(QD).afterPreactivation=()=>(r(!0),a.closed?at(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const XL=new p.OlP(mE?"Router Initializer":"");let pG=(()=>{class n{constructor(){this.title="chads-website"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:14,vars:0,consts:[[1,"header"],[1,"navbar","navbar-expand-md","navbar-dark","bg-dark"],[1,"container"],["routerLink","/",1,"navbar-brand"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/about",1,"nav-link"],["routerLink","/contact",1,"nav-link"]],template:function(t,r){1&t&&(p.TgZ(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),p._uU(4,"Games"),p.qZA(),p.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),p._uU(9,"About"),p.qZA()(),p.TgZ(10,"li",6)(11,"a",8),p._uU(12,"Contact"),p.qZA()()()()()()(),p._UZ(13,"router-outlet"))},dependencies:[mM,gE]}),n})(),gG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-about"]],decls:6,vars:0,consts:[[1,"about"],[1,"container"]],template:function(t,r){1&t&&(p.TgZ(0,"section",0)(1,"div",1)(2,"h2"),p._uU(3,"About Me"),p.qZA(),p.TgZ(4,"p"),p._uU(5," I am a passionate software developer from Las Vegas, Nevada. I am studying Computer science & Engineering at the University of Nevada, Reno. I took some fantastic classes where I got to learn Machine Learning and AI, Software Development, and Algorithms. The classes were very project-driven, and I got to create some really cool things. Outside of school, I had the fortunate opportunity to Intern at Tesla and IGT. During my internships, I got some real industry experience and got to work on complex problems and systems. I am excited to start my career and keep learning. "),p.qZA()()())},styles:[".about[_ngcontent-%COMP%]{padding:40px 0}"]}),n})(),mG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-contact"]],decls:10,vars:0,consts:[[1,"contact"],[1,"container"]],template:function(t,r){1&t&&(p.TgZ(0,"section",0)(1,"div",1)(2,"h2"),p._uU(3,"Contact Me"),p.qZA(),p.TgZ(4,"p"),p._uU(5," You can contact me at: "),p._UZ(6,"br"),p._uU(7," Email: your@email.com "),p._UZ(8,"br"),p._uU(9," Phone: +1 (123) 456-7890 "),p.qZA()()())},styles:[".contact[_ngcontent-%COMP%]{padding:40px 0}"]}),n})();function _G(n,e){if(1&n&&(p.TgZ(0,"div")(1,"button",1),p._uU(2),p.qZA()()),2&n){const t=e.$implicit;p.xp6(1),p.MGl("routerLink","/games/",t,""),p.xp6(1),p.hij(" ",t," ")}}let yG=(()=>{class n{constructor(){this.games=["Moon-Rakers"]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],["type","button","routerLinkActive","active",1,"black",3,"routerLink"]],template:function(t,r){1&t&&(p.TgZ(0,"h1"),p._uU(1,"Play games"),p.qZA(),p.YNc(2,_G,3,2,"div",0)),2&t&&(p.xp6(2),p.Q6J("ngForOf",r.games))},dependencies:[Yr,gE,HL]}),n})();const JL=["reactor","reactor","reactor","thruster","thruster","shield","shield","damage","damage","miss"];class vG{constructor(e,t=JL,r=[],i=[],a=[],c=2,d=[]){this.id=e,this.deck=t,this.hand=r,this.discard=i,this.shipParts=a,this.gold=c,this.objectives=d,this.id=e,this.deck=t,this.hand=r,this.discard=i,this.shipParts=a,this.gold=c,this.objectives=d}getDeck(){return this.deck}}let eF=(()=>{class n{constructor(){this.players=[],this.db=(0,p.f3M)(hw),this.deck=this.shuffle(JL),this.hand=[],this.hand=this.deck.splice(-5),this.bhsDeck=new Lo(this.deck),this.bhsHand=new Lo(this.hand)}createPlayer(){let t=new vG("me");console.log(t),this.db.object("me").set(t)}getPlayerInfo(t){}getDeck(){return this.bhsDeck}getHand(){return this.bhsHand}draw(t){this.hand.push(...this.deck.splice(-t)),this.bhsDeck.next(this.deck),this.bhsHand.next(this.hand)}shuffle(t){let i,r=t.length;for(;0!=r;)i=Math.floor(Math.random()*r),r--,[t[r],t[i]]=[t[i],t[r]];return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tF{constructor(e,t,r){this.id=e,this.name=t,this.players=[r]}addPlayers(e){this.players[this.players.indexOf("")]=e}removePlayer(e){this.players=this.players.filter(t=>t!==e)}}let wG=(()=>{class n{constructor(){this.db=(0,p.f3M)(hw),this.player_info=[],this.game=new tF("","","me")}createGame(t,r,i){this.game=new tF(t,r,i)}addPlayer(t){this.game.addPlayers(t)}pushGame(){this.db.object(this.game.id.toString()).set({name:this.game.name,players:this.game.players})}getPlayerInfo(t){return this.db.object(t).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Py(n){return null!=n&&"false"!=`${n}`}function nF(n,e=0){return function EG(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function no(n){return n instanceof p.SBq?n.nativeElement:n}var bG=L(1144);const CG=["addListener","removeListener"],DG=["addEventListener","removeEventListener"],TG=["on","off"];function RM(n,e,t,r){if((0,Mo.m)(t)&&(r=t,t=void 0),r)return RM(n,e,t).pipe(j1(r));const[i,a]=function RG(n){return(0,Mo.m)(n.addEventListener)&&(0,Mo.m)(n.removeEventListener)}(n)?DG.map(c=>d=>n[c](e,d,t)):function SG(n){return(0,Mo.m)(n.addListener)&&(0,Mo.m)(n.removeListener)}(n)?CG.map(rF(n,e)):function AG(n){return(0,Mo.m)(n.on)&&(0,Mo.m)(n.off)}(n)?TG.map(rF(n,e)):[];if(!i&&(0,bG.z)(n))return(0,ts.z)(c=>RM(c,e,t))((0,Ai.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new fr.y(c=>{const d=(..._)=>c.next(1<_.length?_:_[0]);return i(d),()=>a(d)})}function rF(n,e){return t=>r=>n[t](e,r)}var iF=L(4408);const _E={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=_E;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(a=>{t=void 0,n(a)});return new af.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=_E;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=_E;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var sF=L(7565);const oF=new class MG extends sF.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class xG extends iF.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=_E.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:a}=e;null!=t&&(null===(i=a[a.length-1])||void 0===i?void 0:i.id)!==t&&(_E.cancelAnimationFrame(t),e._scheduled=void 0)}});let xM,kG=1;const JD={};function aF(n){return n in JD&&(delete JD[n],!0)}const PG={setImmediate(n){const e=kG++;return JD[e]=!0,xM||(xM=Promise.resolve()),xM.then(()=>aF(e)&&n()),e},clearImmediate(n){aF(n)}},{setImmediate:OG,clearImmediate:NG}=PG,eT={setImmediate(...n){const{delegate:e}=eT;return(e?.setImmediate||OG)(...n)},clearImmediate(n){const{delegate:e}=eT;return(e?.clearImmediate||NG)(n)},delegate:void 0};new class FG extends sF.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class LG extends iF.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=eT.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:a}=e;null!=t&&(null===(i=a[a.length-1])||void 0===i?void 0:i.id)!==t&&(eT.clearImmediate(t),e._scheduled=void 0)}});var BG=L(3532);function lF(n=0,e,t=Yi.P){let r=-1;return null!=e&&((0,BG.K)(e)?t=e:r=e),new fr.y(i=>{let a=function jG(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}function cF(n,e=Yi.z){return function VG(n){return(0,bn.e)((e,t)=>{let r=!1,i=null,a=null,c=!1;const d=()=>{if(a?.unsubscribe(),a=null,r){r=!1;const w=i;i=null,t.next(w)}c&&t.complete()},_=()=>{a=null,c&&t.complete()};e.subscribe((0,Cn.x)(t,w=>{r=!0,i=w,a||(0,Ai.Xf)(n(w)).subscribe(a=(0,Cn.x)(t,d,_))},()=>{c=!0,(!r||!a||a.closed)&&t.complete()}))})}(()=>lF(n,e))}let MM;try{MM=typeof Intl<"u"&&Intl.v8BreakIterator}catch{MM=!1}let yE,kM,uF=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Id(n){return n===Fc}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!MM)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.Lbi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vE(n){return function $G(){if(null==yE&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>yE=!0}))}finally{yE=yE||!1}return yE}()?n:!!n.capture}function hF(n){if(function HG(){if(null==kM){const n=typeof document<"u"?document.head:null;kM=!(!n||!n.createShadowRoot&&!n.attachShadow)}return kM}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function nT(n){return n.composedPath?n.composedPath()[0]:n.target}let GG=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new vn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new fr.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(cF(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):at()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Ys(a=>!a||i.indexOf(a)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,a)=>{this._scrollableContainsElement(a,t)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=no(r),a=t.getElementRef().nativeElement;do{if(i==a)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>RM(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.R0b),p.LFG(uF),p.LFG(ie,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qG=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new vn.x,this._changeListener=a=>{this._change.next(a)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,a=i.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-a.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(cF(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(uF),p.LFG(p.R0b),p.LFG(ie,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function rT(n){return(0,bn.e)((e,t)=>{(0,Ai.Xf)(n).subscribe((0,Cn.x)(t,()=>t.complete(),ae.Z)),!t.closed&&e.subscribe(t)})}const dW=new p.OlP("cdk-dir-doc",{providedIn:"root",factory:function hW(){return(0,p.f3M)(ie)}}),fW=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let mF=(()=>{class n{constructor(t){this.value="ltr",this.change=new p.vpe,t&&(this.value=function pW(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?fW.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(dW,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PM(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function Ny(n,e){const t=e?"":"none";PM(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function _F(n,e,t){PM(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function iT(n,e){return e&&"none"!=e?n+" "+e:n}function yF(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function OM(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function NM(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function LM(n,e,t){const{top:r,bottom:i,left:a,right:c}=n;return t>=r&&t<=i&&e>=a&&e<=c}function wE(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function vF(n,e,t,r){const{top:i,right:a,bottom:c,left:d,width:_,height:w}=n,b=_*e,S=w*e;return r>i-S&&r<c+S&&t>d-b&&t<a+b}class wF{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:NM(t)})})}handleScroll(e){const t=nT(e),r=this.positions.get(t);if(!r)return null;const i=r.scrollPosition;let a,c;if(t===this._document){const w=this.getViewportScrollPosition();a=w.top,c=w.left}else a=t.scrollTop,c=t.scrollLeft;const d=i.top-a,_=i.left-c;return this.positions.forEach((w,b)=>{w.clientRect&&t!==b&&t.contains(b)&&wE(w.clientRect,d,_)}),i.top=a,i.left=c,{top:d,left:_}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function EF(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?CF(n,e):("input"===r||"select"===r||"textarea"===r)&&bF(n,e),IF("canvas",n,e,CF),IF("input, textarea, select",n,e,bF),e}function IF(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const a=t.querySelectorAll(n);for(let c=0;c<i.length;c++)r(i[c],a[c])}}let mW=0;function bF(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${mW++}`)}function CF(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}const DF=vE({passive:!0}),sT=vE({passive:!1}),FM=new Set(["position"]);class yW{constructor(e,t,r,i,a,c){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=a,this._dragDropRegistry=c,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new vn.x,this._pointerMoveSubscription=af.w0.EMPTY,this._pointerUpSubscription=af.w0.EMPTY,this._scrollSubscription=af.w0.EMPTY,this._resizeSubscription=af.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new vn.x,this.started=new vn.x,this.released=new vn.x,this.ended=new vn.x,this.entered=new vn.x,this.exited=new vn.x,this.dropped=new vn.x,this.moved=this._moveEvents,this._pointerDown=d=>{if(this.beforeStarted.next(),this._handles.length){const _=this._getTargetHandle(d);_&&!this._disabledHandles.has(_)&&!this.disabled&&this._initializeDragSequence(_,d)}else this.disabled||this._initializeDragSequence(this._rootElement,d)},this._pointerMove=d=>{const _=this._getPointerPositionOnPage(d);if(!this._hasStartedDragging){if(Math.abs(_.x-this._pickupPositionOnPage.x)+Math.abs(_.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const B=Date.now()>=this._dragStartTime+this._getDragStartDelay(d),q=this._dropContainer;if(!B)return void this._endDragSequence(d);(!q||!q.isDragging()&&!q.isReceiving())&&(d.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(d)))}return}d.preventDefault();const w=this._getConstrainedPointerPosition(_);if(this._hasMoved=!0,this._lastKnownPointerPosition=_,this._updatePointerDirectionDelta(w),this._dropContainer)this._updateActiveDropContainer(w,_);else{const b=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,S=this._activeTransform;S.x=w.x-b.x+this._passiveTransform.x,S.y=w.y-b.y+this._passiveTransform.y,this._applyRootElementTransform(S.x,S.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:w,event:d,distance:this._getDragDistance(w),delta:this._pointerDirectionDelta})})},this._pointerUp=d=>{this._endDragSequence(d)},this._nativeDragStart=d=>{if(this._handles.length){const _=this._getTargetHandle(d);_&&!this._disabledHandles.has(_)&&!this.disabled&&d.preventDefault()}else this.disabled||d.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new wF(r),c.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=Py(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>Ny(r,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>no(r)),this._handles.forEach(r=>Ny(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=no(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,sT),t.addEventListener("touchstart",this._pointerDown,DF),t.addEventListener("dragstart",this._nativeDragStart,sT)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?no(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Ny(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Ny(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){EE(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,i=r.parentNode,a=this._placeholder=this._createPlaceholderElement(),c=this._anchor=this._anchor||this._document.createComment(""),d=this._getShadowRoot();i.insertBefore(c,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),_F(r,!1,FM),this._document.body.appendChild(i.replaceChild(a,r)),this._getPreviewInsertionPoint(i,d).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=EE(t),a=!i&&0!==t.button,c=this._rootElement,d=nT(t),_=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),w=i?function lW(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(t):function aW(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(t);if(d&&d.draggable&&"mousedown"===t.type&&t.preventDefault(),r||a||_||w)return;if(this._handles.length){const O=c.style;this._rootElementTapHighlight=O.webkitTapHighlightColor||"",O.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(O=>this._updateOnScroll(O)),this._boundaryElement&&(this._boundaryRect=NM(this._boundaryElement));const b=this._previewTemplate;this._pickupPositionInElement=b&&b.template&&!b.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const S=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:S.x,y:S.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){_F(this._rootElement,!0,FM),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),a=this._getDragDistance(i),c=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:a,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:c,distance:a,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,c,a,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let a=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!a&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(a=this._initialContainer),a&&a!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=a,this._dropContainer.enter(this,e,t,a===this._initialContainer&&a.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:a,currentIndex:a.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let i;if(r&&e){const a=e.matchSize?this._initialClientRect:null,c=e.viewContainer.createEmbeddedView(r,e.context);c.detectChanges(),i=SF(c,this._document),this._previewRef=c,e.matchSize?AF(i,a):i.style.transform=oT(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=EF(this._rootElement),AF(i,this._initialClientRect),this._initialTransform&&(i.style.transform=this._initialTransform);return PM(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},FM),Ny(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(a=>i.classList.add(a)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function gW(n){const e=getComputedStyle(n),t=OM(e,"transition-property"),r=t.find(d=>"transform"===d||"all"===d);if(!r)return 0;const i=t.indexOf(r),a=OM(e,"transition-duration"),c=OM(e,"transition-delay");return yF(a[i])+yF(c[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=c=>{(!c||nT(c)===this._preview&&"transform"===c.propertyName)&&(this._preview?.removeEventListener("transitionend",i),r(),clearTimeout(a))},a=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=SF(this._placeholderRef,this._document)):r=EF(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){const i=t===this._rootElement?null:t,a=i?i.getBoundingClientRect():e,c=EE(r)?r.targetTouches[0]:r,d=this._getViewportScrollPosition();return{x:a.left-e.left+(c.pageX-a.left-d.left),y:a.top-e.top+(c.pageY-a.top-d.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=EE(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,a=r.pageY-t.top;if(this._ownerSVGElement){const c=this._ownerSVGElement.getScreenCTM();if(c){const d=this._ownerSVGElement.createSVGPoint();return d.x=i,d.y=a,d.matrixTransform(c.inverse())}}return{x:i,y:a}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x),this._boundaryRect){const{x:a,y:c}=this._pickupPositionInElement,d=this._boundaryRect,{width:_,height:w}=this._getPreviewRect(),b=d.top+c,S=d.bottom-(w-c);r=TF(r,d.left+a,d.right-(_-a)),i=TF(i,b,S)}return{x:r,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,i=this._pointerDirectionDelta,a=this._pointerPositionAtLastDirectionChange,c=Math.abs(t-a.x),d=Math.abs(r-a.y);return c>this._config.pointerDirectionChangeThreshold&&(i.x=t>a.x?1:-1,a.x=t),d>this._config.pointerDirectionChangeThreshold&&(i.y=r>a.y?1:-1,a.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Ny(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,sT),e.removeEventListener("touchstart",this._pointerDown,DF),e.removeEventListener("dragstart",this._nativeDragStart,sT)}_applyRootElementTransform(e,t){const r=oT(e,t),i=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=i.transform&&"none"!=i.transform?i.transform:""),i.transform=iT(r,this._initialTransform)}_applyPreviewTransform(e,t){const r=this._previewTemplate?.template?void 0:this._initialTransform,i=oT(e,t);this._preview.style.transform=iT(i,r)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const a=i.left-r.left,c=r.right-i.right,d=i.top-r.top,_=r.bottom-i.bottom;i.width>r.width?(a>0&&(e+=a),c>0&&(e-=c)):e=0,i.height>r.height?(d>0&&(t+=d),_>0&&(t-=_)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:EE(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=nT(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&wE(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=hF(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return no(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function oT(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function TF(n,e,t){return Math.max(e,Math.min(t,n))}function EE(n){return"t"===n.type[0]}function SF(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function AF(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=oT(e.left,e.top)}function RF(n,e,t){const r=IE(e,n.length-1),i=IE(t,n.length-1);if(r===i)return;const a=n[r],c=i<r?-1:1;for(let d=r;d!==i;d+=c)n[d]=n[d+c];n[i]=a}function IE(n,e){return Math.max(0,Math.min(e,n))}class wW{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,r,i){const a=this._itemPositions,c=this._getItemIndexFromPointerPosition(e,t,r,i);if(-1===c&&a.length>0)return null;const d="horizontal"===this.orientation,_=a.findIndex(me=>me.drag===e),w=a[c],S=w.clientRect,O=_>c?1:-1,B=this._getItemOffsetPx(a[_].clientRect,S,O),q=this._getSiblingOffsetPx(_,a,O),fe=a.slice();return RF(a,_,c),a.forEach((me,mt)=>{if(fe[mt]===me)return;const dt=me.drag===e,st=dt?B:q,ot=dt?e.getPlaceholderElement():me.drag.getRootElement();me.offset+=st,d?(ot.style.transform=iT(`translate3d(${Math.round(me.offset)}px, 0, 0)`,me.initialTransform),wE(me.clientRect,0,st)):(ot.style.transform=iT(`translate3d(0, ${Math.round(me.offset)}px, 0)`,me.initialTransform),wE(me.clientRect,st,0))}),this._previousSwap.overlaps=LM(S,t,r),this._previousSwap.drag=w.drag,this._previousSwap.delta=d?i.x:i.y,{previousIndex:_,currentIndex:c}}enter(e,t,r,i){const a=null==i||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,c=this._activeDraggables,d=c.indexOf(e),_=e.getPlaceholderElement();let w=c[a];if(w===e&&(w=c[a+1]),!w&&(null==a||-1===a||a<c.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(w=c[0]),d>-1&&c.splice(d,1),w&&!this._dragDropRegistry.isDragging(w)){const b=w.getRootElement();b.parentElement.insertBefore(_,b),c.splice(a,0,e)}else no(this._element).appendChild(_),c.push(e);_.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{wE(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:NM(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){const i="horizontal"===this.orientation;let a=i?t.left-e.left:t.top-e.top;return-1===r&&(a+=i?t.width-e.width:t.height-e.height),a}_getSiblingOffsetPx(e,t,r){const i="horizontal"===this.orientation,a=t[e].clientRect,c=t[e+-1*r];let d=a[i?"width":"height"]*r;if(c){const _=i?"left":"top",w=i?"right":"bottom";-1===r?d-=c.clientRect[_]-a[w]:d+=a[_]-c.clientRect[w]}return d}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const c=r[r.length-1].clientRect;return i?e>=c.right:t>=c.bottom}{const c=r[0].clientRect;return i?e<=c.left:t<=c.top}}_getItemIndexFromPointerPosition(e,t,r,i){const a="horizontal"===this.orientation,c=this._itemPositions.findIndex(({drag:d,clientRect:_})=>d!==e&&((!i||d!==this._previousSwap.drag||!this._previousSwap.overlaps||(a?i.x:i.y)!==this._previousSwap.delta)&&(a?t>=Math.floor(_.left)&&t<Math.floor(_.right):r>=Math.floor(_.top)&&r<Math.floor(_.bottom))));return-1!==c&&this._sortPredicate(c,e)?c:-1}}const MF=.05;class EW{constructor(e,t,r,i,a){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=a,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new vn.x,this.entered=new vn.x,this.exited=new vn.x,this.dropped=new vn.x,this.sorted=new vn.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=af.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new vn.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function uW(n=0,e=Yi.z){return n<0&&(n=0),lF(n,n,e)}(0,oF).pipe(rT(this._stopScrollTimers)).subscribe(()=>{const c=this._scrollNode,d=this.autoScrollStep;1===this._verticalScrollDirection?c.scrollBy(0,-d):2===this._verticalScrollDirection&&c.scrollBy(0,d),1===this._horizontalScrollDirection?c.scrollBy(-d,0):2===this._horizontalScrollDirection&&c.scrollBy(d,0)})},this.element=no(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new wF(r),this._sortStrategy=new wW(this.element,t),this._sortStrategy.withSortPredicate((c,d)=>this.sortPredicate(c,d,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,a,c,d,_={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:a,distance:c,dropPoint:d,event:_})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===e.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=no(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._clientRect||!vF(this._clientRect,.05,t,r))return;const a=this._sortStrategy.sort(e,t,r,i);a&&this.sorted.next({previousIndex:a.previousIndex,currentIndex:a.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=0,a=0;if(this._parentPositions.positions.forEach((c,d)=>{d===this._document||!c.clientRect||r||vF(c.clientRect,.05,e,t)&&([i,a]=function IW(n,e,t,r){const i=kF(e,r),a=PF(e,t);let c=0,d=0;if(i){const _=n.scrollTop;1===i?_>0&&(c=1):n.scrollHeight-_>n.clientHeight&&(c=2)}if(a){const _=n.scrollLeft;1===a?_>0&&(d=1):n.scrollWidth-_>n.clientWidth&&(d=2)}return[c,d]}(d,c.clientRect,e,t),(i||a)&&(r=d))}),!i&&!a){const{width:c,height:d}=this._viewportRuler.getViewportSize(),_={width:c,height:d,top:0,right:c,bottom:d,left:0};i=kF(_,t),a=PF(_,e),r=window}r&&(i!==this._verticalScrollDirection||a!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=a,this._scrollNode=r,(i||a)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=no(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=no(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=no(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&LM(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!LM(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);if(!i)return!1;const a=no(this.element);return i===a||a.contains(i)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=hF(no(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function kF(n,e){const{top:t,bottom:r,height:i}=n,a=i*MF;return e>=t-a&&e<=t+a?1:e>=r-a&&e<=r+a?2:0}function PF(n,e){const{left:t,right:r,width:i}=n,a=i*MF;return e>=t-a&&e<=t+a?1:e>=r-a&&e<=r+a?2:0}const aT=vE({passive:!1,capture:!0});let bW=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new vn.x,this.pointerUp=new vn.x,this.scroll=new vn.x,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,aT)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,aT)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:a=>this.pointerUp.next(a),options:!0}).set("scroll",{handler:a=>this.scroll.next(a),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:aT}),i||this._globalListeners.set("mousemove",{handler:a=>this.pointerMove.next(a),options:aT}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((a,c)=>{this._document.addEventListener(c,a.handler,a.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new fr.y(i=>this._ngZone.runOutsideAngular(()=>{const c=d=>{this._activeDragInstances.length&&i.next(d)};return t.addEventListener("scroll",c,!0),()=>{t.removeEventListener("scroll",c,!0)}}))),(0,ri.T)(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.R0b),p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CW={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let UM=(()=>{class n{constructor(t,r,i,a){this._document=t,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=a}createDrag(t,r=CW){return new yW(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new EW(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie),p.LFG(p.R0b),p.LFG(qG),p.LFG(bW))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const OF=new p.OlP("CDK_DRAG_PARENT"),VM=new p.OlP("CdkDropListGroup");let DW=(()=>{class n{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Py(t)}ngOnDestroy(){this._items.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],features:[p._Bn([{provide:VM,useExisting:n}])]}),n})();const NF=new p.OlP("CDK_DRAG_CONFIG");let TW=0;const LF=new p.OlP("CdkDropList");let SW=(()=>{class n{constructor(t,r,i,a,c,d,_){this.element=t,this._changeDetectorRef=i,this._scrollDispatcher=a,this._dir=c,this._group=d,this._destroyed=new vn.x,this.connectedTo=[],this.id="cdk-drop-list-"+TW++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new p.vpe,this.entered=new p.vpe,this.exited=new p.vpe,this.sorted=new p.vpe,this._unsortedItems=new Set,this._dropListRef=r.createDropList(t),this._dropListRef.data=this,_&&this._assignDefaults(_),this._dropListRef.enterPredicate=(w,b)=>this.enterPredicate(w.data,b.data),this._dropListRef.sortPredicate=(w,b,S)=>this.sortPredicate(w,b.data,S.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),d&&d._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=Py(t)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,r)=>t._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(Yu(this._dir.value),rT(this._destroyed)).subscribe(r=>t.withDirection(r)),t.beforeStarted.subscribe(()=>{const r=function IG(n){return Array.isArray(n)?n:[n]}(this.connectedTo).map(i=>"string"==typeof i?n._dropLists.find(c=>c.id===i):i);if(this._group&&this._group._items.forEach(i=>{-1===r.indexOf(i)&&r.push(i)}),!this._scrollableParentsResolved){const i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(a=>a.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=Py(this.sortingDisabled),t.autoScrollDisabled=Py(this.autoScrollDisabled),t.autoScrollStep=nF(this.autoScrollStep,2),t.connectedTo(r.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()})}_assignDefaults(t){const{lockAxis:r,draggingDisabled:i,sortingDisabled:a,listAutoScrollDisabled:c,listOrientation:d}=t;this.disabled=i??!1,this.sortingDisabled=a??!1,this.autoScrollDisabled=c??!1,this.orientation=d||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return n._dropLists=[],n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(UM),p.Y36(p.sBO),p.Y36(GG),p.Y36(mF,8),p.Y36(VM,12),p.Y36(NF,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,r){2&t&&(p.uIk("id",r.id),p.ekj("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[p._Bn([{provide:VM,useValue:void 0},{provide:LF,useExisting:n}])]}),n})();const FF=new p.OlP("CdkDragHandle"),AW=new p.OlP("CdkDragPlaceholder"),RW=new p.OlP("CdkDragPreview");let MW=(()=>{class n{constructor(t,r,i,a,c,d,_,w,b,S,O){this.element=t,this.dropContainer=r,this._ngZone=a,this._viewContainerRef=c,this._dir=_,this._changeDetectorRef=b,this._selfHandle=S,this._parentDrag=O,this._destroyed=new vn.x,this.started=new p.vpe,this.released=new p.vpe,this.ended=new p.vpe,this.entered=new p.vpe,this.exited=new p.vpe,this.dropped=new p.vpe,this.moved=new fr.y(B=>{const q=this._dragRef.moved.pipe((0,wt.U)(fe=>({source:this,pointerPosition:fe.pointerPosition,event:fe.event,delta:fe.delta,distance:fe.distance}))).subscribe(B);return()=>{q.unsubscribe()}}),this._dragRef=w.createDrag(t,{dragStartThreshold:d&&null!=d.dragStartThreshold?d.dragStartThreshold:5,pointerDirectionChangeThreshold:d&&null!=d.pointerDirectionChangeThreshold?d.pointerDirectionChangeThreshold:5,zIndex:d?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),d&&this._assignDefaults(d),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=Py(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(al(1),rT(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let r=t;this.rootElementSelector&&(r=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):no(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const r=this._dir,i=this.dragStartDelay,a=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,c=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:nF(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(a).withPreviewTemplate(c).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(al(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains("cdk-drag")){t.withParent(n._dragInstances.find(i=>i.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){const{lockAxis:r,dragStartDelay:i,constrainPosition:a,previewClass:c,boundaryElement:d,draggingDisabled:_,rootElementSelector:w,previewContainer:b}=t;this.disabled=_??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),a&&(this.constrainPosition=a),c&&(this.previewClass=c),d&&(this.boundaryElement=d),w&&(this.rootElementSelector=w),b&&(this.previewContainer=b)}_setupHandlesListener(){this._handles.changes.pipe(Yu(this._handles),(0,Bi.b)(t=>{const r=t.filter(i=>i._parentDrag===this).map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),_n(t=>(0,ri.T)(...t.map(r=>r._stateChanges.pipe(Yu(r))))),rT(this._destroyed)).subscribe(t=>{const r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}}return n._dragInstances=[],n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(LF,12),p.Y36(ie),p.Y36(p.R0b),p.Y36(p.s_b),p.Y36(NF,8),p.Y36(mF,8),p.Y36(UM),p.Y36(p.sBO),p.Y36(FF,10),p.Y36(OF,12))},n.\u0275dir=p.lG2({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(t,r,i){if(1&t&&(p.Suo(i,RW,5),p.Suo(i,AW,5),p.Suo(i,FF,5)),2&t){let a;p.iGM(a=p.CRH())&&(r._previewTemplate=a.first),p.iGM(a=p.CRH())&&(r._placeholderTemplate=a.first),p.iGM(a=p.CRH())&&(r._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,r){2&t&&p.ekj("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[p._Bn([{provide:OF,useExisting:n}]),p.TTD]}),n})(),kW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[UM],imports:[KG]}),n})(),PW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-card"]],decls:2,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"p"),p._uU(1,"card works!"),p.qZA())}}),n})();function OW(n,e){if(1&n&&(p.TgZ(0,"div",12),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Oqu(t)}}function NW(n,e){if(1&n&&(p.TgZ(0,"div",12),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Oqu(t)}}function LW(n,e){if(1&n&&(p.TgZ(0,"div",13),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Oqu(t)}}let FW=(()=>{class n{constructor(){this.srvP=(0,p.f3M)(eF),this.player="",this.deck=[],this.hand=[],this.playing=[],this.discard=[],this.trash=[],this.subscribers=[],this.subscribers.push(this.srvP.getDeck().subscribe(t=>{this.deck=t})),this.subscribers.push(this.srvP.getHand().subscribe(t=>{this.hand=t}))}drop(t){console.log("drop"),t.previousContainer===t.container?(RF(t.container.data,t.previousIndex,t.currentIndex),console.log("move")):(console.log("transer"),function vW(n,e,t,r){const i=IE(t,n.length-1),a=IE(r,e.length);n.length&&e.splice(a,0,n.splice(i,1)[0])}(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex))}draw(){this.srvP.draw(1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-player"]],inputs:{player:"player"},decls:18,vars:6,consts:[["cdkDropListGroup","",1,"container","board-color"],[1,"current-card","board-color"],["cdkDropList","",1,"playing-field","example-list","board-color",3,"cdkDropListData","cdkDropListDropped"],["class","play-card","cdkDrag","",4,"ngFor","ngForOf"],[1,"economy","board-color"],[1,"draw","board-color"],[3,"click"],["cdkDropList","",1,"playable","example-list","board-color",3,"cdkDropListData","cdkDropListDropped"],["cdkDropList","",1,"discard","board-color",3,"cdkDropListData","cdkDropListDropped"],[1,"zone-header"],["class","play-card-d","cdkDrag","",4,"ngFor","ngForOf"],[1,"trash","board-color"],["cdkDrag","",1,"play-card"],["cdkDrag","",1,"play-card-d"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1),p._UZ(2,"app-card"),p.qZA(),p.TgZ(3,"div",2),p.NdJ("cdkDropListDropped",function(a){return r.drop(a)}),p.YNc(4,OW,2,1,"div",3),p.qZA(),p.TgZ(5,"div",4),p._uU(6,"ec"),p.qZA(),p.TgZ(7,"div",5)(8,"button",6),p.NdJ("click",function(){return r.draw()}),p._uU(9,"Draw a Card"),p.qZA()(),p.TgZ(10,"div",7),p.NdJ("cdkDropListDropped",function(a){return r.drop(a)}),p.YNc(11,NW,2,1,"div",3),p.qZA(),p.TgZ(12,"div",8),p.NdJ("cdkDropListDropped",function(a){return r.drop(a)}),p.TgZ(13,"p",9),p._uU(14,"Discard"),p.qZA(),p.YNc(15,LW,2,1,"div",10),p.qZA(),p.TgZ(16,"div",11),p._uU(17,"tr"),p.qZA()()),2&t&&(p.xp6(3),p.Q6J("cdkDropListData",r.playing),p.xp6(1),p.Q6J("ngForOf",r.playing),p.xp6(6),p.Q6J("cdkDropListData",r.hand),p.xp6(1),p.Q6J("ngForOf",r.hand),p.xp6(1),p.Q6J("cdkDropListData",r.discard),p.xp6(3),p.Q6J("ngForOf",r.discard))},dependencies:[Yr,SW,DW,MW,PW],styles:[".container[_ngcontent-%COMP%]{position:fixed;display:flex;justify-content:space-around;flex-wrap:wrap;width:75%;height:65%}.play-card[_ngcontent-%COMP%]{background-color:#a44fb7;min-width:70px;min-height:90px;border:2px solid #000;margin:1px;box-sizing:border-box}.current-card[_ngcontent-%COMP%]{flex-basis:20%}.playing-field[_ngcontent-%COMP%]{flex-basis:60%}.economy[_ngcontent-%COMP%], .draw[_ngcontent-%COMP%]{flex-basis:20%;border:solid 1px #ccc}.discard[_ngcontent-%COMP%]{flex-basis:15%;border:solid 1px #ccc;display:flex;flex-wrap:wrap;align-content:flex-start;box-sizing:border-box;overflow-y:auto}.discard[_ngcontent-%COMP%]   .zone-header[_ngcontent-%COMP%]{height:10px;font-size:15px;width:100%}.play-card-d[_ngcontent-%COMP%]{height:50px;width:40px;background-color:#a44fb7;border:2px solid #000;margin:1px;font-size:10px}.trash[_ngcontent-%COMP%]{flex-basis:5%;border:solid 1px #ccc;box-sizing:border-box}.example-list[_ngcontent-%COMP%]{display:flex;height:50%;border:solid 1px #ccc;border-radius:4px;overflow:hidden;flex-wrap:wrap;align-content:flex-start;box-sizing:border-box;overflow-y:auto}.playable[_ngcontent-%COMP%]{flex-basis:60%;overflow-y:auto}"]}),n})(),UW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-ship-parts"]],decls:13,vars:0,consts:[[1,"ship-parts"],[1,"ship-part"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1),p._uU(2,"part 1"),p.qZA(),p.TgZ(3,"div",1),p._uU(4,"part 2"),p.qZA(),p.TgZ(5,"div",1),p._uU(6,"part 3"),p.qZA(),p.TgZ(7,"div",1),p._uU(8,"part 4"),p.qZA(),p.TgZ(9,"div",1),p._uU(10,"part 5"),p.qZA(),p.TgZ(11,"div",1),p._uU(12,"part 6"),p.qZA()())},styles:[".ship-parts[_ngcontent-%COMP%]{display:flex;width:200px;height:200px;justify-content:space-between;flex-wrap:wrap}.ship-part[_ngcontent-%COMP%]{border:1px solid #000;width:60px;flex-grow:1;margin:4px}"]}),n})(),VW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-crewmates"]],decls:7,vars:0,consts:[[1,"crewmates"],[1,"crew"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1),p._uU(2,"crew 1"),p.qZA(),p.TgZ(3,"div",1),p._uU(4,"crew 2"),p.qZA(),p.TgZ(5,"div",1),p._uU(6,"crew 3"),p.qZA()())},styles:[".crewmates[_ngcontent-%COMP%]{display:flex;width:200px;height:150px;justify-content:space-between}.crew[_ngcontent-%COMP%]{border:1px solid #000;flex-grow:1;margin:4px}"]}),n})(),BW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-coins"]],decls:5,vars:0,consts:[["coins",""]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div"),p._uU(2,"Add subtract 3 coins"),p.qZA(),p.TgZ(3,"div"),p._uU(4,"Add subtract 1 coins"),p.qZA()())}}),n})(),jW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-shop"]],decls:6,vars:0,consts:[[1,"shop"]],template:function(t,r){1&t&&(p.TgZ(0,"p"),p._uU(1,"shop"),p.qZA(),p.TgZ(2,"div",0),p._UZ(3,"app-crewmates")(4,"app-ship-parts")(5,"app-coins"),p.qZA())},dependencies:[UW,VW,BW],styles:[".shop[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}"]}),n})(),$W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-leader-board"]],decls:23,vars:0,consts:[[1,"leader"],[1,"prestiege"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"h5",1),p._uU(2,"Prestige"),p.qZA(),p.TgZ(3,"div",1),p._uU(4,"10"),p.qZA(),p.TgZ(5,"div",1),p._uU(6,"9"),p.qZA(),p.TgZ(7,"div",1),p._uU(8,"8"),p.qZA(),p.TgZ(9,"div",1),p._uU(10,"7"),p.qZA(),p.TgZ(11,"div",1),p._uU(12,"6"),p.qZA(),p.TgZ(13,"div",1),p._uU(14,"5"),p.qZA(),p.TgZ(15,"div",1),p._uU(16,"4"),p.qZA(),p.TgZ(17,"div",1),p._uU(18,"3"),p.qZA(),p.TgZ(19,"div",1),p._uU(20,"2"),p.qZA(),p.TgZ(21,"div",1),p._uU(22,"1"),p.qZA()())},styles:[".leader[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:100%}.prestiege[_ngcontent-%COMP%]{flex-grow:1;border:1px solid #000;text-align:center}"]}),n})(),HW=(()=>{class n{constructor(){this.mission={id:0,path:"obj/"}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-mission"]],inputs:{mission:"mission"},decls:4,vars:2,template:function(t,r){1&t&&(p.TgZ(0,"p"),p._uU(1),p.qZA(),p.TgZ(2,"p"),p._uU(3),p.qZA()),2&t&&(p.xp6(1),p.Oqu(r.mission.id),p.xp6(2),p.Oqu(r.mission.path))}}),n})(),zW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-objectives"]],decls:2,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"div"),p._uU(1,"Draw objective "),p.qZA())}}),n})();const GW=function(n,e){return{id:n,path:e}};function WW(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"app-mission",2),p.NdJ("click",function(){const a=p.CHM(t).index,c=p.oxw();return p.KtG(c.mission_selected(a))}),p.qZA()}2&n&&p.Q6J("mission",p.WLB(1,GW,e.index,e.$implicit))}let qW=(()=>{class n{constructor(){this.mission_clicked=new p.vpe,this.missions=["mission","mission","mission","mission","mission","mission","mission","mission"]}mission_selected(t){console.log("in mission comp"),this.mission_clicked.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-missions"]],outputs:{mission_clicked:"mission_clicked"},decls:3,vars:1,consts:[[1,"missions"],["class","mission",3,"mission","click",4,"ngFor","ngForOf"],[1,"mission",3,"mission","click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.YNc(1,WW,1,4,"app-mission",1),p._UZ(2,"app-objectives"),p.qZA()),2&t&&(p.xp6(1),p.Q6J("ngForOf",r.missions))},dependencies:[Yr,HW,zW],styles:[".missions[_ngcontent-%COMP%]{width:200px;display:flex;flex-wrap:wrap;justify-content:space-between}.mission[_ngcontent-%COMP%]{width:80px;height:100px;border:1px solid #000;padding:1px;margin:1px;flex-grow:1}"]}),n})();function KW(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",14)(1,"div",15),p._UZ(2,"app-shop"),p.qZA(),p.TgZ(3,"div",16),p._UZ(4,"app-leader-board"),p.qZA(),p.TgZ(5,"div",17)(6,"app-missions",18),p.NdJ("mission_clicked",function(i){p.CHM(t);const a=p.oxw();return p.KtG(a.mission_selected(i))}),p.qZA()()()}}function ZW(n,e){if(1&n&&(p.TgZ(0,"div",19),p._UZ(1,"app-player",20),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.Q6J("player",t.selected_player)}}function YW(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",21)(1,"button",22),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.changeState("board"))}),p._uU(2,"Back To Board"),p.qZA(),p._UZ(3,"img",23),p.qZA()}}let QW=(()=>{class n{constructor(){this.service=(0,p.f3M)(wG),this.pserv=(0,p.f3M)(eF),this.selected_player="",this.current_mission=0,this.state="board"}select(t){this.state="player_selected"==this.state?"board":"player_selected",this.selected_player=t,console.log(this.state)}mission_selected(t){this.state="missions",this.current_mission=t,console.log(t)}changeState(t){this.state=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-board"]],decls:19,vars:3,consts:[[1,"board"],[1,"p1"],[1,"b1",3,"click"],[1,"p2"],[1,"b2",3,"click"],[1,"p3"],[1,"b3",3,"click"],[1,"p4"],[1,"b4",3,"click"],[1,"p5"],[1,"b5",3,"click"],["class","center-board",4,"ngIf"],["class","players-ship",4,"ngIf"],["class","players-board",4,"ngIf"],[1,"center-board"],[1,"shop"],[1,"prestige"],[1,"missions"],[3,"mission_clicked"],[1,"players-ship"],[3,"player"],[1,"players-board"],[1,"back",3,"click"],["src","../../../../../assets/cards/missions/mission.png","alt","mission card","width","300","height","400",1,"card"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"button",2),p.NdJ("click",function(){return r.select("p1")}),p._uU(3,"P1"),p.qZA()(),p.TgZ(4,"div",3)(5,"button",4),p.NdJ("click",function(){return r.select("p2")}),p._uU(6,"P2"),p.qZA()(),p.TgZ(7,"div",5)(8,"button",6),p.NdJ("click",function(){return r.select("p3")}),p._uU(9,"P3"),p.qZA()(),p.TgZ(10,"div",7)(11,"button",8),p.NdJ("click",function(){return r.select("p4")}),p._uU(12,"P4"),p.qZA()(),p.TgZ(13,"div",9)(14,"button",10),p.NdJ("click",function(){return r.select("p5")}),p._uU(15,"P5"),p.qZA()(),p.YNc(16,KW,7,0,"div",11),p.YNc(17,ZW,2,1,"div",12),p.YNc(18,YW,4,0,"div",13),p.qZA()),2&t&&(p.xp6(16),p.Q6J("ngIf","board"===r.state),p.xp6(1),p.Q6J("ngIf","player_selected"===r.state),p.xp6(1),p.Q6J("ngIf","missions"===r.state))},dependencies:[io,FW,jW,$W,qW],styles:[".board[_ngcontent-%COMP%]{position:absolute;top:50px;bottom:0;width:100%;flex-shrink:0;background-color:#333;overflow:hidden}.p1[_ngcontent-%COMP%]{width:128px;height:49px;position:fixed;top:10%;left:10%}.p1[_ngcontent-%COMP%]   .b1[_ngcontent-%COMP%]{width:100%;height:100%}.p2[_ngcontent-%COMP%]{width:128px;height:49px;position:fixed;top:10%;right:15%}.p2[_ngcontent-%COMP%]   .b2[_ngcontent-%COMP%]{width:100%;height:100%}.p3[_ngcontent-%COMP%]{width:128px;height:49px;transform:rotate(90deg);position:fixed;top:50%;right:0%}.p3[_ngcontent-%COMP%]   .b3[_ngcontent-%COMP%]{width:100%;height:100%}.p4[_ngcontent-%COMP%]{width:128px;height:49px;position:fixed;top:90%;left:10%}.p4[_ngcontent-%COMP%]   .b4[_ngcontent-%COMP%]{width:100%;height:100%}.p5[_ngcontent-%COMP%]{width:128px;height:49px;position:fixed;top:90%;right:15%}.p5[_ngcontent-%COMP%]   .b5[_ngcontent-%COMP%]{width:100%;height:100%}.center-board[_ngcontent-%COMP%]{background-color:#999;position:fixed;display:flex;justify-content:space-between;top:20%;left:10%;width:75%;height:65%}.players-ship[_ngcontent-%COMP%]{background-color:#999;position:fixed;top:20%;left:10%;width:75%;height:65%}.shop[_ngcontent-%COMP%], .prestige[_ngcontent-%COMP%], .missions[_ngcontent-%COMP%]{position:relative;background-color:#ddd}.players-board[_ngcontent-%COMP%]{background-color:#999;position:relative;display:flex;flex-direction:column;justify-content:left;top:20%;left:10%;width:75%;height:65%}"]}),n})();const XW=[{path:"",component:yG},{path:"about",component:gG},{path:"contact",component:mG},{path:"games/Moon-Rakers",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-moon-rakers"]],decls:4,vars:0,consts:[["draggable","false",1,"mr"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"p"),p._uU(2,"moon-rakers"),p.qZA(),p._UZ(3,"app-board"),p.qZA())},dependencies:[QW],styles:[".mr[_ngcontent-%COMP%]{height:100%;width:100%;overflow:hidden}"]}),n})()},{path:"**",redirectTo:"",pathMatch:"full"}];let JW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[QL.forRoot(XW),QL]}),n})(),e3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[pG]}),n.\u0275inj=p.cJS({imports:[Ka,JW,on.hO.initializeApp(Qa_firebase),iA,z2,O$,kW]}),n})();Ud().bootstrapModule(e3).catch(n=>console.error(n))},5867:(pt,Te,L)=>{L.d(Te,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=L(9681);(0,p.registerVersion)("firebase","9.9.1","app")},127:(pt,Te,L)=>{L.d(Te,{Z:()=>p.Z});var p=L(3942);p.Z.registerVersion("firebase","9.9.1","app-compat")},1451:(pt,Te,L)=>{L.r(Te);var p=L(5861),te=L(3942),F=L(2090),ce=L(9681),se=L(7582),ie=L(1877),Ee=L(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},J_EMAIL_SIGNIN="EMAIL_SIGNIN",J_PASSWORD_RESET="PASSWORD_RESET",J_RECOVER_EMAIL="RECOVER_EMAIL",J_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",J_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",J_VERIFY_EMAIL="VERIFY_EMAIL";const Ke=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},lt=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xe=new ie.Yd("@firebase/auth");function $e(y,...f){xe.logLevel<=ie.in.ERROR&&xe.error(`Auth (${ce.SDK_VERSION}): ${y}`,...f)}function Ae(y,...f){throw Ve(y,...f)}function De(y,...f){return Ve(y,...f)}function Oe(y,f,m){const E=Object.assign(Object.assign({},lt()),{[f]:m});return new F.LL("auth","Firebase",E).create(f,{appName:y.name})}function ze(y,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ae(y,"argument-error"),Oe(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(y,...f){if("string"!=typeof y){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return ve.create(y,...f)}function z(y,f,...m){if(!y)throw Ve(f,...m)}function be(y){const f="INTERNAL ASSERTION FAILED: "+y;throw $e(f),new Error(f)}function Ge(y,f){y||be(f)}const Je=new Map;function gt(y){Ge(y instanceof Function,"Expected a class definition");let f=Je.get(y);return f?(Ge(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Je.set(y,f),f)}function tr(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function zn(){return"http:"===wi()||"https:"===wi()}function wi(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class he{constructor(f,m){this.shortDelay=f,this.longDelay=m,Ge(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function oe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(zn()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function re(y,f){Ge(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class He{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Be={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vt=new he(3e4,6e4);function Qe(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Bt(y,f,m,E){return It.apply(this,arguments)}function It(){return(It=(0,p.Z)(function*(y,f,m,E,x={}){return jt(y,x,(0,p.Z)(function*(){let P={},Q={};E&&("GET"===f?Q=E:P={body:JSON.stringify(E)});const le=(0,F.xO)(Object.assign({key:y.config.apiKey},Q)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),He.fetch()(nr(y,y.config.apiHost,m,le),Object.assign({method:f,headers:Ue,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function jt(y,f,m){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,p.Z)(function*(y,f,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Be),f);try{const x=new Dn(y),P=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const Q=yield P.json();if("needConfirmation"in Q)throw On(y,"account-exists-with-different-credential",Q);if(P.ok&&!("errorMessage"in Q))return Q;{const le=P.ok?Q.errorMessage:Q.error.message,[Ue,rt]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw On(y,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Ue)throw On(y,"email-already-in-use",Q);if("USER_DISABLED"===Ue)throw On(y,"user-disabled",Q);const Tt=E[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw Oe(y,Tt,rt);Ae(y,Tt)}}catch(x){if(x instanceof F.ZR)throw x;Ae(y,"network-request-failed")}})).apply(this,arguments)}function Zt(y,f,m,E){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,p.Z)(function*(y,f,m,E,x={}){const P=yield Bt(y,f,m,E,x);return"mfaPendingCredential"in P&&Ae(y,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function nr(y,f,m,E){const x=`${f}${m}?${E}`;return y.config.emulator?re(y.config,x):`${y.config.apiScheme}://${x}`}class Dn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(De(this.auth,"network-request-failed")),vt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function On(y,f,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const x=De(y,f,E);return x.customData._tokenResponse=m,x}function Tn(){return(Tn=(0,p.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Ei(){return(Ei=(0,p.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function An(){return(An=(0,p.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function vr(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function fn(){return(fn=(0,p.Z)(function*(y,f=!1){const m=(0,F.m9)(y),E=yield m.getIdToken(f),x=Ct(E);z(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,Q=P?.sign_in_provider;return{claims:x,token:E,authTime:vr(Et(x.auth_time)),issuedAtTime:vr(Et(x.iat)),expirationTime:vr(Et(x.exp)),signInProvider:Q||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Et(y){return 1e3*Number(y)}function Ct(y){var f;const[m,E,x]=y.split(".");if(void 0===m||void 0===E||void 0===x)return $e("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,F.tV)(E);return P?JSON.parse(P):($e("Failed to decode base64 JWT payload"),null)}catch(P){return $e("Caught error parsing JWT payload as JSON",null===(f=P)||void 0===f?void 0:f.toString()),null}}function Vn(y,f){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,p.Z)(function*(y,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof F.ZR&&function rs({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}class cr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,p.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class Vo{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=vr(this.lastLoginAt),this.creationTime=vr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rn(y){return Zr.apply(this,arguments)}function Zr(){return Zr=(0,p.Z)(function*(y){var f;const m=y.auth,E=yield y.getIdToken(),x=yield Vn(y,function ns(y,f){return An.apply(this,arguments)}(m,{idToken:E}));z(x?.users.length,m,"internal-error");const P=x.users[0];y._notifyReloadListener(P);const Q=null!==(f=P.providerUserInfo)&&void 0!==f&&f.length?function $(y){return y.map(f=>{var{providerId:m}=f,E=(0,se._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(P.providerUserInfo):[],le=function H(y,f){return[...y.filter(E=>!f.some(x=>x.providerId===E.providerId)),...f]}(y.providerData,Q),Tt=!!y.isAnonymous&&!(y.email&&P.passwordHash||le?.length),bt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:le,metadata:new Vo(P.createdAt,P.lastLoginAt),isAnonymous:Tt};Object.assign(y,bt)}),Zr.apply(this,arguments)}function X(){return(X=(0,p.Z)(function*(y){const f=(0,F.m9)(y);yield rn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Y(){return(Y=(0,p.Z)(function*(y,f){const m=yield jt(y,{},(0,p.Z)(function*(){const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:x,apiKey:P}=y.config,Q=nr(y,x,"/v1/token",`key=${P}`),le=yield y._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",He.fetch()(Q,{method:"POST",headers:le,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class ke{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){z(f.idToken,"internal-error"),z(typeof f.idToken<"u","internal-error"),z(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Ii(y){const f=Ct(y);return z(f,"internal-error"),z(typeof f.exp<"u","internal-error"),z(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,p.Z)(function*(){return z(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,p.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:Q}=yield function K(y,f){return Y.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(x,P,Number(Q))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:x,expirationTime:P}=m,Q=new ke;return E&&(z("string"==typeof E,"internal-error",{appName:f}),Q.refreshToken=E),x&&(z("string"==typeof x,"internal-error",{appName:f}),Q.accessToken=x),P&&(z("number"==typeof P,"internal-error",{appName:f}),Q.expirationTime=P),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new ke,this.toJSON())}_performRefresh(){return be("not implemented")}}function qe(y,f){z("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class yt{constructor(f){var{uid:m,auth:E,stsTokenManager:x}=f,P=(0,se._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Vo(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const E=yield Vn(m,m.stsTokenManager.getToken(m.auth,f));return z(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function dn(y){return fn.apply(this,arguments)}(this,f)}reload(){return function Wt(y){return X.apply(this,arguments)}(this)}_assign(f){this!==f&&(z(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new yt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,p.Z)(function*(){let x=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),x=!0),m&&(yield rn(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield Vn(f,function Kr(y,f){return Tn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,x,P,Q,le,Ue,rt,Tt;const bt=null!==(E=m.displayName)&&void 0!==E?E:void 0,gr=null!==(x=m.email)&&void 0!==x?x:void 0,$s=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,ih=null!==(Q=m.photoURL)&&void 0!==Q?Q:void 0,Co=null!==(le=m.tenantId)&&void 0!==le?le:void 0,Vt=null!==(Ue=m._redirectEventId)&&void 0!==Ue?Ue:void 0,Cu=null!==(rt=m.createdAt)&&void 0!==rt?rt:void 0,Du=null!==(Tt=m.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:sh,emailVerified:xi,isAnonymous:Mi,providerData:Ar,stsTokenManager:Zf}=m;z(sh&&Zf,f,"internal-error");const si=ke.fromJSON(this.name,Zf);z("string"==typeof sh,f,"internal-error"),qe(bt,f.name),qe(gr,f.name),z("boolean"==typeof xi,f,"internal-error"),z("boolean"==typeof Mi,f,"internal-error"),qe($s,f.name),qe(ih,f.name),qe(Co,f.name),qe(Vt,f.name),qe(Cu,f.name),qe(Du,f.name);const oh=new yt({uid:sh,auth:f,email:gr,emailVerified:xi,displayName:bt,isAnonymous:Mi,photoURL:ih,phoneNumber:$s,tenantId:Co,stsTokenManager:si,createdAt:Cu,lastLoginAt:Du});return Ar&&Array.isArray(Ar)&&(oh.providerData=Ar.map(hm=>Object.assign({},hm))),Vt&&(oh._redirectEventId=Vt),oh}static _fromIdTokenResponse(f,m,E=!1){return(0,p.Z)(function*(){const x=new ke;x.updateFromServerResponse(m);const P=new yt({uid:m.localId,auth:f,stsTokenManager:x,isAnonymous:E});return yield rn(P),P})()}}const sn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,E){var x=this;return(0,p.Z)(function*(){x.storage[m]=E})()}_get(m){var E=this;return(0,p.Z)(function*(){const x=E.storage[m];return void 0===x?null:x})()}_remove(m){var E=this;return(0,p.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function gn(y,f,m){return`firebase:${y}:${f}:${m}`}class xt{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:x,name:P}=this.auth;this.fullUserKey=gn(this.userKey,x.apiKey,P),this.fullPersistenceKey=gn("persistence",x.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?yt._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,p.Z)(function*(){if(!m.length)return new xt(gt(sn),f,E);const x=(yield Promise.all(m.map(function(){var rt=(0,p.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let P=x[0]||gt(sn);const Q=gn(E,f.config.apiKey,f.name);let le=null;for(const rt of m)try{const Tt=yield rt._get(Q);if(Tt){const bt=yt._fromJSON(f,Tt);rt!==P&&(le=bt),P=rt;break}}catch{}const Ue=x.filter(rt=>rt._shouldAllowMigration);return P._shouldAllowMigration&&Ue.length?(P=Ue[0],le&&(yield P._set(Q,le.toJSON())),yield Promise.all(m.map(function(){var rt=(0,p.Z)(function*(Tt){if(Tt!==P)try{yield Tt._remove(Q)}catch{}});return function(Tt){return rt.apply(this,arguments)}}())),new xt(P,f,E)):new xt(P,f,E)})()}}function Bn(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(_l(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(rr(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Bo(f))return"Blackberry";if(ur(f))return"Webos";if(qt(f))return"Safari";if((f.includes("chrome/")||xs(f))&&!f.includes("edge/"))return"Chrome";if($i(f))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function rr(y=(0,F.z$)()){return/firefox\//i.test(y)}function qt(y=(0,F.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function xs(y=(0,F.z$)()){return/crios\//i.test(y)}function _l(y=(0,F.z$)()){return/iemobile/i.test(y)}function $i(y=(0,F.z$)()){return/android/i.test(y)}function Bo(y=(0,F.z$)()){return/blackberry/i.test(y)}function ur(y=(0,F.z$)()){return/webos/i.test(y)}function Hi(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function ff(y=(0,F.z$)()){return Hi(y)||$i(y)||ur(y)||Bo(y)||/windows phone/i.test(y)||_l(y)}function $o(y,f=[]){let m;switch(y){case"Browser":m=Bn((0,F.z$)());break;case"Worker":m=`${Bn((0,F.z$)())}-${y}`;break;default:m=y}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ce.SDK_VERSION}/${E}`}class _d{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const E=P=>new Promise((Q,le)=>{try{Q(f(P))}catch(Ue){le(Ue)}});E.onAbort=m,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){var E;if(m.auth.currentUser===f)return;const x=[];try{for(const P of m.queue)yield P(f),P.onAbort&&x.push(P.onAbort)}catch(P){x.reverse();for(const Q of x)try{Q()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=P)||void 0===E?void 0:E.message})}})()}}class yd{constructor(f,m,E){this.app=f,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xc(this),this.idTokenSubscription=new xc(this),this.beforeStateQueue=new _d(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=gt(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var x,P;if(!E._deleted&&(E.persistenceManager=yield xt.create(E,f),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var E;const x=yield m.assertedPersistence.getCurrentUser();let P=x,Q=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const le=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Ue=P?._redirectEventId,rt=yield m.tryRedirectSignIn(f);(!le||le===Ue)&&rt?.user&&(P=rt.user,Q=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(Q)try{yield m.beforeStateQueue.runMiddleware(P)}catch(le){P=x,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(le))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return z(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){var E;try{yield rn(f)}catch(x){if("auth/network-request-failed"!==(null===(E=x)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function pe(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const E=f?(0,F.m9)(f):null;return E&&z(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f,m=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return f&&z(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(gt(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,p.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(m);return null===f?x.removeCurrentUser():x.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&gt(f)||m._popupRedirectResolver;z(E,m,"argument-error"),m.redirectPersistenceManager=yield xt.create(m,[gt(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var E,x;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,x){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return z(Q,this,"internal-error"),Q.then(()=>P(this.currentUser)),"function"==typeof m?f.addObserver(m,E,x):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=$o(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const x=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function Ln(y){return(0,F.m9)(y)}class xc{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(m=>this.observer=m)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Gn(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function is(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class ro{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return be("not implemented")}_getIdTokenResponse(f){return be("not implemented")}_linkToIdToken(f,m){return be("not implemented")}_getReauthenticationResolver(f){return be("not implemented")}}function Er(y,f){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,p.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:resetPassword",Qe(y,f))})).apply(this,arguments)}function ui(y,f){return tt.apply(this,arguments)}function tt(){return(tt=(0,p.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:update",Qe(y,f))})).apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(y,f){return Zt(y,"POST","/v1/accounts:signInWithPassword",Qe(y,f))})).apply(this,arguments)}function Wn(y,f){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:sendOobCode",Qe(y,f))})).apply(this,arguments)}function zo(){return(zo=(0,p.Z)(function*(y,f){return Wn(y,f)})).apply(this,arguments)}function Ot(){return(Ot=(0,p.Z)(function*(y,f){return Wn(y,f)})).apply(this,arguments)}function Ms(){return(Ms=(0,p.Z)(function*(y,f){return Wn(y,f)})).apply(this,arguments)}function bi(){return(bi=(0,p.Z)(function*(y,f){return Wn(y,f)})).apply(this,arguments)}function Go(){return(Go=(0,p.Z)(function*(y,f){return Zt(y,"POST","/v1/accounts:signInWithEmailLink",Qe(y,f))})).apply(this,arguments)}function Ci(){return(Ci=(0,p.Z)(function*(y,f){return Zt(y,"POST","/v1/accounts:signInWithEmailLink",Qe(y,f))})).apply(this,arguments)}class ks extends ro{constructor(f,m,E,x=null){super("password",E),this._email=f,this._password=m,this._tenantId=x}static _fromEmailAndPassword(f,m){return new ks(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new ks(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function kr(y,f){return ss.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Ir(y,f){return Go.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ae(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return ui(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function so(y,f){return Ci.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:Ae(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function os(y,f){return hn.apply(this,arguments)}function hn(){return(hn=(0,p.Z)(function*(y,f){return Zt(y,"POST","/v1/accounts:signInWithIdp",Qe(y,f))})).apply(this,arguments)}class di extends ro{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new di(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ae("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:x}=m,P=(0,se._T)(m,["providerId","signInMethod"]);if(!E||!x)return null;const Q=new di(E,x);return Q.idToken=P.idToken||void 0,Q.accessToken=P.accessToken||void 0,Q.secret=P.secret,Q.nonce=P.nonce,Q.pendingToken=P.pendingToken||null,Q}_getIdTokenResponse(f){return os(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,os(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,os(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,F.xO)(m)}return f}}function Wo(){return(Wo=(0,p.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:sendVerificationCode",Qe(y,f))})).apply(this,arguments)}function Pr(){return(Pr=(0,p.Z)(function*(y,f){return Zt(y,"POST","/v1/accounts:signInWithPhoneNumber",Qe(y,f))})).apply(this,arguments)}function wd(){return(wd=(0,p.Z)(function*(y,f){const m=yield Zt(y,"POST","/v1/accounts:signInWithPhoneNumber",Qe(y,f));if(m.temporaryProof)throw On(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Qr={USER_NOT_FOUND:"user-not-found"};function Sa(){return(Sa=(0,p.Z)(function*(y,f){return Zt(y,"POST","/v1/accounts:signInWithPhoneNumber",Qe(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Qr)})).apply(this,arguments)}class Ti extends ro{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Ti({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Ti({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function oo(y,f){return Pr.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function br(y,f){return wd.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Di(y,f){return Sa.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:x}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:x}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:P}=f;return E||m||x||P?new Ti({verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:P}):null}}class Aa{constructor(f){var m,E,x,P,Q,le;const Ue=(0,F.zd)((0,F.pd)(f)),rt=null!==(m=Ue.apiKey)&&void 0!==m?m:null,Tt=null!==(E=Ue.oobCode)&&void 0!==E?E:null,bt=function Pc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Ue.mode)&&void 0!==x?x:null);z(rt&&Tt&&bt,"argument-error"),this.apiKey=rt,this.operation=bt,this.code=Tt,this.continueUrl=null!==(P=Ue.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Q=Ue.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(le=Ue.tenantId)&&void 0!==le?le:null}static parseLink(f){const m=function Xr(y){const f=(0,F.zd)((0,F.pd)(y)).link,m=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||m||f||y}(f);try{return new Aa(m)}catch{return null}}}let Oc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return ks._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const x=Aa.parseLink(E);return z(x,"argument-error"),ks._fromEmailAndCode(m,x.code,x.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class as{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class qo extends as{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ra extends qo{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return z("providerId"in m&&"signInMethod"in m,"argument-error"),di._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return z(f.idToken||f.accessToken,"argument-error"),di._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ra.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ra.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:P,nonce:Q,providerId:le}=f;if(!E&&!x&&!m&&!P||!le)return null;try{return new Ra(le)._credential({idToken:m,accessToken:E,nonce:Q,pendingToken:P})}catch{return null}}}let Nc=(()=>{class y extends qo{constructor(){super("facebook.com")}static credential(m){return di._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),gf=(()=>{class y extends qo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return di._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:x}=m;if(!E&&!x)return null;try{return y.credential(E,x)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),mf=(()=>{class y extends qo{constructor(){super("github.com")}static credential(m){return di._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ko extends ro{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return os(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,os(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,os(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:x,pendingToken:P}=m;return E&&x&&P&&E===x?new Ko(E,P):null}static _create(f,m){return new Ko(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Gi extends as{constructor(f){z(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Gi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Gi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Ko.fromJSON(f);return z(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return Ko._create(E,m)}catch{return null}}}let $g=(()=>{class y extends qo{constructor(){super("twitter.com")}static credential(m,E){return di._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=m;if(!E||!x)return null;try{return y.credential(E,x)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Lc(y,f){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,p.Z)(function*(y,f){return Zt(y,"POST","/v1/accounts:signUp",Qe(y,f))})).apply(this,arguments)}class Or{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,x=!1){return(0,p.Z)(function*(){const P=yield yt._fromIdTokenResponse(f,E,x),Q=Uc(E);return new Or({user:P,providerId:Q,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const x=Uc(E);return new Or({user:f,providerId:x,_tokenResponse:E,operationType:m})})()}}function Uc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Id(){return(Id=(0,p.Z)(function*(y){var f;const m=Ln(y);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Or({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Lc(m,{returnSecureToken:!0}),x=yield Or._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class yl extends F.ZR{constructor(f,m,E,x){var P;super(m.code,m.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,yl.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,x){return new yl(f,m,E,x)}}function lo(y,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?yl._fromErrorAndOperation(y,P,f,E):P})}function co(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Zo(){return Zo=(0,p.Z)(function*(y,f){const m=(0,F.m9)(y);yield uo(!0,m,f);const{providerUserInfo:E}=yield function _t(y,f){return Ei.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),x=co(E||[]);return m.providerData=m.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),Zo.apply(this,arguments)}function wl(y,f){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,p.Z)(function*(y,f,m=!1){const E=yield Vn(y,f._linkToIdToken(y.auth,yield y.getIdToken()),m);return Or._forOperation(y,"link",E)})).apply(this,arguments)}function uo(y,f,m){return xa.apply(this,arguments)}function xa(){return(xa=(0,p.Z)(function*(y,f,m){yield rn(f);const x=!1===y?"provider-already-linked":"no-such-provider";z(co(f.providerData).has(m)===y,f.auth,x)})).apply(this,arguments)}function bd(y,f){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,p.Z)(function*(y,f,m=!1){var E;const{auth:x}=y,P="reauthenticate";try{const Q=yield Vn(y,lo(x,P,f,y),m);z(Q.idToken,x,"internal-error");const le=Ct(Q.idToken);z(le,x,"internal-error");const{sub:Ue}=le;return z(y.uid===Ue,x,"user-mismatch"),Or._forOperation(y,P,Q)}catch(Q){throw"auth/user-not-found"===(null===(E=Q)||void 0===E?void 0:E.code)&&Ae(x,"user-mismatch"),Q}})).apply(this,arguments)}function Xo(y,f){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,p.Z)(function*(y,f,m=!1){const E="signIn",x=yield lo(y,E,f),P=yield Or._fromIdTokenResponse(y,E,x);return m||(yield y._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Fn(y,f){return El.apply(this,arguments)}function El(){return(El=(0,p.Z)(function*(y,f){return Xo(Ln(y),f)})).apply(this,arguments)}function jn(y,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,p.Z)(function*(y,f){const m=(0,F.m9)(y);return yield uo(!1,m,f.providerId),wl(m,f)})).apply(this,arguments)}function ho(y,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(y,f){return bd((0,F.m9)(y),f)})).apply(this,arguments)}function ea(){return(ea=(0,p.Z)(function*(y,f){return Zt(y,"POST","/v1/accounts:signInWithCustomToken",Qe(y,f))})).apply(this,arguments)}function Qn(){return Qn=(0,p.Z)(function*(y,f){const m=Ln(y),E=yield function Vc(y,f){return ea.apply(this,arguments)}(m,{token:f,returnSecureToken:!0}),x=yield Or._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(x.user),x}),Qn.apply(this,arguments)}class Ma{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?ta._fromServerResponse(f,m):Ae(f,"internal-error")}}class ta extends Ma{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new ta(m)}}function Il(y,f,m){var E;z((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),z(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(z(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(z(m.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function ka(){return ka=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y),x={requestType:"PASSWORD_RESET",email:f};m&&Il(E,x,m),yield function io(y,f){return Ot.apply(this,arguments)}(E,x)}),ka.apply(this,arguments)}function Rt(){return(Rt=(0,p.Z)(function*(y,f,m){yield Er((0,F.m9)(y),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Cd(){return Cd=(0,p.Z)(function*(y,f){yield function Pt(y,f){return En.apply(this,arguments)}((0,F.m9)(y),{oobCode:f})}),Cd.apply(this,arguments)}function Cl(y,f){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,p.Z)(function*(y,f){const m=(0,F.m9)(y),E=yield Er(m,{oobCode:f}),x=E.requestType;switch(z(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(E.mfaInfo,m,"internal-error");default:z(E.email,m,"internal-error")}let P=null;return E.mfaInfo&&(P=Ma._fromServerResponse(Ln(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function Dl(){return(Dl=(0,p.Z)(function*(y,f){const{data:m}=yield Cl((0,F.m9)(y),f);return m.email})).apply(this,arguments)}function $c(){return($c=(0,p.Z)(function*(y,f,m){const E=Ln(y),x=yield Lc(E,{returnSecureToken:!0,email:f,password:m}),P=yield Or._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function Hc(){return Hc=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y),x={requestType:"EMAIL_SIGNIN",email:f};z(m.handleCodeInApp,E,"argument-error"),m&&Il(E,x,m),yield function Mc(y,f){return Ms.apply(this,arguments)}(E,x)}),Hc.apply(this,arguments)}function Oa(){return(Oa=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y),x=Oc.credentialWithLink(f,m||tr());return z(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Fn(E,x)})).apply(this,arguments)}function ei(){return(ei=(0,p.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:createAuthUri",Qe(y,f))})).apply(this,arguments)}function Al(){return Al=(0,p.Z)(function*(y,f){const E={identifier:f,continueUri:zn()?tr():"http://localhost"},{signinMethods:x}=yield function Tl(y,f){return ei.apply(this,arguments)}((0,F.m9)(y),E);return x||[]}),Al.apply(this,arguments)}function zc(){return zc=(0,p.Z)(function*(y,f){const m=(0,F.m9)(y),x={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Il(m.auth,x,f);const{email:P}=yield function Rn(y,f){return zo.apply(this,arguments)}(m.auth,x);P!==y.email&&(yield y.reload())}),zc.apply(this,arguments)}function Xn(){return Xn=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};m&&Il(E.auth,P,m);const{email:Q}=yield function kc(y,f){return bi.apply(this,arguments)}(E.auth,P);Q!==y.email&&(yield y.reload())}),Xn.apply(this,arguments)}function Ps(){return(Ps=(0,p.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Wi(){return Wi=(0,p.Z)(function*(y,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,F.m9)(y),P={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Q=yield Vn(E,function ti(y,f){return Ps.apply(this,arguments)}(E.auth,P));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const le=E.providerData.find(({providerId:Ue})=>"password"===Ue);le&&(le.displayName=E.displayName,le.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)}),Wi.apply(this,arguments)}function Ad(y,f,m){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,p.Z)(function*(y,f,m){const{auth:E}=y,P={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(P.email=f),m&&(P.password=m);const Q=yield Vn(y,ui(E,P));yield y._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class cs{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class Rd extends cs{constructor(f,m,E,x){super(f,m,E),this.username=x}}class qc extends cs{constructor(f,m){super(f,"facebook.com",m)}}class xd extends Rd{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class yf extends cs{constructor(f,m){super(f,"google.com",m)}}class xl extends Rd{constructor(f,m,E){super(f,"twitter.com",m,E)}}function vf(y){const{user:f,_tokenResponse:m}=y;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Wc(y){var f,m;if(!y)return null;const{providerId:E}=y,x=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},P=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const Q=null===(m=null===(f=Ct(y.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Q)return new cs(P,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new qc(P,x);case"github.com":return new xd(P,x);case"google.com":return new yf(P,x);case"twitter.com":return new xl(P,x,y.screenName||null);case"custom":case"anonymous":return new cs(P,null);default:return new cs(P,E,x)}}(m)}class ra{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new ra("enroll",f)}static _fromMfaPendingCredential(f){return new ra("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return ra._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return ra._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Kc{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=Ln(f),x=m.customData._serverResponse,P=(x.mfaInfo||[]).map(le=>Ma._fromServerResponse(E,le));z(x.mfaPendingCredential,E,"internal-error");const Q=ra._fromMfaPendingCredential(x.mfaPendingCredential);return new Kc(Q,P,function(){var le=(0,p.Z)(function*(Ue){const rt=yield Ue._process(E,Q);delete x.mfaInfo,delete x.mfaPendingCredential;const Tt=Object.assign(Object.assign({},x),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(m.operationType){case"signIn":const bt=yield Or._fromIdTokenResponse(E,m.operationType,Tt);return yield E._updateCurrentUser(bt.user),bt;case"reauthenticate":return z(m.user,E,"internal-error"),Or._forOperation(m.user,m.operationType,Tt);default:Ae(E,"internal-error")}});return function(Ue){return le.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}class La{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Ma._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new La(f)}getSession(){var f=this;return(0,p.Z)(function*(){return ra._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var E=this;return(0,p.Z)(function*(){const x=f,P=yield E.getSession(),Q=yield Vn(E.user,x._process(E.user.auth,P,m));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){var E;const x="string"==typeof f?f:f.uid,P=yield m.user.getIdToken(),Q=yield Vn(m.user,function Gg(y,f){return Bt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Qe(y,f))}(m.user.auth,{idToken:P,mfaEnrollmentId:x}));m.enrolledFactors=m.enrolledFactors.filter(({uid:le})=>le!==x),yield m.user._updateTokensIfNecessary(Q);try{yield m.user.reload()}catch(le){if("auth/user-token-expired"!==(null===(E=le)||void 0===E?void 0:E.code))throw le}})()}}const go=new WeakMap,Os="__sak";class Fa{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Os,"1"),this.storage.removeItem(Os),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ml=(()=>{class y extends Fa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ua(){const y=(0,F.z$)();return qt(y)||Hi(y)}()&&function Rc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ff(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),P=this.localCache[E];x!==P&&m(E,P,x)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((le,Ue,rt)=>{this.notifyListeners(le,rt)});const x=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(x);if(m.newValue!==le)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!E)return}const P=()=>{const le=this.storage.getItem(x);!E&&this.localCache[x]===le||this.notifyListeners(x,le)},Q=this.storage.getItem(x);!function hf(){return(0,F.w1)()&&10===document.documentMode}()||Q===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const P of Array.from(x))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var x=()=>super._set,P=this;return(0,p.Z)(function*(){yield x().call(P,m,E),P.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,x=this;return(0,p.Z)(function*(){const P=yield E().call(x,m);return x.localCache[m]=JSON.stringify(P),P})()}_remove(m){var E=()=>super._remove,x=this;return(0,p.Z)(function*(){yield E().call(x,m),delete x.localCache[m]})()}}return y.type="LOCAL",y})(),mo=(()=>{class y extends Fa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let Ef=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(P=>P.isListeningto(m));if(E)return E;const x=new y(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,p.Z)(function*(){const x=m,{eventId:P,eventType:Q,data:le}=x.data,Ue=E.handlersMap[Q];if(!Ue?.size)return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:Q});const rt=Array.from(Ue).map(function(){var bt=(0,p.Z)(function*(gr){return gr(x.origin,le)});return function(gr){return bt.apply(this,arguments)}}()),Tt=yield function Od(y){return Promise.all(y.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(rt);x.ports[0].postMessage({status:"done",eventId:P,eventType:Q,response:Tt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function _o(y="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return y+m}class Va{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var x=this;return(0,p.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Q,le;return new Promise((Ue,rt)=>{const Tt=_o("",20);P.port1.start();const bt=setTimeout(()=>{rt(new Error("unsupported_event"))},E);le={messageChannel:P,onMessage(gr){const $s=gr;if($s.data.eventId===Tt)switch($s.data.status){case"ack":clearTimeout(bt),Q=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Ue($s.data.response);break;default:clearTimeout(bt),clearTimeout(Q),rt(new Error("invalid_response"))}}},x.handlers.add(le),P.port1.addEventListener("message",le.onMessage),x.target.postMessage({eventType:f,eventId:Tt,data:m},[P.port2])}).finally(()=>{le&&x.removeMessageHandler(le)})})()}}function xn(){return window}function us(){return typeof xn().WorkerGlobalScope<"u"&&"function"==typeof xn().importScripts}function sa(){return(sa=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const kl="firebaseLocalStorageDb",Pl=1,Ls="firebaseLocalStorage",oa="fbase_key";class aa{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function $a(y,f){return y.transaction([Ls],f?"readwrite":"readonly").objectStore(Ls)}function Ol(){const y=indexedDB.open(kl,Pl);return new Promise((f,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Ls,{keyPath:oa})}catch(x){m(x)}}),y.addEventListener("success",(0,p.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Ls)?f(E):(E.close(),yield function Ha(){const y=indexedDB.deleteDatabase(kl);return new aa(y).toPromise()}(),f(yield Ol()))}))})}function Cr(y,f,m){return za.apply(this,arguments)}function za(){return(za=(0,p.Z)(function*(y,f,m){const E=$a(y,!0).put({[oa]:f,value:m});return new aa(E).toPromise()})).apply(this,arguments)}function Fs(){return(Fs=(0,p.Z)(function*(y,f){const m=$a(y,!1).get(f),E=yield new aa(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ga(y,f){const m=$a(y,!0).delete(f);return new aa(m).toPromise()}const yo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield Ol()),m.db})()}_withRetries(m){var E=this;return(0,p.Z)(function*(){let x=0;for(;;)try{const P=yield E._openDb();return yield m(P)}catch(P){if(x++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return us()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=Ef._getInstance(function ja(){return us()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(x,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(x,P){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var E,x;if(m.activeServiceWorker=yield function ds(){return sa.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Va(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);P&&null!==(E=P[0])&&void 0!==E&&E.fulfilled&&null!==(x=P[0])&&void 0!==x&&x.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Yc(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Ol();return yield Cr(m,Os,"1"),yield Ga(m,Os),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var x=this;return(0,p.Z)(function*(){return x._withPendingWrite((0,p.Z)(function*(){return yield x._withRetries(P=>Cr(P,m,E)),x.localCache[m]=E,x.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,p.Z)(function*(){const x=yield E._withRetries(P=>function la(y,f){return Fs.apply(this,arguments)}(P,m));return E.localCache[m]=x,x})()}_remove(m){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(x=>Ga(x,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const E=yield m._withRetries(Q=>{const le=$a(Q,!1).getAll();return new aa(le).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:Q,value:le}of E)P.add(Q),JSON.stringify(m.localCache[Q])!==JSON.stringify(le)&&(m.notifyListeners(Q,le),x.push(Q));for(const Q of Object.keys(m.localCache))m.localCache[Q]&&!P.has(Q)&&(m.notifyListeners(Q,null),x.push(Q));return x})()}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const P of Array.from(x))P(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ll(){return(Ll=(0,p.Z)(function*(y){return(yield Bt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ki(y){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=f,E.onerror=x=>{const P=De("internal-error");P.customData=x,m(P)},E.type="text/javascript",E.charset="UTF-8",function vo(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(E)})}function Ld(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Si=1e12;class Wg{constructor(f){this.auth=f,this.counter=Si,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Fd(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||Si;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Si))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var E;return null===(E=m._widgets.get(f||Si))||void 0===E||E.execute(),""})()}}class Fd{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof f?document.getElementById(f):f;z(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ul(y){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ud=Ld("rcb"),Xc=new he(3e4,6e4);class fs{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=xn().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return z(function Ka(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(xn().grecaptcha):new Promise((E,x)=>{const P=xn().setTimeout(()=>{x(De(f,"network-request-failed"))},Xc.get());xn()[Ud]=()=>{xn().clearTimeout(P),delete xn()[Ud];const le=xn().grecaptcha;if(!le)return void x(De(f,"internal-error"));const Ue=le.render;le.render=(rt,Tt)=>{const bt=Ue(rt,Tt);return this.counter++,bt},this.hostLanguage=m,E(le)},Ki(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Ud,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),x(De(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=xn().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bl{load(f){return(0,p.Z)(function*(){return new Wg(f)})()}clearedOneInstance(){}}const Vd="recaptcha",If={theme:"light",type:"image"};class Za{constructor(f,m=Object.assign({},If),E){this.parameters=m,this.type=Vd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(E),this.isInvisible="invisible"===this.parameters.size,z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof f?document.getElementById(f):f;z(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bl:new fs,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(P=>{const Q=le=>{le&&(f.tokenChangeListeners.delete(Q),P(le))};f.tokenChangeListeners.add(Q),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=xn()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){z(zn()&&!us(),f.auth,"internal-error"),yield function bf(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function qi(y){return Ll.apply(this,arguments)}(f.auth);z(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jc{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Ti._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function eu(){return(eu=(0,p.Z)(function*(y,f,m){const E=Ln(y),x=yield Bd(E,f,(0,F.m9)(m));return new Jc(x,P=>Fn(E,P))})).apply(this,arguments)}function jl(){return(jl=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y);yield uo(!1,E,"phone");const x=yield Bd(E.auth,f,(0,F.m9)(m));return new Jc(x,P=>jn(E,P))})).apply(this,arguments)}function Df(){return(Df=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y),x=yield Bd(E.auth,f,(0,F.m9)(m));return new Jc(x,P=>ho(E,P))})).apply(this,arguments)}function Bd(y,f,m){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,p.Z)(function*(y,f,m){var E;const x=yield m.verify();try{let P;if(z("string"==typeof x,y,"argument-error"),z(m.type===Vd,y,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const Q=P.session;if("phoneNumber"in P)return z("enroll"===Q.type,y,"internal-error"),(yield function wf(y,f){return Bt(y,"POST","/v2/accounts/mfaEnrollment:start",Qe(y,f))}(y,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{z("signin"===Q.type,y,"internal-error");const le=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return z(le,y,"missing-multi-factor-info"),(yield function qa(y,f){return Bt(y,"POST","/v2/accounts/mfaSignIn:start",Qe(y,f))}(y,{mfaPendingCredential:Q.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function vd(y,f){return Wo.apply(this,arguments)}(y,{phoneNumber:P.phoneNumber,recaptchaToken:x});return Q}}finally{m._reset()}}),Tf.apply(this,arguments)}function Sf(){return(Sf=(0,p.Z)(function*(y,f){yield wl((0,F.m9)(y),f)})).apply(this,arguments)}let tu=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=Ln(m)}verifyPhoneNumber(m,E){return Bd(this.auth,m,(0,F.m9)(E))}static credential(m,E){return Ti._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:x}=m;return E&&x?Ti._fromTokenResponse(E,x):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function mn(y,f){return f?gt(f):(z(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Hl extends ro{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return os(f,this._buildIdpRequest())}_linkToIdToken(f,m){return os(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return os(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function zl(y){return Xo(y.auth,new Hl(y),y.bypassAuthState)}function nu(y){const{auth:f,user:m}=y;return z(m,f,"internal-error"),bd(m,new Hl(y),y.bypassAuthState)}function ni(y){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,p.Z)(function*(y){const{auth:f,user:m}=y;return z(m,f,"internal-error"),wl(m,new Hl(y),y.bypassAuthState)})).apply(this,arguments)}class Gl{constructor(f,m,E,x,P=!1){this.auth=f,this.resolver=E,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(E,x){f.pendingPromise={resolve:E,reject:x};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(E,x){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:P,tenantId:Q,error:le,type:Ue}=f;if(le)return void m.reject(le);const rt={auth:m.auth,requestUri:E,sessionId:x,tenantId:Q||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ue)(rt))}catch(Tt){m.reject(Tt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return zl;case"linkViaPopup":case"linkViaRedirect":return ni;case"reauthViaPopup":case"reauthViaRedirect":return nu;default:Ae(this.auth,"internal-error")}}resolve(f){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ya=new he(2e3,1e4);function Wl(){return(Wl=(0,p.Z)(function*(y,f,m){const E=Ln(y);ze(y,f,as);const x=mn(E,m);return new Qa(E,"signInViaPopup",f,x).executeNotNull()})).apply(this,arguments)}function Af(){return(Af=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y);ze(E.auth,f,as);const x=mn(E.auth,m);return new Qa(E.auth,"reauthViaPopup",f,x,E).executeNotNull()})).apply(this,arguments)}function Lr(){return(Lr=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y);ze(E.auth,f,as);const x=mn(E.auth,m);return new Qa(E.auth,"linkViaPopup",f,x,E).executeNotNull()})).apply(this,arguments)}let Qa=(()=>{class y extends Gl{constructor(m,E,x,P,Q){super(m,E,P,Q),this.provider=x,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const E=yield m.execute();return z(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,p.Z)(function*(){Ge(1===m.filter.length,"Popup operations only handle one event");const E=_o();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(De(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Ya.get())};m()}}return y.currentPopupAction=null,y})();const on="pendingRedirect",Yi=new Map;class fr extends Gl{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let E=Yi.get(m.auth._key());if(!E){try{const P=(yield function ua(y,f){return Gt.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(P)}catch(x){E=()=>Promise.reject(x)}Yi.set(m.auth._key(),E)}return m.bypassAuthState||Yi.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const x=yield E.auth._redirectUserForId(f.eventId);if(x)return E.user=x,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Gt(){return(Gt=(0,p.Z)(function*(y,f){const m=bn(f),E=Ai(y);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(m));return yield E._remove(m),x})).apply(this,arguments)}function at(y,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,p.Z)(function*(y,f){return Ai(y)._set(bn(f),"true")})).apply(this,arguments)}function ru(y,f){Yi.set(y._key(),f)}function Ai(y){return gt(y._redirectPersistence)}function bn(y){return gn(on,y.config.apiKey,y.name)}function Cn(y,f,m){return function _n(y,f,m){return D.apply(this,arguments)}(y,f,m)}function D(){return(D=(0,p.Z)(function*(y,f,m){const E=Ln(y);ze(y,f,as);const x=mn(E,m);return yield at(x,E),x._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function T(y,f,m){return function M(y,f,m){return V.apply(this,arguments)}(y,f,m)}function V(){return(V=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y);ze(E.auth,f,as);const x=mn(E.auth,m);yield at(x,E.auth);const P=yield ct(E);return x._openRedirect(E.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function ee(y,f,m){return function ae(y,f,m){return Me.apply(this,arguments)}(y,f,m)}function Me(){return(Me=(0,p.Z)(function*(y,f,m){const E=(0,F.m9)(y);ze(E.auth,f,as);const x=mn(E.auth,m);yield uo(!1,E,f.providerId),yield at(x,E.auth);const P=yield ct(E);return x._openRedirect(E.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function Ze(){return(Ze=(0,p.Z)(function*(y,f){return yield Ln(y)._initializationPromise,Dt(y,f,!1)})).apply(this,arguments)}function Dt(y,f){return At.apply(this,arguments)}function At(){return(At=(0,p.Z)(function*(y,f,m=!1){const E=Ln(y),x=mn(E,f),Q=yield new fr(E,x,m).execute();return Q&&!m&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,f)),Q})).apply(this,arguments)}function ct(y){return ue.apply(this,arguments)}function ue(){return(ue=(0,p.Z)(function*(y){const f=_o(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class N{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function jd(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Us(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!Us(f)){const x=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(De(this.auth,x))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dr(f))}saveEventToCache(f){this.cachedEventUids.add(Dr(f)),this.lastProcessedEventTime=Date.now()}}function Dr(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Us({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function da(y){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,p.Z)(function*(y,f={}){return Bt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Vs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ha=/^https?/;function fa(){return(fa=(0,p.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield da(y);for(const m of f)try{if($d(m))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function $d(y){const f=tr(),{protocol:m,hostname:E}=new URL(f);if(y.startsWith("chrome-extension://")){const Q=new URL(y);return""===Q.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Q.hostname===E}if(!ha.test(m))return!1;if(Vs.test(y))return E===y;const x=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const iu=new he(3e4,6e4);function Rf(){const y=xn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let Bs=null;const By=new he(5e3,15e3),Hd="__/auth/iframe",Tr="emulator/auth/iframe",zd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wo(y){const f=y.config;z(f.authDomain,y,"auth-domain-config-required");const m=f.emulator?re(f,Tr):`https://${y.config.authDomain}/${Hd}`,E={apiKey:f.apiKey,appName:y.name,v:ce.SDK_VERSION},x=Zg.get(y.config.apiHost);x&&(E.eid=x);const P=y._getFrameworks();return P.length&&(E.fw=P.join(",")),`${m}?${(0,F.xO)(E).slice(1)}`}function xf(){return xf=(0,p.Z)(function*(y){const f=yield function Kl(y){return Bs=Bs||function Kg(y){return new Promise((f,m)=>{var E,x,P;function Q(){Rf(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Rf(),m(De(y,"network-request-failed"))},timeout:iu.get()})}if(null!==(x=null===(E=xn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)f(gapi.iframes.getContext());else{if(null===(P=xn().gapi)||void 0===P||!P.load){const le=Ld("iframefcb");return xn()[le]=()=>{gapi.load?Q():m(De(y,"network-request-failed"))},Ki(`https://apis.google.com/js/api.js?onload=${le}`).catch(Ue=>m(Ue))}Q()}}).catch(f=>{throw Bs=null,f})}(y),Bs}(y),m=xn().gapi;return z(m,y,"internal-error"),f.open({where:document.body,url:wo(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zd,dontclear:!0},E=>new Promise(function(){var x=(0,p.Z)(function*(P,Q){yield E.restyle({setHideOnLeave:!1});const le=De(y,"network-request-failed"),Ue=xn().setTimeout(()=>{Q(le)},By.get());function rt(){xn().clearTimeout(Ue),P(E)}E.ping(rt).then(rt,()=>{Q(le)})});return function(P,Q){return x.apply(this,arguments)}}()))}),xf.apply(this,arguments)}const su={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mf=500,js=600,ps="_blank",pa="http://localhost";class gs{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Yg="__/auth/handler",sr="emulator/auth/handler";function Zl(y,f,m,E,x,P){z(y.config.authDomain,y,"auth-domain-config-required"),z(y.config.apiKey,y,"invalid-api-key");const Q={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:ce.SDK_VERSION,eventId:x};if(f instanceof as){f.setDefaultLanguage(y.languageCode),Q.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(Q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ue,rt]of Object.entries(P||{}))Q[Ue]=rt}if(f instanceof qo){const Ue=f.getScopes().filter(rt=>""!==rt);Ue.length>0&&(Q.scopes=Ue.join(","))}y.tenantId&&(Q.tid=y.tenantId);const le=Q;for(const Ue of Object.keys(le))void 0===le[Ue]&&delete le[Ue];return`${function jy({config:y}){return y.emulator?re(y,sr):`https://${y.authDomain}/${Yg}`}(y)}?${(0,F.xO)(le).slice(1)}`}const Pf="webStorageSupport",Of=class $y{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mo,this._completeRedirectFn=Dt,this._overrideRedirectResult=ru}_openPopup(f,m,E,x){var P=this;return(0,p.Z)(function*(){var Q;Ge(null===(Q=P.eventManagers[f._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const le=Zl(f,m,E,tr(),x);return function ou(y,f,m,E=Mf,x=js){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let le="";const Ue=Object.assign(Object.assign({},su),{width:E.toString(),height:x.toString(),top:P,left:Q}),rt=(0,F.z$)().toLowerCase();m&&(le=xs(rt)?ps:m),rr(rt)&&(f=f||pa,Ue.scrollbars="yes");const Tt=Object.entries(Ue).reduce((gr,[$s,ih])=>`${gr}${$s}=${ih},`,"");if(function jo(y=(0,F.z$)()){var f;return Hi(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(rt)&&"_self"!==le)return function kf(y,f){const m=document.createElement("a");m.href=y,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",le),new gs(null);const bt=window.open(f||"",le,Tt);z(bt,y,"popup-blocked");try{bt.focus()}catch{}return new gs(bt)}(f,le,_o())})()}_openRedirect(f,m,E,x){var P=this;return(0,p.Z)(function*(){return yield P._originValidation(f),function Ba(y){xn().location.href=y}(Zl(f,m,E,tr(),x)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:x,promise:P}=this.eventManagers[m];return x?Promise.resolve(x):(Ge(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const E=yield function ii(y){return xf.apply(this,arguments)}(f),x=new N(f);return E.register("authEvent",P=>(z(P?.authEvent,f,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:x},m.iframes[f._key()]=E,x})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Pf,{type:Pf},x=>{var P;const Q=null===(P=x?.[0])||void 0===P?void 0:P[Pf];void 0!==Q&&m(!!Q),Ae(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ql(y){return fa.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return ff()||qt()||Hi()}};class Qg{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return be("unexpected MultiFactorSessionType")}}}class au extends Qg{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new au(f)}_finalizeEnroll(f,m,E){return function zg(y,f){return Bt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Qe(y,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Nd(y,f){return Bt(y,"POST","/v2/accounts/mfaSignIn:finalize",Qe(y,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Sr=(()=>{class y{constructor(){}static assertion(m){return au._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var Eo="@firebase/auth";class Xa{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{var x;f((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);m&&(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ms(){return window}!function lu(y){(0,ce._registerComponent)(new Ee.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),x=f.getProvider("heartbeat"),{apiKey:P,authDomain:Q}=E.options;return((le,Ue)=>{z(P&&!P.includes(":"),"invalid-api-key",{appName:le.name}),z(!Q?.includes(":"),"argument-error",{appName:le.name});const rt={apiKey:P,authDomain:Q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$o(y)},Tt=new yd(le,Ue,rt);return function wn(y,f){const m=f?.persistence||[],E=(Array.isArray(m)?m:[m]).map(gt);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(E,f?.popupRedirectResolver)}(Tt,m),Tt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new Ee.wA("auth-internal",f=>{const m=Ln(f.getProvider("auth").getImmediate());return new Xa(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Eo,"0.20.5",function Fr(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ce.registerVersion)(Eo,"0.20.5","esm2017")}("Browser");const Xg=2e3;function Gd(){return Gd=(0,p.Z)(function*(y,f,m){var E;const{BuildInfo:x}=ms();Ge(f.sessionId,"AuthEvent did not contain a session ID");const P=yield function Kd(y){return du.apply(this,arguments)}(f.sessionId),Q={};return Hi()?Q.ibi=x.packageName:$i()?Q.apn=x.packageName:Ae(y,"operation-not-supported-in-this-environment"),x.displayName&&(Q.appDisplayName=x.displayName),Q.sessionId=P,Zl(y,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,Q)}),Gd.apply(this,arguments)}function Wd(){return(Wd=(0,p.Z)(function*(y){const{BuildInfo:f}=ms(),m={};Hi()?m.iosBundleId=f.packageName:$i()?m.androidPackageName=f.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield da(y,m)})).apply(this,arguments)}function uu(){return(uu=(0,p.Z)(function*(y,f,m){const{cordova:E}=ms();let x=()=>{};try{yield new Promise((P,Q)=>{let le=null;function Ue(){var bt;P();const gr=null===(bt=E.plugins.browsertab)||void 0===bt?void 0:bt.close;"function"==typeof gr&&gr(),"function"==typeof m?.close&&m.close()}function rt(){le||(le=window.setTimeout(()=>{Q(De(y,"redirect-cancelled-by-user"))},Xg))}function Tt(){"visible"===document?.visibilityState&&rt()}f.addPassiveListener(Ue),document.addEventListener("resume",rt,!1),$i()&&document.addEventListener("visibilitychange",Tt,!1),x=()=>{f.removePassiveListener(Ue),document.removeEventListener("resume",rt,!1),document.removeEventListener("visibilitychange",Tt,!1),le&&window.clearTimeout(le)}})}finally{x()}})).apply(this,arguments)}function du(){return(du=(0,p.Z)(function*(y){const f=function hu(y){if(Ge(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),m=new Uint8Array(f);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}(y),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const em=20;class Hy extends N{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,p.Z)(function*(){yield f.initPromise})()}}function gu(y){return ga.apply(this,arguments)}function ga(){return(ga=(0,p.Z)(function*(y){const f=yield jf()._get(mu(y));return f&&(yield jf()._remove(mu(y))),f})).apply(this,arguments)}function Bf(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<em;m++){const E=Math.floor(Math.random()*f.length);y.push(f.charAt(E))}return y.join("")}function jf(){return gt(Ml)}function mu(y){return gn("authEvent",y.config.apiKey,y.name)}function _u(y){if(!y?.includes("?"))return{};const[f,...m]=y.split("?");return(0,F.zd)(m.join("?"))}const Wy=class Gy{constructor(){this._redirectPersistence=mo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Dt,this._overrideRedirectResult=ru}_initialize(f){var m=this;return(0,p.Z)(function*(){const E=f._key();let x=m.eventManagers.get(E);return x||(x=new Hy(f),m.eventManagers.set(E,x),m.attachCallbackListeners(f,x)),x})()}_openPopup(f){Ae(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,x){var P=this;return(0,p.Z)(function*(){!function qd(y){var f,m,E,x,P,Q,le,Ue,rt,Tt;const bt=ms();z("function"==typeof(null===(f=bt?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(typeof(null===(m=bt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z("function"==typeof(null===(P=null===(x=null===(E=bt?.cordova)||void 0===E?void 0:E.plugins)||void 0===x?void 0:x.browsertab)||void 0===P?void 0:P.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(Ue=null===(le=null===(Q=bt?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===le?void 0:le.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(Tt=null===(rt=bt?.cordova)||void 0===rt?void 0:rt.InAppBrowser)||void 0===Tt?void 0:Tt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Q=yield P._initialize(f);yield Q.initialized(),Q.resetRedirect(),function wt(){Yi.clear()}(),yield P._originValidation(f);const le=function fu(y,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:Bf(),postBody:null,tenantId:y.tenantId,error:De(y,"no-auth-event")}}(f,E,x);yield function pu(y,f){return jf()._set(mu(y),f)}(f,le);const Ue=yield function Lf(y,f,m){return Gd.apply(this,arguments)}(f,le,m),rt=yield function Uf(y){const{cordova:f}=ms();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let x=null;E?f.plugins.browsertab.openUrl(y):x=f.InAppBrowser.open(y,function Bg(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(x)})})}(Ue);return function Jg(y,f,m){return uu.apply(this,arguments)}(f,Q,rt)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ff(y){return Wd.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:x,BuildInfo:P}=ms(),Q=setTimeout((0,p.Z)(function*(){yield gu(f),m.onEvent($f())}),500),le=function(){var Tt=(0,p.Z)(function*(bt){clearTimeout(Q);const gr=yield gu(f);let $s=null;gr&&bt?.url&&($s=function Vf(y,f){var m,E;const x=function tm(y){const f=_u(y),m=f.link?decodeURIComponent(f.link):void 0,E=_u(m).link,x=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return _u(x).link||x||E||m||y}(f);if(x.includes("/__/auth/callback")){const P=_u(x),Q=P.firebaseError?function zy(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,le=null===(E=null===(m=Q?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Ue=le?De(le):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:x,postBody:null}}return null}(gr,bt.url)),m.onEvent($s||$f())});return function(gr){return Tt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,le);const Ue=x,rt=`${P.packageName.toLowerCase()}://`;ms().handleOpenURL=function(){var Tt=(0,p.Z)(function*(bt){if(bt.toLowerCase().startsWith(rt)&&le({url:bt}),"function"==typeof Ue)try{Ue(bt)}catch(gr){console.error(gr)}});return function(bt){return Tt.apply(this,arguments)}}()}};function $f(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:De("no-auth-event")}}const im=1e3;function yu(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function zf(y=(0,F.z$)()){return!("file:"!==yu()&&"ionic:"!==yu()&&"capacitor:"!==yu()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qd(){try{const y=self.localStorage,f=_o();if(y)return y.setItem(f,"1"),y.removeItem(f),!function qy(y=(0,F.z$)()){return function Yd(){return(0,F.w1)()&&11===document?.documentMode}()||function om(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch{return _s()&&(0,F.hl)()}return!1}function _s(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xd(){return(function sm(){return"http:"===yu()||"https:"===yu()}()||(0,F.ru)()||zf())&&!function fi(){return(0,F.b$)()||(0,F.UG)()}()&&Qd()&&!_s()}function Gf(){return zf()&&typeof document<"u"}function Jd(){return(Jd=(0,p.Z)(function*(){return!!Gf()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},im);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Ur={LOCAL:"local",NONE:"none",SESSION:"session"},Io=z,vu="persistence";function wu(y){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,p.Z)(function*(y){yield y._initializationPromise;const f=Ja(),m=gn(vu,y.config.apiKey,y.name);f&&f.setItem(m,y._getPersistence())})).apply(this,arguments)}function Ja(){var y;try{return(null===(y=function Wf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const lm=z;class bo{constructor(){this.browserResolver=gt(Of),this.cordovaResolver=gt(Wy),this.underlyingResolver=null,this._redirectPersistence=mo,this._completeRedirectFn=Dt,this._overrideRedirectResult=ru}_initialize(f){var m=this;return(0,p.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,x){var P=this;return(0,p.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(f,m,E,x)})()}_openRedirect(f,m,E,x){var P=this;return(0,p.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(f,m,E,x)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Gf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lm(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,p.Z)(function*(){if(f.underlyingResolver)return;const m=yield function am(){return Jd.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Kf(y){return y.unwrap()}function um(y){return th(y)}function th(y){const{_tokenResponse:f}=y instanceof F.ZR?y.customData:y;if(!f)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return tu.credentialFromResult(y);const m=f.providerId;if(!m||m===_e.PASSWORD)return null;let E;switch(m){case _e.GOOGLE:E=gf;break;case _e.FACEBOOK:E=Nc;break;case _e.GITHUB:E=mf;break;case _e.TWITTER:E=$g;break;default:const{oauthIdToken:x,oauthAccessToken:P,oauthTokenSecret:Q,pendingToken:le,nonce:Ue}=f;return P||Q||x||le?le?m.startsWith("saml.")?Ko._create(m,le):di._fromParams({providerId:m,signInMethod:m,pendingToken:le,idToken:x,accessToken:P}):new Ra(m).credential({idToken:x,accessToken:P,rawNonce:Ue}):null}return y instanceof F.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function pr(y,f){return f.catch(m=>{throw m instanceof F.ZR&&function Eu(y,f){var m,E;const x=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=f)||void 0===E?void 0:E.code))f.resolver=new Ht(y,function hr(y,f){var m;const E=(0,F.m9)(y),x=f;return z(f.customData.operationType,E,"argument-error"),z(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Kc._fromError(E,x)}(y,f));else if(x){const P=th(f),Q=f;P&&(Q.credential=P,Q.tenantId=x.tenantId||void 0,Q.email=x.email||void 0,Q.phoneNumber=x.phoneNumber||void 0)}}(y,m),m}).then(m=>{const x=m.user;return{operationType:m.operationType,credential:um(m),additionalUserInfo:vf(m),user:Vr.getOrCreate(x)}})}function en(y,f){return $t.apply(this,arguments)}function $t(){return($t=(0,p.Z)(function*(y,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>pr(y,m.confirm(E))}})).apply(this,arguments)}class Ht{constructor(f,m){this.resolver=m,this.auth=function cm(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return pr(Kf(this.auth),this.resolver.resolveSignIn(f))}}class Vr{constructor(f){this._delegate=f,this.multiFactor=function Zc(y){const f=(0,F.m9)(y);return go.has(f)||go.set(f,La._fromUser(f)),go.get(f)}(f)}static getOrCreate(f){return Vr.USER_MAP.has(f)||Vr.USER_MAP.set(f,new Vr(f)),Vr.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,p.Z)(function*(){return pr(m.auth,jn(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,p.Z)(function*(){return en(E.auth,function qg(y,f,m){return jl.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,p.Z)(function*(){return pr(m.auth,function Vy(y,f,m){return Lr.apply(this,arguments)}(m._delegate,f,bo))})()}linkWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield wu(Ln(m.auth)),ee(m._delegate,f,bo)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,p.Z)(function*(){return pr(m.auth,ho(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return en(this.auth,function Cf(y,f,m){return Df.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return pr(this.auth,function bE(y,f,m){return Af.apply(this,arguments)}(this._delegate,f,bo))}reauthenticateWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield wu(Ln(m.auth)),T(m._delegate,f,bo)})()}sendEmailVerification(f){return function Td(y,f){return zc.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,p.Z)(function*(){return yield function vl(y,f){return Zo.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Sd(y,f){return Ad((0,F.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Na(y,f){return Ad((0,F.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function $l(y,f){return Sf.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function po(y,f){return Wi.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Rl(y,f,m){return Xn.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vr.USER_MAP=new WeakMap;const cn=z;let nh=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=m.options;cn(x,"invalid-api-key",{appName:m.name}),cn(x,"invalid-api-key",{appName:m.name});const P=typeof window<"u"?bo:void 0;this._delegate=E.initialize({options:{persistence:Iu(x,m.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function nn(y,f,m){const E=Ln(y);z(E._canInitEmulator,E,"emulator-config-failed"),z(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const x=!!m?.disableWarnings,P=Gn(f),{host:Q,port:le}=function ir(y){const f=Gn(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const P=x[1];return{host:P,port:is(E.substr(P.length+1))}}{const[P,Q]=E.split(":");return{host:P,port:is(Q)}}}(f);E.config.emulator={url:`${P}//${Q}${null===le?"":`:${le}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:le,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function wr(){function y(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function bl(y,f){return Cd.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Cl(this._delegate,m)}confirmPasswordReset(m,E){return function Pa(y,f,m){return Rt.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var x=this;return(0,p.Z)(function*(){return pr(x._delegate,function _f(y,f,m){return $c.apply(this,arguments)}(x._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Sl(y,f){return Al.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Dd(y,f){return"EMAIL_SIGNIN"===Aa.parseLink(f)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,p.Z)(function*(){cn(Xd(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Xe(y,f){return Ze.apply(this,arguments)}(m._delegate,bo);return E?pr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Hf(y,f){Ln(y)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,x){const{next:P,error:Q,complete:le}=rh(m,E,x);return this._delegate.onAuthStateChanged(P,Q,le)}onIdTokenChanged(m,E,x){const{next:P,error:Q,complete:le}=rh(m,E,x);return this._delegate.onIdTokenChanged(P,Q,le)}sendSignInLinkToEmail(m,E){return function Qt(y,f,m){return Hc.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function ls(y,f,m){return ka.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,p.Z)(function*(){let x;switch(function qf(y,f){Io(Object.values(Ur).includes(f),y,"invalid-persistence-type"),(0,F.b$)()?Io(f!==Ur.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?Io(f===Ur.NONE,y,"unsupported-persistence-type"):_s()?Io(f===Ur.NONE||f===Ur.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):Io(f===Ur.NONE||Qd(),y,"unsupported-persistence-type")}(E._delegate,m),m){case Ur.SESSION:x=mo;break;case Ur.LOCAL:x=(yield gt(yo)._isAvailable())?yo:Ml;break;case Ur.NONE:x=sn;break;default:return Ae("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return pr(this._delegate,function Ed(y){return Id.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return pr(this._delegate,Fn(this._delegate,m))}signInWithCustomToken(m){return pr(this._delegate,function fo(y,f){return Qn.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return pr(this._delegate,function we(y,f,m){return Fn((0,F.m9)(y),Oc.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return pr(this._delegate,function dr(y,f,m){return Oa.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return en(this._delegate,function Yt(y,f,m){return eu.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,p.Z)(function*(){return cn(Xd(),E._delegate,"operation-not-supported-in-this-environment"),pr(E._delegate,function ca(y,f,m){return Wl.apply(this,arguments)}(E._delegate,m,bo))})()}signInWithRedirect(m){var E=this;return(0,p.Z)(function*(){return cn(Xd(),E._delegate,"operation-not-supported-in-this-environment"),yield wu(E._delegate),Cn(E._delegate,m,bo)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function jc(y,f){return Dl.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ur,y})();function rh(y,f,m){let E=y;"function"!=typeof y&&({next:E,error:f,complete:m}=y);const x=E;return{next:Q=>x(Q&&Vr.getOrCreate(Q)),error:f,complete:m}}function Iu(y,f){const m=function eh(y,f){const m=Ja();if(!m)return[];const E=gn(vu,y,f);switch(m.getItem(E)){case Ur.NONE:return[sn];case Ur.LOCAL:return[yo,mo];case Ur.SESSION:return[mo];default:return[]}}(y,f);if(typeof self<"u"&&!m.includes(yo)&&m.push(yo),typeof window<"u")for(const E of[Ml,mo])m.includes(E)||m.push(E);return m.includes(sn)||m.push(sn),m}class bu{constructor(){this.providerId="phone",this._delegate=new tu(Kf(te.Z.auth()))}static credential(f,m){return tu.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}bu.PHONE_SIGN_IN_METHOD=tu.PHONE_SIGN_IN_METHOD,bu.PROVIDER_ID=tu.PROVIDER_ID;const yn=z;class Ut{constructor(f,m,E=te.Z.app()){var x;yn(null===(x=E.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Za(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function dm(y){y.INTERNAL.registerComponent(new Ee.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new nh(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:J_EMAIL_SIGNIN,PASSWORD_RESET:J_PASSWORD_RESET,RECOVER_EMAIL:J_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:J_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:J_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:J_VERIFY_EMAIL}},EmailAuthProvider:Oc,FacebookAuthProvider:Nc,GithubAuthProvider:mf,GoogleAuthProvider:gf,OAuthProvider:Ra,SAMLAuthProvider:Gi,PhoneAuthProvider:bu,PhoneMultiFactorGenerator:Sr,RecaptchaVerifier:Ut,TwitterAuthProvider:$g,Auth:nh,AuthCredential:ro,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.18")}(te.Z)},9751:(pt,Te,L)=>{L.d(Te,{y:()=>ye});var p=L(930),te=L(727),F=L(8822),ce=L(9635),se=L(2416),ie=L(576),Ee=L(2806);let ye=(()=>{class J{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Ke=new J;return Ke.source=this,Ke.operator=Re,Ke}subscribe(Re,Ke,lt){const ve=function G(J){return J&&J instanceof p.Lv||function W(J){return J&&(0,ie.m)(J.next)&&(0,ie.m)(J.error)&&(0,ie.m)(J.complete)}(J)&&(0,te.Nn)(J)}(Re)?Re:new p.Hp(Re,Ke,lt);return(0,Ee.x)(()=>{const{operator:Pe,source:xe}=this;ve.add(Pe?Pe.call(ve,xe):xe?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Ke){Re.error(Ke)}}forEach(Re,Ke){return new(Ke=_e(Ke))((lt,ve)=>{const Pe=new p.Hp({next:xe=>{try{Re(xe)}catch($e){ve($e),Pe.unsubscribe()}},error:ve,complete:lt});this.subscribe(Pe)})}_subscribe(Re){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Re)}[F.L](){return this}pipe(...Re){return(0,ce.U)(Re)(this)}toPromise(Re){return new(Re=_e(Re))((Ke,lt)=>{let ve;this.subscribe(Pe=>ve=Pe,Pe=>lt(Pe),()=>Ke(ve))})}}return J.create=We=>new J(We),J})();function _e(J){var We;return null!==(We=J??se.v.Promise)&&void 0!==We?We:Promise}},7579:(pt,Te,L)=>{L.d(Te,{x:()=>Ee});var p=L(9751),te=L(727);const ce=(0,L(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=L(8737),ie=L(2806);let Ee=(()=>{class _e extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const J=new ye(this,this);return J.operator=G,J}_throwIfClosed(){if(this.closed)throw new ce}next(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(G)}})}error(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:J}=this;for(;J.length;)J.shift().error(G)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:J,isStopped:We,observers:Re}=this;return J||We?te.Lc:(this.currentObservers=null,Re.push(G),new te.w0(()=>{this.currentObservers=null,(0,se.P)(Re,G)}))}_checkFinalizedStatuses(G){const{hasError:J,thrownError:We,isStopped:Re}=this;J?G.error(We):Re&&G.complete()}asObservable(){const G=new p.y;return G.source=this,G}}return _e.create=(W,G)=>new ye(W,G),_e})();class ye extends Ee{constructor(W,G){super(),this.destination=W,this.source=G}next(W){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===J||J.call(G,W)}error(W){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===J||J.call(G,W)}complete(){var W,G;null===(G=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===G||G.call(W)}_subscribe(W){var G,J;return null!==(J=null===(G=this.source)||void 0===G?void 0:G.subscribe(W))&&void 0!==J?J:te.Lc}}},930:(pt,Te,L)=>{L.d(Te,{Hp:()=>lt,Lv:()=>J});var p=L(576),te=L(727),F=L(2416),ce=L(7849),se=L(5032);const ie=_e("C",void 0,void 0);function _e(Ae,De,Oe){return{kind:Ae,value:De,error:Oe}}var W=L(3410),G=L(2806);class J extends te.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,te.Nn)(De)&&De.add(this)):this.destination=$e}static create(De,Oe,ze){return new lt(De,Oe,ze)}next(De){this.isStopped?xe(function ye(Ae){return _e("N",Ae,void 0)}(De),this):this._next(De)}error(De){this.isStopped?xe(function Ee(Ae){return _e("E",void 0,Ae)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?xe(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Re(Ae,De){return We.call(Ae,De)}class Ke{constructor(De){this.partialObserver=De}next(De){const{partialObserver:Oe}=this;if(Oe.next)try{Oe.next(De)}catch(ze){ve(ze)}}error(De){const{partialObserver:Oe}=this;if(Oe.error)try{Oe.error(De)}catch(ze){ve(ze)}else ve(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(Oe){ve(Oe)}}}class lt extends J{constructor(De,Oe,ze){let Ve;if(super(),(0,p.m)(De)||!De)Ve={next:De??void 0,error:Oe??void 0,complete:ze??void 0};else{let z;this&&F.v.useDeprecatedNextContext?(z=Object.create(De),z.unsubscribe=()=>this.unsubscribe(),Ve={next:De.next&&Re(De.next,z),error:De.error&&Re(De.error,z),complete:De.complete&&Re(De.complete,z)}):Ve=De}this.destination=new Ke(Ve)}}function ve(Ae){F.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ae):(0,ce.h)(Ae)}function xe(Ae,De){const{onStoppedNotification:Oe}=F.v;Oe&&W.z.setTimeout(()=>Oe(Ae,De))}const $e={closed:!0,next:se.Z,error:function Pe(Ae){throw Ae},complete:se.Z}},727:(pt,Te,L)=>{L.d(Te,{Lc:()=>ie,w0:()=>se,Nn:()=>Ee});var p=L(576);const F=(0,L(3888).d)(_e=>function(G){_e(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((J,We)=>`${We+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ce=L(8737);class se{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Re of G)Re.remove(this);else G.remove(this);const{initialTeardown:J}=this;if((0,p.m)(J))try{J()}catch(Re){W=Re instanceof F?Re.errors:[Re]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Re of We)try{ye(Re)}catch(Ke){W=W??[],Ke instanceof F?W=[...W,...Ke.errors]:W.push(Ke)}}if(W)throw new F(W)}}add(W){var G;if(W&&W!==this)if(this.closed)ye(W);else{if(W instanceof se){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(W)}}_hasParent(W){const{_parentage:G}=this;return G===W||Array.isArray(G)&&G.includes(W)}_addParent(W){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(W),G):G?[G,W]:W}_removeParent(W){const{_parentage:G}=this;G===W?this._parentage=null:Array.isArray(G)&&(0,ce.P)(G,W)}remove(W){const{_finalizers:G}=this;G&&(0,ce.P)(G,W),W instanceof se&&W._removeParent(this)}}se.EMPTY=(()=>{const _e=new se;return _e.closed=!0,_e})();const ie=se.EMPTY;function Ee(_e){return _e instanceof se||_e&&"closed"in _e&&(0,p.m)(_e.remove)&&(0,p.m)(_e.add)&&(0,p.m)(_e.unsubscribe)}function ye(_e){(0,p.m)(_e)?_e():_e.unsubscribe()}},2416:(pt,Te,L)=>{L.d(Te,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Te,L)=>{L.d(Te,{E:()=>te});const te=new(L(9751).y)(se=>se.complete())},8996:(pt,Te,L)=>{L.d(Te,{D:()=>De});var p=L(8421),te=L(5363),F=L(9468),ie=L(9751),ye=L(2202),_e=L(576),W=L(9672);function J(Oe,ze){if(!Oe)throw new Error("Iterable cannot be null");return new ie.y(Ve=>{(0,W.f)(Ve,ze,()=>{const z=Oe[Symbol.asyncIterator]();(0,W.f)(Ve,ze,()=>{z.next().then(be=>{be.done?Ve.complete():Ve.next(be.value)})},0,!0)})})}var We=L(3670),Re=L(8239),Ke=L(1144),lt=L(6495),ve=L(2206),Pe=L(4532),xe=L(3260);function De(Oe,ze){return ze?function Ae(Oe,ze){if(null!=Oe){if((0,We.c)(Oe))return function ce(Oe,ze){return(0,p.Xf)(Oe).pipe((0,F.R)(ze),(0,te.Q)(ze))}(Oe,ze);if((0,Ke.z)(Oe))return function Ee(Oe,ze){return new ie.y(Ve=>{let z=0;return ze.schedule(function(){z===Oe.length?Ve.complete():(Ve.next(Oe[z++]),Ve.closed||this.schedule())})})}(Oe,ze);if((0,Re.t)(Oe))return function se(Oe,ze){return(0,p.Xf)(Oe).pipe((0,F.R)(ze),(0,te.Q)(ze))}(Oe,ze);if((0,ve.D)(Oe))return J(Oe,ze);if((0,lt.T)(Oe))return function G(Oe,ze){return new ie.y(Ve=>{let z;return(0,W.f)(Ve,ze,()=>{z=Oe[ye.h](),(0,W.f)(Ve,ze,()=>{let be,Ge;try{({value:be,done:Ge}=z.next())}catch(Je){return void Ve.error(Je)}Ge?Ve.complete():Ve.next(be)},0,!0)}),()=>(0,_e.m)(z?.return)&&z.return()})}(Oe,ze);if((0,xe.L)(Oe))return function $e(Oe,ze){return J((0,xe.Q)(Oe),ze)}(Oe,ze)}throw(0,Pe.z)(Oe)}(Oe,ze):(0,p.Xf)(Oe)}},8421:(pt,Te,L)=>{L.d(Te,{Xf:()=>We});var p=L(7582),te=L(1144),F=L(8239),ce=L(9751),se=L(3670),ie=L(2206),Ee=L(4532),ye=L(6495),_e=L(3260),W=L(576),G=L(7849),J=L(8822);function We(Ae){if(Ae instanceof ce.y)return Ae;if(null!=Ae){if((0,se.c)(Ae))return function Re(Ae){return new ce.y(De=>{const Oe=Ae[J.L]();if((0,W.m)(Oe.subscribe))return Oe.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,te.z)(Ae))return function Ke(Ae){return new ce.y(De=>{for(let Oe=0;Oe<Ae.length&&!De.closed;Oe++)De.next(Ae[Oe]);De.complete()})}(Ae);if((0,F.t)(Ae))return function lt(Ae){return new ce.y(De=>{Ae.then(Oe=>{De.closed||(De.next(Oe),De.complete())},Oe=>De.error(Oe)).then(null,G.h)})}(Ae);if((0,ie.D)(Ae))return Pe(Ae);if((0,ye.T)(Ae))return function ve(Ae){return new ce.y(De=>{for(const Oe of Ae)if(De.next(Oe),De.closed)return;De.complete()})}(Ae);if((0,_e.L)(Ae))return function xe(Ae){return Pe((0,_e.Q)(Ae))}(Ae)}throw(0,Ee.z)(Ae)}function Pe(Ae){return new ce.y(De=>{(function $e(Ae,De){var Oe,ze,Ve,z;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Oe=(0,p.KL)(Ae);!(ze=yield Oe.next()).done;)if(De.next(ze.value),De.closed)return}catch(be){Ve={error:be}}finally{try{ze&&!ze.done&&(z=Oe.return)&&(yield z.call(Oe))}finally{if(Ve)throw Ve.error}}De.complete()})})(Ae,De).catch(Oe=>De.error(Oe))})}},6451:(pt,Te,L)=>{L.d(Te,{T:()=>ie});var p=L(8189),te=L(8421),F=L(515),ce=L(3269),se=L(8996);function ie(...Ee){const ye=(0,ce.yG)(Ee),_e=(0,ce._6)(Ee,1/0),W=Ee;return W.length?1===W.length?(0,te.Xf)(W[0]):(0,p.J)(_e)((0,se.D)(W,ye)):F.E}},5403:(pt,Te,L)=>{L.d(Te,{x:()=>te});var p=L(930);function te(ce,se,ie,Ee,ye){return new F(ce,se,ie,Ee,ye)}class F extends p.Lv{constructor(se,ie,Ee,ye,_e,W){super(se),this.onFinalize=_e,this.shouldUnsubscribe=W,this._next=ie?function(G){try{ie(G)}catch(J){se.error(J)}}:super._next,this._error=ye?function(G){try{ye(G)}catch(J){se.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(G){se.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(pt,Te,L)=>{L.d(Te,{U:()=>F});var p=L(4482),te=L(5403);function F(ce,se){return(0,p.e)((ie,Ee)=>{let ye=0;ie.subscribe((0,te.x)(Ee,_e=>{Ee.next(ce.call(se,_e,ye++))}))})}},8189:(pt,Te,L)=>{L.d(Te,{J:()=>F});var p=L(5577),te=L(4671);function F(ce=1/0){return(0,p.z)(te.y,ce)}},5577:(pt,Te,L)=>{L.d(Te,{z:()=>ye});var p=L(4004),te=L(8421),F=L(4482),ce=L(9672),se=L(5403),Ee=L(576);function ye(_e,W,G=1/0){return(0,Ee.m)(W)?ye((J,We)=>(0,p.U)((Re,Ke)=>W(J,Re,We,Ke))((0,te.Xf)(_e(J,We))),G):("number"==typeof W&&(G=W),(0,F.e)((J,We)=>function ie(_e,W,G,J,We,Re,Ke,lt){const ve=[];let Pe=0,xe=0,$e=!1;const Ae=()=>{$e&&!ve.length&&!Pe&&W.complete()},De=ze=>Pe<J?Oe(ze):ve.push(ze),Oe=ze=>{Re&&W.next(ze),Pe++;let Ve=!1;(0,te.Xf)(G(ze,xe++)).subscribe((0,se.x)(W,z=>{We?.(z),Re?De(z):W.next(z)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(Pe--;ve.length&&Pe<J;){const z=ve.shift();Ke?(0,ce.f)(W,Ke,()=>Oe(z)):Oe(z)}Ae()}catch(z){W.error(z)}}))};return _e.subscribe((0,se.x)(W,De,()=>{$e=!0,Ae()})),()=>{lt?.()}}(J,We,_e,G)))}},5363:(pt,Te,L)=>{L.d(Te,{Q:()=>ce});var p=L(9672),te=L(4482),F=L(5403);function ce(se,ie=0){return(0,te.e)((Ee,ye)=>{Ee.subscribe((0,F.x)(ye,_e=>(0,p.f)(ye,se,()=>ye.next(_e),ie),()=>(0,p.f)(ye,se,()=>ye.complete(),ie),_e=>(0,p.f)(ye,se,()=>ye.error(_e),ie)))})}},3099:(pt,Te,L)=>{L.d(Te,{B:()=>se});var p=L(8421),te=L(7579),F=L(930),ce=L(4482);function se(Ee={}){const{connector:ye=(()=>new te.x),resetOnError:_e=!0,resetOnComplete:W=!0,resetOnRefCountZero:G=!0}=Ee;return J=>{let We,Re,Ke,lt=0,ve=!1,Pe=!1;const xe=()=>{Re?.unsubscribe(),Re=void 0},$e=()=>{xe(),We=Ke=void 0,ve=Pe=!1},Ae=()=>{const De=We;$e(),De?.unsubscribe()};return(0,ce.e)((De,Oe)=>{lt++,!Pe&&!ve&&xe();const ze=Ke=Ke??ye();Oe.add(()=>{lt--,0===lt&&!Pe&&!ve&&(Re=ie(Ae,G))}),ze.subscribe(Oe),!We&&lt>0&&(We=new F.Hp({next:Ve=>ze.next(Ve),error:Ve=>{Pe=!0,xe(),Re=ie($e,_e,Ve),ze.error(Ve)},complete:()=>{ve=!0,xe(),Re=ie($e,W),ze.complete()}}),(0,p.Xf)(De).subscribe(We))})(J)}}function ie(Ee,ye,..._e){if(!0===ye)return void Ee();if(!1===ye)return;const W=new F.Hp({next:()=>{W.unsubscribe(),Ee()}});return ye(..._e).subscribe(W)}},9468:(pt,Te,L)=>{L.d(Te,{R:()=>te});var p=L(4482);function te(F,ce=0){return(0,p.e)((se,ie)=>{ie.add(F.schedule(()=>se.subscribe(ie),ce))})}},8505:(pt,Te,L)=>{L.d(Te,{b:()=>se});var p=L(576),te=L(4482),F=L(5403),ce=L(4671);function se(ie,Ee,ye){const _e=(0,p.m)(ie)||Ee||ye?{next:ie,error:Ee,complete:ye}:ie;return _e?(0,te.e)((W,G)=>{var J;null===(J=_e.subscribe)||void 0===J||J.call(_e);let We=!0;W.subscribe((0,F.x)(G,Re=>{var Ke;null===(Ke=_e.next)||void 0===Ke||Ke.call(_e,Re),G.next(Re)},()=>{var Re;We=!1,null===(Re=_e.complete)||void 0===Re||Re.call(_e),G.complete()},Re=>{var Ke;We=!1,null===(Ke=_e.error)||void 0===Ke||Ke.call(_e,Re),G.error(Re)},()=>{var Re,Ke;We&&(null===(Re=_e.unsubscribe)||void 0===Re||Re.call(_e)),null===(Ke=_e.finalize)||void 0===Ke||Ke.call(_e)}))}):ce.y}},4408:(pt,Te,L)=>{L.d(Te,{o:()=>se});var p=L(727);class te extends p.w0{constructor(Ee,ye){super()}schedule(Ee,ye=0){return this}}const F={setInterval(ie,Ee,...ye){const{delegate:_e}=F;return _e?.setInterval?_e.setInterval(ie,Ee,...ye):setInterval(ie,Ee,...ye)},clearInterval(ie){const{delegate:Ee}=F;return(Ee?.clearInterval||clearInterval)(ie)},delegate:void 0};var ce=L(8737);class se extends te{constructor(Ee,ye){super(Ee,ye),this.scheduler=Ee,this.work=ye,this.pending=!1}schedule(Ee,ye=0){var _e;if(this.closed)return this;this.state=Ee;const W=this.id,G=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(G,W,ye)),this.pending=!0,this.delay=ye,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(G,this.id,ye),this}requestAsyncId(Ee,ye,_e=0){return F.setInterval(Ee.flush.bind(Ee,this),_e)}recycleAsyncId(Ee,ye,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return ye;null!=ye&&F.clearInterval(ye)}execute(Ee,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(Ee,ye);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,ye){let W,_e=!1;try{this.work(Ee)}catch(G){_e=!0,W=G||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:ye}=this,{actions:_e}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(_e,this),null!=Ee&&(this.id=this.recycleAsyncId(ye,Ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Te,L)=>{L.d(Te,{v:()=>F});var p=L(6063);class te{constructor(se,ie=te.now){this.schedulerActionCtor=se,this.now=ie}schedule(se,ie=0,Ee){return new this.schedulerActionCtor(this,se).schedule(Ee,ie)}}te.now=p.l.now;class F extends te{constructor(se,ie=te.now){super(se,ie),this.actions=[],this._active=!1}flush(se){const{actions:ie}=this;if(this._active)return void ie.push(se);let Ee;this._active=!0;do{if(Ee=se.execute(se.state,se.delay))break}while(se=ie.shift());if(this._active=!1,Ee){for(;se=ie.shift();)se.unsubscribe();throw Ee}}}},4986:(pt,Te,L)=>{L.d(Te,{P:()=>ce,z:()=>F});var p=L(4408);const F=new(L(7565).v)(p.o),ce=F},6063:(pt,Te,L)=>{L.d(Te,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(pt,Te,L)=>{L.d(Te,{z:()=>p});const p={setTimeout(te,F,...ce){const{delegate:se}=p;return se?.setTimeout?se.setTimeout(te,F,...ce):setTimeout(te,F,...ce)},clearTimeout(te){const{delegate:F}=p;return(F?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(pt,Te,L)=>{L.d(Te,{h:()=>te});const te=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Te,L)=>{L.d(Te,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(pt,Te,L)=>{L.d(Te,{_6:()=>ie,jO:()=>ce,yG:()=>se});var p=L(576),te=L(3532);function F(Ee){return Ee[Ee.length-1]}function ce(Ee){return(0,p.m)(F(Ee))?Ee.pop():void 0}function se(Ee){return(0,te.K)(F(Ee))?Ee.pop():void 0}function ie(Ee,ye){return"number"==typeof F(Ee)?Ee.pop():ye}},8737:(pt,Te,L)=>{function p(te,F){if(te){const ce=te.indexOf(F);0<=ce&&te.splice(ce,1)}}L.d(Te,{P:()=>p})},3888:(pt,Te,L)=>{function p(te){const ce=te(se=>{Error.call(se),se.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}L.d(Te,{d:()=>p})},2806:(pt,Te,L)=>{L.d(Te,{O:()=>ce,x:()=>F});var p=L(2416);let te=null;function F(se){if(p.v.useDeprecatedSynchronousErrorHandling){const ie=!te;if(ie&&(te={errorThrown:!1,error:null}),se(),ie){const{errorThrown:Ee,error:ye}=te;if(te=null,Ee)throw ye}}else se()}function ce(se){p.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=se)}},9672:(pt,Te,L)=>{function p(te,F,ce,se=0,ie=!1){const Ee=F.schedule(function(){ce(),ie?te.add(this.schedule(null,se)):this.unsubscribe()},se);if(te.add(Ee),!ie)return Ee}L.d(Te,{f:()=>p})},4671:(pt,Te,L)=>{function p(te){return te}L.d(Te,{y:()=>p})},1144:(pt,Te,L)=>{L.d(Te,{z:()=>p});const p=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(pt,Te,L)=>{L.d(Te,{D:()=>te});var p=L(576);function te(F){return Symbol.asyncIterator&&(0,p.m)(F?.[Symbol.asyncIterator])}},576:(pt,Te,L)=>{function p(te){return"function"==typeof te}L.d(Te,{m:()=>p})},3670:(pt,Te,L)=>{L.d(Te,{c:()=>F});var p=L(8822),te=L(576);function F(ce){return(0,te.m)(ce[p.L])}},6495:(pt,Te,L)=>{L.d(Te,{T:()=>F});var p=L(2202),te=L(576);function F(ce){return(0,te.m)(ce?.[p.h])}},8239:(pt,Te,L)=>{L.d(Te,{t:()=>te});var p=L(576);function te(F){return(0,p.m)(F?.then)}},3260:(pt,Te,L)=>{L.d(Te,{L:()=>ce,Q:()=>F});var p=L(7582),te=L(576);function F(se){return(0,p.FC)(this,arguments,function*(){const Ee=se.getReader();try{for(;;){const{value:ye,done:_e}=yield(0,p.qq)(Ee.read());if(_e)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ye)}}finally{Ee.releaseLock()}})}function ce(se){return(0,te.m)(se?.getReader)}},3532:(pt,Te,L)=>{L.d(Te,{K:()=>te});var p=L(576);function te(F){return F&&(0,p.m)(F.schedule)}},4482:(pt,Te,L)=>{L.d(Te,{A:()=>te,e:()=>F});var p=L(576);function te(ce){return(0,p.m)(ce?.lift)}function F(ce){return se=>{if(te(se))return se.lift(function(ie){try{return ce(ie,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,Te,L)=>{function p(){}L.d(Te,{Z:()=>p})},9635:(pt,Te,L)=>{L.d(Te,{U:()=>F,z:()=>te});var p=L(4671);function te(...ce){return F(ce)}function F(ce){return 0===ce.length?p.y:1===ce.length?ce[0]:function(ie){return ce.reduce((Ee,ye)=>ye(Ee),ie)}}},7849:(pt,Te,L)=>{L.d(Te,{h:()=>F});var p=L(2416),te=L(3410);function F(ce){te.z.setTimeout(()=>{const{onUnhandledError:se}=p.v;if(!se)throw ce;se(ce)})}},4532:(pt,Te,L)=>{function p(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Te,{z:()=>p})},4650:(pt,Te,L)=>{L.d(Te,{$8M:()=>Vl,$WT:()=>is,$Z:()=>nl,AFp:()=>Jp,AaK:()=>ye,CHM:()=>Hc,CRH:()=>Xb,CZH:()=>Nh,CqO:()=>Nv,D6c:()=>c0,EJc:()=>$w,EpF:()=>Pv,F4k:()=>Ov,FYo:()=>tl,FiY:()=>_n,GfV:()=>OE,JOm:()=>gs,KtG:()=>Dd,LFG:()=>H,Lbi:()=>bA,Lck:()=>eA,MGl:()=>Ym,MMx:()=>uw,NdJ:()=>Zm,OlP:()=>Yt,Oqu:()=>Dh,P3R:()=>SE,PXZ:()=>DC,Q6J:()=>Mv,QGY:()=>Km,Qsj:()=>ET,R0b:()=>Xs,RDi:()=>Iu,Rgc:()=>kh,SBq:()=>Do,Sil:()=>rd,Suo:()=>Qb,TTD:()=>vl,TgZ:()=>zm,WLB:()=>Bp,X6Q:()=>AA,XFs:()=>_t,Xpm:()=>jo,Xts:()=>mm,Y36:()=>Ou,YKP:()=>lw,YNc:()=>dc,Yjl:()=>xc,Yz7:()=>Qe,Z0I:()=>Jt,ZZ4:()=>o0,_Bn:()=>Rh,_UZ:()=>kv,_Vd:()=>ku,_c5:()=>$h,_uU:()=>al,aQg:()=>l0,c2e:()=>N_,cJS:()=>It,cg1:()=>Th,dDg:()=>EC,dqk:()=>dn,eFA:()=>AC,eJc:()=>Aw,ekj:()=>Uv,eoX:()=>Ww,f3M:()=>K,g9A:()=>jw,h0i:()=>xh,hGG:()=>_c,hij:()=>Rp,iGM:()=>Yb,ifc:()=>Bn,ip1:()=>pC,jDz:()=>Lb,kL8:()=>t_,lG2:()=>Ln,lqb:()=>Ql,lri:()=>Lh,n5z:()=>Fd,oAB:()=>$o,oxw:()=>Lv,q4F:()=>NE,qLn:()=>To,qZA:()=>Gm,rWj:()=>dl,sBO:()=>MC,s_b:()=>ul,soG:()=>Ia,tb:()=>Zw,tp0:()=>T,uIk:()=>Hm,vHH:()=>ve,vpe:()=>ko,wAp:()=>St,xp6:()=>ap,z2F:()=>sg,zSh:()=>rp,zs3:()=>tc});var p=L(7579),te=L(727),F=L(9751),ce=L(6451),se=L(3099);function ie(s){for(let o in s)if(s[o]===ie)return o;throw Error("Could not find renamed property on target object.")}function ye(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ye).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function _e(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=ie({__forward_ref__:ie});function G(s){return s.__forward_ref__=G,s.toString=function(){return ye(this())},s}function J(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===G}function Re(s){return s&&!!s.\u0275providers}const lt="https://g.co/ng/security#xss";class ve extends Error{constructor(o,l){super(Pe(o,l)),this.code=o}}function Pe(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function xe(s){return"string"==typeof s?s:null==s?"":String(s)}function ze(s,o){throw new ve(-201,!1)}function he(s,o){null==s&&function re(s,o,l,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${l} ${u} ${o} <=Actual]`))}(o,s,null,"!=")}function Qe(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function It(s){return{providers:s.providers||[],imports:s.imports||[]}}function jt(s){return Zt(s,Dn)||Zt(s,Kr)}function Jt(s){return null!==jt(s)}function Zt(s,o){return s.hasOwnProperty(o)?s[o]:null}function nr(s){return s&&(s.hasOwnProperty(On)||s.hasOwnProperty(Tn))?s[On]:null}const Dn=ie({\u0275prov:ie}),On=ie({\u0275inj:ie}),Kr=ie({ngInjectableDef:ie}),Tn=ie({ngInjectorDef:ie});var _t=(()=>((_t=_t||{})[_t.Default=0]="Default",_t[_t.Host=1]="Host",_t[_t.Self=2]="Self",_t[_t.SkipSelf=4]="SkipSelf",_t[_t.Optional=8]="Optional",_t))();let Ei;function An(s){const o=Ei;return Ei=s,o}function vr(s,o,l){const u=jt(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:l&_t.Optional?null:void 0!==o?o:void ze(ye(s))}const dn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ii={},Vn="__NG_DI_FLAG__",Nn="ngTempTokenPath",rs="ngTokenPath",cr=/\n/gm,Vo="\u0275",rn="__source";let Zr;function Wt(s){const o=Zr;return Zr=s,o}function X(s,o=_t.Default){if(void 0===Zr)throw new ve(-203,!1);return null===Zr?vr(s,void 0,o):Zr.get(s,o&_t.Optional?null:void 0,o)}function H(s,o=_t.Default){return(function ns(){return Ei}()||X)(J(s),o)}function K(s,o=_t.Default){return H(s,Y(o))}function Y(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function ke(s){const o=[];for(let l=0;l<s.length;l++){const u=J(s[l]);if(Array.isArray(u)){if(0===u.length)throw new ve(900,!1);let h,g=_t.Default;for(let v=0;v<u.length;v++){const I=u[v],C=yt(I);"number"==typeof C?-1===C?h=I.token:g|=C:h=I}o.push(H(h,g))}else o.push(H(u))}return o}function qe(s,o){return s[Vn]=o,s.prototype[Vn]=o,s}function yt(s){return s[Vn]}function gn(s){return{toString:s}.toString()}var xt=(()=>((xt=xt||{})[xt.OnPush=0]="OnPush",xt[xt.Default=1]="Default",xt))(),Bn=(()=>{return(s=Bn||(Bn={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Bn;var s})();const rr={},qt=[],xs=ie({\u0275cmp:ie}),_l=ie({\u0275dir:ie}),$i=ie({\u0275pipe:ie}),Bo=ie({\u0275mod:ie}),ur=ie({\u0275fac:ie}),Hi=ie({__NG_ELEMENT_ID__:ie});let Bg=0;function jo(s){return gn(()=>{const o=ro(s),l={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===xt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||Bn.Emulated,id:"c"+Bg++,styles:s.styles||qt,_:null,schemas:s.schemas||null,tView:null};Er(l);const u=s.dependencies;return l.directiveDefs=Ho(u,!1),l.pipeDefs=Ho(u,!0),l})}function ff(s){return nn(s)||Gn(s)}function Rc(s){return null!==s}function $o(s){return gn(()=>({type:s.type,bootstrap:s.bootstrap||qt,declarations:s.declarations||qt,imports:s.imports||qt,exports:s.exports||qt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function yd(s,o){if(null==s)return rr;const l={};for(const u in s)if(s.hasOwnProperty(u)){let h=s[u],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),l[h]=u,o&&(o[h]=g)}return l}function Ln(s){return gn(()=>{const o=ro(s);return Er(o),o})}function xc(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function nn(s){return s[xs]||null}function Gn(s){return s[_l]||null}function ir(s){return s[$i]||null}function is(s){const o=nn(s)||Gn(s)||ir(s);return null!==o&&o.standalone}function wr(s,o){const l=s[Bo]||null;if(!l&&!0===o)throw new Error(`Type ${ye(s)} does not have '\u0275mod' property.`);return l}function ro(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||qt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yd(s.inputs,o),outputs:yd(s.outputs)}}function Er(s){s.features?.forEach(o=>o(s))}function Ho(s,o){if(!s)return null;const l=o?ir:ff;return()=>("function"==typeof s?s():s).map(u=>l(u)).filter(Rc)}const ui=0,tt=1,Pt=2,En=3,kr=4,ss=5,Wn=6,Yr=7,Rn=8,zo=9,io=10,Ot=11,Mc=12,Ms=13,kc=14,bi=15,Ir=16,Go=17,so=18,Ci=19,ks=20,os=21,hn=22,di=1,vd=2,Wo=7,oo=8,Pr=9,br=10;function Qr(s){return Array.isArray(s)&&"object"==typeof s[di]}function Di(s){return Array.isArray(s)&&!0===s[di]}function Sa(s){return 0!=(4&s.flags)}function Ti(s){return s.componentOffset>-1}function Pc(s){return 1==(1&s.flags)}function Xr(s){return!!s.template}function Aa(s){return 0!=(256&s[Pt])}function lo(s,o){return s.hasOwnProperty(ur)?s[ur]:null}class co{constructor(o,l,u){this.previousValue=o,this.currentValue=l,this.firstChange=u}isFirstChange(){return this.firstChange}}function vl(){return Zo}function Zo(s){return s.type.prototype.ngOnChanges&&(s.setInput=Yo),wl}function wl(){const s=xa(this),o=s?.current;if(o){const l=s.previous;if(l===rr)s.previous=o;else for(let u in o)l[u]=o[u];s.current=null,this.ngOnChanges(o)}}function Yo(s,o,l,u){const h=this.declaredInputs[l],g=xa(s)||function bd(s,o){return s[uo]=o}(s,{previous:rr,current:null}),v=g.current||(g.current={}),I=g.previous,C=I[h];v[h]=new co(C&&C.currentValue,o,I===rr),s[u]=o}vl.ngInherit=!0;const uo="__ngSimpleChanges__";function xa(s){return s[uo]||null}const Jr=function(s,o,l){};function jn(s){for(;Array.isArray(s);)s=s[ui];return s}function ho(s,o){return jn(o[s])}function qn(s,o){return jn(o[s.index])}function ea(s,o){return s.data[o]}function Qn(s,o){const l=o[s];return Qr(l)?l:l[ui]}function ta(s){return 64==(64&s[Pt])}function ls(s,o){return null==o?null:s[o]}function ka(s){s[so]=0}function Pa(s,o){s[ss]+=o;let l=s,u=s[En];for(;null!==u&&(1===o&&1===l[ss]||-1===o&&0===l[ss]);)u[ss]+=o,l=u,u=u[En]}const Rt={lFrame:Ly(null),bindingsEnabled:!0};function Dl(){return Rt.bindingsEnabled}function we(){return Rt.lFrame.lView}function Qt(){return Rt.lFrame.tView}function Hc(s){return Rt.lFrame.contextLView=s,s[Rn]}function Dd(s){return Rt.lFrame.contextLView=null,s}function dr(){let s=Oa();for(;null!==s&&64===s.type;)s=s.parent;return s}function Oa(){return Rt.lFrame.currentTNode}function ei(s,o){const l=Rt.lFrame;l.currentTNode=s,l.isParent=o}function Sl(){return Rt.lFrame.isParent}function po(){return Rt.lFrame.bindingIndex++}function Ad(s,o){const l=Rt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Wc(o)}function Wc(s){Rt.lFrame.currentDirectiveIndex=s}function Rd(){return Rt.lFrame.currentQueryIndex}function qc(s){Rt.lFrame.currentQueryIndex=s}function xd(s){const o=s[tt];return 2===o.type?o.declTNode:1===o.type?s[Wn]:null}function yf(s,o,l){if(l&_t.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||l&_t.Host||(h=xd(g),null===h||(g=g[bi],10&h.type))););if(null===h)return!1;o=h,s=g}const u=Rt.lFrame=vf();return u.currentTNode=o,u.lView=s,!0}function xl(s){const o=vf(),l=s[tt];Rt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function vf(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?Ly(s):o}function Ly(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Fy(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Md=Fy;function Hg(){const s=Fy();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Nr(){return Rt.lFrame.selectedIndex}function na(s){Rt.lFrame.selectedIndex=s}function In(){const s=Rt.lFrame;return ea(s.tView,s.selectedIndex)}function La(s,o){for(let l=o.directiveStart,u=o.directiveEnd;l<u;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:R,ngOnDestroy:k}=g;v&&(s.contentHooks??(s.contentHooks=[])).push(-l,v),I&&((s.contentHooks??(s.contentHooks=[])).push(l,I),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(l,I)),C&&(s.viewHooks??(s.viewHooks=[])).push(-l,C),R&&((s.viewHooks??(s.viewHooks=[])).push(l,R),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(l,R)),null!=k&&(s.destroyHooks??(s.destroyHooks=[])).push(l,k)}}function go(s,o,l){Fa(s,o,3,l)}function Zc(s,o,l,u){(3&s[Pt])===l&&Fa(s,o,l,u)}function Os(s,o){let l=s[Pt];(3&l)===o&&(l&=2047,l+=1,s[Pt]=l)}function Fa(s,o,l,u){const g=u??-1,v=o.length-1;let I=0;for(let C=void 0!==u?65535&s[so]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=u&&I>=u)break}else o[C]<0&&(s[so]+=65536),(I<g||-1==g)&&(Ua(s,l,o,C),s[so]=(4294901760&s[so])+C+2),C++}function Ua(s,o,l,u){const h=l[u]<0,g=l[u+1],I=s[h?-l[u]:l[u]];if(h){if(s[Pt]>>11<s[so]>>16&&(3&s[Pt])===o){s[Pt]+=2048,Jr(4,I,g);try{g.call(I)}finally{Jr(5,I,g)}}}else{Jr(4,I,g);try{g.call(I)}finally{Jr(5,I,g)}}}const ia=-1;class Ns{constructor(o,l,u){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=u}}function xn(s,o,l){let u=0;for(;u<l.length;){const h=l[u];if("number"==typeof h){if(0!==h)break;u++;const g=l[u++],v=l[u++],I=l[u++];s.setAttribute(o,v,I,g)}else{const g=h,v=l[++u];us(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),u++}}return u}function Ba(s){return 3===s||4===s||6===s}function us(s){return 64===s.charCodeAt(0)}function ds(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let u=0;u<o.length;u++){const h=o[u];"number"==typeof h?l=h:0===l||sa(s,l,h,null,-1===l||2===l?o[++u]:null)}}return s}function sa(s,o,l,u,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===l){if(null===u)return void(null!==h&&(s[g+1]=h));if(u===s[g+1])return void(s[g+2]=h)}g++,null!==u&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,l),null!==u&&s.splice(g++,0,u),null!==h&&s.splice(g++,0,h)}function Yc(s){return s!==ia}function ja(s){return 32767&s}function Pl(s,o){let l=function kl(s){return s>>16}(s),u=o;for(;l>0;)u=u[bi],l--;return u}let Ls=!0;function oa(s){const o=Ls;return Ls=s,o}const $a=255,Ha=5;let Ol=0;const Cr={};function la(s,o){const l=Ga(s,o);if(-1!==l)return l;const u=o[tt];u.firstCreatePass&&(s.injectorIndex=o.length,Fs(u.data,s),Fs(o,null),Fs(u.blueprint,null));const h=Nl(s,o),g=s.injectorIndex;if(Yc(h)){const v=ja(h),I=Pl(h,o),C=I[tt].data;for(let R=0;R<8;R++)o[g+R]=I[v+R]|C[v+R]}return o[g+8]=h,g}function Fs(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ga(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Nl(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,u=null,h=o;for(;null!==h;){if(u=Xc(h),null===u)return ia;if(l++,h=h[bi],-1!==u.injectorIndex)return u.injectorIndex|l<<16}return ia}function Wa(s,o,l){!function za(s,o,l){let u;"string"==typeof l?u=l.charCodeAt(0)||0:l.hasOwnProperty(Hi)&&(u=l[Hi]),null==u&&(u=l[Hi]=Ol++);const h=u&$a;o.data[s+(h>>Ha)]|=1<<h}(s,o,l)}function yo(s,o,l){if(l&_t.Optional||void 0!==s)return s;ze()}function qa(s,o,l,u){if(l&_t.Optional&&void 0===u&&(u=null),!(l&(_t.Self|_t.Host))){const h=s[zo],g=An(void 0);try{return h?h.get(o,u,l&_t.Optional):vr(o,u,l&_t.Optional)}finally{An(g)}}return yo(u,0,l)}function Nd(s,o,l,u=_t.Default,h){if(null!==s){if(1024&o[Pt]){const v=function Ud(s,o,l,u,h){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[Pt]&&!(256&v[Pt]);){const I=qi(g,v,l,u|_t.Self,Cr);if(I!==Cr)return I;let C=g.parent;if(!C){const R=v[os];if(R){const k=R.get(l,Cr,u);if(k!==Cr)return k}C=Xc(v),v=v[bi]}g=C}return h}(s,o,l,u,Cr);if(v!==Cr)return v}const g=qi(s,o,l,u,Cr);if(g!==Cr)return g}return qa(o,l,u,h)}function qi(s,o,l,u,h){const g=function Ld(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Hi)?s[Hi]:void 0;return"number"==typeof o?o>=0?o&$a:Wg:o}(l);if("function"==typeof g){if(!yf(o,s,u))return u&_t.Host?yo(h,0,u):qa(o,l,u,h);try{const v=g(u);if(null!=v||u&_t.Optional)return v;ze()}finally{Md()}}else if("number"==typeof g){let v=null,I=Ga(s,o),C=ia,R=u&_t.Host?o[Ir][Wn]:null;for((-1===I||u&_t.SkipSelf)&&(C=-1===I?Nl(s,o):o[I+8],C!==ia&&hs(u,!1)?(v=o[tt],I=ja(C),o=Pl(C,o)):I=-1);-1!==I;){const k=o[tt];if(Fl(g,I,k.data)){const U=Ll(I,o,l,v,u,R);if(U!==Cr)return U}C=o[I+8],C!==ia&&hs(u,o[tt].data[I+8]===R)&&Fl(g,I,o)?(v=k,I=ja(C),o=Pl(C,o)):I=-1}}return h}function Ll(s,o,l,u,h,g){const v=o[tt],I=v.data[s+8],k=vo(I,v,l,null==u?Ti(I)&&Ls:u!=v&&0!=(3&I.type),h&_t.Host&&g===I);return null!==k?Ki(o,v,k,I):Cr}function vo(s,o,l,u,h){const g=s.providerIndexes,v=o.data,I=1048575&g,C=s.directiveStart,k=g>>20,j=h?I+k:s.directiveEnd;for(let ne=u?I:I+k;ne<j;ne++){const Ie=v[ne];if(ne<C&&l===Ie||ne>=C&&Ie.type===l)return ne}if(h){const ne=v[C];if(ne&&Xr(ne)&&ne.type===l)return C}return null}function Ki(s,o,l,u){let h=s[l];const g=o.data;if(function hi(s){return s instanceof Ns}(h)){const v=h;v.resolving&&function Ae(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ve(-200,`Circular dependency in DI detected for ${s}${l}`)}(function $e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():xe(s)}(g[l]));const I=oa(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?An(v.injectImpl):null;yf(s,u,_t.Default);try{h=s[l]=v.factory(void 0,g,s,u),o.firstCreatePass&&l>=u.directiveStart&&function Gg(s,o,l){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(u){const v=Zo(o);(l.preOrderHooks??(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks??(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks??(l.preOrderHooks=[])).push(0-s,h),g&&((l.preOrderHooks??(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks??(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],o)}finally{null!==C&&An(C),oa(I),v.resolving=!1,Md()}}return h}function Fl(s,o,l){return!!(l[o+(s>>Ha)]&1<<s)}function hs(s,o){return!(s&_t.Self||s&_t.Host&&o)}class Si{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,u){return Nd(this._tNode,this._lView,o,Y(u),l)}}function Wg(){return new Si(dr(),we())}function Fd(s){return gn(()=>{const o=s.prototype.constructor,l=o[ur]||Ul(o),u=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==u;){const g=h[ur]||Ul(h);if(g&&g!==l)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Ul(s){return We(s)?()=>{const o=Ul(J(s));return o&&o()}:lo(s)}function Xc(s){const o=s[tt],l=o.type;return 2===l?o.declTNode:1===l?s[Wn]:null}function Vl(s){return function Qc(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const u=l.length;let h=0;for(;h<u;){const g=l[h];if(Ba(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<u&&"string"==typeof l[h];)h++;else{if(g===o)return l[h+1];h+=2}}}return null}(dr(),s)}const Ka="__parameters__";function Za(s,o,l){return gn(()=>{const u=function If(s){return function(...l){if(s){const u=s(...l);for(const h in u)this[h]=u[h]}}}(o);function h(...g){if(this instanceof h)return u.apply(this,g),this;const v=new h(...g);return I.annotation=v,I;function I(C,R,k){const U=C.hasOwnProperty(Ka)?C[Ka]:Object.defineProperty(C,Ka,{value:[]})[Ka];for(;U.length<=k;)U.push(null);return(U[k]=U[k]||[]).push(v),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Yt{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Qe({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Zi(s,o){s.forEach(l=>Array.isArray(l)?Zi(l,o):o(l))}function Gl(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Ya(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Lr(s,o,l){let u=on(s,o);return u>=0?s[1|u]=l:(u=~u,function Af(s,o,l,u){let h=s.length;if(h==o)s.push(l,u);else if(1===h)s.push(u,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=u}}(s,u,o,l)),u}function Qa(s,o){const l=on(s,o);if(l>=0)return s[1|l]}function on(s,o){return function fr(s,o,l){let u=0,h=s.length>>l;for(;h!==u;){const g=u+(h-u>>1),v=s[g<<l];if(o===v)return g<<l;v>o?h=g:u=g+1}return~(h<<l)}(s,o,1)}const _n=qe(Za("Optional"),8),T=qe(Za("SkipSelf"),4);var gs=(()=>((gs=gs||{})[gs.Important=1]="Important",gs[gs.DashCase=2]="DashCase",gs))();const Zl=new Map;let jy=0;const Xa="__ngContext__";function Fr(s,o){Qr(o)?(s[Xa]=o[ks],function $y(s){Zl.set(s[ks],s)}(o)):s[Xa]=o}let qd;function Kd(s,o){return qd(s,o)}function hu(s){const o=s[En];return Di(o)?o[En]:o}function fu(s){return gu(s[Ms])}function pu(s){return gu(s[kr])}function gu(s){for(;null!==s&&!Di(s);)s=s[kr];return s}function ga(s,o,l,u,h){if(null!=u){let g,v=!1;Di(u)?g=u:Qr(u)&&(v=!0,u=u[ui]);const I=jn(u);0===s&&null!==l?null==h?Yd(o,l,I):fi(o,l,I,h||null,!0):1===s&&null!==l?fi(o,l,I,h||null,!0):2===s?function Yl(s,o,l){const u=_s(s,o);u&&function qy(s,o,l,u){s.removeChild(o,l,u)}(s,u,o,l)}(o,I,v):3===s&&o.destroyNode(I),null!=g&&function Kf(s,o,l,u,h){const g=l[Wo];g!==jn(l)&&ga(o,s,u,g,h);for(let I=br;I<l.length;I++){const C=l[I];Ja(C[tt],C,s,o,u,g)}}(o,s,g,l,h)}}function mu(s,o,l){return s.createElement(o,l)}function $f(s,o){const l=s[Pr],u=l.indexOf(o),h=o[En];512&o[Pt]&&(o[Pt]&=-513,Pa(h,-1)),l.splice(u,1)}function Hf(s,o){if(s.length<=br)return;const l=br+o,u=s[l];if(u){const h=u[Go];null!==h&&h!==s&&$f(h,u),o>0&&(s[l-1][kr]=u[kr]);const g=Ya(s,br+o);!function zy(s,o){Ja(s,o,o[Ot],2,null,null),o[ui]=null,o[Wn]=null}(u[tt],u);const v=g[Ci];null!==v&&v.detachView(g[tt]),u[En]=null,u[kr]=null,u[Pt]&=-65}return u}function rm(s,o){if(!(128&o[Pt])){const l=o[Ot];l.destroyNode&&Ja(s,o,l,3,null,null),function nm(s){let o=s[Ms];if(!o)return Zd(s[tt],s);for(;o;){let l=null;if(Qr(o))l=o[Ms];else{const u=o[br];u&&(l=u)}if(!l){for(;o&&!o[kr]&&o!==s;)Qr(o)&&Zd(o[tt],o),o=o[En];null===o&&(o=s),Qr(o)&&Zd(o[tt],o),l=o&&o[kr]}o=l}}(o)}}function Zd(s,o){if(!(128&o[Pt])){o[Pt]&=-65,o[Pt]|=128,function yu(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let u=0;u<l.length;u+=2){const h=o[l[u]];if(!(h instanceof Ns)){const g=l[u+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=h[g[v]],C=g[v+1];Jr(4,I,C);try{C.call(I)}finally{Jr(5,I,C)}}else{Jr(4,h,g);try{g.call(h)}finally{Jr(5,h,g)}}}}}(s,o),function im(s,o){const l=s.cleanup,u=o[Yr];let h=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+3];v>=0?u[h=v]():u[h=-v].unsubscribe(),g+=2}else{const v=u[h=l[g+1]];l[g].call(v)}if(null!==u){for(let g=h+1;g<u.length;g++)(0,u[g])();o[Yr]=null}}(s,o),1===o[tt].type&&o[Ot].destroy();const l=o[Go];if(null!==l&&Di(o[En])){l!==o[En]&&$f(l,o);const u=o[Ci];null!==u&&u.detachView(s)}!function Qg(s){Zl.delete(s[ks])}(o)}}function sm(s,o,l){return function zf(s,o,l){let u=o;for(;null!==u&&40&u.type;)u=(o=u).parent;if(null===u)return l[ui];{const{componentOffset:h}=u;if(h>-1){const{encapsulation:g}=s.data[u.directiveStart+h];if(g===Bn.None||g===Bn.Emulated)return null}return qn(u,l)}}(s,o.parent,l)}function fi(s,o,l,u,h){s.insertBefore(o,l,u,h)}function Yd(s,o,l){s.appendChild(o,l)}function om(s,o,l,u,h){null!==u?fi(s,o,l,u,h):Yd(s,o,l)}function _s(s,o){return s.parentNode(o)}let Wf,rh,yn,Jd=function am(s,o,l){return 40&s.type?qn(s,l):null};function Io(s,o,l,u){const h=sm(s,u,o),g=o[Ot],I=function Gf(s,o,l){return Jd(s,o,l)}(u.parent||o[Wn],u,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)om(g,h,l[C],I,!1);else om(g,h,l,I,!1);void 0!==Wf&&Wf(g,u,o,l,h)}function vu(s,o){if(null!==o){const l=o.type;if(3&l)return qn(o,s);if(4&l)return wu(-1,s[o.index]);if(8&l){const u=o.child;if(null!==u)return vu(s,u);{const h=s[o.index];return Di(h)?wu(-1,h):jn(h)}}if(32&l)return Kd(o,s)()||jn(s[o.index]);{const u=qf(s,o);return null!==u?Array.isArray(u)?u[0]:vu(hu(s[Ir]),u):vu(s,o.next)}}return null}function qf(s,o){return null!==o?s[Ir][Wn].projection[o.projection]:null}function wu(s,o){const l=br+s+1;if(l<o.length){const u=o[l],h=u[tt].firstChild;if(null!==h)return vu(u,h)}return o[Wo]}function eh(s,o,l,u,h,g,v){for(;null!=l;){const I=u[l.index],C=l.type;if(v&&0===o&&(I&&Fr(jn(I),u),l.flags|=2),32!=(32&l.flags))if(8&C)eh(s,o,l.child,u,h,g,!1),ga(o,s,h,I,g);else if(32&C){const R=Kd(l,u);let k;for(;k=R();)ga(o,s,h,k,g);ga(o,s,h,I,g)}else 16&C?bo(s,o,u,l,h,g):ga(o,s,h,I,g);l=v?l.projectionNext:l.next}}function Ja(s,o,l,u,h,g){eh(l,u,s.firstChild,o,h,g,!1)}function bo(s,o,l,u,h,g){const v=l[Ir],C=v[Wn].projection[u.projection];if(Array.isArray(C))for(let R=0;R<C.length;R++)ga(o,s,h,C[R],g);else eh(s,o,C,v[En],h,g,!0)}function Eu(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function th(s,o,l){const{mergedAttrs:u,classes:h,styles:g}=l;null!==u&&xn(s,o,u),null!==h&&Eu(s,o,h),null!==g&&function um(s,o,l){s.setAttribute(o,"style",l)}(s,o,g)}function Iu(s){rh=s}function y(s){return function Ut(){if(void 0===yn&&(yn=null,dn.trustedTypes))try{yn=dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return yn}()?.createScriptURL(s)||s}class f{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lt})`}}function le(s){return s instanceof f?s.changingThisBreaksApplicationSecurity:s}function Ue(s,o){const l=function rt(s){return s instanceof f&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see ${lt})`)}return l===o}const sh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Un=(()=>((Un=Un||{})[Un.NONE=0]="NONE",Un[Un.HTML=1]="HTML",Un[Un.STYLE=2]="STYLE",Un[Un.SCRIPT=3]="SCRIPT",Un[Un.URL=4]="URL",Un[Un.RESOURCE_URL=5]="RESOURCE_URL",Un))();function Ft(s){const o=Tu();return o?o.sanitize(Un.URL,s)||"":Ue(s,"URL")?le(s):function xi(s){return(s=String(s)).match(sh)?s:"unsafe:"+s}(xe(s))}function TE(s){const o=Tu();if(o)return y(o.sanitize(Un.RESOURCE_URL,s)||"");if(Ue(s,"ResourceURL"))return y(le(s));throw new ve(904,!1)}function SE(s,o,l){return function Yy(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?TE:Ft}(o,l)(s)}function Tu(){const s=we();return s&&s[Mc]}const mm=new Yt("ENVIRONMENT_INITIALIZER"),Qy=new Yt("INJECTOR",-1),RE=new Yt("INJECTOR_DEF_TYPES");class Xy{get(o,l=Ii){if(l===Ii){const u=new Error(`NullInjectorError: No provider for ${ye(o)}!`);throw u.name="NullInjectorError",u}return l}}function xE(...s){return{\u0275providers:Su(0,s),\u0275fromNgModule:!0}}function Su(s,...o){const l=[],u=new Set;let h;return Zi(o,g=>{const v=g;Au(v,l,[],u)&&(h||(h=[]),h.push(v))}),void 0!==h&&lh(h,l),l}function lh(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];ep(h,g=>{o.push(g)})}}function Au(s,o,l,u){if(!(s=J(s)))return!1;let h=null,g=nr(s);const v=!g&&nn(s);if(g||v){if(v&&!v.standalone)return!1;h=s}else{const C=s.ngModule;if(g=nr(C),!g)return!1;h=C}const I=u.has(h);if(v){if(I)return!1;if(u.add(h),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const R of C)Au(R,o,l,u)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let R;u.add(h);try{Zi(g.imports,k=>{Au(k,o,l,u)&&(R||(R=[]),R.push(k))})}finally{}void 0!==R&&lh(R,o)}if(!I){const R=lo(h)||(()=>new h);o.push({provide:h,useFactory:R,deps:qt},{provide:RE,useValue:h,multi:!0},{provide:mm,useValue:()=>H(h),multi:!0})}const C=g.providers;null==C||I||ep(C,k=>{o.push(k)})}}return h!==s&&void 0!==s.providers}function ep(s,o){for(let l of s)Re(l)&&(l=l.\u0275providers),Array.isArray(l)?ep(l,o):o(l)}const tp=ie({provide:String,useValue:ie});function Jy(s){return null!==s&&"object"==typeof s&&tp in s}function Ru(s){return"function"==typeof s}const rp=new Yt("Set Injector scope."),_m={},ev={};let tv;function xu(){return void 0===tv&&(tv=new Xy),tv}class Ql{}class nv extends Ql{get destroyed(){return this._destroyed}constructor(o,l,u,h){super(),this.parent=l,this.source=u,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vm(o,v=>this.processProvider(v)),this.records.set(Qy,Xl(void 0,this)),h.has("environment")&&this.records.set(Ql,Xl(void 0,this));const g=this.records.get(rp);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(RE.multi,qt,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=Wt(this),u=An(void 0);try{return o()}finally{Wt(l),An(u)}}get(o,l=Ii,u=_t.Default){this.assertNotDestroyed(),u=Y(u);const h=Wt(this),g=An(void 0);try{if(!(u&_t.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function yT(s){return"function"==typeof s||"object"==typeof s&&s instanceof Yt}(o)&&jt(o);I=C&&this.injectableDefInScope(C)?Xl(ch(o),_m):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(u&_t.Self?xu():this.parent).get(o,l=u&_t.Optional&&l===Ii?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[Nn]=v[Nn]||[]).unshift(ye(o)),h)throw v;return function pn(s,o,l,u){const h=s[Nn];throw o[rn]&&h.unshift(o[rn]),s.message=function sn(s,o,l,u=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==Vo?s.slice(2):s;let h=ye(o);if(Array.isArray(o))h=o.map(ye).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):ye(I)))}h=`{${g.join(", ")}}`}return`${l}${u?"("+u+")":""}[${h}]: ${s.replace(cr,"\n  ")}`}("\n"+s.message,h,l,u),s[rs]=h,s[Nn]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{An(g),Wt(h)}}resolveInjectorInitializers(){const o=Wt(this),l=An(void 0);try{const u=this.get(mm.multi,qt,_t.Self);for(const h of u)h()}finally{Wt(o),An(l)}}toString(){const o=[],l=this.records;for(const u of l.keys())o.push(ye(u));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ve(205,!1)}processProvider(o){let l=Ru(o=J(o))?o:J(o&&o.provide);const u=function ym(s){return Jy(s)?Xl(void 0,s.useValue):Xl(Mu(s),_m)}(o);if(Ru(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=Xl(void 0,_m,!0),h.factory=()=>ke(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,u)}hydrate(o,l){return l.value===_m&&(l.value=ev,l.value=l.factory()),"object"==typeof l.value&&l.value&&function _T(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=J(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function ch(s){const o=jt(s),l=null!==o?o.factory:lo(s);if(null!==l)return l;if(s instanceof Yt)throw new ve(204,!1);if(s instanceof Function)return function mT(s){const o=s.length;if(o>0)throw function ca(s,o){const l=[];for(let u=0;u<s;u++)l.push(o);return l}(o,"?"),new ve(204,!1);const l=function Yn(s){return s&&(s[Dn]||s[Kr])||null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new ve(204,!1)}function Mu(s,o,l){let u;if(Ru(s)){const h=J(s);return lo(h)||ch(h)}if(Jy(s))u=()=>J(s.useValue);else if(function ME(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...ke(s.deps||[]));else if(function np(s){return!(!s||!s.useExisting)}(s))u=()=>H(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function rv(s){return!!s.deps}(s))return lo(h)||ch(h);u=()=>new h(...ke(s.deps))}return u}function Xl(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function vm(s,o){for(const l of s)Array.isArray(l)?vm(l,o):l&&Re(l)?vm(l.\u0275providers,o):o(l)}class vT{}class kE{}class iv{resolveComponentFactory(o){throw function wT(s){const o=Error(`No component factory found for ${ye(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let ku=(()=>{class s{}return s.NULL=new iv,s})();function wm(){return ma(dr(),we())}function ma(s,o){return new Do(qn(s,o))}let Do=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=wm,s})();function uh(s){return s instanceof Do?s.nativeElement:s}class tl{}let ET=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function IT(){const s=we(),l=Qn(dr().index,s);return(Qr(l)?l:s)[Ot]}(),s})(),ip=(()=>{class s{}return s.\u0275prov=Qe({token:s,providedIn:"root",factory:()=>null}),s})();class OE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const NE=new OE("15.2.9"),dh={},Pu="ngOriginalError";function hh(s){return s[Pu]}class To{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&hh(o);for(;l&&hh(l);)l=hh(l);return l||null}}function ki(s){return s instanceof Function?s():s}function BE(s,o,l){let u=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===u||s.charCodeAt(h+g)<=32)return h}l=h+1}}const jE="ng-template";function CT(s,o,l){let u=0,h=!0;for(;u<s.length;){let g=s[u++];if("string"==typeof g&&h){const v=s[u++];if(l&&"class"===g&&-1!==BE(v.toLowerCase(),o,0))return!0}else{if(1===g){for(;u<s.length&&"string"==typeof(g=s[u++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(h=!1)}}return!1}function $E(s){return 4===s.type&&s.value!==jE}function DT(s,o,l){return o===(4!==s.type||l?s.value:jE)}function TT(s,o,l){let u=4;const h=s.attrs||[],g=function AT(s){for(let o=0;o<s.length;o++)if(Ba(s[o]))return o;return s.length}(h);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&u){if(u=2|1&u,""!==C&&!DT(s,C,l)||""===C&&1===o.length){if(Ao(u))return!1;v=!0}}else{const R=8&u?C:o[++I];if(8&u&&null!==s.attrs){if(!CT(s.attrs,R,l)){if(Ao(u))return!1;v=!0}continue}const U=HE(8&u?"class":C,h,$E(s),l);if(-1===U){if(Ao(u))return!1;v=!0;continue}if(""!==R){let j;j=U>g?"":h[U+1].toLowerCase();const ne=8&u?j:null;if(ne&&-1!==BE(ne,R,0)||2&u&&R!==j){if(Ao(u))return!1;v=!0}}}}else{if(!v&&!Ao(u)&&!Ao(C))return!1;if(v&&Ao(C))continue;v=!1,u=C|1&u}}return Ao(u)||v}function Ao(s){return 0==(1&s)}function HE(s,o,l,u){if(null===o)return-1;let h=0;if(u||!l){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function RT(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const u=s[l];if("number"==typeof u)return-1;if(u===o)return l;l++}return-1}(o,s)}function cv(s,o,l=!1){for(let u=0;u<o.length;u++)if(TT(s,o[u],l))return!0;return!1}function zE(s,o){return s?":not("+o.trim()+")":o}function MT(s){let o=s[0],l=1,u=2,h="",g=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&u){const I=s[++l];h+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&u?h+="."+v:4&u&&(h+=" "+v);else""!==h&&!Ao(v)&&(o+=zE(g,h),h=""),u=v,g=g||!Ao(u);l++}return""!==h&&(o+=zE(g,h)),o}const Nt={};function ap(s){GE(Qt(),we(),Nr()+s,!1)}function GE(s,o,l,u){if(!u)if(3==(3&o[Pt])){const g=s.preOrderCheckHooks;null!==g&&go(o,g,l)}else{const g=s.preOrderHooks;null!==g&&Zc(o,g,0,l)}na(l)}function ZE(s,o=null,l=null,u){const h=YE(s,o,l,u);return h.resolveInjectorInitializers(),h}function YE(s,o=null,l=null,u,h=new Set){const g=[l||qt,xE(s)];return u=u||("object"==typeof s?void 0:ye(s)),new nv(g,o||xu(),u||null,h)}let tc=(()=>{class s{static create(l,u){if(Array.isArray(l))return ZE({name:""},u,l,"");{const h=l.name??"";return ZE({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=Ii,s.NULL=new Xy,s.\u0275prov=Qe({token:s,providedIn:"any",factory:()=>H(Qy)}),s.__NG_ELEMENT_ID__=-1,s})();function Ou(s,o=_t.Default){const l=we();return null===l?H(s,o):Nd(dr(),l,J(s),o)}function nl(){throw new Error("invalid")}function cp(s,o){const l=s.contentQueries;if(null!==l)for(let u=0;u<l.length;u+=2){const g=l[u+1];if(-1!==g){const v=s.data[g];qc(l[u]),v.contentQueries(2,o[g],g)}}}function Mm(s,o,l,u,h,g,v,I,C,R,k){const U=o.blueprint.slice();return U[ui]=h,U[Pt]=76|u,(null!==k||s&&1024&s[Pt])&&(U[Pt]|=1024),ka(U),U[En]=U[bi]=s,U[Rn]=l,U[io]=v||s&&s[io],U[Ot]=I||s&&s[Ot],U[Mc]=C||s&&s[Mc]||null,U[zo]=R||s&&s[zo]||null,U[Wn]=g,U[ks]=function Pf(){return jy++}(),U[os]=k,U[Ir]=2==o.type?s[Ir]:U,U}function Nu(s,o,l,u,h){let g=s.data[o];if(null===g)g=function up(s,o,l,u,h){const g=Oa(),v=Sl(),C=s.data[o]=function Pm(s,o,l,u,h,g){return{type:l,index:u,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,o,u,h);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C,C.prev=g)),C}(s,o,l,u,h),function Sd(){return Rt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=l,g.value=u,g.attrs=h;const v=function Tl(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return ei(g,!0),g}function dp(s,o,l,u){if(0===l)return-1;const h=o.length;for(let g=0;g<l;g++)o.push(u),s.blueprint.push(u),s.data.push(null);return h}function _a(s,o,l){xl(o);try{const u=s.viewQuery;null!==u&&Iv(1,u,l);const h=s.template;null!==h&&rI(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&cp(s,o),s.staticViewQueries&&Iv(2,s.viewQuery,l);const g=s.components;null!==g&&function zT(s,o){for(let l=0;l<o.length;l++)pI(s,o[l])}(o,g)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{o[Pt]&=-5,Hg()}}function rc(s,o,l,u){const h=o[Pt];if(128!=(128&h)){xl(o);try{ka(o),function Ps(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&rI(s,o,l,2,u);const v=3==(3&h);if(v){const R=s.preOrderCheckHooks;null!==R&&go(o,R,null)}else{const R=s.preOrderHooks;null!==R&&Zc(o,R,0,null),Os(o,0)}if(function fI(s){for(let o=fu(s);null!==o;o=pu(o)){if(!o[vd])continue;const l=o[Pr];for(let u=0;u<l.length;u++){const h=l[u];512&h[Pt]||Pa(h[En],1),h[Pt]|=512}}}(o),function Ev(s){for(let o=fu(s);null!==o;o=pu(o))for(let l=br;l<o.length;l++){const u=o[l],h=u[tt];ta(u)&&rc(h,u,h.template,u[Rn])}}(o),null!==s.contentQueries&&cp(s,o),v){const R=s.contentCheckHooks;null!==R&&go(o,R)}else{const R=s.contentHooks;null!==R&&Zc(o,R,1),Os(o,1)}!function xm(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let u=0;u<l.length;u++){const h=l[u];if(h<0)na(~h);else{const g=h,v=l[++u],I=l[++u];Ad(v,g),I(2,o[g])}}}finally{na(-1)}}(s,o);const I=s.components;null!==I&&function HT(s,o){for(let l=0;l<o.length;l++)XT(s,o[l])}(o,I);const C=s.viewQuery;if(null!==C&&Iv(2,C,u),v){const R=s.viewCheckHooks;null!==R&&go(o,R)}else{const R=s.viewHooks;null!==R&&Zc(o,R,2),Os(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Pt]&=-41,512&o[Pt]&&(o[Pt]&=-513,Pa(o[En],-1))}finally{Hg()}}}function rI(s,o,l,u,h){const g=Nr(),v=2&u;try{na(-1),v&&o.length>hn&&GE(s,o,hn,!1),Jr(v?2:0,h),l(u,h)}finally{na(g),Jr(v?3:1,h)}}function mv(s,o,l){if(Sa(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}function _v(s,o,l){Dl()&&(function qT(s,o,l,u){const h=l.directiveStart,g=l.directiveEnd;Ti(l)&&function hI(s,o,l){const u=qn(o,s),h=iI(l),g=s[io],v=sc(s,Mm(s,h,null,l.onPush?32:16,u,o,g,g.createRenderer(u,l),null,null,null));s[o.index]=v}(o,l,s.data[h+l.componentOffset]),s.firstCreatePass||la(l,o),Fr(u,o);const v=l.initialInputs;for(let I=h;I<g;I++){const C=s.data[I],R=Ki(o,s,I,l);Fr(R,o),null!==v&&wv(0,I-h,R,C,0,v),Xr(C)&&(Qn(l.index,o)[Rn]=Ki(o,s,I,l))}}(s,o,l,qn(l,o)),64==(64&l.flags)&&uI(s,o,l))}function ph(s,o,l=qn){const u=o.localNames;if(null!==u){let h=o.index+1;for(let g=0;g<u.length;g+=2){const v=u[g+1],I=-1===v?l(o,s):s[v];s[h++]=I}}}function iI(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=km(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function km(s,o,l,u,h,g,v,I,C,R){const k=hn+u,U=k+h,j=function GT(s,o){const l=[];for(let u=0;u<o;u++)l.push(u<s?null:Nt);return l}(k,U),ne="function"==typeof R?R():R;return j[tt]={type:s,blueprint:j,template:l,queries:null,viewQuery:I,declTNode:o,data:j.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:ne,incompleteFirstPass:!1}}function yv(s,o,l,u){const h=_p(o);null===l?h.push(u):(h.push(l),s.firstCreatePass&&bv(s).push(u,h.length-1))}function oI(s,o,l,u){for(let h in s)if(s.hasOwnProperty(h)){l=null===l?{}:l;const g=s[h];null===u?Lu(l,o,h,g):u.hasOwnProperty(h)&&Lu(l,o,u[h],g)}return l}function Lu(s,o,l,u){s.hasOwnProperty(l)?s[l].push(o,u):s[l]=[o,u]}function Qi(s,o,l,u,h,g,v,I){const C=qn(o,l);let k,R=o.inputs;!I&&null!=R&&(k=R[u])?(zs(s,l,k,u,h),Ti(o)&&function hp(s,o){const l=Qn(o,s);16&l[Pt]||(l[Pt]|=32)}(l,o.index)):3&o.type&&(u=function lI(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),h=null!=v?v(h,o.value||"",u):h,g.setProperty(C,u,h))}function fp(s,o,l,u){if(Dl()){const h=null===u?null:{"":-1},g=function vv(s,o){const l=s.directiveRegistry;let u=null,h=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];if(cv(o,v.selectors,!1))if(u||(u=[]),Xr(v))if(null!==v.findHostDirectiveDefs){const I=[];h=h||new Map,v.findHostDirectiveDefs(v,I,h),u.unshift(...I,v),gp(s,o,I.length)}else u.unshift(v),gp(s,o,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,u,h),u.push(v)}return null===u?null:[u,h]}(s,l);let v,I;null===g?v=I=null:[v,I]=g,null!==v&&Nm(s,o,l,v,h,I),h&&function ZT(s,o,l){if(o){const u=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=l[o[h+1]];if(null==g)throw new ve(-301,!1);u.push(o[h],g)}}}(l,u,h)}l.mergedAttrs=ds(l.mergedAttrs,l.attrs)}function Nm(s,o,l,u,h,g){for(let R=0;R<u.length;R++)Wa(la(l,o),s,u[R].type);!function YT(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}(l,s.data.length,u.length);for(let R=0;R<u.length;R++){const k=u[R];k.providersResolver&&k.providersResolver(k)}let v=!1,I=!1,C=dp(s,o,u.length,null);for(let R=0;R<u.length;R++){const k=u[R];l.mergedAttrs=ds(l.mergedAttrs,k.hostAttrs),QT(s,l,o,C,k),dI(C,k,h),null!==k.contentQueries&&(l.flags|=4),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(l.flags|=64);const U=k.type.prototype;!v&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(l.index),v=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(l.index),I=!0),C++}!function aI(s,o,l){const h=o.directiveEnd,g=s.data,v=o.attrs,I=[];let C=null,R=null;for(let k=o.directiveStart;k<h;k++){const U=g[k],j=l?l.get(U):null,Ie=j?j.outputs:null;C=oI(U.inputs,k,C,j?j.inputs:null),R=oI(U.outputs,k,R,Ie);const Se=null===C||null===v||$E(o)?null:Lm(C,k,v);I.push(Se)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=C,o.outputs=R}(s,l,g)}function uI(s,o,l){const u=l.directiveStart,h=l.directiveEnd,g=l.index,v=function Gc(){return Rt.lFrame.currentDirectiveIndex}();try{na(g);for(let I=u;I<h;I++){const C=s.data[I],R=o[I];Wc(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&KT(C,R)}}finally{na(-1),Wc(v)}}function KT(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function gp(s,o,l){o.componentOffset=l,(s.components??(s.components=[])).push(o.index)}function dI(s,o,l){if(l){if(o.exportAs)for(let u=0;u<o.exportAs.length;u++)l[o.exportAs[u]]=s;Xr(o)&&(l[""]=s)}}function QT(s,o,l,u,h){s.data[u]=h;const g=h.factory||(h.factory=lo(h.type)),v=new Ns(g,Xr(h),Ou);s.blueprint[u]=v,l[u]=v,function WT(s,o,l,u,h){const g=h.hostBindings;if(g){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const I=~o.index;(function pp(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(v)!=I&&v.push(I),v.push(l,u,g)}}(s,o,u,dp(s,l,h.hostVars,Nt),h)}function Hs(s,o,l,u,h,g){const v=qn(s,o);!function mp(s,o,l,u,h,g,v){if(null==g)s.removeAttribute(o,h,l);else{const I=null==v?xe(g):v(g,u||"",h);s.setAttribute(o,h,I,l)}}(o[Ot],v,g,s.value,l,u,h)}function wv(s,o,l,u,h,g){const v=g[o];if(null!==v){const I=u.setInput;for(let C=0;C<v.length;){const R=v[C++],k=v[C++],U=v[C++];null!==I?u.setInput(l,U,R,k):l[k]=U}}}function Lm(s,o,l){let u=null,h=0;for(;h<l.length;){const g=l[h];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===u&&(u=[]);const v=s[g];for(let I=0;I<v.length;I+=2)if(v[I]===o){u.push(g,v[I+1],l[h+1]);break}}h+=2}else h+=2;else h+=4}return u}function ic(s,o,l,u){return[s,!0,!1,o,null,0,u,l,null,null]}function XT(s,o){const l=Qn(o,s);if(ta(l)){const u=l[tt];48&l[Pt]?rc(u,l,u.template,l[Rn]):l[ss]>0&&gh(l)}}function gh(s){for(let u=fu(s);null!==u;u=pu(u))for(let h=br;h<u.length;h++){const g=u[h];if(ta(g))if(512&g[Pt]){const v=g[tt];rc(v,g,v.template,g[Rn])}else g[ss]>0&&gh(g)}const l=s[tt].components;if(null!==l)for(let u=0;u<l.length;u++){const h=Qn(l[u],s);ta(h)&&h[ss]>0&&gh(h)}}function pI(s,o){const l=Qn(o,s),u=l[tt];(function JT(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(u,l),_a(u,l,l[Rn])}function sc(s,o){return s[Ms]?s[kc][kr]=o:s[Ms]=o,s[kc]=o,o}function mh(s){for(;s;){s[Pt]|=32;const o=hu(s);if(Aa(s)&&!o)return s;s=o}return null}function Fm(s,o,l,u=!0){const h=o[io];h.begin&&h.begin();try{rc(s,o,s.template,l)}catch(v){throw u&&_h(o,v),v}finally{h.end&&h.end()}}function Iv(s,o,l){qc(0),o(s,l)}function _p(s){return s[Yr]||(s[Yr]=[])}function bv(s){return s.cleanup||(s.cleanup=[])}function _h(s,o){const l=s[zo],u=l?l.get(To,null):null;u&&u.handleError(o)}function zs(s,o,l,u,h){for(let g=0;g<l.length;){const v=l[g++],I=l[g++],C=o[v],R=s.data[v];null!==R.setInput?R.setInput(C,h,u,I):C[I]=h}}function Um(s,o,l){let u=l?s.styles:null,h=l?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?h=_e(h,I):2==g&&(u=_e(u,I+": "+o[++v]+";"))}l?s.styles=u:s.stylesWithoutHost=u,l?s.classes=h:s.classesWithoutHost=h}function yp(s,o,l,u,h=!1){for(;null!==l;){const g=o[l.index];if(null!==g&&u.push(jn(g)),Di(g))for(let I=br;I<g.length;I++){const C=g[I],R=C[tt].firstChild;null!==R&&yp(C[tt],C,R,u)}const v=l.type;if(8&v)yp(s,o,l.child,u);else if(32&v){const I=Kd(l,o);let C;for(;C=I();)u.push(C)}else if(16&v){const I=qf(o,l);if(Array.isArray(I))u.push(...I);else{const C=hu(o[Ir]);yp(C[tt],C,I,u,!0)}}l=h?l.projectionNext:l.next}return u}class Fu{get rootNodes(){const o=this._lView,l=o[tt];return yp(l,o,l.firstChild,[])}constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rn]}set context(o){this._lView[Rn]=o}get destroyed(){return 128==(128&this._lView[Pt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[En];if(Di(o)){const l=o[oo],u=l?l.indexOf(this):-1;u>-1&&(Hf(o,u),Ya(l,u))}this._attachedToViewContainer=!1}rm(this._lView[tt],this._lView)}onDestroy(o){yv(this._lView[tt],this._lView,null,o)}markForCheck(){mh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Pt]&=-65}reattach(){this._lView[Pt]|=64}detectChanges(){Fm(this._lView[tt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ve(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _u(s,o){Ja(s,o,o[Ot],2,null,null)}(this._lView[tt],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ve(902,!1);this._appRef=o}}class vp extends Fu{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Fm(o[tt],o,o[Rn],!1)}checkNoChanges(){}get context(){return null}}class yh extends ku{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=nn(o);return new wp(l,this.ngModule)}}function _I(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class yI{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,u){u=Y(u);const h=this.injector.get(o,dh,u);return h!==dh||l===dh?h:this.parentInjector.get(o,l,u)}}class wp extends kE{get inputs(){return _I(this.componentDef.inputs)}get outputs(){return _I(this.componentDef.outputs)}constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function Em(s){return s.map(MT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}create(o,l,u,h){let g=(h=h||this.ngModule)instanceof Ql?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new yI(o,g):o,I=v.get(tl,null);if(null===I)throw new ve(407,!1);const C=v.get(ip,null),R=I.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",U=u?function sI(s,o,l){return s.selectRootElement(o,l===Bn.ShadowDom)}(R,u,this.componentDef.encapsulation):mu(R,k,function Gs(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(k)),j=this.componentDef.onPush?288:272,ne=km(0,null,null,1,0,null,null,null,null,null),Ie=Mm(null,ne,null,j,null,null,I,R,C,v,null);let Se,Ce;xl(Ie);try{const it=this.componentDef;let Ye,Le=null;it.findHostDirectiveDefs?(Ye=[],Le=new Map,it.findHostDirectiveDefs(it,Ye,Le),Ye.push(it)):Ye=[it];const ht=function Ws(s,o){const l=s[tt],u=hn;return s[u]=o,Nu(l,u,2,"#host",null)}(Ie,U),Fe=function vI(s,o,l,u,h,g,v,I){const C=h[tt];!function tS(s,o,l,u){for(const h of s)o.mergedAttrs=ds(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(Um(o,o.mergedAttrs,!0),null!==l&&th(u,l,o))}(u,s,o,v);const R=g.createRenderer(o,l),k=Mm(h,iI(l),null,l.onPush?32:16,h[s.index],s,g,R,I||null,null,null);return C.firstCreatePass&&gp(C,s,u.length-1),sc(h,k),h[s.index]=k}(ht,U,it,Ye,Ie,I,R);Ce=ea(ne,hn),U&&function nS(s,o,l,u){if(u)xn(s,l,["ng-version",NE.full]);else{const{attrs:h,classes:g}=function uv(s){const o=[],l=[];let u=1,h=2;for(;u<s.length;){let g=s[u];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++u]):8===h&&l.push(g);else{if(!Ao(h))break;h=g}u++}return{attrs:o,classes:l}}(o.selectors[0]);h&&xn(s,l,h),g&&g.length>0&&Eu(s,l,g.join(" "))}}(R,it,U,u),void 0!==l&&function rS(s,o,l){const u=s.projection=[];for(let h=0;h<o.length;h++){const g=l[h];u.push(null!=g?Array.from(g):null)}}(Ce,this.ngContentSelectors,l),Se=function wI(s,o,l,u,h,g){const v=dr(),I=h[tt],C=qn(v,h);Nm(I,h,v,l,null,u);for(let k=0;k<l.length;k++)Fr(Ki(h,I,v.directiveStart+k,v),h);uI(I,h,v),C&&Fr(C,h);const R=Ki(h,I,v.directiveStart+v.componentOffset,v);if(s[Rn]=h[Rn]=R,null!==g)for(const k of g)k(R,o);return mv(I,v,s),R}(Fe,it,Ye,Le,Ie,[iS]),_a(ne,Ie,null)}finally{Hg()}return new Vm(this.componentType,Se,ma(Ce,Ie),Ie,Ce)}}class Vm extends vT{constructor(o,l,u,h,g){super(),this.location=u,this._rootLView=h,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new vp(h),this.componentType=o}setInput(o,l){const u=this._tNode.inputs;let h;if(null!==u&&(h=u[o])){const g=this._rootLView;zs(g[tt],g,h,o,l),mh(Qn(this._tNode.index,g))}}get injector(){return new Si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function iS(){const s=dr();La(we()[tt],s)}function Ep(s){return!!ya(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function ya(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function pi(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Hm(s,o,l,u){const h=we();return pi(h,po(),o)&&(Qt(),Hs(In(),h,s,o,l,u)),Hm}function rl(s,o,l,u){return pi(s,po(),l)?o+xe(l)+u:Nt}function dc(s,o,l,u,h,g,v,I){const C=we(),R=Qt(),k=s+hn,U=R.firstCreatePass?function TI(s,o,l,u,h,g,v,I,C){const R=o.consts,k=Nu(o,s,4,v||null,ls(R,I));fp(o,l,k,ls(R,C)),La(o,k);const U=k.tView=km(2,k,u,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,R);return null!==o.queries&&(o.queries.template(o,k),U.queries=o.queries.embeddedTView(k)),k}(k,R,C,o,l,u,h,g,v):R.data[k];ei(U,!1);const j=C[Ot].createComment("");Io(R,C,j,U),Fr(j,C),sc(C,C[k]=ic(j,C,j,U)),Pc(U)&&_v(R,C,U),null!=v&&ph(C,U,I)}function Mv(s,o,l){const u=we();return pi(u,po(),o)&&Qi(Qt(),In(),u,s,o,u[Ot],l,!1),Mv}function Cp(s,o,l,u,h){const v=h?"class":"style";zs(s,l,o.inputs[v],v,u)}function zm(s,o,l,u){const h=we(),g=Qt(),v=hn+s,I=h[Ot],C=g.firstCreatePass?function fS(s,o,l,u,h,g){const v=o.consts,C=Nu(o,s,2,u,ls(v,h));return fp(o,l,C,ls(v,g)),null!==C.attrs&&Um(C,C.attrs,!1),null!==C.mergedAttrs&&Um(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(v,g,h,o,l,u):g.data[v],R=h[v]=mu(I,o,function zg(){return Rt.lFrame.currentNamespace}()),k=Pc(C);return ei(C,!0),th(I,R,C),32!=(32&C.flags)&&Io(g,h,R,C),0===function Cl(){return Rt.lFrame.elementDepthCount}()&&Fr(R,h),function Bc(){Rt.lFrame.elementDepthCount++}(),k&&(_v(g,h,C),mv(g,C,h)),null!==u&&ph(h,C),zm}function Gm(){let s=dr();Sl()?function Al(){Rt.lFrame.isParent=!1}():(s=s.parent,ei(s,!1));const o=s;!function jc(){Rt.lFrame.elementDepthCount--}();const l=Qt();return l.firstCreatePass&&(La(l,s),Sa(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Od(s){return 0!=(8&s.flags)}(o)&&Cp(l,o,we(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ef(s){return 0!=(16&s.flags)}(o)&&Cp(l,o,we(),o.stylesWithoutHost,!1),Gm}function kv(s,o,l,u){return zm(s,o,l,u),Gm(),kv}function Pv(){return we()}function Km(s){return!!s&&"function"==typeof s.then}function Ov(s){return!!s&&"function"==typeof s.subscribe}const Nv=Ov;function Zm(s,o,l,u){const h=we(),g=Qt(),v=dr();return function AI(s,o,l,u,h,g,v){const I=Pc(u),R=s.firstCreatePass&&bv(s),k=o[Rn],U=_p(o);let j=!0;if(3&u.type||v){const Se=qn(u,o),Ce=v?v(Se):Se,it=U.length,Ye=v?ht=>v(jn(ht[u.index])):u.index;let Le=null;if(!v&&I&&(Le=function SI(s,o,l,u){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===l&&h[g+1]===u){const I=o[Yr],C=h[g+2];return I.length>C?I[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,u.index)),null!==Le)(Le.__ngLastListenerFn__||Le).__ngNextListenerFn__=g,Le.__ngLastListenerFn__=g,j=!1;else{g=xI(u,o,k,g,!1);const ht=l.listen(Ce,h,g);U.push(g,ht),R&&R.push(h,Ye,it,it+1)}}else g=xI(u,o,k,g,!1);const ne=u.outputs;let Ie;if(j&&null!==ne&&(Ie=ne[h])){const Se=Ie.length;if(Se)for(let Ce=0;Ce<Se;Ce+=2){const Fe=o[Ie[Ce]][Ie[Ce+1]].subscribe(g),$n=U.length;U.push(g,Fe),R&&R.push(h,u.index,$n,-($n+1))}}}(g,h,h[Ot],v,s,o,u),Zm}function RI(s,o,l,u){try{return Jr(6,o,l),!1!==l(u)}catch(h){return _h(s,h),!1}finally{Jr(7,o,l)}}function xI(s,o,l,u,h){return function g(v){if(v===Function)return u;mh(s.componentOffset>-1?Qn(s.index,o):o);let C=RI(o,l,u,v),R=g.__ngNextListenerFn__;for(;R;)C=RI(o,l,R,v)&&C,R=R.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Lv(s=1){return function Uy(s){return(Rt.lFrame.contextLView=function kd(s,o){for(;s>0;)o=o[bi],s--;return o}(s,Rt.lFrame.contextLView))[Rn]}(s)}function Ym(s,o,l,u,h){const g=we(),v=rl(g,o,l,u);return v!==Nt&&Qi(Qt(),In(),g,s,v,g[Ot],h,!1),Ym}function Qm(s,o){return s<<17|o<<2}function hc(s){return s>>17&32767}function Is(s){return 2|s}function $u(s){return(131068&s)>>2}function Dp(s,o){return-131069&s|o<<2}function Fv(s){return 1|s}function jI(s,o,l,u,h){const g=s[l+1],v=null===o;let I=u?hc(g):$u(g),C=!1;for(;0!==I&&(!1===C||v);){const k=s[I+1];$I(s[I],o)&&(C=!0,s[I+1]=u?Fv(k):Is(k)),I=u?hc(k):$u(k)}C&&(s[l+1]=u?Is(g):Fv(g))}function $I(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&on(s,o)>=0}function Uv(s,o){return function Ro(s,o,l,u){const h=we(),g=Qt(),v=function Wi(s){const o=Rt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);g.firstUpdatePass&&function jr(s,o,l,u){const h=s.data;if(null===h[l+1]){const g=h[Nr()],v=function sl(s,o){return o>=s.expandoStartIndex}(s,l);(function ol(s,o){return 0!=(s.flags&(o?8:16))})(g,u)&&null===o&&!v&&(o=!1),o=function bs(s,o,l,u){const h=function cs(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=u?o.residualClasses:o.residualStyles;if(null===h)0===(u?o.classBindings:o.styleBindings)&&(l=Sp(l=Vv(null,s,o,l,u),o.attrs,u),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=Vv(h,s,o,l,u),null===g){let C=function Tp(s,o,l){const u=l?o.classBindings:o.styleBindings;if(0!==$u(u))return s[hc(u)]}(s,o,u);void 0!==C&&Array.isArray(C)&&(C=Vv(null,s,o,C[1],u),C=Sp(C,o.attrs,u),function RS(s,o,l,u){s[hc(l?o.classBindings:o.styleBindings)]=u}(s,o,u,C))}else g=function xS(s,o,l){let u;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)u=Sp(u,s[g].hostAttrs,l);return Sp(u,o.attrs,l)}(s,o,u)}return void 0!==g&&(u?o.residualClasses=g:o.residualStyles=g),l}(h,g,o,u),function wS(s,o,l,u,h,g){let v=g?o.classBindings:o.styleBindings,I=hc(v),C=$u(v);s[u]=l;let k,R=!1;if(Array.isArray(l)?(k=l[1],(null===k||on(l,k)>0)&&(R=!0)):k=l,h)if(0!==C){const j=hc(s[I+1]);s[u+1]=Qm(j,I),0!==j&&(s[j+1]=Dp(s[j+1],u)),s[I+1]=function yS(s,o){return 131071&s|o<<17}(s[I+1],u)}else s[u+1]=Qm(I,0),0!==I&&(s[I+1]=Dp(s[I+1],u)),I=u;else s[u+1]=Qm(C,0),0===I?I=u:s[C+1]=Dp(s[C+1],u),C=u;R&&(s[u+1]=Is(s[u+1])),jI(s,k,u,!0),jI(s,k,u,!1),function ES(s,o,l,u,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&on(g,o)>=0&&(l[u+1]=Fv(l[u+1]))}(o,k,s,u,g),v=Qm(I,C),g?o.classBindings=v:o.styleBindings=v}(h,g,o,l,v,u)}}(g,s,v,u),o!==Nt&&pi(h,v,o)&&function Bv(s,o,l,u,h,g,v,I){if(!(3&o.type))return;const C=s.data,R=C[I+1],k=function BI(s){return 1==(1&s)}(R)?YI(C,o,l,h,$u(R),v):void 0;Hu(k)||(Hu(g)||function _S(s){return 2==(2&s)}(R)&&(g=YI(C,null,l,h,I,v)),function cm(s,o,l,u,h){if(o)h?s.addClass(l,u):s.removeClass(l,u);else{let g=-1===u.indexOf("-")?void 0:gs.DashCase;null==h?s.removeStyle(l,u,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=gs.Important),s.setStyle(l,u,h,g))}}(u,v,ho(Nr(),l),h,g))}(g,g.data[Nr()],h,h[Ot],s,h[v+1]=function Ys(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ye(le(s)))),s}(o,l),u,v)}(s,o,null,!0),Uv}function Vv(s,o,l,u,h){let g=null;const v=l.directiveEnd;let I=l.directiveStylingLast;for(-1===I?I=l.directiveStart:I++;I<v&&(g=o[I],u=Sp(u,g.hostAttrs,h),g!==s);)I++;return null!==s&&(l.directiveStylingLast=I),u}function Sp(s,o,l){const u=l?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Lr(s,v,!!l||o[++g]))}return void 0===s?null:s}function YI(s,o,l,u,h,g){const v=null===o;let I;for(;h>0;){const C=s[h],R=Array.isArray(C),k=R?C[1]:C,U=null===k;let j=l[h+1];j===Nt&&(j=U?qt:void 0);let ne=U?Qa(j,u):k===u?j:void 0;if(R&&!Hu(ne)&&(ne=Qa(C,u)),Hu(ne)&&(I=ne,v))return I;const Ie=s[h+1];h=v?hc(Ie):$u(Ie)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(I=Qa(C,u))}return I}function Hu(s){return void 0!==s}function al(s,o=""){const l=we(),u=Qt(),h=s+hn,g=u.firstCreatePass?Nu(u,h,1,o,null):u.data[h],v=l[h]=function Vf(s,o){return s.createText(o)}(l[Ot],o);Io(u,l,v,g),ei(g,!1)}function Dh(s){return Rp("",s,""),Dh}function Rp(s,o,l){const u=we(),h=rl(u,s,o,l);return h!==Nt&&function vs(s,o,l){const u=ho(o,s);!function Bf(s,o,l){s.setValue(o,l)}(s[Ot],u,l)}(u,Nr(),h),Rp}const zu=void 0;var e_=["en",[["a","p"],["AM","PM"],zu],[["AM","PM"],zu,zu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zu,"{1} 'at' {0}",zu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Oi(s){const l=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let Gu={};function Th(s){const o=function US(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=lb(o);if(l)return l;const u=o.split("-")[0];if(l=lb(u),l)return l;if("en"===u)return e_;throw new ve(701,!1)}function t_(s){return Th(s)[St.PluralCase]}function lb(s){return s in Gu||(Gu[s]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[s]),Gu[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const Wu="en-US";let cb=Wu;function Vp(s,o,l,u,h){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)Vp(s[g],o,l,u,h);else{const g=Qt(),v=we();let I=Ru(s)?s:J(s.provide),C=Mu(s);const R=dr(),k=1048575&R.providerIndexes,U=R.directiveStart,j=R.providerIndexes>>20;if(Ru(s)||!s.multi){const ne=new Ns(C,h,Ou),Ie=aw(I,o,h?k:k+j,U);-1===Ie?(Wa(la(R,v),g,I),xb(g,s,o.length),o.push(I),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),l.push(ne),v.push(ne)):(l[Ie]=ne,v[Ie]=ne)}else{const ne=aw(I,o,k+j,U),Ie=aw(I,o,k,k+j),Ce=Ie>=0&&l[Ie];if(h&&!Ce||!h&&!(ne>=0&&l[ne])){Wa(la(R,v),g,I);const it=function Ob(s,o,l,u,h){const g=new Ns(s,l,Ou);return g.multi=[],g.index=o,g.componentProviders=0,Mb(g,h,u&&!l),g}(h?Pb:kb,l.length,h,u,C);!h&&Ce&&(l[Ie].providerFactory=it),xb(g,s,o.length,0),o.push(I),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),l.push(it),v.push(it)}else xb(g,s,ne>-1?ne:Ie,Mb(l[h?Ie:ne],C,!h&&u));!h&&u&&Ce&&l[Ie].componentProviders++}}}function xb(s,o,l,u){const h=Ru(o),g=function gT(s){return!!s.useClass}(o);if(h||g){const C=(g?J(o.useClass):o).prototype.ngOnDestroy;if(C){const R=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const k=R.indexOf(l);-1===k?R.push(l,[u,C]):R[k+1].push(u,C)}else R.push(l,C)}}}function Mb(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function aw(s,o,l,u){for(let h=l;h<u;h++)if(o[h]===s)return h;return-1}function kb(s,o,l,u){return h_(this.multi,[])}function Pb(s,o,l,u){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Ki(l,l[tt],this.providerFactory.index,u);g=I.slice(0,v),h_(h,g);for(let C=v;C<I.length;C++)g.push(I[C])}else g=[],h_(h,g);return g}function h_(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function Rh(s,o=[]){return l=>{l.providersResolver=(u,h)=>function ow(s,o,l){const u=Qt();if(u.firstCreatePass){const h=Xr(s);Vp(l,u.data,u.blueprint,h,!0),Vp(o,u.data,u.blueprint,h,!1)}}(u,h?h(s):s,o)}}class xh{}class lw{}function eA(s,o){return new cw(s,o??null)}class cw extends xh{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yh(this);const u=wr(o);this._bootstrapComponents=ki(u.bootstrap),this._r3Injector=YE(o,l,[{provide:xh,useValue:this},{provide:ku,useValue:this.componentFactoryResolver}],ye(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class f_ extends lw{constructor(o){super(),this.moduleType=o}create(o){return new cw(this.moduleType,o)}}class Nb extends xh{constructor(o,l,u){super(),this.componentFactoryResolver=new yh(this),this.instance=null;const h=new nv([...o,{provide:xh,useValue:this},{provide:ku,useValue:this.componentFactoryResolver}],l||xu(),u,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function uw(s,o,l=null){return new Nb(s,o,l).injector}let tA=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const u=Su(0,l.type),h=u.length>0?uw([u],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Qe({token:s,providedIn:"environment",factory:()=>new s(H(Ql))}),s})();function Lb(s){s.getStandaloneInjector=o=>o.get(tA).getOrCreateStandaloneInjector(s)}function Bp(s,o,l,u,h){return function $r(s,o,l,u,h,g,v){const I=o+l;return function Ks(s,o,l,u){const h=pi(s,o,l);return pi(s,o+1,u)||h}(s,I,h,g)?function qs(s,o,l){return s[o]=l}(s,I+2,v?u.call(v,h,g):u(h,g)):function or(s,o){const l=s[o];return l===Nt?void 0:l}(s,I+2)}(we(),function Xn(){const s=Rt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),s,o,l,u,h)}function __(s){return o=>{setTimeout(s,void 0,o)}}const ko=class Li extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,u){let h=o,g=l||(()=>null),v=u;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=__(g),h&&(h=__(h)),v&&(v=__(v)));const I=super.subscribe({next:h,error:g,complete:v});return o instanceof te.w0&&o.add(I),I}};function yw(){return this._results[Symbol.iterator]()}class y_{get changes(){return this._changes||(this._changes=new ko)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=y_.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=yw)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const u=this;u.dirty=!1;const h=function ni(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function nu(s,o,l){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){let h=s[u],g=o[u];if(l&&(h=l(h),g=l(g)),g!==h)return!1}return!0}(u._results,h,l))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let kh=(()=>{class s{}return s.__NG_ELEMENT_ID__=cA,s})();const Wb=kh,vw=class extends Wb{constructor(o,l,u){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=u}createEmbeddedView(o,l){const u=this._declarationTContainer.tView,h=Mm(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null,l||null);h[Go]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[Ci];return null!==v&&(h[Ci]=v.createEmbeddedView(u)),_a(u,h,o),new Fu(h)}};function cA(){return v_(dr(),we())}function v_(s,o){return 4&s.type?new vw(o,s,ma(s,o)):null}let ul=(()=>{class s{}return s.__NG_ELEMENT_ID__=qb,s})();function qb(){return Hp(dr(),we())}const ww=ul,Ew=class extends ww{constructor(o,l,u){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=u}get element(){return ma(this._hostTNode,this._hostLView)}get injector(){return new Si(this._hostTNode,this._hostLView)}get parentInjector(){const o=Nl(this._hostTNode,this._hostLView);if(Yc(o)){const l=Pl(o,this._hostLView),u=ja(o);return new Si(l[tt].data[u+8],l)}return new Si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=Kb(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-br}createEmbeddedView(o,l,u){let h,g;"number"==typeof u?h=u:null!=u&&(h=u.index,g=u.injector);const v=o.createEmbeddedView(l||{},g);return this.insert(v,h),v}createComponent(o,l,u,h,g){const v=o&&!function zl(s){return"function"==typeof s}(o);let I;if(v)I=l;else{const U=l||{};I=U.index,u=U.injector,h=U.projectableNodes,g=U.environmentInjector||U.ngModuleRef}const C=v?o:new wp(nn(o)),R=u||this.parentInjector;if(!g&&null==C.ngModule){const j=(v?R:this.parentInjector).get(Ql,null);j&&(g=j)}const k=C.create(R,h,void 0,g);return this.insert(k.hostView,I),k}insert(o,l){const u=o._lView,h=u[tt];if(function Il(s){return Di(s[En])}(u)){const k=this.indexOf(o);if(-1!==k)this.detach(k);else{const U=u[En],j=new Ew(U,U[Wn],U[En]);j.detach(j.indexOf(o))}}const g=this._adjustIndex(l),v=this._lContainer;!function Gy(s,o,l,u){const h=br+u,g=l.length;u>0&&(l[h-1][kr]=o),u<g-br?(o[kr]=l[h],Gl(l,br+u,o)):(l.push(o),o[kr]=null),o[En]=l;const v=o[Go];null!==v&&l!==v&&function Wy(s,o){const l=s[Pr];o[Ir]!==o[En][En][Ir]&&(s[vd]=!0),null===l?s[Pr]=[o]:l.push(o)}(v,o);const I=o[Ci];null!==I&&I.insertView(s),o[Pt]|=64}(h,u,v,g);const I=wu(g,v),C=u[Ot],R=_s(C,v[Wo]);return null!==R&&function tm(s,o,l,u,h,g){u[ui]=h,u[Wn]=o,Ja(s,u,l,1,h,g)}(h,v[Wn],C,u,R,I),o.attachToViewContainerRef(),Gl(w_(v),g,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=Kb(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),u=Hf(this._lContainer,l);u&&(Ya(w_(this._lContainer),l),rm(u[tt],u))}detach(o){const l=this._adjustIndex(o,-1),u=Hf(this._lContainer,l);return u&&null!=Ya(w_(this._lContainer),l)?new Fu(u):null}_adjustIndex(o,l=0){return o??this.length+l}};function Kb(s){return s[oo]}function w_(s){return s[oo]||(s[oo]=[])}function Hp(s,o){let l;const u=o[s.index];if(Di(u))l=u;else{let h;if(8&s.type)h=jn(u);else{const g=o[Ot];h=g.createComment("");const v=qn(s,o);fi(g,_s(g,v),h,function Xd(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=l=ic(u,o,h,s),sc(o,l)}return new Ew(l,s,o)}class zp{constructor(o){this.queryList=o,this.matches=null}clone(){return new zp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gp{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const u=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let g=0;g<u;g++){const v=l.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new Gp(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==C_(o,l).matches&&this.queries[l].setDirty()}}class E_{constructor(o,l,u=null){this.predicate=o,this.flags=l,this.read=u}}class Iw{constructor(o=[]){this.queries=o}elementStart(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let u=0;u<this.length;u++){const h=null!==l?l.length:0,g=this.getByIndex(u).embeddedTView(o,h);g&&(g.indexInDeclarationView=u,null!==l?l.push(g):l=[g])}return null!==l?new Iw(l):null}template(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class bw{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new bw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let u=o.parent;for(;null!==u&&8&u.type&&u.index!==l;)u=u.parent;return l===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const g=u[h];this.matchTNodeWithReadOption(o,l,Cw(l,g)),this.matchTNodeWithReadOption(o,l,vo(l,o,g,!1,!1))}else u===kh?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,vo(l,o,u,!1,!1))}matchTNodeWithReadOption(o,l,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===Do||h===ul||h===kh&&4&l.type)this.addMatch(l.index,-2);else{const g=vo(l,o,h,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,u)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function Cw(s,o){const l=s.localNames;if(null!==l)for(let u=0;u<l.length;u+=2)if(l[u]===o)return l[u+1];return null}function uA(s,o,l,u){return-1===l?function Zb(s,o){return 11&s.type?ma(s,o):4&s.type?v_(s,o):null}(o,s):-2===l?function dA(s,o,l){return l===Do?ma(o,s):l===kh?v_(o,s):l===ul?Hp(o,s):void 0}(s,o,u):Ki(s,s[tt],l,o)}function oi(s,o,l,u){const h=o[Ci].queries[u];if(null===h.matches){const g=s.data,v=l.matches,I=[];for(let C=0;C<v.length;C+=2){const R=v[C];I.push(R<0?null:uA(o,g[R],v[C+1],l.metadata.read))}h.matches=I}return h.matches}function Xu(s,o,l,u){const h=s.queries.getByIndex(l),g=h.matches;if(null!==g){const v=oi(s,o,h,l);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)u.push(v[I/2]);else{const R=g[I+1],k=o[-C];for(let U=br;U<k.length;U++){const j=k[U];j[Go]===j[En]&&Xu(j[tt],j,R,u)}if(null!==k[Pr]){const U=k[Pr];for(let j=0;j<U.length;j++){const ne=U[j];Xu(ne[tt],ne,R,u)}}}}}return u}function Yb(s){const o=we(),l=Qt(),u=Rd();qc(u+1);const h=C_(l,u);if(s.dirty&&function Ma(s){return 4==(4&s[Pt])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Xu(l,o,u,[]):oi(l,o,h,u);s.reset(g,uh),s.notifyOnChanges()}return!0}return!1}function Qb(s,o,l,u){const h=Qt();if(h.firstCreatePass){const g=dr();(function b_(s,o,l){null===s.queries&&(s.queries=new Iw),s.queries.track(new bw(o,l))})(h,new E_(o,l,u),g.index),function Dw(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}!function qp(s,o,l){const u=new y_(4==(4&l));yv(s,o,u,u.destroy),null===o[Ci]&&(o[Ci]=new Gp),o[Ci].queries.push(new zp(u))}(h,we(),l)}function Xb(){return function I_(s,o){return s[Ci].queries[o].queryList}(we(),Rd())}function C_(s,o){return s.queries.getByIndex(o)}function Aw(s){return!!wr(s)}function fc(...s){}const pC=new Yt("Application Initializer");let Nh=(()=>{class s{constructor(l){this.appInits=l,this.resolve=fc,this.reject=fc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Km(g))l.push(g);else if(Nv(g)){const v=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});l.push(v)}}Promise.all(l).then(()=>{u()}).catch(h=>{this.reject(h)}),0===l.length&&u(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(H(pC,8))},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Jp=new Yt("AppId",{providedIn:"root",factory:function k_(){return`${P_()}${P_()}${P_()}`}});function P_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jw=new Yt("Platform Initializer"),bA=new Yt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let N_=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Ia=new Yt("LocaleId",{providedIn:"root",factory:()=>K(Ia,_t.Optional|_t.SkipSelf)||function eg(){return typeof $localize<"u"&&$localize.locale||Wu}()}),$w=new Yt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Hw{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let rd=(()=>{class s{compileModuleSync(l){return new f_(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const u=this.compileModuleSync(l),g=ki(wr(l).declarations).reduce((v,I)=>{const C=nn(I);return C&&v.push(new wp(C)),v},[]);return new Hw(u,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const _C=(()=>Promise.resolve(0))();function kn(s){typeof Zone>"u"?_C.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Xs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ko(!1),this.onMicrotaskEmpty=new ko(!1),this.onStable=new ko(!1),this.onError=new ko(!1),typeof Zone>"u")throw new ve(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&l,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function L_(){let s=dn.requestAnimationFrame,o=dn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function yC(s){const o=()=>{!function DA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(dn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Gw(s),s.isCheckStableRunning=!0,sd(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Gw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,u,h,g,v,I)=>{try{return vC(s),l.invokeTask(h,g,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),wC(s)}},onInvoke:(l,u,h,g,v,I,C)=>{try{return vC(s),l.invoke(h,g,v,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),wC(s)}},onHasTask:(l,u,h,g)=>{l.hasTask(h,g),u===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Gw(s),sd(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,u,h,g)=>(l.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xs.isInAngularZone())throw new ve(909,!1)}static assertNotInAngularZone(){if(Xs.isInAngularZone())throw new ve(909,!1)}run(o,l,u){return this._inner.run(o,l,u)}runTask(o,l,u,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,rg,fc,fc);try{return g.runTask(v,l,u)}finally{g.cancelTask(v)}}runGuarded(o,l,u){return this._inner.runGuarded(o,l,u)}runOutsideAngular(o){return this._outer.run(o)}}const rg={};function sd(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Gw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function vC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function wC(s){s._nesting--,sd(s)}class TA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ko,this.onMicrotaskEmpty=new ko,this.onStable=new ko,this.onError=new ko}run(o,l,u){return o.apply(l,u)}runGuarded(o,l,u){return o.apply(l,u)}runOutsideAngular(o){return o()}runTask(o,l,u,h){return o.apply(l,u)}}const Lh=new Yt(""),dl=new Yt("");let pc,EC=(()=>{class s{constructor(l,u,h){this._ngZone=l,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pc||(function IC(s){pc=s}(h),h.addToWindow(u)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xs.assertNotInAngularZone(),kn(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())kn(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,h){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:h})}whenStable(l,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,u,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(H(Xs),H(Ww),H(dl))},s.\u0275prov=Qe({token:s,factory:s.\u0275fac}),s})(),Ww=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){return pc?.findTestabilityInTree(this,l,u)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const hl=!1;let gc=null;const qw=new Yt("AllowMultipleToken"),Kw=new Yt("PlatformDestroyListeners"),Zw=new Yt("appBootstrapListener");class DC{constructor(o,l){this.name=o,this.token=l}}function AC(s,o,l=[]){const u=`Platform: ${o}`,h=new Yt(u);return(g=[])=>{let v=ig();if(!v||v.injector.get(qw,!1)){const I=[...l,...g,{provide:h,useValue:!0}];s?s(I):function TC(s){if(gc&&!gc.get(qw,!1))throw new ve(400,!1);gc=s;const o=s.get(Jw);(function SC(s){const o=s.get(jw,null);o&&o.forEach(l=>l())})(s)}(function Fh(s=[],o){return tc.create({name:o,providers:[{provide:rp,useValue:"platform"},{provide:Kw,useValue:new Set([()=>gc=null])},...s]})}(I,u))}return function F_(s){const o=ig();if(!o)throw new ve(401,!1);return o}()}}function ig(){return gc?.get(Jw)??null}let Jw=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const h=function Vh(s,o){let l;return l="noop"===s?new TA:("zone.js"===s?void 0:s)||new Xs(o),l}(u?.ngZone,function Uh(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(u)),g=[{provide:Xs,useValue:h}];return h.run(()=>{const v=tc.create({providers:g,parent:this.injector,name:l.moduleType.name}),I=l.create(v),C=I.injector.get(To,null);if(!C)throw new ve(402,!1);return h.runOutsideAngular(()=>{const R=h.onError.subscribe({next:k=>{C.handleError(k)}});I.onDestroy(()=>{U_(this._modules,I),R.unsubscribe()})}),function RC(s,o,l){try{const u=l();return Km(u)?u.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):u}catch(u){throw o.runOutsideAngular(()=>s.handleError(u)),u}}(C,h,()=>{const R=I.injector.get(Nh);return R.runInitializers(),R.donePromise.then(()=>(function Gv(s){he(s,"Expected localeId to be defined"),"string"==typeof s&&(cb=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Ia,Wu)||Wu),this._moduleDoBootstrap(I),I))})})}bootstrapModule(l,u=[]){const h=ar({},u);return function bC(s,o,l){const u=new f_(l);return Promise.resolve(u)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(l){const u=l.injector.get(sg);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new ve(-403,!1);l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ve(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const l=this._injector.get(Kw,null);l&&(l.forEach(u=>u()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(H(tc))},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function ar(s,o){return Array.isArray(o)?o.reduce(ar,s):{...s,...o}}let sg=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(l,u,h){this._zone=l,this._injector=u,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new F.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new F.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Xs.assertNotInAngularZone(),kn(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Xs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ce.T)(g,v.pipe((0,se.B)()))}bootstrap(l,u){const h=l instanceof kE;if(!this._injector.get(Nh).done){!h&&is(l);throw new ve(405,hl)}let v;v=h?l:this._injector.get(ku).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const I=function Yw(s){return s.isBoundToModule}(v)?void 0:this._injector.get(xh),R=v.create(tc.NULL,[],u||v.selector,I),k=R.location.nativeElement,U=R.injector.get(Lh,null);return U?.registerApplication(k),R.onDestroy(()=>{this.detachView(R.hostView),U_(this.components,R),U?.unregisterApplication(k)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new ve(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;U_(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const u=this._injector.get(Zw,[]);u.push(...this._bootstrapListeners),u.forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>U_(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new ve(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(H(Xs),H(Ql),H(To))},s.\u0275prov=Qe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function U_(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}function AA(){return!1}let MC=(()=>{class s{}return s.__NG_ELEMENT_ID__=fl,s})();function fl(s){return function kC(s,o,l){if(Ti(s)&&!l){const u=Qn(s.index,o);return new Fu(u,u)}return 47&s.type?new Fu(o[Ir],o):null}(dr(),we(),16==(16&s))}class n0{constructor(){}supports(o){return Ep(o)}create(o){return new FC(o)}}const LC=(s,o)=>o;class FC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||LC}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,u=this._removalsHead,h=0,g=null;for(;l||u;){const v=!u||l&&l.currentIndex<s0(u,h,g)?l:u,I=s0(v,h,g),C=v.currentIndex;if(v===u)h--,u=u._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{g||(g=[]);const R=I-h,k=C-h;if(R!=k){for(let j=0;j<R;j++){const ne=j<g.length?g[j]:g[j]=0,Ie=ne+j;k<=Ie&&Ie<R&&(g[j]=ne+1)}g[v.previousIndex]=k-R}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Ep(o))throw new ve(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,l=this._itHead,u=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,g,v,I)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,I),u=!0),l=l._next}else h=0,function Uu(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Symbol.iterator]();let u;for(;!(u=l.next()).done;)o(u.value)}}(o,I=>{v=this._trackByFn(h,I),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,I,v,h)),Object.is(l.item,I)||this._addIdentityChange(l,I)):(l=this._mismatch(l,I,v,h),u=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,u,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,g,h)):o=this._addAfter(new G_(l,u),g,h),o}_verifyReinsertion(o,l,u,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,l,u),this._addToMoves(o,u),o}_moveAfter(o,l,u){return this._unlink(o),this._insertAfter(o,l,u),this._addToMoves(o,u),o}_addAfter(o,l,u){return this._insertAfter(o,l,u),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,u){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new r0),this._linkedRecords.put(o),o.currentIndex=u,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,u=o._next;return null===l?this._itHead=u:l._next=u,null===u?this._itTail=l:u._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new r0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class G_{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Cs{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===l||l<=u.currentIndex)&&Object.is(u.trackById,o))return u;return null}remove(o){const l=o._prevDup,u=o._nextDup;return null===l?this._head=u:l._nextDup=u,null===u?this._tail=l:u._prevDup=l,null===this._head}}class r0{constructor(){this.map=new Map}put(o){const l=o.trackById;let u=this.map.get(l);u||(u=new Cs,this.map.set(l,u)),u.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function s0(s,o,l){const u=s.previousIndex;if(null===u)return u;let h=0;return l&&u<l.length&&(h=l[u]),u+o+h}class ad{constructor(){}supports(o){return o instanceof Map||ya(o)}create(){return new LA}}class LA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||ya(o)))throw new ve(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(u,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,u),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(h,u);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let u=l;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const u=o._prev;return l._next=o,l._prev=u,o._prev=l,u&&(u._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const u=new FA(o);return this._records.set(o,u),u.currentValue=l,this._addToAdditions(u),u}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(u=>l(o[u],u))}}class FA{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function W_(){return new o0([new n0])}let o0=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(null!=u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||W_()),deps:[[s,new T,new _n]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(null!=u)return u;throw new ve(901,!1)}}return s.\u0275prov=Qe({token:s,providedIn:"root",factory:W_}),s})();function a0(){return new l0([new ad])}let l0=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||a0()),deps:[[s,new T,new _n]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(u)return u;throw new ve(901,!1)}}return s.\u0275prov=Qe({token:s,providedIn:"root",factory:a0}),s})();const $h=AC(null,"core",[]);let _c=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(H(sg))},s.\u0275mod=$o({type:s}),s.\u0275inj=It({}),s})();function c0(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(pt,Te,L)=>{L.d(Te,{Z:()=>Ke});var p=L(2090),te=L(4859),F=L(9681),ce=L(1877);class se{constructor(ve,Pe){this._delegate=ve,this.firebase=Pe,(0,F._addComponent)(ve,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ve,Pe=F._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(ve);return!$e.isInitialized()&&"EXPLICIT"===(null===(xe=$e.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:Pe})}_removeServiceInstance(ve,Pe=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(Pe)}_addComponent(ve){(0,F._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,F._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function _e(){const lt=function ye(lt){const ve={},Pe={__esModule:!0,initializeApp:function Ae(Ve,z={}){const be=F.initializeApp(Ve,z);if((0,p.r3)(ve,be.name))return ve[be.name];const Ge=new lt(be,Pe);return ve[be.name]=Ge,Ge},app:$e,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Oe(Ve){const z=Ve.name,be=z.replace("-compat","");if(F._registerComponent(Ve)&&"PUBLIC"===Ve.type){const Ge=(Je=$e())=>{if("function"!=typeof Je[be])throw Ee.create("invalid-app-argument",{appName:z});return Je[be]()};void 0!==Ve.serviceProps&&(0,p.ZB)(Ge,Ve.serviceProps),Pe[be]=Ge,lt.prototype[be]=function(...Je){return this._getService.bind(this,z).apply(this,Ve.multipleInstances?Je:[])}}return"PUBLIC"===Ve.type?Pe[be]:null},removeApp:function xe(Ve){delete ve[Ve]},useAsService:function ze(Ve,z){return"serverAuth"===z?null:z},modularAPIs:F}};function $e(Ve){if(!(0,p.r3)(ve,Ve=Ve||F._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:Ve});return ve[Ve]}return Pe.default=Pe,Object.defineProperty(Pe,"apps",{get:function De(){return Object.keys(ve).map(Ve=>ve[Ve])}}),$e.App=lt,Pe}(se);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function ve(Pe){(0,p.ZB)(lt,Pe)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),lt}(),G=new ce.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=W;!function Re(lt){(0,F.registerVersion)("@firebase/app-compat","0.1.30",lt)}()},9681:(pt,Te,L)=>{L.r(Te),L.d(Te,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Yn,_DEFAULT_ENTRY_NAME:()=>oe,_addComponent:()=>He,_addOrOverwriteComponent:()=>Be,_apps:()=>he,_clearComponents:()=>It,_components:()=>re,_getProvider:()=>Qe,_registerComponent:()=>vt,_removeServiceInstance:()=>Bt,deleteApp:()=>Kr,getApp:()=>Dn,getApps:()=>On,initializeApp:()=>nr,onLog:()=>Ei,registerVersion:()=>_t,setLogLevel:()=>ns});var p=L(5861),te=L(4859),F=L(1877),ce=L(2090),se=L(8766);class ie{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(Y=>{if(function Ee($){return"VERSION"===$.getComponent()?.type}(Y)){const ke=Y.getImmediate();return`${ke.library}/${ke.version}`}return null}).filter(Y=>Y).join(" ")}}const ye="@firebase/app",W=new F.Yd("@firebase/app"),oe="[DEFAULT]",pe={[ye]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},he=new Map,re=new Map;function He($,K){try{$.container.addComponent(K)}catch(Y){W.debug(`Component ${K.name} failed to register with FirebaseApp ${$.name}`,Y)}}function Be($,K){$.container.addOrOverwriteComponent(K)}function vt($){const K=$.name;if(re.has(K))return W.debug(`There were multiple attempts to register component ${K}.`),!1;re.set(K,$);for(const Y of he.values())He(Y,$);return!0}function Qe($,K){const Y=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Y&&Y.triggerHeartbeat(),$.container.getProvider(K)}function Bt($,K,Y=oe){Qe($,K).clearInstance(Y)}function It(){re.clear()}const Jt=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Zt{constructor(K,Y,ke){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},Y),this._name=Y.name,this._automaticDataCollectionEnabled=Y.automaticDataCollectionEnabled,this._container=ke,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw Jt.create("app-deleted",{appName:this._name})}}const Yn="9.9.1";function nr($,K={}){"object"!=typeof K&&(K={name:K});const Y=Object.assign({name:oe,automaticDataCollectionEnabled:!1},K),ke=Y.name;if("string"!=typeof ke||!ke)throw Jt.create("bad-app-name",{appName:String(ke)});const qe=he.get(ke);if(qe){if((0,ce.vZ)($,qe.options)&&(0,ce.vZ)(Y,qe.config))return qe;throw Jt.create("duplicate-app",{appName:ke})}const yt=new te.H0(ke);for(const sn of re.values())yt.addComponent(sn);const pn=new Zt($,Y,yt);return he.set(ke,pn),pn}function Dn($=oe){const K=he.get($);if(!K)throw Jt.create("no-app",{appName:$});return K}function On(){return Array.from(he.values())}function Kr($){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,p.Z)(function*($){const K=$.name;he.has(K)&&(he.delete(K),yield Promise.all($.container.getProviders().map(Y=>Y.delete())),$.isDeleted=!0)})).apply(this,arguments)}function _t($,K,Y){var ke;let qe=null!==(ke=pe[$])&&void 0!==ke?ke:$;Y&&(qe+=`-${Y}`);const yt=qe.match(/\s|\//),pn=K.match(/\s|\//);if(yt||pn){const sn=[`Unable to register library "${qe}" with version "${K}":`];return yt&&sn.push(`library name "${qe}" contains illegal characters (whitespace or "/")`),yt&&pn&&sn.push("and"),pn&&sn.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void W.warn(sn.join(" "))}vt(new te.wA(`${qe}-version`,()=>({library:qe,version:K}),"VERSION"))}function Ei($,K){if(null!==$&&"function"!=typeof $)throw Jt.create("invalid-log-argument");(0,F.Am)($,K)}function ns($){(0,F.Ub)($)}const An="firebase-heartbeat-database",vr=1,ci="firebase-heartbeat-store";let dn=null;function fn(){return dn||(dn=(0,se.X3)(An,vr,{upgrade:($,K)=>{0===K&&$.createObjectStore(ci)}}).catch($=>{throw Jt.create("storage-open",{originalErrorMessage:$.message})})),dn}function Ct(){return(Ct=(0,p.Z)(function*($){var K;try{return(yield fn()).transaction(ci).objectStore(ci).get(Nn($))}catch(Y){throw Jt.create("storage-get",{originalErrorMessage:null===(K=Y)||void 0===K?void 0:K.message})}})).apply(this,arguments)}function Ii($,K){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,p.Z)(function*($,K){var Y;try{const qe=(yield fn()).transaction(ci,"readwrite");return yield qe.objectStore(ci).put(K,Nn($)),qe.done}catch(ke){throw Jt.create("storage-set",{originalErrorMessage:null===(Y=ke)||void 0===Y?void 0:Y.message})}})).apply(this,arguments)}function Nn($){return`${$.name}!${$.options.appId}`}class Vo{constructor(K){this.container=K,this._heartbeatsCache=null;const Y=this.container.getProvider("app").getImmediate();this._storage=new Wt(Y),this._heartbeatsCachePromise=this._storage.read().then(ke=>(this._heartbeatsCache=ke,ke))}triggerHeartbeat(){var K=this;return(0,p.Z)(function*(){const ke=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),qe=rn();if(null===K._heartbeatsCache&&(K._heartbeatsCache=yield K._heartbeatsCachePromise),K._heartbeatsCache.lastSentHeartbeatDate!==qe&&!K._heartbeatsCache.heartbeats.some(yt=>yt.date===qe))return K._heartbeatsCache.heartbeats.push({date:qe,agent:ke}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(yt=>{const pn=new Date(yt.date).valueOf();return Date.now()-pn<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,p.Z)(function*(){if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null===K._heartbeatsCache||0===K._heartbeatsCache.heartbeats.length)return"";const Y=rn(),{heartbeatsToSend:ke,unsentEntries:qe}=function Zr($,K=1024){const Y=[];let ke=$.slice();for(const qe of $){const yt=Y.find(pn=>pn.agent===qe.agent);if(yt){if(yt.dates.push(qe.date),X(Y)>K){yt.dates.pop();break}}else if(Y.push({agent:qe.agent,dates:[qe.date]}),X(Y)>K){Y.pop();break}ke=ke.slice(1)}return{heartbeatsToSend:Y,unsentEntries:ke}}(K._heartbeatsCache.heartbeats),yt=(0,ce.L)(JSON.stringify({version:2,heartbeats:ke}));return K._heartbeatsCache.lastSentHeartbeatDate=Y,qe.length>0?(K._heartbeatsCache.heartbeats=qe,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),yt})()}}function rn(){return(new Date).toISOString().substring(0,10)}class Wt{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,p.Z)(function*(){return(yield K._canUseIndexedDBPromise)&&(yield function Et($){return Ct.apply(this,arguments)}(K.app))||{heartbeats:[]}})()}overwrite(K){var Y=this;return(0,p.Z)(function*(){var ke;if(yield Y._canUseIndexedDBPromise){const yt=yield Y.read();return Ii(Y.app,{lastSentHeartbeatDate:null!==(ke=K.lastSentHeartbeatDate)&&void 0!==ke?ke:yt.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var Y=this;return(0,p.Z)(function*(){var ke;if(yield Y._canUseIndexedDBPromise){const yt=yield Y.read();return Ii(Y.app,{lastSentHeartbeatDate:null!==(ke=K.lastSentHeartbeatDate)&&void 0!==ke?ke:yt.lastSentHeartbeatDate,heartbeats:[...yt.heartbeats,...K.heartbeats]})}})()}}function X($){return(0,ce.L)(JSON.stringify({version:2,heartbeats:$})).length}!function H($){vt(new te.wA("platform-logger",K=>new ie(K),"PRIVATE")),vt(new te.wA("heartbeat",K=>new Vo(K),"PRIVATE")),_t(ye,"0.7.29",$),_t(ye,"0.7.29","esm2017"),_t("fire-js","")}("")},4859:(pt,Te,L)=>{L.d(Te,{H0:()=>ye,wA:()=>F,zt:()=>se});var p=L(5861),te=L(2090);class F{constructor(W,G,J){this.name=W,this.instanceFactory=G,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ce="[DEFAULT]";class se{constructor(W,G){this.name=W,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const G=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(G)){const J=new te.BH;if(this.instancesDeferred.set(G,J),this.isInitialized(G)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:G});We&&J.resolve(We)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(W){var G;const J=this.normalizeInstanceIdentifier(W?.identifier),We=null!==(G=W?.optional)&&void 0!==G&&G;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Re){if(We)return null;throw Re}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function Ee(_e){return"EAGER"===_e.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[G,J]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(G);try{const Re=this.getOrInitializeService({instanceIdentifier:We});J.resolve(Re)}catch{}}}}clearInstance(W=ce){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,p.Z)(function*(){const G=Array.from(W.instances.values());yield Promise.all([...G.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...G.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ce){return this.instances.has(W)}getOptions(W=ce){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:G={}}=W,J=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:J,options:G});for(const[Re,Ke]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Re)&&Ke.resolve(We);return We}onInit(W,G){var J;const We=this.normalizeInstanceIdentifier(G),Re=null!==(J=this.onInitCallbacks.get(We))&&void 0!==J?J:new Set;Re.add(W),this.onInitCallbacks.set(We,Re);const Ke=this.instances.get(We);return Ke&&W(Ke,We),()=>{Re.delete(W)}}invokeOnInitCallbacks(W,G){const J=this.onInitCallbacks.get(G);if(J)for(const We of J)try{We(W,G)}catch{}}getOrInitializeService({instanceIdentifier:W,options:G={}}){let J=this.instances.get(W);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=W,_e===ce?void 0:_e),options:G}),this.instances.set(W,J),this.instancesOptions.set(W,G),this.invokeOnInitCallbacks(J,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,J)}catch{}var _e;return J||null}normalizeInstanceIdentifier(W=ce){return this.component?this.component.multipleInstances?W:ce:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const G=this.getProvider(W.name);if(G.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);G.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const G=new se(W,this);return this.providers.set(W,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,Te,L)=>{L.d(Te,{Am:()=>_e,Ub:()=>ye,Yd:()=>Ee,in:()=>te});const p=[];var te=(()=>{return(W=te||(te={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",te;var W})();const F={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ce=te.INFO,se={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},ie=(W,G,...J)=>{if(G<W.logLevel)return;const We=(new Date).toISOString(),Re=se[G];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Re](`[${We}]  ${W.name}:`,...J)};class Ee{constructor(G){this.name=G,this._logLevel=ce,this._logHandler=ie,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in te))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?F[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...G),this._logHandler(this,te.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...G),this._logHandler(this,te.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,te.INFO,...G),this._logHandler(this,te.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,te.WARN,...G),this._logHandler(this,te.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...G),this._logHandler(this,te.ERROR,...G)}}function ye(W){p.forEach(G=>{G.setLogLevel(W)})}function _e(W,G){for(const J of p){let We=null;G&&G.level&&(We=F[G.level]),J.userLogHandler=null===W?null:(Re,Ke,...lt)=>{const ve=lt.map(Pe=>{if(null==Pe)return null;if("string"==typeof Pe)return Pe;if("number"==typeof Pe||"boolean"==typeof Pe)return Pe.toString();if(Pe instanceof Error)return Pe.message;try{return JSON.stringify(Pe)}catch{return null}}).filter(Pe=>Pe).join(" ");Ke>=(We??Re.logLevel)&&W({level:te[Ke].toLowerCase(),message:ve,args:lt,type:Re.name})}}}},8766:(pt,Te,L)=>{L.d(Te,{Lj:()=>Ae,X3:()=>$e});var p=L(5861);const te=(z,be)=>be.some(Ge=>z instanceof Ge);let F,ce;const Ee=new WeakMap,ye=new WeakMap,_e=new WeakMap,W=new WeakMap,G=new WeakMap;let Re={get(z,be,Ge){if(z instanceof IDBTransaction){if("done"===be)return ye.get(z);if("objectStoreNames"===be)return z.objectStoreNames||_e.get(z);if("store"===be)return Ge.objectStoreNames[1]?void 0:Ge.objectStore(Ge.objectStoreNames[0])}return Pe(z[be])},set:(z,be,Ge)=>(z[be]=Ge,!0),has:(z,be)=>z instanceof IDBTransaction&&("done"===be||"store"===be)||be in z};function ve(z){return"function"==typeof z?function lt(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...be){return z.apply(xe(this),be),Pe(Ee.get(this))}:function(...be){return Pe(z.apply(xe(this),be))}:function(be,...Ge){const Je=z.call(xe(this),be,...Ge);return _e.set(Je,be.sort?be.sort():[be]),Pe(Je)}}(z):(z instanceof IDBTransaction&&function We(z){if(ye.has(z))return;const be=new Promise((Ge,Je)=>{const gt=()=>{z.removeEventListener("complete",et),z.removeEventListener("error",wn),z.removeEventListener("abort",wn)},et=()=>{Ge(),gt()},wn=()=>{Je(z.error||new DOMException("AbortError","AbortError")),gt()};z.addEventListener("complete",et),z.addEventListener("error",wn),z.addEventListener("abort",wn)});ye.set(z,be)}(z),te(z,function se(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,Re):z)}function Pe(z){if(z instanceof IDBRequest)return function J(z){const be=new Promise((Ge,Je)=>{const gt=()=>{z.removeEventListener("success",et),z.removeEventListener("error",wn)},et=()=>{Ge(Pe(z.result)),gt()},wn=()=>{Je(z.error),gt()};z.addEventListener("success",et),z.addEventListener("error",wn)});return be.then(Ge=>{Ge instanceof IDBCursor&&Ee.set(Ge,z)}).catch(()=>{}),G.set(be,z),be}(z);if(W.has(z))return W.get(z);const be=ve(z);return be!==z&&(W.set(z,be),G.set(be,z)),be}const xe=z=>G.get(z);function $e(z,be,{blocked:Ge,upgrade:Je,blocking:gt,terminated:et}={}){const wn=indexedDB.open(z,be),tr=Pe(wn);return Je&&wn.addEventListener("upgradeneeded",zn=>{Je(Pe(wn.result),zn.oldVersion,zn.newVersion,Pe(wn.transaction))}),Ge&&wn.addEventListener("blocked",()=>Ge()),tr.then(zn=>{et&&zn.addEventListener("close",()=>et()),gt&&zn.addEventListener("versionchange",()=>gt())}).catch(()=>{}),tr}function Ae(z,{blocked:be}={}){const Ge=indexedDB.deleteDatabase(z);return be&&Ge.addEventListener("blocked",()=>be()),Pe(Ge).then(()=>{})}const De=["get","getKey","getAll","getAllKeys","count"],Oe=["put","add","delete","clear"],ze=new Map;function Ve(z,be){if(!(z instanceof IDBDatabase)||be in z||"string"!=typeof be)return;if(ze.get(be))return ze.get(be);const Ge=be.replace(/FromIndex$/,""),Je=be!==Ge,gt=Oe.includes(Ge);if(!(Ge in(Je?IDBIndex:IDBObjectStore).prototype)||!gt&&!De.includes(Ge))return;const et=function(){var wn=(0,p.Z)(function*(tr,...zn){const wi=this.transaction(tr,gt?"readwrite":"readonly");let oe=wi.store;return Je&&(oe=oe.index(zn.shift())),(yield Promise.all([oe[Ge](...zn),gt&&wi.done]))[0]});return function(zn){return wn.apply(this,arguments)}}();return ze.set(be,et),et}!function Ke(z){Re=z(Re)}(z=>({...z,get:(be,Ge,Je)=>Ve(be,Ge)||z.get(be,Ge,Je),has:(be,Ge)=>!!Ve(be,Ge)||z.has(be,Ge)}))},5861:(pt,Te,L)=>{function p(F,ce,se,ie,Ee,ye,_e){try{var W=F[ye](_e),G=W.value}catch(J){return void se(J)}W.done?ce(G):Promise.resolve(G).then(ie,Ee)}function te(F){return function(){var ce=this,se=arguments;return new Promise(function(ie,Ee){var ye=F.apply(ce,se);function _e(G){p(ye,ie,Ee,_e,W,"next",G)}function W(G){p(ye,ie,Ee,_e,W,"throw",G)}_e(void 0)})}}L.d(Te,{Z:()=>te})},7582:(pt,Te,L)=>{function ce(oe,pe){var he={};for(var re in oe)Object.prototype.hasOwnProperty.call(oe,re)&&pe.indexOf(re)<0&&(he[re]=oe[re]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(re=Object.getOwnPropertySymbols(oe);He<re.length;He++)pe.indexOf(re[He])<0&&Object.prototype.propertyIsEnumerable.call(oe,re[He])&&(he[re[He]]=oe[re[He]])}return he}function J(oe,pe,he,re){return new(he||(he=Promise))(function(Be,vt){function Qe(jt){try{It(re.next(jt))}catch(Jt){vt(Jt)}}function Bt(jt){try{It(re.throw(jt))}catch(Jt){vt(Jt)}}function It(jt){jt.done?Be(jt.value):function He(Be){return Be instanceof he?Be:new he(function(vt){vt(Be)})}(jt.value).then(Qe,Bt)}It((re=re.apply(oe,pe||[])).next())})}function Ae(oe){return this instanceof Ae?(this.v=oe,this):new Ae(oe)}function De(oe,pe,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,re=he.apply(oe,pe||[]),Be=[];return He={},vt("next"),vt("throw"),vt("return"),He[Symbol.asyncIterator]=function(){return this},He;function vt(Zt){re[Zt]&&(He[Zt]=function(Yn){return new Promise(function(nr,Dn){Be.push([Zt,Yn,nr,Dn])>1||Qe(Zt,Yn)})})}function Qe(Zt,Yn){try{!function Bt(Zt){Zt.value instanceof Ae?Promise.resolve(Zt.value.v).then(It,jt):Jt(Be[0][2],Zt)}(re[Zt](Yn))}catch(nr){Jt(Be[0][3],nr)}}function It(Zt){Qe("next",Zt)}function jt(Zt){Qe("throw",Zt)}function Jt(Zt,Yn){Zt(Yn),Be.shift(),Be.length&&Qe(Be[0][0],Be[0][1])}}function ze(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,pe=oe[Symbol.asyncIterator];return pe?pe.call(oe):(oe=function lt(oe){var pe="function"==typeof Symbol&&Symbol.iterator,he=pe&&oe[pe],re=0;if(he)return he.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&re>=oe.length&&(oe=void 0),{value:oe&&oe[re++],done:!oe}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),he={},re("next"),re("throw"),re("return"),he[Symbol.asyncIterator]=function(){return this},he);function re(Be){he[Be]=oe[Be]&&function(vt){return new Promise(function(Qe,Bt){!function He(Be,vt,Qe,Bt){Promise.resolve(Bt).then(function(It){Be({value:It,done:Qe})},vt)}(Qe,Bt,(vt=oe[Be](vt)).done,vt.value)})}}}L.d(Te,{FC:()=>De,KL:()=>ze,_T:()=>ce,mG:()=>J,qq:()=>Ae}),"function"==typeof SuppressedError&&SuppressedError}},pt=>{pt(pt.s=1093)}]);